webpackJsonp([0x8875bfa72960f,0xc507c49589f4e,0xf5d7f47f5cb74],{23649646081021:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(8040677854470317),o=n(0x8ae3881d6e8c2),a=n(7380496197234269);e.exports=i.createClass({displayName:"EditorMediaModalDetailFileInfo",propTypes:{item:i.PropTypes.object},getItemValue:function(e){var t=void 0;if(!this.props.item)return this.translate("Loading…");switch(e){case"extension":t=(this.props.item[e]||"").toUpperCase();break;case"dimensions":t=r({width:i.createElement("abbr",{title:this.translate("Width in pixels")},this.props.item.width),separator:" ✕ ",height:i.createElement("abbr",{title:this.translate("Height in pixels")},this.props.item.height)});break;case"date":t=this.moment(this.props.item[e]).format("D MMMM YYYY");break;case"length":t=a.playtime(this.props.item[e]);break;default:t=this.props.item[e]}return t},renderDimensions:function(){if(this.props.item&&(this.props.item.width||this.props.item.height))return i.createElement("tr",null,i.createElement("th",null,this.translate("Dimensions")),i.createElement("td",null,this.getItemValue("dimensions")))},renderDuration:function(){if(this.props.item&&this.props.item.length)return i.createElement("tr",null,i.createElement("th",null,this.translate("Duration")),i.createElement("td",null,this.getItemValue("length")))},render:function(){var e=o("editor-media-modal-detail__file-info",{"is-loading":!this.props.item});return i.createElement("table",{className:e},i.createElement("tbody",null,i.createElement("tr",null,i.createElement("th",null,this.translate("File Name")),i.createElement("td",{title:this.getItemValue("file")},i.createElement("span",null,this.getItemValue("file")))),i.createElement("tr",null,i.createElement("th",null,this.translate("File Type")),i.createElement("td",null,this.getItemValue("extension"))),this.renderDimensions(),this.renderDuration(),i.createElement("tr",null,i.createElement("th",null,this.translate("Upload Date")),i.createElement("td",null,this.getItemValue("date")))))}})},38706215631535:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6450322511845945),g=n(83765757817552),v=i(g),y=n(4831732755810365),b=i(y),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.filterRenderResult,i=(0,v.default)(this.state.data,"body","scripts","styles");return(0,h.cloneElement)(t,n(i))}}],[{key:"getStores",value:function(){return[b.default]}},{key:"calculateState",value:function(e,t){var n=t.siteId,i=t.shortcode;return{data:b.default.get(n,i)}}}]),t}(h.Component);_.propTypes={siteId:h.PropTypes.number.isRequired,shortcode:h.PropTypes.string.isRequired,filterRenderResult:h.PropTypes.func},_.defaultProps={filterRenderResult:function(e){return e}},t.default=m.Container.create(_,{withProps:!0}),e.exports=t.default},47575489396475:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(872100829608442),a=r(o),s=n(5896763357248615),l=r(s),u=n(0x976699e5e0db4),d=r(u),c=n(6280957995252369),p=n(5020179656051692),f=r(p),h=n(0xa505046780b0c),m=r(h),g=n(5527868178721527),v=i(g),y=n(0xcf73c9e6ccc62),b=r(y),_=n(7380496197234269),x=r(_),C=n(7127988529575974),E=r(C),w=n(5862851293117563),T=r(w),S=n(0xbff38eca5e16d),P=r(S),k=n(0x7470881db6733),I=r(k),N=n(0x4505d8ebb162c),M=r(N),R=n(0x965a288d34003),D=r(R),A=n(6675946561311414),O=r(A),L=n(0xe6bd8709d6a3c),B=n(6007716273106560),F=n(6729227089147156),H=n(5084380759969092),z=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,U=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,V=/^(?:[a-z]+:|#|\?|\.|\/)/,j=l.default.createClass({displayName:"LinkDialog",propTypes:{visible:s.PropTypes.bool,editor:s.PropTypes.object,onClose:s.PropTypes.func,site:s.PropTypes.object,sitePosts:s.PropTypes.array},getInitialState:function(){return this.getState()},getDefaultProps:function(){return{onClose:function(){}}},componentWillReceiveProps:function(e){e.visible&&!this.props.visible&&this.setState(this.getState())},getLink:function(){var e=this.props.editor;return e.dom.getParent(e.selection.getNode(),"a")},getCorrectedUrl:function(){var e=this.state.url.trim();return z.test(e)?"mailto:"+e:V.test(e)?e:"http://"+e},updateEditor:function(){var e,t,n,i=this.props.editor;return i.focus(),d.default.isIE&&i.selection.moveToBookmark(i.windowManager.bookmark),this.state.url?(t=this.getLink(),n=this.state.linkText,e={href:this.getCorrectedUrl(),target:this.state.newWindow?"_blank":""},t?(n&&("innerText"in t?t.innerText=n:t.textContent=n),i.dom.setAttribs(t,e)):n?(n=i.dom.encode(n),i.selection.setNode(i.dom.create("a",e,n))):i.execCommand("mceInsertLink",!1,e),void this.closeDialog()):void this.removeLink()},hasSelectedText:function(e){var t,n,i=this.props.editor,r=i.selection.getContent();if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||r.indexOf("href=")===-1))return!1;if(e){if(t=e.childNodes,0===t.length)return!1;for(n=t.length-1;n>=0;n--)if(3!==t[n].nodeType)return!1}return!0},getInferredUrl:function(){var e,t,n,i=this.props.editor.selection.getContent();if(z.test(i))return"mailto:"+i;if(U.test(i))return i.replace(/&amp;|&#0?38;/gi,"&");if(e=this.props.editor.selection.getNode(),e&&"IMG"===e.nodeName){if(t=v.deserialize(e),this.props.site&&t.media.ID)return n=b.default.get(this.props.site.ID,t.media.ID)||t.media,x.default.url(n,{size:"full"});if(t.media.URL)return t.media.URL}},getState:function(){var e=this.props.editor,t=e.selection.getNode(),n=e.dom.getParent(t,"a[href]"),i=this.hasSelectedText(n),r={isNew:!0,newWindow:!1,showLinkText:!0,linkText:"",url:"",isUserDefinedLinkText:!1};return n?(r.linkText=n.innerText||n.textContent,r.url=e.dom.getAttrib(n,"href"),r.newWindow="_blank"===e.dom.getAttrib(n,"target"),r.isNew=!1):i&&(r.linkText=e.selection.getContent({format:"text"})),n||(r.url=this.getInferredUrl()||""),this.hasSelectedText(n)||(r.showLinkText=!1),r},closeDialog:function(){this.props.onClose()},setUrl:function(e){this.setState({url:e.target.value})},setLinkText:function(e){this.setState({linkText:e.target.value,isUserDefinedLinkText:!0})},setNewWindow:function(e){this.setState({newWindow:e.target.checked})},onInputKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),this.updateEditor())},removeLink:function(){this.props.editor.execCommand("unlink"),this.closeDialog()},getButtons:function(){var e,t;return e=this.state.isNew?this.translate("Add Link"):this.translate("Save"),t=[l.default.createElement(I.default,{key:"save",onClick:this.updateEditor},e),l.default.createElement(I.default,{key:"cancel",isPrimary:!1,onClick:this.closeDialog},this.translate("Cancel"))],this.state.url&&!this.state.isNew&&t.push(l.default.createElement("button",{className:"wplink__remove-link",onClick:this.removeLink},l.default.createElement(m.default,{icon:"link-break"}),this.translate("Remove"))),t},setExistingContent:function(e){var t={url:e.URL},n=!this.state.isUserDefinedLinkText&&!this.props.editor.selection.getContent()&&!this.getLink();n&&(0,a.default)(t,{linkText:(0,F.decodeEntities)(e.title)}),(0,H.recordStat)("link-existing-content"),(0,H.recordEvent)("Set link to existing content"),this.setState(t)},getSelectedPostId:function(){if(this.state.url&&this.props.sitePosts){var e=(0,f.default)(this.props.sitePosts,{URL:this.state.url});return e?e.ID:void 0}},render:function(){return l.default.createElement(E.default,{isVisible:this.props.visible,onClose:this.closeDialog,buttons:this.getButtons(),autoFocus:!1,additionalClassNames:"wplink__dialog"},l.default.createElement(M.default,null,l.default.createElement(D.default,null,l.default.createElement("span",null,this.translate("URL")),l.default.createElement(T.default,{ref:"url",autoFocus:!0,onChange:this.setUrl,value:this.state.url,onKeyDown:this.onInputKeyDown})),this.state.showLinkText?l.default.createElement(D.default,null,l.default.createElement("span",null,this.translate("Link Text")),l.default.createElement(T.default,{onChange:this.setLinkText,value:this.state.linkText,onKeyDown:this.onInputKeyDown})):null),l.default.createElement(M.default,null,l.default.createElement(D.default,null,l.default.createElement(P.default,{onChange:this.setNewWindow,checked:this.state.newWindow}),l.default.createElement("span",null,this.translate("Open link in a new window/tab")))),l.default.createElement(M.default,null,l.default.createElement(D.default,null,l.default.createElement("span",null,this.translate("Link to existing content")),this.props.site&&l.default.createElement(O.default,{siteId:this.props.site.ID,type:"any",status:"publish",orderBy:"date",order:"DESC",selected:this.getSelectedPostId(),onChange:this.setExistingContent,emptyMessage:this.translate("No posts found")}))))}});t.default=(0,c.connect)(function(e){var t=(0,L.getSelectedSite)(e);return{site:t,sitePosts:t?(0,B.getSitePosts)(e,t.ID):null}})(j),e.exports=t.default},52422017452564:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x86ee4079c7943),v=i(g),y=n(5445079694139091),b=i(y),_=n(4789770305123259),x=i(_),C=n(0xc540c5b85c2ff),E=i(C),w=n(4680937997690485),T=i(w),S=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleSidebar,n=e.isNew,i=e.onTrashingPost,r=e.onPublish,o=e.onSave,a=e.post,s=e.savedPost,l=e.site,u=e.type,d=e.setPostDate;return m.default.createElement("div",{className:"post-editor__sidebar"},m.default.createElement(b.default,{toggleSidebar:t}),m.default.createElement(E.default,{isNew:n,post:a,savedPost:s,site:l,type:u}),m.default.createElement(v.default,{site:l,savedPost:s,post:a,isNew:n,type:u,setPostDate:d,onPrivatePublish:r,onSave:o}),m.default.createElement(x.default,null,m.default.createElement(T.default,{post:a,onTrashingPost:i})))}}]),t}(h.Component);S.propTypes={savedPost:h.PropTypes.object,post:h.PropTypes.object,isNew:h.PropTypes.bool,onSave:h.PropTypes.func,onPublish:h.PropTypes.func,onTrashingPost:h.PropTypes.func,site:h.PropTypes.object,type:h.PropTypes.string,toggleSidebar:h.PropTypes.func,setPostDate:h.PropTypes.func},t.default=S,e.exports=t.default},83079821603588:function(e,t,n){"use strict";function i(e,t){r(!1)}var r=n(0xac06b1ed1d098);e.exports=i},95148365001489:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(new Date).getTime(),n=e.timeSaved;return t-n>N}function o(e){return l(e)?k[e].list:void(k[e]&&k[e].dirty&&(D("delete cached list %o",e),delete k[e],delete I[e]))}function a(e){var t=u(e.query);k[t]&&k[t].dirty||(k[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function s(e,t){var n=M.getSite(e.site_ID),i=[n.slug,n.ID,!1],r=[e.status,t],o=void 0,a=void 0,s=void 0,l=void 0;for(a in k)k.hasOwnProperty(a)&&(s=k[a],l=s.list,l.query.type===e.type&&-1!==i.indexOf(l.query.siteID)&&(o=l.query.status.split(","),0!==(0,_.default)(o,r).length&&(s.dirty=!0)));P.cacheIndex.clearRecordsByParamFilter(function(e){var t=i.slice(0,-1),n=["/me/posts"].concat((0,y.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),o=e.query&&e.query.status?e.query.status.split(","):[],a=(0,_.default)(o,r);return n.indexOf(e.path)!==-1&&!!a.length})}function l(e){return k[e]&&!r(k[e])&&!k[e].dirty}function u(e){var t=[],n=(0,g.default)(e).sort();return n.forEach(function(n){t.push(n+"-"+e[n])}),t.join(":")}function d(e,t,n){D("setCanonicalList %o %o (%o)",e,t,n),I[e]=I[e]||{},I[e][t]=n}function c(e,t){D("getCanonicalList %o %o",e,t);var n=I[e];if(!n||"object"!==("undefined"==typeof n?"undefined":(0,h.default)(n)))return!1;var i=(0,g.default)(n);return i[0]!==t?(delete k[e],delete I[e],!1):n[t]}function p(e,t){D("deleteCanonicalList %o %o",e,t);var n=I[e];n&&n[t]&&delete n[t]}Object.defineProperty(t,"__esModule",{value:!0});var f=n(95905449861643),h=i(f),m=n(477028190620861),g=i(m),v=n(6465156853722425),y=i(v);t.getCacheKey=u,t.setCanonicalList=d,t.getCanonicalList=c,t.deleteCanonicalList=p;var b=n(7905250771901207),_=i(b),x=n(4675954658966525),C=i(x),E=n(7418474439241154),w=i(E),T=n(8769427305820155),S=i(T),P=n(0x59542bda68774),k={},I={},N=3e5,M=(0,w.default)(),R={get:o,_reset:function(){k={}}},D=(0,C.default)("calypso:posts-list:cache");R.dispatchToken=S.default.register(function(e){var t=e.action,i=n(0x69c14441898c8)();switch(S.default.waitFor([i.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":a(i.get());break;case"RECEIVE_POSTS_PAGE":a(i.get());break;case"RECEIVE_UPDATED_POSTS":a(i.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(s(t.post,t.original?t.original.status:null),a(i.get()))}}),t.default=R},0x7663b9a0c03e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var a=n(7884936170769939),s=i(a),l=n(5896763357248615),u=function(e){function t(){r(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),t}(l.Component);t.default=u,u.prototype.shouldComponentUpdate=s.default,e.exports=t.default},0x80279a28701b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.params.post&&"new"!==e.params.post?parseInt(e.params.post,10):null}function o(e){return(0,f.default)(e.path,"/post")?"post":(0,f.default)(e.path,"/page")?"page":e.params.type}function a(e,t){b.default.unmountComponentAtNode(document.getElementById("secondary")),b.default.render(E.default.createElement(k.Provider,{store:e.store},E.default.createElement(G.default,{user:ie,userUtils:U.default,sites:ne,type:t})),document.getElementById("primary"))}function s(e){var t=e.store.getState(),n=(0,K.getSelectedSiteId)(t),i=(0,Y.getEditorPostId)(t),r=(0,Y.getEditorPath)(t,n,i);return r!==e.pathname&&(P.default.redirect(r),!0)}function l(e){var t=e.text,n=e.url,i=e.title,r=e.image,o=e.embed,a=[];return r&&a.push(x.default.renderToStaticMarkup(E.default.createElement("p",null,E.default.createElement("a",{href:n},E.default.createElement("img",{src:r}))))),(0,M.isWebUri)(o)&&a.push(x.default.renderToStaticMarkup(E.default.createElement("p",null,o))),t&&a.push(x.default.renderToStaticMarkup(E.default.createElement("blockquote",null,t))),a.push(x.default.renderToStaticMarkup(E.default.createElement("p",null,T.default.translate("via {{anchor/}}",{components:{anchor:E.default.createElement("a",{href:n},i)}})))),a.join("\n\n")}function u(e,t,n){J.default.site(e).post(t).get().then(function(t){var i=(0,m.default)(t,"canonical_image","content","excerpt","featured_image","format","metadata","post_thumbnail","terms","title","type");i.tags=(0,v.default)(t.tags,"name"),i.title=(0,W.decodeEntities)(i.title),i.featured_image=(0,te.getFeaturedImageId)(t),D.default.startEditingNew(e,{content:t.content,title:t.title,type:t.type}),n.store.dispatch((0,X.editPost)(e,null,i)),D.default.edit(i)}).catch(function(e){ee.default.handleServerAction({type:"SET_POST_LOADING_ERROR",error:e})})}var d=n(872100829608442),c=i(d),p=n(0x636974ee9c84e),f=i(p),h=n(83765757817552),m=i(h),g=n(0x3f19c8db6e3b5),v=i(g),y=n(5921998412115101),b=i(y),_=n(0x98b3dfa6a747e),x=i(_),C=n(5896763357248615),E=i(C),w=n(7572476330282672),T=i(w),S=n(0x90ba166cd016c),P=i(S),k=n(6280957995252369),I=n(0xd90e2e8d1585a),N=i(I),M=n(0x6c8cb81bada6c),R=n(6104353596224629),D=i(R),A=n(4808587282202068),O=i(A),L=n(7418474439241154),B=i(L),F=n(6183759582808303),H=i(F),z=n(6894246938792476),U=i(z),V=n(623310115397031),j=i(V),W=n(6729227089147156),q=n(4927003406530879),G=i(q),$=n(5644333497174414),K=n(0xe6bd8709d6a3c),Y=n(5523398591803755),X=n(7996551768540594),Q=n(8478035041892969),J=i(Q),Z=n(8769427305820155),ee=i(Z),te=n(0x5dd72de17825d),ne=(0,B.default)(),ie=(0,H.default)();e.exports={post:function(e){function t(t){var n=!!e.query.copy;if(e.store.dispatch((0,$.startEditingPost)(t,n?null:d,i)),!s(e)){var r=void 0;switch(i){case"post":r="Post";break;case"page":r="Page";break;default:r="Custom Post Type"}if(p)u(t,p,e),j.default.pageView.record("/"+i,r+" > New");else if(d)D.default.startEditingExisting(t,d),j.default.pageView.record("/"+i+"/:blogid/:postid",r+" > Edit");else{var o={type:i};if(e.query.url){var a=l(e.query);(0,c.default)(o,{postFormat:"quote",title:e.query.title,content:a})}D.default.startEditingNew(t,o),j.default.pageView.record("/"+i,r+" > New")}}}function n(){var n=(0,K.getSelectedSiteId)(e.store.getState());return!!n&&(f&&f(),t(n),!0)}var i=o(e),d=r(e),p=e.query.copy,f=void 0;n()||(f=e.store.subscribe(n)),a(e,i)},exitPost:function(e,t){var n=r(e),i=(0,K.getSelectedSiteId)(e.store.getState());i&&e.store.dispatch((0,$.stopEditingPost)(i,n)),t()},pressThis:function(e,t){if(e.getSiteSelectionHeaderText=function(){return T.default.translate("Select a site to start writing")},!e.query.url)return t();var n=ie.get();if(!n.primarySiteSlug)return t();var i=O.default.addSiteFragment(e.pathname,n.primarySiteSlug),r=N.default.stringify(e.query),o=[i,r].join("?");return P.default.redirect(o),!1}}},0xeb71b3cc2eee:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x73518efed105e);e.exports=a.createClass({displayName:"MediaLibraryListItemDocument",render:function(){return a.createElement(s,(0,o.default)({},this.props,{icon:"audio"}))}})},0xffbf62f8fe95:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x90ba166cd016c),s=i(a),l=n(623310115397031),u=i(l),d=n(6729227089147156),c=n(0xbfad9041fa583),p=n(7186610166862683);e.exports=o.default.createClass({displayName:"MediaLibraryListPlanPromo",propTypes:{site:o.default.PropTypes.object,filter:o.default.PropTypes.string},getTitle:function(){switch(this.props.filter){case"videos":return this.translate("Upload Videos",{textOnly:!0,context:"Media upload plan needed"});case"audio":return this.translate("Upload Audio",{textOnly:!0,context:"Media upload plan needed"});default:return this.translate("Upload Media",{textOnly:!0,context:"Media upload plan needed"})}},getSummary:function(){switch(this.props.filter){case"videos":return(0,d.preventWidows)(this.translate("To upload video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);case"audio":return(0,d.preventWidows)(this.translate("To upload audio files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);default:return(0,d.preventWidows)(this.translate("To upload audio and video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2)}},viewPlansPage:function(){var e=this.props.site.slug,t=void 0===e?"":e;u.default.tracks.recordEvent("calypso_media_plans_button_click"),(0,s.default)("/plans/"+t)},render:function(){var e=o.default.createElement(p,{className:"button is-primary",onClick:this.viewPlansPage},this.translate("See Plans"));return o.default.createElement(c,{title:this.getTitle(),line:this.getSummary(),action:this.props.children||e,illustration:""})}})},325652704738040:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a);t.default=o.default.createClass({displayName:"ButtonGroup",propTypes:{children:function(e){var t=null;return o.default.Children.forEach(e.children,function(e){e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}},render:function(){var e=(0,s.default)("button-group",this.props.className);return o.default.createElement("span",{className:e},this.props.children)}}),e.exports=t.default},341838321612891:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l);t.default=o.default.createClass({displayName:"EditorMediaModalDetailPreviewDocument",propTypes:{className:o.default.PropTypes.string},render:function(){var e=(0,u.default)(this.props.className,"is-document");return o.default.createElement("div",{className:e},o.default.createElement(s.default,{icon:"pages",size:120}))}}),e.exports=t.default},347097780136713:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.AspectRatiosValues;return(0,l.default)(t,e)===-1&&(e=(0,a.default)(t,"0",u.AspectRatiosValues.FREE)),(0,l.default)(u.AspectRatiosValues,e)===-1?r(e):e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8640881565075096),a=i(o),s=n(7935112474300560),l=i(s);t.getDefaultAspectRatio=r;var u=n(8277184115649475)},352453761200960:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(7572476330282672),b=i(y),_=n(7127988529575974),x=i(_),C=n(0x7470881db6733),E=i(C),w=n(8729102622276094),T=i(w),S=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={pendingRequest:!1,emailSent:!1,error:!1},n.handleSendVerification=n.sendVerification.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"sendVerification",value:function(e){e.preventDefault(),this.state.pendingRequest||(this.setState({pendingRequest:!0}),this.props.user.sendVerificationEmail(function(e,t){this.setState({emailSent:t&&t.success,error:e,pendingRequest:!1})}.bind(this)))}},{key:"getResendButtonLabel",value:function(){return this.state.emailSent?b.default.translate("Email Sent"):this.state.pendingRequest?m.default.createElement(T.default,{className:"post-editor__confirmation-dialog-spinner"}):b.default.translate("Resend Email")}},{key:"getDialogButtons",value:function(){return[m.default.createElement(E.default,{key:"close",isPrimary:!0,onClick:this.props.onClose},b.default.translate("OK")),m.default.createElement(E.default,{key:"resend",isPrimary:!1,disabled:this.state.pendingRequest||this.state.emailSent,onClick:this.handleSendVerification},this.getResendButtonLabel())]}},{key:"render",value:function(){var e={confirmHeading:b.default.translate("Please confirm your email address"),confirmExplanation:b.default.translate("We sent you an email when you first signed up. Please open the message and click the blue button."),confirmReasoning:b.default.translate("Email confirmation allows us to assist when recovering your account in the event you forget your password."),confirmEmail:b.default.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:m.default.createElement("span",{className:"post-editor__confirmation-dialog-email-wrapper"}),emailPreferences:m.default.createElement("a",{href:"/me/account"})},args:{email:this.props.user.data.email}})};return m.default.createElement(x.default,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"post-editor__confirmation-dialog is-narrow"},m.default.createElement("h1",{className:"post-editor__confirmation-dialog-heading is-variable-height"},e.confirmHeading),m.default.createElement("p",{className:"post-editor__confirmation-dialog-email"},e.confirmEmail),m.default.createElement("p",{className:"post-editor__confirmation-dialog-explanation"},e.confirmExplanation),m.default.createElement("p",{className:"post-editor__confirmation-dialog-reasoning"},e.confirmReasoning))}}]),t}(m.default.Component);S.propTypes={user:m.default.PropTypes.object.isRequired,onClose:m.default.PropTypes.func},S.defaultProps={onClose:v.default},t.default=S,e.exports=t.default},379676959299837:function(e,t,n){"use strict";function i(e,t){return o(t,function(t){return c(t.items,{id:e.id})})||t}function r(e,t,n){return t.forEach(function(t){e=t(e,n)},this),e.items&&(e.items=e.items.map(function(e){return r(e,t,n)})),e}function o(e,t){return t(e)?e:e.items?s(e.items,function(e){return o(e,t)}):void 0}function a(e,t,n){var i;if(e.items)for(i=0;i<e.items.length;i++){if(n(e.items[i]))return void(e.items[i]=t);a(e.items[i],t,n)}}function s(e,t){var n,i,r=e.length;for(n=0;n<r;n++)if(i=t(e[n]))return i}function l(e,t){return function(n){return n.id===t&&(n.items=n.items||[],n.items.push(e)),n}}function u(e,t,n){return function(i){var r,o="before"===n?0:1;return~(r=d(i.items,{id:t}))&&i.items.splice(r+o,0,e),i}}var d=n(619801137403500),c=n(6442230718320275);e.exports={traverse:function(e,t){return r(e,t,e)},parent:i,find:o,replaceItem:a,remover:function(e){return function(t){var n;return~(n=d(t.items,{id:e}))&&t.items.splice(n,1),t}},inserter:function(e,t,n){var i="child"===n?l:u;return i(e,t,n)}}},401458722714579:function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}e.exports=n},462836914210103:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5884295564020614),o=i(r),a=n(5896763357248615),s=i(a),l=n(0xc46966cb87a6f),u=i(l),d=n(72591479426812),c=i(d),p=n(7463691543202778),f=i(p),h=function(e){var t=e.onClick,n=e.onClose,i=e.popoverContext,r=e.query,a=e.selectedSuggestionId,l=e.suggestions;return s.default.createElement(u.default,{className:"mentions__suggestions",context:i,isVisible:!0,autoPosition:!1,position:"bottom right",onClose:n},l.map(function(e){return s.default.createElement(c.default,{className:"mentions__suggestion",key:e.ID,isSelected:e.ID===a,onClick:(0,o.default)(t,null,e)},s.default.createElement(f.default,{avatarUrl:e.image_URL,username:e.user_login,fullName:e.display_name,query:r}))}))};h.propTypes={onClick:a.PropTypes.func,onClose:a.PropTypes.func,query:a.PropTypes.string,popoverContext:a.PropTypes.object,selectedSuggestionId:a.PropTypes.number,suggestions:a.PropTypes.array},h.defaultProps={onClick:function(){},onClose:function(){},query:"",popoverContext:{},selectedSuggestionId:0,suggestions:[]},t.default=h,e.exports=t.default},484594260005501:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(5896763357248615),v=i(g),y=n(7572476330282672),b=n(6280957995252369),_=n(0xa505046780b0c),x=i(_),C=n(7082708682668568),E=i(C),w=n(7186610166862683),T=i(w),S=n(0xaa068d7de9e4a),P=i(S),k=n(6294916017396735),I=i(k),N=n(0x5dd72de17825d),M=i(N),R=n(8326181498771179),D=i(R),A=n(4910067807891286),O=i(A),L=n(5369935525269188),B=i(L),F=n(0x5b187dae980c5),H=i(F),z=n(474432612430512),U=i(z),V=n(5084380759969092),j=n(7996551768540594),W=n(0xe6bd8709d6a3c),q=n(5523398591803755),G=n(6007716273106560),$=n(0xca0552a60cec1),K=i($),Y=function(e){n.e(8751463333862434,function(t){e(n(4597847833630232).__esModule?n(4597847833630232).default:n(4597847833630232))})},X=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.toggleStickyStatus=function(){var e=void 0,t=void 0;n.props.post.sticky?(e="advanced_sticky_disabled",t="Off"):(e="advanced_sticky_enabled",t="On"),(0,V.recordStat)(e),(0,V.recordEvent)("Changed Sticky Setting",t),n.props.editPost(n.props.siteId,n.props.postId,{sticky:!n.props.post.sticky})},n.togglePendingStatus=function(){var e="pending"===n.props.post.status;(0,V.recordStat)("status_changed"),(0,V.recordEvent)("Changed Pending Status",e?"Marked Draft":"Marked Pending"),n.props.editPost(n.props.siteId,n.props.postId,{status:e?"draft":"pending"})},n.togglePostSchedulePopover=function(){n.setState({showPostSchedulePopover:!n.state.showPostSchedulePopover})},n.revertToDraft=function(){n.props.onSave("draft")},n.showTZTooltip=function(){n.setState({showTZTooltip:!0})},n.hideTZTooltip=function(){n.setState({showTZTooltip:!1})},n.state={showTZTooltip:!1,showPostSchedulePopover:!1},n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0,r=void 0,o=this.props.translate;this.props.post&&(e=this.props.post.sticky,n=M.default.isPending(this.props.post),t=M.default.isPublished(this.props.savedPost),r=this.props.savedPost&&"future"===this.props.savedPost.status,i=U.default.userCan("publish_posts",this.props.site));var a=this.props.site&&this.props.site.options&&this.props.site.options.admin_url,s=H.default.convertDateToUserLocation(this.props.postDate||new Date,U.default.timezone(this.props.site),U.default.gmtOffset(this.props.site)).format("ll LT");return v.default.createElement("div",{className:"edit-post-status"},v.default.createElement("span",{ref:"postStatusTooltip",className:"edit-post-status__full-date",onMouseEnter:this.showTZTooltip,onMouseLeave:this.hideTZTooltip,onClick:this.togglePostSchedulePopover},M.default.isFutureDated(this.props.savedPost)?v.default.createElement("span",{className:"edit-post-status__future-label"},o("Future")):v.default.createElement(x.default,{icon:"time",size:18}),s,this.renderTZTooltop(),this.renderPostSchedulePopover()),"post"===this.props.type&&v.default.createElement("label",{className:"edit-post-status__sticky"},v.default.createElement("span",{className:"edit-post-status__label-text"},o("Stick to the front page"),v.default.createElement(O.default,{position:"top right",gaEventCategory:"Editor",popoverName:"Sticky Post"},o("Sticky posts will appear at the top of the posts listing."))),v.default.createElement(P.default,{checked:e,onChange:this.toggleStickyStatus,"aria-label":o("Stick post to the front page")})),!t&&!r&&i&&v.default.createElement("label",{className:"edit-post-status__pending-review"},v.default.createElement("span",{className:"edit-post-status__label-text"},o("Pending review"),v.default.createElement(O.default,{position:"top right"},o("Flag this post to be reviewed for approval."))),v.default.createElement(P.default,{checked:n,onChange:this.togglePendingStatus,"aria-label":o("Request review for post")})),(t||r||n&&!i)&&v.default.createElement(T.default,{className:"edit-post-status__revert-to-draft",onClick:this.revertToDraft,compact:!0},v.default.createElement(x.default,{icon:"undo",size:18})," ",o("Revert to draft")),this.renderPostVisibility(),v.default.createElement(I.default,{
revisions:this.props.post&&this.props.post.revisions,adminUrl:a}))}},{key:"renderPostVisibility",value:function(){if(this.props.post){var e=this.props.post||{},t=e.password,n=e.type,i=this.props.site&&this.props.site.is_private,r=this.props.savedPost?this.props.savedPost.status:null,o=this.props.savedPost?this.props.savedPost.password:null,a={status:this.props.status,onPrivatePublish:this.props.onPrivatePublish,isPrivateSite:i,type:n,password:t,savedStatus:r,savedPassword:o};return v.default.createElement(K.default,a)}}},{key:"renderPostSchedulePopover",value:function(){var e=U.default.timezone(this.props.site),t=U.default.gmtOffset(this.props.site),n=this.props.postDate?this.props.moment(this.props.postDate):null;return v.default.createElement(D.default,{context:this.refs&&this.refs.postStatusTooltip,isVisible:this.state.showPostSchedulePopover,position:"bottom left",onClose:this.togglePostSchedulePopover},v.default.createElement("div",{className:"edit-post-status__post-schedule"},v.default.createElement(E.default,{require:Y,selectedDay:n,timezone:e,gmtOffset:t,onDateChange:this.props.setPostDate})))}},{key:"renderTZTooltop",value:function(){var e=U.default.timezone(this.props.site),t=U.default.gmtOffset(this.props.site);if((e||H.default.isValidGMTOffset(t))&&!this.state.showPostSchedulePopover)return v.default.createElement(B.default,{context:this.refs&&this.refs.postStatusTooltip,isVisible:this.state.showTZTooltip,position:"left",onClose:m.default},v.default.createElement("div",{className:"edit-post-status__full-date__tooltip"},e?e+" ":"UTC",H.default.getLocalizedDate(M.default.getEditedTime(this.props.post),e,t).format("Z")))}}]),t}(g.Component);X.propTypes={moment:g.PropTypes.func,setPostDate:g.PropTypes.func,onSave:g.PropTypes.func,post:g.PropTypes.object,savedPost:g.PropTypes.object,site:g.PropTypes.object,translate:g.PropTypes.func,type:g.PropTypes.string,postDate:g.PropTypes.string,onPrivatePublish:g.PropTypes.func,status:g.PropTypes.string},t.default=(0,b.connect)(function(e){var t=(0,W.getSelectedSiteId)(e),n=(0,q.getEditorPostId)(e),i=(0,G.getEditedPost)(e,t,n);return{siteId:t,postId:n,post:i}},{editPost:j.editPost})((0,y.localize)(X)),e.exports=t.default},556729938555089:function(e,t){(function(){tinymce.ThemeManager.add("modern",function(e){function t(t,n){var i,r=[];if(t)return h(t.split(/[ ,]/),function(t){function o(){function n(e){return function(n,i){for(var r,o=i.parents.length;o--&&(r=i.parents[o].nodeName,"OL"!=r&&"UL"!=r););t.active(n&&r==e)}}var i=e.selection;"bullist"==a&&i.selectorChanged("ul > li",n("UL")),"numlist"==a&&i.selectorChanged("ol > li",n("OL")),t.settings.stateSelector&&i.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&i.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var a;"|"==t?i=null:f.has(t)?(t={type:t,size:n},r.push(t),i=null):(i||(i={type:"buttongroup",items:[]},r.push(i)),e.buttons[t]&&(a=t,t=e.buttons[a],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=f.create(t),i.items.push(t),e.initialized?o():e.on("init",o)))}),{type:"toolbar",layout:"flow",items:r}}function n(e){function n(n){if(n)return i.push(t(n,e)),!0}var i=[];if(tinymce.isArray(p.toolbar)){if(0===p.toolbar.length)return;tinymce.each(p.toolbar,function(e,t){p["toolbar"+(t+1)]=e}),delete p.toolbar}for(var r=1;r<10&&n(p["toolbar"+r]);r++);if(i.length||p.toolbar===!1||n(p.toolbar||b),i.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}}function i(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var i,r,o,a,s;if(s=tinymce.makeMap((p.removed_menuitems||"").split(/[ ,]/)),p.menu?(r=p.menu[n],a=!0):r=y[n],r){i={text:r.title},o=[],h((r.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!s[e]&&o.push(t(e))}),a||h(e.menuItems,function(e){e.context==n&&("before"==e.separator&&o.push({text:"|"}),e.prependToContext?o.unshift(e):o.push(e),"after"==e.separator&&o.push({text:"|"}))});for(var l=0;l<o.length;l++)"|"==o[l].text&&(0!==l&&l!=o.length-1||o.splice(l,1));if(i.menu=o,!i.menu.length)return null}return i}var i,r=[],o=[];if(p.menu)for(i in p.menu)o.push(i);else for(i in y)o.push(i);for(var a="string"==typeof p.menubar?p.menubar.split(/[ ,]/):o,s=0;s<a.length;s++){var l=a[s];l=n(l),l&&r.push(l)}return r}function r(t){function n(e){var n=t.find(e)[0];n&&n.focus(!0)}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function o(t,n){function i(e){return{width:e.clientWidth,height:e.clientHeight}}var r,o,a,s;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,a=i(r),s=i(o),null!==t&&(t=Math.max(p.min_width||100,t),t=Math.min(p.max_width||65535,t),m.setStyle(r,"width",t+(a.width-s.width)),m.setStyle(o,"width",t)),n=Math.max(p.min_height||100,n),n=Math.min(p.max_height||65535,n),m.setStyle(o,"height",n),e.fire("ResizeEditor")}function a(t,n){var i=e.getContentAreaContainer();c.resizeTo(i.clientWidth+t,i.clientHeight+n)}function s(){function n(){return e.contextToolbars||[]}function i(t){var n,i,r;return n=tinymce.DOM.getPos(e.getContentAreaContainer()),i=e.dom.getRect(t),r=e.dom.getRoot(),"BODY"==r.nodeName&&(i.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,i.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),i.x+=n.x,i.y+=n.y,i}function r(){h(e.contextToolbars,function(e){e.panel&&e.panel.hide()})}function o(e,t,n){t=t?t.substr(0,2):"",h({t:"down",b:"up"},function(i,r){e.classes.toggle("arrow-"+i,n(r,t.substr(0,1)))}),h({l:"left",r:"right"},function(i,r){e.classes.toggle("arrow-"+i,n(r,t.substr(1,1)))})}function a(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}}function s(e,t,n,i,r){return r=a({x:e,y:t,w:r.w,h:r.h}),p.inline_toolbar_position_handler&&(r=p.inline_toolbar_position_handler({elementRect:a(n),contentAreaRect:a(i),panelRect:r})),r}function l(e,t){e.moveTo(t.left,t.top)}function u(t){var n,a,u,d,c,p,f;if(!e.removed){if(!t||!t.toolbar.panel)return void r();f=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],c=t.toolbar.panel,c.show(),u=i(t.element),a=tinymce.DOM.getRect(c.getEl()),d=tinymce.DOM.getRect(e.getContentAreaContainer()||e.getBody()),u.w=t.element.clientWidth,u.h=t.element.clientHeight,e.inline||(d.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&(u=g.inflate(u,0,8)),n=g.findBestRelativePosition(a,u,d,f),u=g.clamp(u,d),n?(p=g.relativePosition(a,u,n),l(c,s(p.x,p.y,u,d,a))):(d.h+=40,u=g.intersect(d,u),u?(n=g.findBestRelativePosition(a,u,d,["bc-tc","bl-tl","br-tr"]),n?(p=g.relativePosition(a,u,n),l(c,s(p.x,p.y,u,d,a))):l(c,s(u.x,u.y,u,d,a))):c.hide()),o(c,n,function(e,t){return(!u||u.w>40)&&e===t})}}function d(){function t(){e.selection&&u(y(e.selection.getNode()))}tinymce.util.Delay.requestAnimationFrame(t)}function c(){b||(b=e.selection.getScrollContainer()||e.getWin(),tinymce.$(b).on("scroll",d),e.on("remove",function(){tinymce.$(b).off("scroll")}))}function m(n){var i;return n.toolbar.panel?(n.toolbar.panel.show(),void u(n)):(c(),i=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:t(n.toolbar.items),oncancel:function(){e.focus()}}),n.toolbar.panel=i,i.renderTo(document.body).reflow(),void u(n))}function v(){tinymce.each(n(),function(e){e.panel&&e.panel.hide()})}function y(t){var i,r,o,a=n();for(o=e.$(t).parents().add(t),i=o.length-1;i>=0;i--)for(r=a.length-1;r>=0;r--)if(a[r].predicate(o[i]))return{toolbar:a[r],element:o[i]};return null}var b;e.on("click keyup setContent",function(t){("setcontent"!=t.type||t.selection)&&tinymce.util.Delay.setEditorTimeout(e,function(){var t;t=y(e.selection.getNode()),t?(v(),m(t)):v()})}),e.on("blur hide",v),e.on("ObjectResizeStart",function(){var t=y(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("nodeChange ResizeEditor ResizeWindow",d),e.on("remove",function(){tinymce.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=y(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})}function l(e){return function(){e.initialized?e.fire("SkinLoaded"):e.on("init",function(){e.fire("SkinLoaded")})}}function u(t){function o(){if(h&&h.moveRel&&h.visible()&&!h._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),i=0,r=0;if(t){var o=m.getPos(n),a=m.getPos(t);i=Math.max(0,a.x-o.x),r=Math.max(0,a.y-o.y)}h.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,r)}}function a(){h&&(h.show(),o(),m.addClass(e.getBody(),"mce-edit-focus"))}function u(){h&&(h.hide(),v.hideAll(),m.removeClass(e.getBody(),"mce-edit-focus"))}function d(){return h?void(h.visible()||a()):(h=c.panel=f.create({type:g?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!g,border:1,items:[p.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},n(p.toolbar_items_size)]}),e.fire("BeforeRenderUI"),h.renderTo(g||document.body).reflow(),r(h),a(),s(),e.on("nodeChange",o),e.on("activate",a),e.on("deactivate",u),void e.nodeChanged())}var h,g;return p.fixed_toolbar_container&&(g=m.select(p.fixed_toolbar_container)[0]),p.content_editable=!0,e.on("focus",function(){t.skinUiCss?tinymce.DOM.styleSheetLoader.load(t.skinUiCss,d,d):d()}),e.on("blur hide",u),e.on("remove",function(){h&&(h.remove(),h=null)}),t.skinUiCss&&tinymce.DOM.styleSheetLoader.load(t.skinUiCss,l(e)),{}}function d(t){function a(){return function(e){"readonly"==e.mode?u.find("*").disabled(!0):u.find("*").disabled(!1)}}var u,d,h;return t.skinUiCss&&tinymce.DOM.styleSheetLoader.load(t.skinUiCss,l(e)),u=c.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[p.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},n(p.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),p.resize!==!1&&(d={type:"resizehandle",direction:p.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;h={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){"both"==p.resize?o(h.width+e.deltaX,h.height+e.deltaY):o(null,h.height+e.deltaY)}}),p.statusbar!==!1&&u.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},d]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",a()),u.renderBefore(t.targetNode).reflow(),p.readonly&&e.setMode("readonly"),p.width&&tinymce.DOM.setStyle(u.getEl(),"width",p.width),e.on("remove",function(){u.remove(),u=null}),r(u),s(),{iframeContainer:u.find("#iframe")[0].getEl(),editorContainer:u.getEl()}}var c=this,p=e.settings,f=tinymce.ui.Factory,h=tinymce.each,m=tinymce.DOM,g=tinymce.geom.Rect,v=tinymce.ui.FloatPanel,y={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},b="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";c.renderUI=function(t){var n=p.skin!==!1&&(p.skin||"lightgray");if(n){var i=p.skin_url;i=i?e.documentBaseURI.toAbsolute(i):tinymce.baseURL+"/skins/"+n,tinymce.Env.documentMode<=7?t.skinUiCss=i+"/skin.ie7.min.css":t.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){c.throbber=c.throbber||new tinymce.ui.Throbber(c.panel.getEl("body")),e.state?c.throbber.show(e.time):c.throbber.hide()}),p.inline?u(t):d(t)},c.resizeTo=o,c.resizeBy=a})}).call(window)},582719200266861:function(e,t,n){"use strict";function i(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function n(){var t,n,i,r,o;if(t=e.selection.getRng(),0===t.startOffset&&0!==t.endOffset||!t.collapsed)return!1;n=t.startContainer,i=e.getBody(),r=n;do if(o=r,r=r.parentNode,r.childNodes[r.childNodes.length-1]!==o)return!1;while(r!==i);return!0}function i(o){var l,u,d,c,p,f,h,m,g,v,y,b,_=r.DOM;if(u=e.getDoc()){if(d=u.body,c=u.documentElement,p=a.autoresize_min_height,!d||o&&"setcontent"===o.type&&o.initial||t())return void(d&&c&&(d.style.overflowY="auto",c.style.overflowY="auto"));h=e.dom.getStyle(d,"margin-top",!0),m=e.dom.getStyle(d,"margin-bottom",!0),g=e.dom.getStyle(d,"padding-top",!0),y=e.dom.getStyle(d,"border-top-width",!0),b=e.dom.getStyle(d,"border-bottom-width",!0),v=e.getParam("autoresize_bottom_margin",50),f=d.offsetHeight+parseInt(h,10)+parseInt(m,10)+parseInt(g,10)+parseInt(v,10)+parseInt(y,10)+parseInt(b,10),f&&f<c.offsetHeight&&(f=c.offsetHeight),(isNaN(f)||f<=0)&&(f=r.Env.ie?d.scrollHeight:r.Env.webkit&&0===d.clientHeight?0:d.offsetHeight),f>a.autoresize_min_height&&(p=f),a.autoresize_max_height&&f>a.autoresize_max_height?(p=a.autoresize_max_height,d.style.overflowY="auto",c.style.overflowY="auto"):(d.style.overflowY="hidden",c.style.overflowY="hidden",d.scrollTop=0),p!==s&&(l=p-s,_.setStyle(e.iframeElement,"height",p+"px"),s=p,r.isWebKit&&l<0&&i(o),(o&&"keyup"===o.type||o&&"nodechange"===o.type&&o.element&&"BR"===o.element.tagName)&&n()&&window.scrollTo(0,document.body.scrollHeight))}}function o(e,t,n){setTimeout(function(){i({}),e--?o(e,t,n):n&&n()},t)}var a=e.settings,s=0;e.settings.inline||r.Env.iOS||(a.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),a.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,n;t=e.getParam("autoresize_overflow_padding",1),n=e.getParam("autoresize_bottom_margin",50),t!==!1&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),n!==!1&&e.dom.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",i),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){e.dom.addClass(e.getBody(),"wp-autoresize"),o(20,100,function(){o(5,1e3)})}),e.addCommand("wpcomAutoResize",i))}var r=n(0x976699e5e0db4);e.exports=function(){r.PluginManager.add("wpcom/autoresize",i)}},735638222779233:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(7717053111238044),s=i(a),l=n(582719200266861),u=i(l),d=n(0x705c91d3878aa),c=i(d),p=n(0x7216d6618ce83),f=i(p),h=n(5570506215714564),m=i(h),g=n(0xc9190bc4603c5),v=i(g),y=n(0x405f6fd593dfa),b=i(y),_=n(6118332582749466),x=i(_),C=n(4615267926548559),E=i(C),w=n(0xbd0e0719f6e72),T=i(w),S=n(7788420767477302),P=i(S),k=n(6076045856065739),I=i(k),N=n(0x5e486edbe97d3),M=i(N),R=n(8979851241223840),D=i(R),A=n(0xef89aa5779a96),O=i(A),L=n(0x86efd464f7fd1),B=i(L),F=n(0x978232dc30641),H=i(F),z=n(8890455407118785),U=i(z),V=n(0xb3ac8a3d65ba9),j=i(V),W=n(0xdd1953831d8f6),q=i(W),G=n(0x3dd6e959c4103),$=i(G),K=n(5266524313857039),Y=i(K),X=n(5894987188525595),Q=i(X),J=n(6729227089147156),Z=n(5921998412115101),ee=n(5896763357248615),te=n(0x8ae3881d6e8c2),ne=n(6385002307104056),ie=n(711528138733345),re=n(8907951692841672),oe=n(0x976699e5e0db4);n(556729938555089),n(0x395347893c607),n(0xcc466803b7af0),n(6905521583238013),n(7509692711936611),n(7960540032031651),n(4939722232992143),n(0x94645cd7e4f62),n(4956439864790051),[s.default,u.default,c.default,f.default,m.default,v.default,b.default,x.default,q.default,E.default,T.default,P.default,I.default,M.default,D.default,O.default,B.default,H.default,U.default,j.default,$.default].forEach(function(e){return e()});var ae=n(6183759582808303)(),se=n(0xf87db33e549e0),le=n(7123518912576379),ue=n(4883949902648912),de=1,ce="/do-not-load/",pe={activate:"onActivate",blur:"onBlur",change:"onChange",input:"onInput",keyUp:"onKeyUp",deactivate:"onDeactivate",focus:"onFocus",hide:"onHide",init:"onInit",redo:"onRedo",remove:"onRemove",reset:"onReset",show:"onShow",submit:"onSubmit",undo:"onUndo",setContent:"onSetContent"},fe=["colorpicker","hr","lists","media","paste","tabfocus","textcolor","wptextpattern","wpcom","wpeditimage","wplink","AtD","directionality","wpcom/autoresize","wpcom/media","wpcom/advanced","wpcom/help","wpcom/charmap","wpcom/tabindex","wpcom/touchscrolltoolbar","wpcom/view","wpcom/editorbuttonanalytics","wpcom/calypsoalert","wpcom/tabindex","wpcom/toolbarpin","wpcom/contactform","wpcom/sourcecode","wpcom/embedreversal","wpcom/trackpaste","wpcom/insertmenu"];(0,Q.default)(),fe.push("wpcom/mentions");var he=[window.app.tinymceWpSkin,"//s1.wp.com/wp-includes/css/dashicons.css",window.app.tinymceEditorCss,"//fonts.googleapis.com/css?family=Noto+Serif:400,400i,700,700i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese"];e.exports=ee.createClass({displayName:"TinyMCE",propTypes:{mode:ee.PropTypes.string,onActivate:ee.PropTypes.func,onBlur:ee.PropTypes.func,onChange:ee.PropTypes.func,onDeactivate:ee.PropTypes.func,onFocus:ee.PropTypes.func,onHide:ee.PropTypes.func,onInit:ee.PropTypes.func,onRedo:ee.PropTypes.func,onRemove:ee.PropTypes.func,onReset:ee.PropTypes.func,onShow:ee.PropTypes.func,onSubmit:ee.PropTypes.func,onUndo:ee.PropTypes.func,onSetContent:ee.PropTypes.func,tabIndex:ee.PropTypes.number,isNew:ee.PropTypes.bool,onTextEditorChange:ee.PropTypes.func,onKeyUp:ee.PropTypes.func},contextTypes:{store:ee.PropTypes.object},getDefaultProps:function(){return{mode:"tinymce",isNew:!1}},getInitialState:function(){return{content:""}},_editor:null,componentWillMount:function(){this._id="tinymce-"+de,de++},componentDidUpdate:function(e){this._editor&&(this.bindEditorEvents(e),this.props.mode!==e.mode&&this.toggleEditor())},componentDidMount:function(){this.mounted=!0;var e=function(e){var t=this;return this._editor=e,this.mounted?(this.bindEditorEvents(),e.on("SetTextAreaContent",function(e){return t.setTextAreaContent(e.content)}),void(le.isMobile()||e.once("PostRender",this.toggleEditor.bind(this,{autofocus:!this.props.isNew})))):void this.destroyEditor()}.bind(this);this.localize();var t=ae.isRTL()?"ltr,":"";oe.init({selector:"#"+this._id,skin_url:"//s1.wp.com/wp-includes/js/tinymce/skins/lightgray",skin:"lightgray",content_css:he,language:ae.get()?ae.get().localeSlug:"en",language_url:ce,directionality:ae.isRTL()?"rtl":"ltr",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,wpeditimage_html5_captions:!0,redux_store:this.context.store,textarea:this.refs.text,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,plugins:fe.join(),statusbar:!1,resize:!1,menubar:!1,indent:!1,atd_rpc_id:"https://wordpress.com",atd_ignore_enable:!0,autoresize_min_height:Math.max(document.documentElement.clientHeight-300,300),autoresize_bottom_margin:le.isMobile()?10:50,toolbar1:"wpcom_insert_menu,formatselect,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,spellchecker,wp_more,"+t+"wpcom_advanced",toolbar2:"strikethrough,underline,hr,alignjustify,forecolor,pastetext,removeformat,wp_charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:"content-html,save-post",tabindex:this.props.tabIndex,body_class:"content post-type-post post-status-draft post-format-standard locale-en-us",add_unload_trigger:!1,setup:e}),ne(Z.findDOMNode(this.refs.text))},componentWillUnmount:function(){this.mounted=!1,this._editor&&this.destroyEditor()},destroyEditor:function(){ie(pe,function(e,t){this.props[e]&&this._editor.off(t,this.props[e])}.bind(this)),oe.remove(this._editor),this._editor=null,ne.destroy(Z.findDOMNode(this.refs.text))},doAutosizeUpdate:function(){ne.update(Z.findDOMNode(this.refs.text))},bindEditorEvents:function(e){e=e||{},ie(pe,function(t,n){e[t]!==this.props[t]&&(this.props[t]?this._editor.on(n,this.props[t]):this._editor.off(n,this.props[t]))}.bind(this))},toggleEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autofocus:!0};if(this._editor){if("html"===this.props.mode)return this._editor.hide(),this.doAutosizeUpdate(),void(e.autofocus&&this.focusEditor());this._editor.show(),e.autofocus&&this.focusEditor()}},focusEditor:function(){if("html"===this.props.mode){var e=Z.findDOMNode(this.refs.text);e.setSelectionRange(0,0),11!==oe.Env.ie&&e.focus()}else this._editor&&this._editor.focus()},getContent:function(e){if("html"===this.props.mode)return this.state.content;if(!this._editor)return"";var t=this._editor.getContent(e);return e&&"raw"===e.format||(t=t.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),t=(0,J.removep)(t)),t},isDirty:function(){return!!this._editor&&this._editor.isDirty()},setTextAreaContent:function(e){this.setState({content:(0,J.decodeEntities)(e)},this.doAutosizeUpdate)},setEditorContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._editor){var n=this.props.mode;this._editor.setContent((0,J.wpautop)(e),(0,o.default)({},t,{mode:n})),t.initial&&this._editor.undoManager.clear()}this.setTextAreaContent(e)},onTextAreaChange:function(e){var t=e.target.value;this.props.onTextEditorChange&&this.props.onTextEditorChange(t),this.setState({content:t},this.doAutosizeUpdate)},onToolbarChangeContent:function(e){this.props.onTextEditorChange&&this.props.onTextEditorChange(e),this.setState({content:e},this.doAutosizeUpdate)},localize:function(){var e=ae.get(),t=se;e&&(ae.isRTL()&&(t=re({_dir:"rtl"},t)),oe.addI18n(e.localeSlug,t),oe.ScriptLoader.markDone(ce))},render:function(){var e=this.props.mode,t=te({tinymce:!0,"is-visible":"html"===e});return ee.createElement("div",null,"html"===e&&ue.isEnabled("post-editor/html-toolbar")&&ee.createElement(Y.default,{content:this.refs.text,onToolbarChangeContent:this.onToolbarChangeContent}),ee.createElement("textarea",{ref:"text",className:t,id:this._id,onChange:this.onTextAreaChange,tabIndex:this.props.tabIndex,value:this.state.content}))}})},791336751585383:function(e,t,n){(function(t){"use strict";!function(t){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[],o=0,a=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0,f=void 0,h=void 0,m=void 0,g=void 0;if(isNaN(e))throw new Error("Invalid arguments");return l=t.bits===!0,h=t.unix===!0,s=t.base||2,f=void 0!==t.round?t.round:h?1:2,m=void 0!==t.spacer?t.spacer:h?"":" ",g=t.symbols||t.suffixes||{},p=t.output||"string",a=void 0!==t.exponent?t.exponent:-1,c=Number(e),d=c<0,u=s>2?1e3:1024,d&&(c=-c),0===c?(n[0]=0,n[1]=h?"":l?"b":"B"):((a===-1||isNaN(a))&&(a=Math.floor(Math.log(c)/Math.log(u)),a<0&&(a=0)),a>8&&(a=8),o=2===s?c/Math.pow(2,10*a):c/Math.pow(1e3,a),l&&(o=8*o,o>u&&a<8&&(o/=u,a++)),n[0]=Number(o.toFixed(a>0?f:0)),n[1]=10===s&&1===a?l?"kb":"kB":r[l?"bits":"bytes"][a],h&&(n[1]=n[1].charAt(0),i.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),d&&(n[0]=-n[0]),n[1]=g[n[1]]||n[1],"array"===p?n:"exponent"===p?a:"object"===p?{value:n[0],suffix:n[1],symbol:n[1]}:n.join(m)}var i=/^(b|B)$/,r={bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]};e.exports=n}("undefined"!=typeof window?window:t)}).call(t,function(){return this}())},809412173345775:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCategoriesTagsAccordion=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0xbb64639c81e11),m=i(h),g=n(8640881565075096),v=i(g),y=n(5896763357248615),b=i(y),_=n(6280957995252369),x=n(0x8ae3881d6e8c2),C=i(x),E=n(7572476330282672),w=n(4902908805660961),T=i(w),S=n(4691924745409762),P=i(S),k=n(8958839223830722),I=i(k),N=n(0xd3942cae2556e),M=i(N),R=n(937798169217017),D=i(R),A=n(0xf3d118a24f723),O=i(A),L=n(5708247199348607),B=i(L),F=n(709335331861514),H=i(F),z=n(4808587282202068),U=n(0xe6bd8709d6a3c),V=n(5523398591803755),j=n(6007716273106560),W=n(0x8f1527a7f80c8),q=n(0xf4d0801157df9),G=t.EditorCategoriesTagsAccordion=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderJetpackNotice",value:function(){var e=this.props,t=e.translate,n=e.siteSlug;return b.default.createElement(B.default,{status:"is-warning",showDismiss:!1,text:t("You must update Jetpack to use this feature."),className:"editor-categories-tags__upgrade-notice"},b.default.createElement(H.default,{href:(0,z.addSiteFragment)("/plugins/jetpack",n)},t("Update Now")))}},{key:"renderCategories",value:function(){var e=this.props,t=e.translate,n=e.postType,i=e.isTermsSupported;if("page"!==n)return b.default.createElement(P.default,null,b.default.createElement(I.default,{helpText:t("Use categories to group your posts by topic."),labelText:t("Categories")}),i?b.default.createElement(M.default,{compact:!0,taxonomyName:"category"}):this.renderJetpackNotice())}},{key:"renderTags",value:function(){var e=this.props,t=e.isTermsSupported,n=e.postType,i=e.translate,r=i("page"===n?"Use tags to associate more specific keywords with your pages.":"Use tags to associate more specific keywords with your posts.");return b.default.createElement(P.default,null,b.default.createElement(I.default,{helpText:r,labelText:i("Tags")},t?b.default.createElement(D.default,{taxonomyName:"post_tag"}):this.renderJetpackNotice()))}},{key:"getCategoriesSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,i=e.defaultCategory,r=(0,m.default)((0,v.default)(n,"category"));if(r.length>1)return t("%d category","%d categories",{args:[r.length],count:r.length});var o=void 0;return o=r.length>0?r[0]:i,o?(0,O.default)(o.name):void 0}},{key:"getTagsSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,i=(0,m.default)((0,v.default)(n,"post_tag")),r=i.length;switch(r){case 0:return null;case 1:case 2:return i.map(function(e){return"#"+(0,O.default)(e.name||e)}).join(", ");default:return t("%d tag","%d tags",{args:[r],count:r})}}},{key:"getSubtitle",value:function(){var e=[],t=this.props,n=t.postType,i=t.siteId;if(!i)return null;if("post"===n){var r=this.getCategoriesSubtitle();r&&e.push(r)}var o=this.getTagsSubtitle();return o&&e.push(o),e.join(", ")}},{key:"getTitle",value:function(){var e=this.props,t=e.translate,n=e.postType,i=void 0;return i=t("page"===n?"Tags":"Categories & Tags")}},{key:"render",value:function(){var e=(0,C.default)("editor-drawer__accordion","editor-categories-tags__accordion",this.props.className);return b.default.createElement(T.default,{title:this.getTitle(),subtitle:this.getSubtitle(),className:e},this.renderCategories(),this.renderTags())}}]),t}(y.Component);G.propTypes={translate:y.PropTypes.func,postTerms:y.PropTypes.object,postType:y.PropTypes.string,defaultCategory:y.PropTypes.object,isTermsSupported:y.PropTypes.bool,siteSlug:y.PropTypes.string},t.default=(0,_.connect)(function(e){var t=(0,U.getSelectedSiteId)(e),n=(0,V.getEditorPostId)(e),i=(0,W.getSiteOption)(e,t,"default_category"),r=!1!==(0,W.isJetpackMinimumVersion)(e,t,"4.1.0");return{defaultCategory:(0,q.getTerm)(e,t,"category",i),postTerms:(0,j.getEditedPostValue)(e,t,n,"terms"),postType:(0,j.getEditedPostValue)(e,t,n,"type"),siteSlug:(0,W.getSiteSlug)(e,t),siteId:t,postId:n,isTermsSupported:r}})((0,E.localize)(G))},836058157808856:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.hasOwnProperty(e)?a[e].call():null};var r=n(7572476330282672),o=i(r),a={name:function(){return o.default.translate("Name")},email:function(){return o.default.translate("Email Address")},checkbox:function(){return o.default.translate("Checkbox")},select:function(){return o.default.translate("Dropdown")},radio:function(){return o.default.translate("Radio Button")},text:function(){return o.default.translate("Text")},textarea:function(){return o.default.translate("Text Area")},url:function(){return o.default.translate("Web Address")}};e.exports=t.default},878132787514036:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t("audio"===e?"Upgrade to the Premium Plan and Enable Audio Uploads":"Upgrade to a Premium Plan and Enable VideoPress")}function o(e,t){return t("audio"===e?"By upgrading to the Premium plan you'll enable audio upload support on your site.":"By upgrading to a Premium Plan you'll enable VideoPress support on your site.")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryUpgradeNudge=void 0;var a=n(0xeb8f73c122973),s=i(a),l=n(5896763357248615),u=i(l),d=n(7572476330282672),c=n(492788797284063),p=n(8663546351946179),f=i(p),h=n(0xffbf62f8fe95),m=i(h),g=t.MediaLibraryUpgradeNudge=function(e){var t=e.translate,n=e.filter,i=e.site;return u.default.createElement("div",{className:"media-library__videopress-nudge-container"},u.default.createElement(m.default,{site:i,filter:n},u.default.createElement(f.default,{className:"media-library__videopress-nudge-regular",title:r(n,t),message:o(n,t),feature:"audio"===n?c.FEATURE_AUDIO_UPLOADS:c.FEATURE_VIDEO_UPLOADS,event:"calypso_media_uploads_upgrade_nudge"})))};g.propTypes={site:l.PropTypes.object,translate:l.PropTypes.func,filter:u.default.PropTypes.string},g.defaultProps={translate:s.default,filter:"video"},t.default=(0,d.localize)(g)},905562822925401:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,v.default)("spinner-line",this.props.className);return m.default.createElement("hr",{className:e})}}]),t}(h.PureComponent);t.default=y,y.propTypes={className:h.PropTypes.string},e.exports=t.default},921923039590806:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(8907951692841672);e.exports=function(e,t){var n,o=r({},e.props,t);return delete o.children,i.Children.count(e.props.children)>1?(n=i.Children.map(e.props.children,function(e){return i.isValidElement(e)?i.cloneElement(e,o):e}),i.DOM.div(null,n)):i.cloneElement(e.props.children,o)}},937798169217017:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(477028190620861),o=i(r),a=n(0xc729f06ce7488),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(0x3f19c8db6e3b5),b=i(y),_=n(5896763357248615),x=i(_),C=n(6280957995252369),E=n(4675954658966525),w=i(E),T=n(0xe6bd8709d6a3c),S=n(0xf4d0801157df9),P=n(5523398591803755),k=n(6007716273106560),I=n(0x3e6242fdbac66),N=n(7996551768540594),M=n(8991347377130760),R=i(M),D=n(6729227089147156),A=n(5084380759969092),O=n(6920980932387437),L=i(O),B=(0,
w.default)("calypso:post-editor:editor-terms"),F={number:1e3,order_by:"count",order:"DESC"},H=20,z=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){this.boundOnTermsChange=this.onTermsChange.bind(this)}},{key:"onTermsChange",value:function(e){B("onTermsChange",e,this);var t=void 0,n=void 0;e.length>this.getPostTerms().length?(t="term_added",n="Added Term"):(t="term_removed",n="Removed Term"),(0,A.recordStat)(t),(0,A.recordEvent)("Changed Terms",n);var i=this.props,r=i.siteId,o=i.postId,a=i.taxonomyName;this.props.editPost(r,o,{terms:(0,s.default)({},a,e)})}},{key:"getPostTerms",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName;return t&&t[n]?Array.isArray(t[n])?t[n]:(0,o.default)(t[n]):[]}},{key:"render",value:function(){var e=(0,b.default)(this.props.terms,"name");return x.default.createElement("div",null,x.default.createElement(L.default,{siteId:this.props.siteId,taxonomy:this.props.taxonomyName,query:F}),x.default.createElement(R.default,{value:this.getPostTerms(),displayTransform:D.decodeEntities,suggestions:e,onChange:this.boundOnTermsChange,maxSuggestions:H}))}}]),t}(x.default.Component);z.propTypes={siteId:x.default.PropTypes.number,postId:x.default.PropTypes.number,postTerms:x.default.PropTypes.object,taxonomyName:x.default.PropTypes.string,taxonomyLabel:x.default.PropTypes.string,terms:x.default.PropTypes.arrayOf(x.default.PropTypes.object),editPost:x.default.PropTypes.func},t.default=(0,C.connect)(function(e,t){var n=(0,T.getSelectedSiteId)(e),i=(0,P.getEditorPostId)(e),r=(0,k.getEditedPostValue)(e,n,i,"type"),o=(0,I.getPostTypeTaxonomy)(e,n,r,t.taxonomyName);return{siteId:n,postId:i,taxonomyLabel:o&&o.label,terms:(0,S.getTerms)(e,n,t.taxonomyName),postTerms:(0,k.getEditedPostValue)(e,n,i,"terms")}},{editPost:N.editPost})(z),e.exports=t.default},944990400710650:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(0xa505046780b0c),u=i(l),d=n(7186610166862683),c=i(d),p=n(8326181498771179),f=i(p);t.default=o.default.createClass({displayName:"ContactFormDialogFieldRemoveButton",mixins:[s.default],propTypes:{onRemove:r.PropTypes.func.isRequired},getInitialState:function(){return{showTooltip:!1}},render:function(){var e=this;return o.default.createElement("div",null,o.default.createElement(c.default,{ref:"removeField",borderless:!0,onMouseEnter:function(){return e.setState({showTooltip:!0})},onMouseLeave:function(){return e.setState({showTooltip:!1})},onClick:this.props.onRemove},o.default.createElement(u.default,{icon:"trash",className:"editor-contact-form-modal-field__remove"})),o.default.createElement(f.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.removeField,onClose:function(){},position:"bottom",className:"popover tooltip is-dialog-visible"},this.translate("Remove Field",{context:"button tooltip"})))}}),e.exports=t.default},974944542775038:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(8640881565075096),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(5896763357248615),b=i(y),_=n(6280957995252369),x=n(7572476330282672),C=n(7127988529575974),E=i(C),w=n(0x7470881db6733),T=i(w),S=n(0xe6bd8709d6a3c),P=n(5523398591803755),k=n(6007716273106560),I=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.restorePost=function(){var e=i.props,t=e.isAutosave,n=e.userCanDeletePost,r=e.onRestore;t?r():n&&r("draft")},i.getStrings=function(){var e=i.props,t=e.isAutosave,n=e.postType,r=e.translate,o="page"===n;return t?o?{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this page exists. Restore?")}:{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this post exists. Restore?")}:o?{dialogTitle:r("Deleted Page"),dialogContent:r("This page has been sent to the trash. Restore it to continue writing.")}:{dialogTitle:r("Deleted Post"),dialogContent:r("This post has been sent to the trash. Restore it to continue writing.")}},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.translate,i=this.getStrings(),r=[b.default.createElement(T.default,{key:"restore",isPrimary:!0,onClick:this.restorePost},n("Restore")),b.default.createElement(T.default,{key:"back",isPrimary:!1,onClick:t},n("Don't restore"))];return b.default.createElement(E.default,{isVisible:!0,buttons:r},b.default.createElement("h1",null,i.dialogTitle),b.default.createElement("p",null,i.dialogContent))}}]),t}(y.Component);I.propTypes={translate:y.PropTypes.func,onClose:y.PropTypes.func,onRestore:y.PropTypes.func,isAutosave:y.PropTypes.bool,postType:y.PropTypes.string,userCanDeletePost:y.PropTypes.bool},I.defaultProps={onClose:v.default,onRestore:v.default,isAutosave:!1},t.default=(0,_.connect)(function(e){var t=(0,S.getSelectedSiteId)(e),n=(0,P.getEditorPostId)(e),i=(0,k.getEditedPostValue)(e,t,n,"capabilities");return{postType:(0,k.getEditedPostValue)(e,t,n,"type"),userCanDeletePost:(0,m.default)(i,"delete_post")}})((0,x.localize)(I)),e.exports=t.default},975622464187034:function(e,t,n){"use strict";function i(e){e in f._media||(f._media[e]=[])}function r(e,t){f._media[e]=u(t,"ID")}function o(e,t){i(e),f._media[e].push(t.ID)}function a(e,t,n){var i;n||(n=t.ID),n&&e in f._media&&(i=f._media[e].indexOf(n),-1!==i&&f._media[e].splice(i,1,t.ID))}function s(e,t){t.forEach(function(t){a(e,t)})}function l(e,t){var n;e in f._media&&(n=f._media[e].indexOf(t.ID),-1!==n&&f._media[e].splice(n,1))}var u=n(0x3f19c8db6e3b5),d=n(0xcf73c9e6ccc62),c=n(8769427305820155),p=n(0xf2ce944f0fc89),f={_media:{}};p(f),f.get=function(e,t){return d.get(e,t)},f.getAll=function(e){return e in f._media?f._media[e].map(function(t){return d.get(e,t)}):[]},f.dispatchToken=c.register(function(e){var t=e.action;switch(c.waitFor([d.dispatchToken]),t.type){case"SET_MEDIA_LIBRARY_SELECTED_ITEMS":if(t.error||!t.siteId||!t.data||!Array.isArray(t.data))break;r(t.siteId,t.data),f.emit("change");break;case"CREATE_MEDIA_ITEM":!t.error&&t.siteId&&t.data&&(o(t.siteId,t.data),f.emit("change"));break;case"RECEIVE_MEDIA_ITEM":if(t.error&&t.siteId&&t.id&&(l(t.siteId,{ID:t.id}),f.emit("change")),!t.siteId||!t.data||t.error)break;a(t.siteId,t.data,t.id),f.emit("change");break;case"RECEIVE_MEDIA_ITEMS":!t.error&&t.siteId&&t.data&&t.data.media&&(s(t.siteId,t.data.media),f.emit("change"));break;case"REMOVE_MEDIA_ITEM":if(!t.siteId||!t.data||t.error)break;l(t.siteId,t.data),f.emit("change")}}),e.exports=f},988599274866424:function(e,t,n){"use strict";function i(){return{type:r.MediaTypes.UNKNOWN,media:{},appearance:{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=i;var r=n(6519958819961068)},0x39460bc37bba3:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(5896763357248615),d=i(u),c=n(5065230085825904),p=i(c),f=n(8364025865570495),h=i(f),m=n(8342076983749853),g=i(m),v=n(0xfc39d08e8350d),y=i(v),b=n(0xcab4d46c3278d),_=i(b),x=n(5064262455832020),C=i(x),E=n(423990962422576),w=i(E),T=n(8761817086250443),S=i(T),P=n(7387885866108935),k=i(P),I=t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=150,N={OBSERVED:"observed",REQUESTED:"requested"},M=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={isScrolling:!1,scrollDirectionHorizontal:b.SCROLL_DIRECTION_FORWARD,scrollDirectionVertical:b.SCROLL_DIRECTION_FORWARD,scrollLeft:0,scrollTop:0},i._onGridRenderedMemoizer=(0,y.default)(),i._onScrollMemoizer=(0,y.default)(!1),i._debounceScrollEndedCallback=i._debounceScrollEndedCallback.bind(i),i._invokeOnGridRenderedHelper=i._invokeOnGridRenderedHelper.bind(i),i._onScroll=i._onScroll.bind(i),i._updateScrollLeftForScrollToColumn=i._updateScrollLeftForScrollToColumn.bind(i),i._updateScrollTopForScrollToRow=i._updateScrollTopForScrollToRow.bind(i),i._columnWidthGetter=i._wrapSizeGetter(e.columnWidth),i._rowHeightGetter=i._wrapSizeGetter(e.rowHeight),i._columnSizeAndPositionManager=new g.default({cellCount:e.columnCount,cellSizeGetter:function(e){return i._columnWidthGetter(e)},estimatedCellSize:i._getEstimatedColumnSize(e)}),i._rowSizeAndPositionManager=new g.default({cellCount:e.rowCount,cellSizeGetter:function(e){return i._rowHeightGetter(e)},estimatedCellSize:i._getEstimatedRowSize(e)}),i._cellCache={},i._styleCache={},i}return a(t,e),l(t,[{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount;this._columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),this._rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,i=e.rowIndex,r=void 0===i?0:i;this._columnSizeAndPositionManager.resetCell(n),this._rowSizeAndPositionManager.resetCell(r),this._cellCache={},this._styleCache={},this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollToColumn,i=e.scrollTop,r=e.scrollToRow;this._scrollbarSizeMeasured||(this._scrollbarSize=(0,C.default)(),this._scrollbarSizeMeasured=!0,this.setState({})),(t>=0||i>=0)&&this._setScrollPosition({scrollLeft:t,scrollTop:i}),(n>=0||r>=0)&&(this._updateScrollLeftForScrollToColumn(),this._updateScrollTopForScrollToRow()),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:t||0,scrollTop:i||0,totalColumnsWidth:this._columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:this._rowSizeAndPositionManager.getTotalSize()})}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.props,r=i.autoHeight,o=i.columnCount,a=i.height,l=i.rowCount,u=i.scrollToAlignment,d=i.scrollToColumn,c=i.scrollToRow,p=i.width,f=this.state,h=f.scrollLeft,m=f.scrollPositionChangeReason,g=f.scrollTop,v=o>0&&0===e.columnCount||l>0&&0===e.rowCount;if(m===N.REQUESTED&&(h>=0&&(h!==t.scrollLeft&&h!==this._scrollingContainer.scrollLeft||v)&&(this._scrollingContainer.scrollLeft=h),!r&&g>=0&&(g!==t.scrollTop&&g!==this._scrollingContainer.scrollTop||v)&&(this._scrollingContainer.scrollTop=g)),(0,S.default)({cellSizeAndPositionManager:this._columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:h,scrollToAlignment:u,scrollToIndex:d,size:p,updateScrollIndexCallback:function(e){return n._updateScrollLeftForScrollToColumn(s({},n.props,{scrollToColumn:e}))}}),(0,S.default)({cellSizeAndPositionManager:this._rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:u,scrollToIndex:c,size:a,updateScrollIndexCallback:function(e){return n._updateScrollTopForScrollToRow(s({},n.props,{scrollToRow:e}))}}),this._invokeOnGridRenderedHelper(),h!==t.scrollLeft||g!==t.scrollTop){var y=this._rowSizeAndPositionManager.getTotalSize(),b=this._columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:g,totalColumnsWidth:b,totalRowsHeight:y})}}},{key:"componentWillMount",value:function(){this._scrollbarSize=(0,C.default)(),void 0===this._scrollbarSize?(this._scrollbarSizeMeasured=!1,this._scrollbarSize=0):this._scrollbarSizeMeasured=!0,this._calculateChildrenToRender()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"componentWillUpdate",value:function(e,t){var n=this;0===e.columnCount&&0!==t.scrollLeft||0===e.rowCount&&0!==t.scrollTop?this._setScrollPosition({scrollLeft:0,scrollTop:0}):e.scrollLeft===this.props.scrollLeft&&e.scrollTop===this.props.scrollTop||this._setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e.columnWidth===this.props.columnWidth&&e.rowHeight===this.props.rowHeight||(this._styleCache={}),this._columnWidthGetter=this._wrapSizeGetter(e.columnWidth),this._rowHeightGetter=this._wrapSizeGetter(e.rowHeight),this._columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:this._getEstimatedColumnSize(e)}),this._rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:this._getEstimatedRowSize(e)}),(0,h.default)({cellCount:this.props.columnCount,cellSize:this.props.columnWidth,computeMetadataCallback:function(){return n._columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:e.columnWidth,nextScrollToIndex:e.scrollToColumn,scrollToIndex:this.props.scrollToColumn,updateScrollOffsetForScrollToIndex:function(){return n._updateScrollLeftForScrollToColumn(e,t)}}),(0,h.default)({cellCount:this.props.rowCount,cellSize:this.props.rowHeight,computeMetadataCallback:function(){return n._rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:e.rowHeight,nextScrollToIndex:e.scrollToRow,scrollToIndex:this.props.scrollToRow,updateScrollOffsetForScrollToIndex:function(){return n._updateScrollTopForScrollToRow(e,t)}}),this._calculateChildrenToRender(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoContainerWidth,i=t.autoHeight,r=t.className,o=t.containerStyle,a=t.height,l=t.id,u=t.noContentRenderer,c=t.style,f=t.tabIndex,h=t.width,m=this.state.isScrolling,g={boxSizing:"border-box",direction:"ltr",height:i?"auto":a,position:"relative",width:h,WebkitOverflowScrolling:"touch",willChange:"transform"},v=this._columnSizeAndPositionManager.getTotalSize(),y=this._rowSizeAndPositionManager.getTotalSize(),b=y>a?this._scrollbarSize:0,_=v>h?this._scrollbarSize:0;g.overflowX=v+b<=h?"hidden":"auto",g.overflowY=y+_<=a?"hidden":"auto";var x=this._childrenToDisplay,C=0===x.length&&a>0&&h>0;return d.default.createElement("div",{ref:function(t){e._scrollingContainer=t},"aria-label":this.props["aria-label"],className:(0,p.default)("ReactVirtualized__Grid",r),id:l,onScroll:this._onScroll,role:"grid",style:s({},g,c),tabIndex:f},x.length>0&&d.default.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",style:s({width:n?"auto":v,height:y,maxWidth:v,maxHeight:y,overflow:"hidden",pointerEvents:m?"none":""},o)},x),C&&u())}},{key:"shouldComponentUpdate",value:function(e,t){return(0,w.default)(this,e,t)}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,i=e.cellRangeRenderer,r=e.columnCount,o=e.height,a=e.overscanColumnCount,s=e.overscanRowCount,l=e.rowCount,u=e.width,d=t.isScrolling,c=t.scrollDirectionHorizontal,p=t.scrollDirectionVertical,f=t.scrollLeft,h=t.scrollTop;if(this._childrenToDisplay=[],o>0&&u>0){var m=this._columnSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:f}),g=this._rowSizeAndPositionManager.getVisibleCellRange({containerSize:o,offset:h}),v=this._columnSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:f}),y=this._rowSizeAndPositionManager.getOffsetAdjustment({containerSize:o,offset:h});this._renderedColumnStartIndex=m.start,this._renderedColumnStopIndex=m.stop,this._renderedRowStartIndex=g.start,this._renderedRowStopIndex=g.stop;var b=(0,_.default)({cellCount:r,overscanCellsCount:a,scrollDirection:c,startIndex:this._renderedColumnStartIndex,stopIndex:this._renderedColumnStopIndex}),x=(0,_.default)({cellCount:l,overscanCellsCount:s,scrollDirection:p,startIndex:this._renderedRowStartIndex,stopIndex:this._renderedRowStopIndex});this._columnStartIndex=b.overscanStartIndex,this._columnStopIndex=b.overscanStopIndex,this._rowStartIndex=x.overscanStartIndex,this._rowStopIndex=x.overscanStopIndex,this._childrenToDisplay=i({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:this._columnSizeAndPositionManager,columnStartIndex:this._columnStartIndex,columnStopIndex:this._columnStopIndex,horizontalOffsetAdjustment:v,isScrolling:d,rowSizeAndPositionManager:this._rowSizeAndPositionManager,rowStartIndex:this._rowStartIndex,rowStopIndex:this._rowStopIndex,scrollLeft:f,scrollTop:h,styleCache:this._styleCache,verticalOffsetAdjustment:y,visibleColumnIndices:m,visibleRowIndices:g})}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(this._debounceScrollEndedCallback,e)}},{key:"_debounceScrollEndedCallback",value:function(){this._disablePointerEventsTimeoutId=null;var e=this._styleCache;this._cellCache={},this._styleCache={};for(var t=this._rowStartIndex;t<=this._rowStopIndex;t++)for(var n=this._columnStartIndex;n<=this._columnStopIndex;n++){var i=t+"-"+n;this._styleCache[i]=e[i]}this.setState({isScrolling:!1})}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_invokeOnGridRenderedHelper",value:function(){var e=this.props.onSectionRendered;this._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:this._columnStartIndex,columnOverscanStopIndex:this._columnStopIndex,columnStartIndex:this._renderedColumnStartIndex,columnStopIndex:this._renderedColumnStopIndex,rowOverscanStartIndex:this._rowStartIndex,rowOverscanStopIndex:this._rowStopIndex,rowStartIndex:this._renderedRowStartIndex,rowStopIndex:this._renderedRowStopIndex}})}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,i=e.scrollTop,r=e.totalColumnsWidth,o=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,i=e.scrollTop,a=t.props,s=a.height,l=a.onScroll,u=a.width;l({clientHeight:s,clientWidth:u,scrollHeight:o,scrollLeft:n,scrollTop:i,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:i}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,i={scrollPositionChangeReason:N.REQUESTED};t>=0&&(i.scrollDirectionHorizontal=t>this.state.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,i.scrollLeft=t),n>=0&&(i.scrollDirectionVertical=n>this.state.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,i.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(i)}},{key:"_wrapPropertyGetter",value:function(e){return e instanceof Function?e:function(){return e}}},{key:"_wrapSizeGetter",value:function(e){return this._wrapPropertyGetter(e)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.columnCount,i=e.scrollToAlignment,r=e.scrollToColumn,o=e.width,a=t.scrollLeft;if(r>=0&&n>0){var s=Math.max(0,Math.min(n-1,r)),l=this._columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o,currentOffset:a,targetIndex:s});a!==l&&this._setScrollPosition({scrollLeft:l})}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.height,i=e.rowCount,r=e.scrollToAlignment,o=e.scrollToRow,a=t.scrollTop;if(o>=0&&i>0){var s=Math.max(0,Math.min(i-1,o)),l=this._rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n,currentOffset:a,targetIndex:s});a!==l&&this._setScrollPosition({scrollTop:l})}}},{key:"_onScroll",value:function(e){if(e.target===this._scrollingContainer){this._debounceScrollEnded();var t=this.props,n=t.height,i=t.width,r=this._scrollbarSize,o=this._rowSizeAndPositionManager.getTotalSize(),a=this._columnSizeAndPositionManager.getTotalSize(),s=Math.min(Math.max(0,a-i+r),e.target.scrollLeft),l=Math.min(Math.max(0,o-n+r),e.target.scrollTop);if(this.state.scrollLeft!==s||this.state.scrollTop!==l){var u=s>this.state.scrollLeft?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD,d=l>this.state.scrollTop?b.SCROLL_DIRECTION_FORWARD:b.SCROLL_DIRECTION_BACKWARD;this.setState({isScrolling:!0,scrollDirectionHorizontal:u,scrollDirectionVertical:d,scrollLeft:s,scrollPositionChangeReason:N.OBSERVED,scrollTop:l})}this._invokeOnScrollMemoizer({scrollLeft:s,scrollTop:l,totalColumnsWidth:a,totalRowsHeight:o})}}}]),t}(u.Component);M.defaultProps={"aria-label":"grid",cellRangeRenderer:k.default,estimatedColumnSize:100,estimatedRowSize:30,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},overscanColumnCount:0,overscanRowCount:10,scrollingResetTimeInterval:I,scrollToAlignment:"auto",style:{},tabIndex:0},t.default=M},0x395347893c607:function(e,t){(function(){tinymce.PluginManager.add("colorpicker",function(e){function t(t,n){function i(e){var t=new tinymce.util.Color(e),n=t.toRgb();o.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),r(t.toHex())}function r(e){o.find("#preview")[0].getEl().style.background=e}var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),r(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"==e?(t="#"+t,i(t),void n.value(t)):(t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),void i(t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});i(n)}e.settings.color_picker_callback||(e.settings.color_picker_callback=t)})}).call(window)},0x3a83e8cbe848e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(6280957995252369),u=n(0xa505046780b0c),d=i(u),c=n(5369935525269188),p=i(c),f=n(7186610166862683),h=i(f),m=n(5084380759969092),g=n(7996551768540594),v=n(0xe6bd8709d6a3c),y=n(5523398591803755),b=n(6007716273106560),_=o.default.createClass({displayName:"EditorSticky",propTypes:{postId:o.default.PropTypes.number,siteId:o.default.PropTypes.number,sticky:o.default.PropTypes.bool},getInitialState:function(){return{tooltip:!1}},toggleStickyStatus:function(){var e=void 0,t=void 0;this.props.sticky?(e="advanced_sticky_disabled_toolbar",t="Off"):(e="advanced_sticky_enabled_toolbar",t="On"),(0,m.recordStat)(e),(0,m.recordEvent)("Changed Sticky Setting",t),this.props.editPost(this.props.siteId,this.props.postId,{sticky:!this.props.sticky}),this.setState({tooltip:!1})},render:function(){var e=this,t=(0,s.default)("editor-sticky",{"is-sticky":this.props.sticky});return o.default.createElement(h.default,{borderless:!0,className:t,onClick:this.toggleStickyStatus,onMouseEnter:function(){return e.setState({tooltip:!0})},onMouseLeave:function(){return e.setState({tooltip:!1})},"aria-label":this.translate("Stick post to the front page"),ref:"stickyPostButton"},o.default.createElement(d.default,{icon:"bookmark"}),this.props.sticky&&o.default.createElement(p.default,{className:"editor-sticky__tooltip",context:this.refs&&this.refs.stickyPostButton,isVisible:this.state.tooltip,position:"bottom left"},o.default.createElement("span",null,this.translate("Marked as sticky"))))}});t.default=(0,l.connect)(function(e){var t=(0,y.getEditorPostId)(e),n=(0,v.getSelectedSiteId)(e),i=(0,b.getEditedPostValue)(e,n,t,"sticky");return{postId:t,siteId:n,sticky:i}},{editPost:g.editPost})(_),e.exports=t.default},0x3cd98bd458eb9:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x9244927499a4b),s=i(a),l=n(6881822108913591),u=i(l),d=n(0x4505d8ebb162c),c=i(d),p=n(0x965a288d34003),f=i(p),h=n(5862851293117563),m=i(h),g=n(6080475287248452),v=i(g),y=n(0xb143e095a1b27),b=i(y),_=n(0xc142161262f7e);t.default=o.default.createClass({displayName:"ContactFormDialogFormSettings",propTypes:{to:r.PropTypes.string,subject:r.PropTypes.string,email:r.PropTypes.string,title:r.PropTypes.string,onUpdate:r.PropTypes.func.isRequired},onToChange:function(e){this.props.onUpdate({to:e.target.value})},onSubjectChange:function(e){this.props.onUpdate({subject:e.target.value})},render:function(){var e=!(0,_.validateSettingsToEmail)(this.props.to);return o.default.createElement("div",{className:"editor-contact-form-modal-settings"},o.default.createElement(s.default,{label:this.translate("Contact Form Notification Settings")}),o.default.createElement(u.default,null,o.default.createElement("p",null,"post"===this.props.postType?this.translate("If you don’t make any changes here, feedback will be sent to the author of the post and the subject will be the name of this post."):this.translate("If you don’t make any changes here, feedback will be sent to the author of the page and the subject will be the name of this page.")),o.default.createElement(c.default,null,o.default.createElement(f.default,null,this.translate("Enter your email address")),o.default.createElement(m.default,{value:this.props.to,placeholder:this.props.email,isError:e,onChange:this.onToChange}),e&&o.default.createElement(v.default,{isError:!0,text:this.translate("%(email)s is not a valid email address.",{args:{email:this.props.to}})}),o.default.createElement(b.default,null,this.translate("You can enter multiple email addresses in the Email address field, and separate them with commas. A notification email will then be sent to each email address."))),o.default.createElement(c.default,null,o.default.createElement(f.default,null,this.translate("What should the subject line be?")),o.default.createElement(m.default,{value:this.props.subject,placeholder:this.props.title,onChange:this.onSubjectChange}))))}}),e.exports=t.default},0x3d21fc1a1c382:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){a.default.handleViewAction({type:u.ActionTypes.FETCH_SHORTCODE,payload:{siteId:e,shortcode:t}}),l.default.undocumented().site(e).shortcodes({shortcode:t},function(n,i){a.default.handleServerAction({type:u.ActionTypes.RECEIVE_SHORTCODE,payload:{siteId:e,shortcode:t,data:i},error:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r;var o=n(8769427305820155),a=i(o),s=n(8478035041892969),l=i(s),u=n(0x831ab68cff9b6)},0x3dd6e959c4103:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){if(n&&e){var i=!e.isHidden();if(i){var r=!0,o=!1,s=void 0;try{for(var l,u=(0,a.default)(e.getBody().querySelectorAll("*"));!(r=(l=u.next()).done);r=!0){var c=l.value;if((0,d.default)(c.textContent,t)){c.textContent=c.textContent.replace(t,n.result),e.undoManager.add();break}}}catch(e){o=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}}else{var p=h.default.getRawContent();if(!(0,d.default)(p,t))return;p=p.replace(t,n.result),e.fire("SetTextAreaContent",{content:p})}e.fire("change")}}function n(e){var n=void 0;e.clipboardData?n=e.clipboardData.getData("text/plain"):window.clipboardData&&(n=window.clipboardData.getData("Text")),n&&/^<.*>$/.test(n)&&g.default.undocumented().site((0,v.getSelectedSiteId)(i.getState())).embedReversal(n).then((0,l.default)(t,n)).catch(function(){})}var i=e.getParam("redux_store");if(i){e.on("paste",n);var r=e.getParam("textarea");r&&r.addEventListener("paste",n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7752261087188551),a=i(o),s=n(5477852257145688),l=i(s),u=n(6718701541658404),d=i(u),c=n(0x976699e5e0db4),p=i(c),f=n(5367243434992214),h=i(f),m=n(8478035041892969),g=i(m),v=n(0xe6bd8709d6a3c);t.default=function(){p.default.PluginManager.add("wpcom/embedreversal",r)},e.exports=t.default},0x3e2c4fba474d9:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767);e.exports=a.createClass({displayName:"FormLegend",render:function(){return a.createElement("legend",(0,o.default)({},l(this.props,"className"),{className:s(this.props.className,"form-legend")}),this.props.children)}})},0x3e6242fdbac66:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return(0,d.default)(e.postTypes.taxonomies.requesting,[t,n],!1)}function o(e,t,n){var i=(0,d.default)(e.postTypes.taxonomies.items,[t,n]);return i?(0,p.default)(i):null}function a(e,t,n,i){var r=o(e,t,n);return r?(0,l.default)(r,{name:i})||null:null}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingPostTypeTaxonomies=r,t.getPostTypeTaxonomies=o,t.getPostTypeTaxonomy=a;var s=n(5020179656051692),l=i(s),u=n(8640881565075096),d=i(u),c=n(0x8817212fc310f),p=i(c)},0x3f5142fd3481d:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(8090799827495550),v=n(0x8f1527a7f80c8),y=n(6940793315437877),b=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.siteId,i=t.themeSlug,r=e.siteId,o=e.themeSlug,a=n!==r||i&&o&&i!==o;a&&this.request(e)}},{key:"request",value:function(e){e.isRequesting||e.requestPageTemplates(e.siteId)}},{key:"render",value:function(){return null}}]),t}(h.Component);b.propTypes={siteId:h.PropTypes.number.isRequired,isRequesting:h.PropTypes.bool,requestPageTemplates:h.PropTypes.func},t.default=(0,
m.connect)(function(e,t){var n=t.siteId;return{isRequesting:(0,g.isRequestingPageTemplates)(e,n),themeSlug:(0,v.getSiteOption)(e,n,"theme_slug")}},{requestPageTemplates:y.requestPageTemplates})(b),e.exports=t.default},0x3f584e1a4360f:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(6280957995252369),s=n(0x8ae3881d6e8c2),l=i(s),u=n(8640881565075096),d=i(u),c=n(6442230718320275),p=i(c),f=n(0xcf73c9e6ccc62),h=i(f),m=n(7380496197234269),g=i(m),v=n(8729102622276094),y=i(v),b=n(905562822925401),_=i(b),x=n(0xb560658d4deef),C=i(x),E=n(0xe6bd8709d6a3c),w=o.default.createClass({displayName:"EditorFeaturedImagePreview",propTypes:{siteId:r.PropTypes.number,image:r.PropTypes.object,maxWidth:r.PropTypes.number},getInitialState:function(){return{height:null,transientSrc:null}},componentWillReceiveProps:function(e){var t=this.src();if(t&&t!==this.src(e)){var n={height:this.refs.preview.clientHeight};this.isReceivingPersistedImage(this.props,e)&&(n.transientSrc=t),this.setState(n)}},isReceivingPersistedImage:function(e,t){var n=this.props.siteId;if(n!==t.siteId)return!1;var i=this.props.image;if(!i||!i.transient||!t.image)return!1;var r=h.default.get(n,i.ID);return r&&r.ID===t.image.ID},src:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.image)return g.default.url(e.image,{maxWidth:this.props.maxWidth,size:"post-thumbnail"})},clearState:function(){(0,p.default)(this.state)&&this.setState(this.getInitialState())},render:function(){var e=this.state.height,t=(0,l.default)("editor-featured-image__preview",{"is-transient":(0,d.default)(this.props.image,"transient"),"has-assigned-height":!!e}),n=void 0;return n=this.state.transientSrc?o.default.createElement("img",{src:this.state.transientSrc}):o.default.createElement(_.default,null),o.default.createElement("div",{ref:"preview",className:t,style:{height:e}},o.default.createElement(y.default,null),o.default.createElement(C.default,{placeholder:n,src:this.src(),onLoad:this.clearState,className:"editor-featured-image__preview-image"}))}});t.default=(0,a.connect)(function(e){return{siteId:(0,E.getSelectedSiteId)(e)}})(w),e.exports=t.default},0x405f6fd593dfa:function(e,t,n){"use strict";function i(e){function t(t){return!(!e.dom.getAttrib(t,"data-mce-placeholder")&&!e.dom.getAttrib(t,"data-mce-object"))}function n(t){return t.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(t,n,i){var o,a,s,l,u,d,c=r.trim;return o=n.match(/id=['"]([^'"]*)['"] ?/),o&&(n=n.replace(o[0],"")),a=n.match(/align=['"]([^'"]*)['"] ?/),a&&(n=n.replace(a[0],"")),s=n.match(/class=['"]([^'"]*)['"] ?/),s&&(n=n.replace(s[0],"")),d=n.match(/width=['"]([0-9]*)['"] ?/),d&&(n=n.replace(d[0],"")),i=c(i),u=i.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),u&&u[2]?(l=c(u[2]),u=c(u[1])):(l=c(n).replace(/caption=['"]/,"").replace(/['"]$/,""),u=i),o=o&&o[1]?o[1].replace(/[<>&]+/g,""):"",a=a&&a[1]?a[1]:"alignnone",s=s&&s[1]?" "+s[1].replace(/[<>&]+/g,""):"",!d&&u&&(d=u.match(/width=['"]([0-9]*)['"]/)),d&&d[1]&&(d=d[1]),d&&l?(d=parseInt(d,10),e.getParam("wpeditimage_html5_captions")||(d+=10),'<div class="mceTemp"><dl id="'+o+'" class="wp-caption '+a+s+'" style="width: '+d+'px"><dt class="wp-caption-dt">'+u+'</dt><dd class="wp-caption-dd">'+l+"</dd></dl></div>"):i})}function i(e){return e.replace(/<div (?:id="attachment_|class="mceTemp)[^>]*>([\s\S]+?)<\/div>/g,function(e,t){var n="";return t.indexOf("<img ")===-1?(n=t.match(/<dd [^>]+>([\s\S]+?)<\/dd>/i),n&&n[1]?"<p>"+n[1]+"</p>":""):(n=t.replace(/\s*<dl ([^>]+)>\s*<dt [^>]+>([\s\S]+?)<\/dt>\s*<dd [^>]+>([\s\S]*?)<\/dd>\s*<\/dl>\s*/gi,function(e,t,n,i){var r,o,a,s;return s=n.match(/width="([0-9]*)"/),s=s&&s[1]?s[1]:"",o=t.match(/class="([^"]*)"/),o=o&&o[1]?o[1]:"",a=o.match(/align[a-z]+/i)||"alignnone",s&&i?(r=t.match(/id="([^"]*)"/),r=r&&r[1]?r[1]:"",o=o.replace(/wp-caption ?|align[a-z]+ ?/gi,""),o&&(o=' class="'+o+'"'),i=i.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),i=i.replace(/\s*\n\s*/g,"<br />"),'[caption id="'+r+'" align="'+a+'" width="'+s+'"'+o+"]"+n+" "+i+"[/caption]"):("alignnone"!==a[0]&&(n=n.replace(/><img/,' class="'+a[0]+'"><img')),n)}),n.indexOf("[caption")===-1&&(n=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),n)})}function o(t){return!t||t.indexOf("<")===-1&&t.indexOf(">")===-1?t:(l||(l=new r.html.Serializer({},e.schema)),l.serialize(e.parser.parse(t,{forced_root_block:!1})))}function a(t){var n;"DIV"===t.nodeName&&e.dom.hasClass(t,"mceTemp")?n=t:"IMG"!==t.nodeName&&"DT"!==t.nodeName&&"A"!==t.nodeName||(n=e.dom.getParent(t,"div.mceTemp")),n?(n.nextSibling?e.selection.select(n.nextSibling):n.previousSibling?e.selection.select(n.previousSibling):e.selection.select(n.parentNode),e.selection.collapse(!0),e.dom.remove(n)):e.dom.remove(t),e.nodeChanged(),e.undoManager.add()}var s,l,u=r.each,d=r.Env.iOS;e.addButton("wp_img_remove",{tooltip:"Remove",icon:"dashicon dashicons-trash",onclick:function(){a(e.selection.getNode())}}),u({alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",alignnone:"No alignment"},function(t,n){var i=n.slice(5);e.addButton("wp_img_"+n,{tooltip:t,icon:"dashicon dashicons-align-"+i,cmd:"alignnone"===n?"wpAlignNone":"Justify"+i.slice(0,1).toUpperCase()+i.slice(1),onPostRender:function(){var t=this;e.on("NodeChange",function(i){var r;"IMG"===i.element.nodeName&&(r=e.dom.getParent(i.element,".wp-caption")||i.element,"alignnone"===n?t.active(!/\balign(left|center|right)\b/.test(r.className)):t.active(e.dom.hasClass(r,n)))})}})}),e.once("preinit",function(){s=e.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wpcom_img_size_decrease","wpcom_img_size_increase","wp_img_caption","wp_img_advanced","wp_img_remove"])}),e.on("wptoolbar",function(e){"IMG"!==e.element.nodeName||t(e.element)||(e.toolbar=s)}),d&&e.on("click",function(t){if("IMG"===t.target.nodeName){var n=t.target;window.setTimeout(function(){e.selection.select(n),e.nodeChanged()},200)}else s.hide()}),e.on("init",function(){var t=e.dom,n=e.getParam("wpeditimage_html5_captions")?"html5-captions":"html4-captions";t.addClass(e.getBody(),n),e.on("wpLoadImageForm",function(t){if(!e.getParam("wpeditimage_disable_captions")){var n={type:"textbox",flex:1,name:"caption",minHeight:60,multiline:!0,scroll:!0,label:"Image caption"};t.data.splice(t.data.length-1,0,n)}}),e.on("wpNewImageRefresh",function(e){var n,i;(n=t.getParent(e.node,"dl.wp-caption"))&&(n.style.width||(i=parseInt(e.node.clientWidth,10)+10,i=i?i+"px":"50%",t.setStyle(n,"width",i)))}),e.on("wpImageFormSubmit",function(n){var i,r,a,s,l,u=n.imgData.data,d=n.imgData.node,c=n.imgData.caption,p="",f="",h="";return u.id="__wp-temp-img-id",n.imgData.cancel=!0,u.style||(u.style=null),u.src?(c&&(c=c.replace(/\r\n|\r/g,"\n").replace(/<\/?[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),c=c.replace(/(<br[^>]*>)\s*\n\s*/g,"$1").replace(/\s*\n\s*/g,"<br />"),c=o(c)),d?(l=d.id||null,t.setAttribs(d,u),i=t.getParent(d,"dl.wp-caption"),c?i?(r=t.select("dd.wp-caption-dd",i)[0])&&(r.innerHTML=c):(d.className&&(p=d.className.match(/wp-image-([0-9]+)/),f=d.className.match(/align(left|right|center|none)/)),f?(f=f[0],d.className=d.className.replace(/align(left|right|center|none)/g,"")):f="alignnone",f=' class="wp-caption '+f+'"',p&&(p=' id="attachment_'+p[1]+'"'),h=u.width||d.clientWidth,h&&(h=parseInt(h,10),e.getParam("wpeditimage_html5_captions")||(h+=10),h=' style="width: '+h+'px"'),a=d.parentNode&&"A"===d.parentNode.nodeName?d.parentNode:d,s="<dl "+p+f+h+'><dt class="wp-caption-dt"></dt><dd class="wp-caption-dd">'+c+"</dd></dl>",i=t.create("div",{class:"mceTemp"},s),(r=t.getParent(a,"p"))?r.parentNode.insertBefore(i,r):a.parentNode.insertBefore(i,a),e.$(i).find("dt.wp-caption-dt").append(a),r&&t.isEmpty(r)&&t.remove(r)):i&&(s="A"===d.parentNode.nodeName?t.getOuterHTML(d.parentNode):t.getOuterHTML(d),r=t.create("p",{},s),t.insertAfter(r,i.parentNode),e.selection.select(r),e.nodeChanged(),t.remove(i.parentNode))):(s=t.createHTML("img",u),c?(a=e.selection.getNode(),u.width&&(h=parseInt(u.width,10),e.getParam("wpeditimage_html5_captions")||(h+=10),h=' style="width: '+h+'px"'),s='<dl class="wp-caption alignnone"'+h+'><dt class="wp-caption-dt">'+s+'</dt><dd class="wp-caption-dd">'+c+"</dd></dl>",r="P"===a.nodeName?a:t.getParent(a,"p"),r&&"P"===r.nodeName?(i=t.create("div",{class:"mceTemp"},s),r.parentNode.insertBefore(i,r),e.selection.select(i),e.nodeChanged(),t.isEmpty(r)&&t.remove(r)):e.selection.setContent('<div class="mceTemp">'+s+"</div>")):e.selection.setContent(s)),d=t.get("__wp-temp-img-id"),t.setAttrib(d,"id",l),void(n.imgData.node=d)):void(d&&((i=t.getParent(d,"div.mceTemp"))?t.remove(i):"A"===d.parentNode.nodeName?t.remove(d.parentNode):t.remove(d),e.nodeChanged()))}),e.on("wpLoadImageData",function(n){var i,r=n.imgData.data,o=n.imgData.node;(i=t.getParent(o,"dl.wp-caption"))&&(i=t.select("dd.wp-caption-dd",i)[0],i&&(r.caption=e.serializer.serialize(i).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")))}),t.bind(e.getDoc(),"dragstart",function(n){var i=e.selection.getNode();"IMG"===i.nodeName&&t.getParent(i,".wp-caption")&&n.preventDefault()}),r.Env.ie&&r.Env.ie>10&&t.bind(e.getBody(),"mscontrolselect",function(n){"IMG"===n.target.nodeName&&t.getParent(n.target,".wp-caption")?e.getBody().focus():"DL"===n.target.nodeName&&t.hasClass(n.target,"wp-caption")&&n.target.focus()})}),e.on("ObjectResized",function(t){var n=t.target;"IMG"===n.nodeName&&e.undoManager.transact(function(){var i,r,o=e.dom;n.className=n.className.replace(/\bsize-[^ ]+/,""),(i=o.getParent(n,".wp-caption"))&&(r=t.width||o.getAttrib(n,"width"),r&&(r=parseInt(r,10),e.getParam("wpeditimage_html5_captions")||(r+=10),o.setStyle(i,"width",r+"px")))})}),e.on("BeforeExecCommand",function(t){var n,i,r,o,a,l=t.command,u=e.dom;if("mceInsertContent"===l)(n=u.getParent(e.selection.getNode(),"div.mceTemp"))&&(i=u.create("p"),u.insertAfter(i,n),e.selection.setCursorLocation(i,0),e.nodeChanged());else if("JustifyLeft"===l||"JustifyRight"===l||"JustifyCenter"===l||"wpAlignNone"===l){if(n=e.selection.getNode(),o="align"+l.slice(7).toLowerCase(),r=e.dom.getParent(n,".wp-caption"),"IMG"!==n.nodeName&&!r)return;n=r||n,a=e.dom.hasClass(n,o)?" alignnone":" "+o,n.className=n.className.replace(/ ?align(left|center|right|none)/g,"")+a,e.nodeChanged(),t.preventDefault(),s&&s.reposition(),e.fire("ExecCommand",{command:l,ui:t.ui,value:t.value})}}),e.on("keydown",function(t){var n,i,o,s,l=e.selection,u=t.keyCode,d=e.dom,c=r.util.VK;if(u===c.ENTER)n=l.getNode(),i=d.getParent(n,"div.mceTemp"),i&&(d.events.cancel(t),r.each(d.select("dt, dd",i),function(e){d.isEmpty(e)&&d.remove(e)}),s=r.Env.ie&&r.Env.ie<11?"":'<br data-mce-bogus="1" />',o=d.create("p",null,s),"DD"===n.nodeName?d.insertAfter(o,i):i.parentNode.insertBefore(o,i),e.nodeChanged(),l.setCursorLocation(o,0));else if((u===c.DELETE||u===c.BACKSPACE)&&(n=l.getNode(),"DIV"===n.nodeName&&d.hasClass(n,"mceTemp")?i=n:"IMG"!==n.nodeName&&"DT"!==n.nodeName&&"A"!==n.nodeName||(i=d.getParent(n,"div.mceTemp")),i))return d.events.cancel(t),a(n),!1}),r.Env.gecko&&e.on("undo redo",function(){"IMG"===e.selection.getNode().nodeName&&e.selection.collapse()}),e.wpSetImgCaption=function(e){return n(e)},e.wpGetImgCaption=function(e){return i(e)},e.on("BeforeSetContent",function(t){"raw"!==t.format&&(t.content=e.wpSetImgCaption(t.content))}),e.on("PostProcess",function(t){t.get&&(t.content=e.wpGetImgCaption(t.content))}),e.wp=e.wp||{},e.wp.isPlaceholder=t}var r=n(0x976699e5e0db4);e.exports=function(){r.PluginManager.add("wpeditimage",i)}},0x47248ea013aac:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.scripts,i=e.styles;return t||n||i?(0,s.renderToStaticMarkup)(a.default.createElement("html",null,a.default.createElement("head",null,(0,u.default)((0,c.default)(i,function(e){return a.default.createElement("link",{rel:"stylesheet",media:e.media,href:e.src})})),a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"a { cursor: default; }"}})),a.default.createElement("body",{style:{margin:0}},a.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),a.default.createElement("script",{src:p}),a.default.createElement("script",{dangerouslySetInnerHTML:{__html:"\n\t\t\t\t\t[ 'click', 'dragstart' ].forEach( function( type ) {\n\t\t\t\t\t\tdocument.addEventListener( type, function( event ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\t}, true );\n\t\t\t\t\t} );\n\t\t\t\t"}}),(0,u.default)((0,c.default)(n,function(e){var t=void 0;return e.extra&&(t=a.default.createElement("script",{dangerouslySetInnerHTML:{__html:e.extra}})),(0,u.default)({extra:t,script:a.default.createElement("script",{src:e.src})})}))))):""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(5896763357248615),a=i(o),s=n(0x98b3dfa6a747e),l=n(8040677854470317),u=i(l),d=n(578807769082385),c=i(d),p="https://s0.wp.com/wp-includes/js/jquery/jquery.js";e.exports=t.default},0x4a39808d5f717:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(78648220391165),v=n(7552314505839195),y=n(8645880637789154),b=n(0xcf73c9e6ccc62),_=i(b),x=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.requestStorage=n.requestStorage.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"requestStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!e.requestingMediaStorage&&e.siteId&&e.requestMediaStorage(e.siteId)}},{key:"componentWillMount",value:function(){this.requestStorage(),_.default.on("fetch-media-limits",this.requestStorage)}},{key:"componentWillUnmount",value:function(){_.default.off("fetch-media-limits",this.requestStorage)}},{key:"componentWillReceiveProps",value:function(e){!e.requestingMediaStorage&&e.siteId&&this.props.siteId!==e.siteId&&this.requestStorage(e)}},{key:"render",value:function(){return null}}]),t}(h.Component);x.propTypes={siteId:h.PropTypes.number,requestingMediaStorage:h.PropTypes.bool,requestMediaStorage:h.PropTypes.func},x.defaultProps={requestMediaStorage:function(){}},t.default=(0,m.connect)(function(e,t){return{requestingMediaStorage:(0,v.isRequestingMediaStorage)(e,t.siteId)}},function(e){return(0,g.bindActionCreators)({requestMediaStorage:y.requestMediaStorage},e)})(x),e.exports=t.default},0x4a68bd81dba8a:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=function(){return o.default.createElement("li",{className:"select-dropdown__separator"})};t.default=a,e.exports=t.default},0x4a851df868a06:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(5896763357248615),v=i(g),y=n(0x8ae3881d6e8c2),b=i(y),_=n(7572476330282672),x=n(0xa505046780b0c),C=i(x),E=n(7186610166862683),w=i(E),T=n(8326181498771179),S=i(T),P=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.state={showTooltip:!1},e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleMouseEnter",value:function(){this.setState({showTooltip:!0})}},{key:"handleMouseLeave",value:function(){this.setState({showTooltip:!1})}},{key:"render",value:function(){var e=this.props,t=e.expanded,n=e.translate,i=(0,b.default)("editor-contact-form-modal-field__edit",{"is-expanded":t});return v.default.createElement("div",{className:"editor-contact-form-modal-field__edit-wrapper foldable-card__expand"},v.default.createElement(w.default,{className:"editor-contact-form-modal-field__edit-wrapper-button",ref:"editField",borderless:!0,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},v.default.createElement(C.default,{icon:"pencil",className:i})),v.default.createElement(S.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.editField,onClose:m.default,position:"bottom",className:"popover tooltip is-dialog-visible"},n("Edit Field",{context:"button tooltip"})))}}]),t}(g.PureComponent);P.propTypes={expanded:g.PropTypes.bool.isRequired},t.default=(0,_.localize)(P),e.exports=t.default},0x4aa49df546d8c:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(5190340364196702),v=n(0xa3a7282d99c02),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){!e.isRequesting&&e.siteId&&e.requestUserSuggestions(e.siteId)}},{key:"render",value:function(){return null}}]),t}(h.Component);y.propTypes={siteId:h.PropTypes.number,isRequesting:h.PropTypes.bool,requestUserSuggestions:h.PropTypes.func},y.defaultProps={requestUserSuggestions:function(){},isRequesting:!1},t.default=(0,m.connect)(function(e,t){return{isRequesting:(0,g.isRequestingUserSuggestions)(e,t.siteId)}},{requestUserSuggestions:v.requestUserSuggestions})(y),e.exports=t.default},0x4ce9eddf96ff4:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5143893728007863),o=i(r),a=n(5880884711457125),s=i(a),l=n(4675954658966525),u=i(l),d=(0,u.default)("calypso:infinite-list:helper"),c=function(){function e(t){(0,o.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,s.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,n){if("function"==typeof t){n&&(t=t.bind(n));for(var i=e-e%this.props.itemsPerRow,r=Math.min(i+this.props.itemsPerRow,this.props.items.length)-1,o=i;o<=r;o++)t(this.props.items[o],o)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var n=this.props.getItemRef(t),i=this.boundsForRef(n),r=void 0;r=i?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-i.top:i.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[n]=r},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var n=t.props.getItemRef(e);delete t.itemHeights[n]},this)}},{key:"getRowHeight",value:function(e){var t=this,n=0;return this.forEachInRow(e,function(e){var i=t.props.getItemRef(e),r=t.storedItemHeight(i);n=Math.max(n,r)},this),n}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,n=this.firstRenderedIndex||0,i=this.props.items.length,r=t;0===i&&(r=-1),t>=i&&(r=Math.min(n+e,i-1)),r===-1&&i>0&&0===n&&(r=e),r!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=r)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,d("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,d("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,d("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,n=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),n=this.containerBottom-this.bottomPlaceholderHeight,t=n+e,!(t>this.bottomHideLevelSoft&&n>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,d("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;d("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();e.exports=c},0x515d1e113a7c1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(6280957995252369),s=n(7127988529575974),l=i(s),u=n(0x7470881db6733),d=i(u),c=n(0x3cd98bd458eb9),p=i(c),f=n(8420101076893836),h=i(f),m=n(5534979887946057),g=i(m),v=n(0x956a8e02ae2a5),y=n(5367243434992214),b=i(y),_=n(0xc142161262f7e),x=o.default.createClass({displayName:"ContactFormDialog",propTypes:{activeTab:r.PropTypes.oneOf(["fields","settings"]).isRequired,showDialog:r.PropTypes.bool.isRequired,isEdit:r.PropTypes.bool.isRequired,contactForm:r.PropTypes.shape({to:r.PropTypes.string,subject:r.PropTypes.string,fields:r.PropTypes.array.isRequired}).isRequired,onInsert:r.PropTypes.func.isRequired,onChangeTabs:r.PropTypes.func.isRequired,onClose:r.PropTypes.func.isRequired,onFieldAdd:r.PropTypes.func.isRequired,onFieldRemove:r.PropTypes.func.isRequired,onFieldUpdate:r.PropTypes.func.isRequired,onSettingsUpdate:r.PropTypes.func.isRequired},getActionButtons:function(){var e=(0,_.validateFormFields)(this.props.contactForm.fields)&&(0,_.validateSettingsToEmail)(this.props.contactForm.to),t=[o.default.createElement(d.default,{key:"save",disabled:!e,onClick:this.props.onInsert},this.props.isEdit?this.translate("Update"):this.translate("Insert")),o.default.createElement(d.default,{key:"cancel",isPrimary:!1,onClick:this.props.onClose},this.translate("Cancel"))];return"fields"===this.props.activeTab?[o.default.createElement("div",{key:"secondaryActions",className:"editor-contact-form-modal__secondary-actions"},o.default.createElement(d.default,{key:"add",isPrimary:!1,onClick:this.props.onFieldAdd},this.translate("Add New Field")))].concat(t):t},render:function(){var e=this.props,t=e.activeTab,n=e.currentUser.email,i=e.post,r=i.title,a=i.type,s=e.contactForm,u=s.to,d=s.subject,c=s.fields,f=e.showDialog,m=e.onChangeTabs,v=e.onClose,y=e.onFieldAdd,b=e.onFieldUpdate,_=e.onFieldRemove,x=e.onSettingsUpdate,C="fields"===t?o.default.createElement(g.default,{fields:c,onFieldAdd:y,onFieldRemove:_,onFieldUpdate:b}):o.default.createElement(p.default,{to:u,subject:d,email:n,title:r,postType:a,onUpdate:x});return o.default.createElement(l.default,{isVisible:f,onClose:v,buttons:this.getActionButtons(),additionalClassNames:"editor-contact-form-modal"},o.default.createElement(h.default,{activeTab:t,onChangeTabs:m,fieldCount:c.length}),C)}});t.default=(0,a.connect)(function(e){return{post:b.default.get()||{},currentUser:(0,v.getCurrentUser)(e),contactForm:e.ui.editor.contactForm}})(x),e.exports=t.default},0x51b8723849e16:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a),l=n(7572476330282672),u=i(l),d=function(e){var t=e.icon,n=e.label;return o.default.createElement("div",null,o.default.createElement(s.default,{className:"wpcom-insert-menu__menu-icon",icon:t}),o.default.createElement("span",{className:"wpcom-insert-menu__menu-label"},n))};t.default=[{name:"insert_media_item",item:o.default.createElement(d,{icon:"add-image",label:u.default.translate("Add Media")}),cmd:"wpcomAddMedia"},{name:"insert_contact_form",item:o.default.createElement(d,{icon:"mention",label:u.default.translate("Add Contact Form")}),cmd:"wpcomContactForm"}],e.exports=t.default},0x51dbbe34db920:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(6280957995252369),s=n(5172337875599245),l=i(s),u=n(0xe6bd8709d6a3c),d=o.default.createClass({displayName:"EditorMediaModalGalleryPreviewIndividual",propTypes:{items:r.PropTypes.arrayOf(r.PropTypes.object),site:r.PropTypes.object},render:function(){var e=this,t=this.props.items.map(function(t){var n=l.default.caption(e.props.site,t);return null===n?o.default.createElement("div",{key:t.ID,dangerouslySetInnerHTML:{__html:l.default.get(e.props.site,t)}}):o.default.cloneElement(n,{key:t.ID})});return o.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual"},o.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual-content"},t))}});t.default=(0,a.connect)(function(e){return{site:(0,u.getSelectedSite)(e)}})(d),e.exports=t.default},0x5326596c1965c:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x636974ee9c84e),m=i(h),g=n(0xd0219df97eb97),v=i(g),y=n(0x45d24eaab7654),b=i(y),_=n(5896763357248615),x=i(_),C=n(5921998412115101),E=i(C),w=n(6280957995252369),T=n(0x8ae3881d6e8c2),S=i(T),P=n(6051631321006113),k=i(P),I=n(7380496197234269),N=i(I),M=n(7629348406412959),R=n(8693344302354816),D=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.onWindowResize=null,n.onLoadComplete=n.onLoadComplete.bind(n),n.updateCanvasPosition=n.updateCanvasPosition.bind(n),n.isVisible=!1,n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,m.default)(e,"blob")}},{key:"getImage",value:function(e){var t=this,n=this.props,i=n.onLoadError,r=n.mimeType,o=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([o.response],{type:r}));t.initImage(e)}},o.onerror=function(e){return i(e)},o.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),this.onWindowResize=(0,v.default)(this.updateCanvasPosition,200),"undefined"!=typeof window&&window.addEventListener("resize",this.onWindowResize),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),this.onWindowResize=null),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,n=t.leftRatio,i=t.topRatio,r=t.widthRatio,o=t.heightRatio,a=this.props,s=a.mimeType,l=a.transform,u=E.default.findDOMNode(this.refs.canvas),d=u.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,f=c?this.image.width:this.image.height,h=n*p,m=i*f,g=r*p,v=o*f,y=d.getImageData(h,m,g,v),b=document.createElement("canvas");
b.width=g,b.height=v;var _=b.getContext("2d");_.putImageData(y,0,0),N.default.canvasToBlob(b,e,s,1)}},{key:"drawImage",value:function(){if(this.image){var e=E.default.findDOMNode(this.refs.canvas),t=this.image.width,n=this.image.height,i=this.props.transform,r=i.degrees%180!==0;e.width=r?n:t,e.height=r?t:n;var o=e.getContext("2d");o.clearRect(0,0,e.width,e.height),o.save(),o.setTransform(1,0,0,1,e.width/2,e.height/2),o.scale(i.scaleX,i.scaleY),o.rotate(i.degrees*Math.PI/180),o.drawImage(this.image,-t/2,-n/2),o.restore()}}},{key:"updateCanvasPosition",value:function(){var e=this.props.crop,t=e.leftRatio,n=e.topRatio,i=e.widthRatio,r=e.heightRatio,o=E.default.findDOMNode(this.refs.canvas),a=-50*i-100*t,s=-50*r-100*n;this.props.setImageEditorCropBounds(o.offsetTop-o.offsetHeight*-s/100,o.offsetLeft-o.offsetWidth*-a/100,o.offsetTop+o.offsetHeight*(1+s/100),o.offsetLeft+o.offsetWidth*(1+a/100))}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,n=e.topRatio,i=e.widthRatio,r=e.heightRatio,o=-50*i-100*t,a=-50*r-100*n,s={transform:"translate("+o+"%, "+a+"%)",maxWidth:85/i+"%",maxHeight:85/r+"%"},l=this.props.isImageLoaded,u=(0,S.default)("image-editor__canvas",{"is-placeholder":!l});return x.default.createElement("div",{className:"image-editor__canvas-container"},x.default.createElement("canvas",{ref:"canvas",style:s,onMouseDown:this.preventDrag,className:u}),l&&x.default.createElement(k.default,null))}}]),t}(_.Component);D.propTypes={src:_.PropTypes.string,mimeType:_.PropTypes.string,transform:_.PropTypes.shape({degrees:_.PropTypes.number,scaleX:_.PropTypes.number,scaleY:_.PropTypes.number}),crop:_.PropTypes.shape({topRatio:_.PropTypes.number,leftRatio:_.PropTypes.number,widthRatio:_.PropTypes.number,heightRatio:_.PropTypes.number}),setImageEditorCropBounds:_.PropTypes.func,setImageEditorImageHasLoaded:_.PropTypes.func,onLoadError:_.PropTypes.func,isImageLoaded:_.PropTypes.bool},D.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:b.default,setImageEditorImageHasLoaded:b.default,onLoadError:b.default,isImageLoaded:!1},t.default=(0,w.connect)(function(e){var t=(0,M.getImageEditorTransform)(e),n=(0,M.getImageEditorFileInfo)(e),i=n.src,r=n.mimeType,o=(0,M.getImageEditorCrop)(e),a=(0,M.isImageEditorImageLoaded)(e);return{src:i,mimeType:r,transform:t,crop:o,isImageLoaded:a}},{setImageEditorCropBounds:R.setImageEditorCropBounds,setImageEditorImageHasLoaded:R.setImageEditorImageHasLoaded},null,{withRef:!0})(D),e.exports=t.default},0x55c7816ff4f31:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a);e.exports=o.default.createClass({displayName:"ProgressBar",getDefaultProps:function(){return{total:100,compact:!1,isPulsing:!1}},propTypes:{value:o.default.PropTypes.number.isRequired,total:o.default.PropTypes.number,color:o.default.PropTypes.string,title:o.default.PropTypes.string,compact:o.default.PropTypes.bool,className:o.default.PropTypes.string,isPulsing:o.default.PropTypes.bool},getCompletionPercentage:function(){var e=Math.ceil(this.props.value/this.props.total*100);return Math.min(e,100)},renderBar:function(){var e=this.props.title?o.default.createElement("span",{className:"screen-reader-text"},this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),o.default.createElement("div",{className:"progress-bar__progress",style:t},e)},render:function(){var e=(0,s.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return o.default.createElement("div",{className:e},this.renderBar())}})},0x57d0987682136:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x45d24eaab7654),s=i(a),l=n(623310115397031),u=i(l),d=n(5882696379081785),c=i(d),p=n(7613110173109069),f=i(p),h=n(474432612430512);e.exports=o.default.createClass({displayName:"MediaLibraryDropZone",propTypes:{site:o.default.PropTypes.object,fullScreen:o.default.PropTypes.bool,onAddMedia:o.default.PropTypes.func,trackStats:o.default.PropTypes.bool},getDefaultProps:function(){return{fullScreen:!0,onAddMedia:s.default,trackStats:!0}},uploadFiles:function(e){this.props.site&&(f.default.clearValidationErrors(this.props.site.ID),f.default.add(this.props.site.ID,e),this.props.onAddMedia(),this.props.trackStats&&u.default.mc.bumpStat("editor_upload_via","drop"))},isValidTransfer:function(e){return!!e&&(!e.mozSourceNode&&(!e.types||-1!==Array.prototype.indexOf.call(e.types,"Files")))},render:function(){return(0,h.userCan)("upload_files",this.props.site)?o.default.createElement(c.default,{fullScreen:this.props.fullScreen,onVerifyValidTransfer:this.isValidTransfer,onFilesDrop:this.uploadFiles}):null}})},0x5923dd53307e9:function(e,t,n){"use strict";function i(){this.ignore_types=["Bias Language","Cliches","Complex Expression","Diacritical Marks","Double Negatives","Hidden Verbs","Jargon Language","Passive voice","Phrases to Avoid","Redundant Expression"],this.ignore_strings={},this.i18n={}}function r(e){this.tokens=e,this.index=0,this.count=0,this.last=0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7572476330282672);i.prototype.setIgnoreStrings=function(e){var t=this;"string"==typeof e&&(e=e.split(/,\s*/g)),this.map(e,function(e){t.ignore_strings[e]=1})},i.prototype.showTypes=function(e){var t=e.split(/,\s*/g),n={},i=[];n["Double Negatives"]=1,n["Hidden Verbs"]=1,n["Passive voice"]=1,n["Bias Language"]=1,n.Cliches=1,n["Complex Expression"]=1,n["Diacritical Marks"]=1,n["Jargon Language"]=1,n["Phrases to Avoid"]=1,n["Redundant Expression"]=1,this.map(t,function(e){n[e]=void 0}),this.map(this.ignore_types,function(e){void 0!==n[e]&&i.push(e)}),this.ignore_types=i},i.prototype.makeError=function(e,t,n,i){var r={};return r.type=n,r.string=e,r.tokens=t,new RegExp("\\b"+e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,i)+"\\b"):new RegExp(e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,i)+"\\b"):new RegExp("\\b"+e).test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,i)):r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,i)),r.used=!1,r},i.prototype.addToErrorStructure=function(e,t,n,i){var r=this;this.map(t,function(t){var o=t.word.split(/\s+/),a=t.pre,s=o[0];void 0===e["__"+s]&&(e["__"+s]={},e["__"+s].pretoks={},e["__"+s].defaults=[]),""===a?e["__"+s].defaults.push(r.makeError(t.word,o,n,i,a)):(void 0===e["__"+s].pretoks["__"+a]&&(e["__"+s].pretoks["__"+a]=[]),e["__"+s].pretoks["__"+a].push(r.makeError(t.word,o,n,i,a)))})},i.prototype.buildErrorStructure=function(e,t,n){var i=this._getSeparators(),r={};return this.addToErrorStructure(r,e,"hiddenSpellError",i),this.addToErrorStructure(r,n,"hiddenGrammarError",i),this.addToErrorStructure(r,t,"hiddenSuggestion",i),r},i.prototype._getSeparators=function(){var e,t="",n='"s!#$%&()*+,./:;<=>?@[\\]^_{|}';for(e=0;e<n.length;e++)t+="\\"+n.charAt(e);return"(?:(?:[ "+t+"])|(?:\\-\\-))+"},i.prototype.processXML=function(e){var t,n,i,r,a,s,l,u,d,c,p,f,h,m,g,v;for(t={},this.map(this.ignore_types,function(e){t[e]=1}),this.suggestions=[],n=e.getElementsByTagName("error"),i=[],r=[],a=[],s=0;s<n.length;s++)if(null!==n[s].getElementsByTagName("string").item(0).firstChild&&(l=n[s].getElementsByTagName("string").item(0).firstChild.data,u=n[s].getElementsByTagName("type").item(0).firstChild.data,d=n[s].getElementsByTagName("description").item(0).firstChild.data,c=null!==n[s].getElementsByTagName("precontext").item(0).firstChild?n[s].getElementsByTagName("precontext").item(0).firstChild.data:"",void 0===this.ignore_strings[l])){if(p={},p.description=d,p.suggestions=[],p.matcher=new RegExp("^"+l.replace(/\s+/,this._getSeparators())+"$"),p.context=c,p.string=l,p.type=u,this.suggestions.push(p),null!==n[s].getElementsByTagName("suggestions").item(0))for(f=n[s].getElementsByTagName("suggestions").item(0).getElementsByTagName("option"),h=0;h<f.length;h++)p.suggestions.push(f[h].firstChild.data);null!==n[s].getElementsByTagName("url").item(0)&&(m=n[s].getElementsByTagName("url").item(0).firstChild.data,p.moreinfo=m+"&theme=tinymce"),void 0===t[d]&&("suggestion"===u&&a.push({word:l,pre:c}),"grammar"===u&&i.push({word:l,pre:c})),"spelling"!==u&&"Homophone"!==d||r.push({word:l,pre:c}),"Cliches"===d&&(p.description="Clichés"),"Spelling"===d&&(p.description=(0,o.translate)("Spelling",{comment:"Proofreading error description"})),"Repeated Word"===d&&(p.description=(0,o.translate)("Repeated Word",{comment:"Proofreading error description"})),"Did you mean..."===d&&(p.description=(0,o.translate)("Did you mean…",{comment:"Proofreading error description"}))}return v=r.length+i.length+a.length,g=v>0?this.buildErrorStructure(r,a,i):void 0,{errors:g,count:v,suggestions:this.suggestions}},i.prototype.findSuggestion=function(e){var t,n,i=e.innerHTML,r=(this.getAttrib(e,"pre")+"").replace(/[\\,!\\?\\."\s]/g,""),o=this.suggestions.length;for(n=0;n<o;n++)if((""===r||r===this.suggestions[n].context)&&this.suggestions[n].matcher.test(i)){t=this.suggestions[n];break}return t},r.prototype.next=function(){var e=this.tokens[this.index];return this.count=this.last,this.last+=e.length+1,this.index++,""!==e&&("'"===e[0]&&(e=e.substring(1,e.length)),"'"===e[e.length-1]&&(e=e.substring(0,e.length-1))),e},r.prototype.hasNext=function(){return this.index<this.tokens.length},r.prototype.hasNextN=function(e){return this.index+e<this.tokens.length},r.prototype.skip=function(e,t){this.index+=e,this.last+=t,this.index<this.tokens.length&&(this.count=this.last-this.tokens[this.index].length)},r.prototype.getCount=function(){return this.count},r.prototype.peek=function(e){var t,n=[],i=this.index+e;for(t=this.index;t<i;t++)n.push(this.tokens[t]);return n},i.prototype.markMyWords=function(e,t){function n(e,t,n){var i,r=e.nodeValue,o=r.search(t),a=r.match(t),s=[];return o<0||!a.length?[e]:(o>0&&s.push(document.createTextNode(r.substr(0,o))),s.push(u.create(a[0].replace(t,n))),i=o+a[0].length,i<r.length&&s.push(document.createTextNode(r.substr(i))),s)}var i,o,a=new RegExp(this._getSeparators()),s=[],l=0,u=this,d=this._isTinyMCE?' data-mce-bogus="1"':"",c='<span class="mceItemHidden"'+d+">&nbsp;</span>";return this._walk(e,function(e){3!==e.nodeType||u.isMarkedNode(e)||s.push(e)}),this.map(s,function(e){var s,p,f,h,m,g,v,y,b,_,x,C,E,w,T,S,P,k,I={};if(3===e.nodeType){for(s=e.nodeValue,p=e.nodeValue.split(a),f="",h=[],o=new r(p);o.hasNext();){if(m=o.next(),g=t["__"+m],void 0!==g&&void 0!==g.pretoks){var N=function(e){void 0!==e&&!e.used&&void 0===I["__"+e.string]&&e.regexp.test(_)&&(I["__"+e.string]=1,h.push([e.regexp,'<span class="'+e.type+'" pre="'+f+'"'+d+">$&</span>"]),e.used=!0,y=!0)};v=g.defaults,g=g.pretoks["__"+f],y=!1,b=s.substr(0,o.getCount()),_=s.substr(b.length,s.length),void 0!==g&&(f+=" ",u.map(g,N)),y||(f="",u.map(v,N))}f=m}if(h.length>0){for(x=e,C=0;C<h.length;C++){var M=function(e){var t,r;if(3===e.nodeType){if(l++,u.isIE()&&e.nodeValue.length>0&&" "===e.nodeValue.substr(0,1))return u.create(c+e.nodeValue.substr(1,e.nodeValue.length-1).replace(E,w),!1);if(i)return u.create(e.nodeValue.replace(E,w),!1);if(t=u.create("<span />"),"undefined"==typeof i&&(i="function"!=typeof t.appendChild))return u.remove(t),u.create(e.nodeValue.replace(E,w),!1);for(r=n(e,E,w),T=0;T<r.length;T++)t.appendChild(r[T]);return e=t}for(S=u.contents(e),P=0;P<S.length;P++)if(3===S[P].nodeType&&E.test(S[P].nodeValue))return k=u.isIE()&&S[P].nodeValue.length>0&&" "===S[P].nodeValue.substr(0,1)?u.create(c+S[P].nodeValue.substr(1,S[P].nodeValue.length-1).replace(E,w),!0):u.create(S[P].nodeValue.replace(E,w),!0),u.replaceWith(S[P],k),u.removeParent(k),l++,e;return e};E=h[C][0],w=h[C][1],x=M(x)}u.replaceWith(e,x)}}}),l},i.prototype._walk=function(e,t){var n;for(n=0;n<e.length;n++)t.call(t,e[n]),this._walk(this.contents(e[n]),t)},i.prototype.removeWords=function(e,t){var n=0,i=this;return this.map(this.findSpans(e).reverse(),function(e){var r;e&&(i.isMarkedNode(e)||i.hasClass(e,"mceItemHidden")||i.isEmptySpan(e))&&("&nbsp;"===e.innerHTML?(r=document.createTextNode(" "),i.replaceWith(e,r)):t&&e.innerHTML!==t||(i.removeParent(e),n++))}),n},i.prototype.isEmptySpan=function(e){return""===this.getAttrib(e,"class")&&""===this.getAttrib(e,"style")&&""===this.getAttrib(e,"id")&&!this.hasClass(e,"Apple-style-span")&&""===this.getAttrib(e,"mce_name")},i.prototype.isMarkedNode=function(e){return this.hasClass(e,"hiddenGrammarError")||this.hasClass(e,"hiddenSpellError")||this.hasClass(e,"hiddenSuggestion")},i.prototype.applySuggestion=function(e,t){var n;"(omit)"===t?this.remove(e):(n=this.create(t),this.replaceWith(e,n),this.removeParent(n))},i.prototype.hasErrorMessage=function(e){return void 0!==e&&null!==e.getElementsByTagName("message").item(0)},i.prototype.getErrorMessage=function(e){return e.getElementsByTagName("message").item(0)},i.prototype.isIE=function(){return"Microsoft Internet Explorer"===navigator.appName},t.default=i,e.exports=t.default},0x5a3fcba3e9b9c:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(5896763357248615),u=i(l),d=n(0x8ae3881d6e8c2),c=i(d),p=n(4675954658966525),f=i(p),h=n(8907951692841672),m=i(h),g=n(83765757817552),v=i(g),y=n(5059747709250767),b=i(y),_=n(5744674924212010),x=i(_),C=n(5106151372138902),E=n(7380496197234269),w=i(E),T=n(6803892143900866),S=(0,f.default)("calypso:gallery-shortcode");t.default=u.default.createClass({displayName:"GalleryShortcode",propTypes:{siteId:l.PropTypes.number.isRequired,children:l.PropTypes.string,items:l.PropTypes.array,type:l.PropTypes.string,columns:l.PropTypes.number,orderBy:l.PropTypes.string,link:l.PropTypes.string,size:l.PropTypes.string,className:l.PropTypes.string},getDefaultProps:function(){return T.GalleryDefaultAttrs},filterRenderResult:function(e){if(!e.body&&!e.scripts&&!e.styles)return e;var t=(0,m.default)({},e,{scripts:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.js"}},styles:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css"},"gallery-styles":{src:"https://widgets.wp.com/gallery-preview/style.css"}}});return"slideshow"===this.getAttributes().type&&(0,m.default)(t,{scripts:{"jquery-cycle":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/jquery.cycle.min.js"},"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/slideshow-shortcode.js",extra:'var jetpackSlideshowSettings = { "spinner": "https://s0.wp.com/wp-content/mu-plugins/shortcodes/img/slideshow-loader.gif" };'}},styles:{"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/css/slideshow-shortcode.css"}}}),t},getAttributes:function(){var e=(0,v.default)(this.props,"items","type","columns","orderBy","link","size");return this.props.children&&(0,m.default)(e,(0,C.parse)(this.props.children).attrs.named),e},getShortcode:function(){return this.props.children?this.props.children:w.default.generateGalleryShortcode(this.getAttributes())},render:function(){var e=this.getShortcode();if(!e)return null;var t=(0,c.default)("gallery-shortcode",this.props.className);return S(e),u.default.createElement(x.default,(0,o.default)({},(0,b.default)(this.props,(0,s.default)(this.constructor.propTypes)),{siteId:this.props.siteId,filterRenderResult:this.filterRenderResult,className:t}),e)}}),e.exports=t.default},0x5b187dae980c5:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5750894671760145),o=i(r),a=n(7572476330282672),s=function(e){return e&&/[gh]|[aA]$/.test(e)},l=function(e){return"number"==typeof e},u=function(e,t,n){return e=(0,a.moment)(e),t?e.tz(t):l(n)&&e.utcOffset(n),e},d=function(e){return(0,a.moment)(e.format?e.format():e)},c=function(e,t,n){var i=d(e),r=u(e,t,n);return i.utcOffset()-r.utcOffset()},p=function(e,t,n){return t||l(n)?d(e).subtract(c(e,t,n),"minute"):(0,a.moment)(e)},f=function(e,t,n){return e=u(e,t,n).add(c(e,t,n),"minute"),!t&&l(n)&&e.utcOffset(n),e},h=function(e){var t=(0,o.default)(e/60),n=e>0?"+":"";if(!(e/60%1))return n+String(t);e=Math.abs(e%60);var i=e<10?"0"+e:e;return""+n+t+":"+i},m=function(e){return h(60*e)},g=function(e){return e=String(e),"0"!==e&&"00"!==e&&("0"===e[0]||Number(e)>99)&&(e=Number(e.substr(1))),!(isNaN(Number(e))||Number(e)<0||e.length>2)&&Number(e)};t.default={convertDateToGivenOffset:f,convertDateToUserLocation:p,convertHoursToHHMM:m,convertMinutesToHHMM:h,getDateInLocalUTC:d,getLocalizedDate:u,getTimeOffset:c,is12hr:s,isValidGMTOffset:l,parseAndValidateNumber:g},e.exports=t.default},0x5e486edbe97d3:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){e.$(".mce-toolbar:not(.mce-menubar)",document.body).each(function(e,t){t.addEventListener("touchstart",function(e){e.stopImmediatePropagation()})})}function n(){e.$([e.$(".mce-inline-toolbar-grp .mce-container-body",document.body),e.$(".mce-toolbar-grp",e.theme.panel.getEl())]).each(function(t,n){n.on("scroll",(0,l.default)(function(t){var n=t.target,i=void 0;if(n.scrollLeft===n.scrollWidth-n.clientWidth?i="add":a.default.DOM.hasClass(n,"is-scrolled-full")&&(i="remove"),i){var r=e.$(n);r.hasClass("mce-container-body")||r.add(a.default.DOM.getParent(n,".mce-container-body")),r[i+"Class"]("is-scrolled-full")}},200))})}function i(){function t(){e.$(".mce-toolbar-grp",e.theme.panel.getEl()).each(function(t,n){var i=n.scrollWidth>n.clientWidth;e.$(n).toggleClass("is-scrollable",i)})}window.addEventListener("resize",(0,l.default)(t,200)),t(),e.on("wptoolbar",function(t){setTimeout(function(){if(t.toolbar&&t.toolbar.visible()){var n=t.toolbar.getEl(),i=n.firstChild.scrollWidth>n.clientWidth;e.dom.toggleClass(n,"is-scrollable",i)}},0)})}e.on("init",function(){t(),n(),i()})}var o=n(0x976699e5e0db4),a=i(o),s=n(0xd0219df97eb97),l=i(s);e.exports=function(){a.default.PluginManager.add("wpcom/touchscrolltoolbar",r)}},0x5ec133229a05a:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSizer=t.default=void 0;var r=n(8945095351553858),o=i(r);t.default=o.default,t.AutoSizer=o.default},0x60bab91c49f7e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h);t.default=function(e){var t,n,i=e.displayName||e.name||"";return n=t=function(t){function n(){(0,u.default)(this,n);var e=(0,f.default)(this,(n.__proto__||(0,s.default)(n)).apply(this,arguments));return e.boundSetWrapperState=e.setWrapperState.bind(e),e.state={wrapper:null},e}return(0,m.default)(n,t),(0,c.default)(n,[{key:"setWrapperState",value:function(e){e&&(this.setState({wrapper:e}),this.disconnectObserver(),this.observer=new MutationObserver(this.props.onResize),this.observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.disconnectObserver()}},{key:"disconnectObserver",value:function(){this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var t=void 0;return this.state.wrapper&&(t={width:this.state.wrapper.clientWidth}),v.default.createElement("div",{ref:this.boundSetWrapperState},v.default.createElement(e,(0,o.default)({},this.props,t)))}}]),n}(b.default),t.displayName="ResizableView("+i+")",t.propTypes={onResize:g.PropTypes.func},t.defaultProps={onResize:function(){}},n};var g=n(5896763357248615),v=i(g),y=n(0x7663b9a0c03e),b=i(y);e.exports=t.default},0x6252b2f7ca0c8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(477028190620861),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(8907951692841672),v=i(g),y=n(0x45d24eaab7654),b=i(y),_=n(5020179656051692),x=i(_),C=n(8640881565075096),E=i(C),w=n(5896763357248615),T=i(w),S=n(6280957995252369),P=n(7572476330282672),k=n(7127988529575974),I=i(k),N=n(0xea09f50d0ac3b),M=i(N),R=n(6080475287248452),D=i(R),A=n(6940362979991673),O=i(A),L=n(5862851293117563),B=i(L),F=n(7455782401390732),H=i(F),z=n(0xbff38eca5e16d),U=i(z),V=n(0x965a288d34003),j=i(V),W=n(0x3e2c4fba474d9),q=i(W),G=n(0x4505d8ebb162c),$=i(G),K=n(7123518912576379),Y=i(K),X=n(0xe6bd8709d6a3c),Q=n(0x3e6242fdbac66),J=n(0xf4d0801157df9),Z=n(0xe02daa8244860),ee=n(4725747483787960),te=function(e){function t(e){(0,u.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.onSearch=function(e){n.setState({searchTerm:e})},n.closeDialog=function(){n.state.saving||n.props.onClose()},n.onParentChange=function(e){n.setState({selectedParent:[e.ID],isTopLevel:!1},n.isValid)},n.onTopLevelChange=function(){n.setState({isTopLevel:!n.state.isTopLevel,selectedParent:[]},n.isValid)},n.onNameChange=function(e){n.setState({name:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.validateInput=function(e){13===e.keyCode?n.saveTerm():n.isValid()},n.saveTerm=function(){var e=n.getFormValues();if(n.isValid()&&!n.state.saving){n.setState({saving:!0});var t=n.props,i=t.siteId,r=t.taxonomy,o={mc:"edited_"+r,ga:"Edited "+r},a=!n.props.term,s=a?n.props.addTerm(i,r,e):n.props.updateTerm(i,r,n.props.term.ID,n.props.term.slug,e);a&&(o.mc="created_"+r,o.ga="Created New "+r),n.props.bumpStat("taxonomy_manager",o.mc),n.props.recordGoogleEvent("Taxonomy Manager",o.ga),s.then(function(e){n.setState({saving:!1}),n.props.onSuccess(e),n.closeDialog()})}},n.state=n.constructor.initialState,n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"init",value:function(e){if(!e.term)return void this.setState(this.constructor.initialState);var t=e.term,n=t.name,i=t.description,r=t.parent,o=void 0!==r&&r;this.setState((0,v.default)({},this.constructor.initialState,{name:n,description:i,isTopLevel:!o,selectedParent:o?[o]:[]}))}},{key:"componentWillReceiveProps",value:function(e){(this.props.term!==e.term||this.props.showDialog!==e.showDialog&&e.showDialog)&&this.init(e)}},{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"getFormValues",value:function(){var e=this.state.name.trim(),t={name:e};if(this.props.isHierarchical&&(t.parent=this.state.selectedParent.length?this.state.selectedParent[0]:0),this.props.showDescriptionInput){var n=this.state.description.trim();t.description=n}return t}},{key:"isValid",value:function e(){var t=this,n={},i=this.getFormValues();i.name.length||(n.name=this.props.translate("Name required",{textOnly:!0}));var r=i.name.toLowerCase(),a=(0,x.default)(this.props.terms,function(e){return e.name.toLowerCase()===r&&(!t.props.term||e.ID!==t.props.term.ID)});a&&(n.name=this.props.translate("Name already exists",{context:"Terms: Add term error message - duplicate term name exists",textOnly:!0})),!this.props.isHierarchical||this.state.isTopLevel||i.parent||(n.parent=this.props.translate('Parent item required when "Top level" is unchecked',{context:"Terms: Add term error message",textOnly:!0}));var e=!(0,o.default)(n).length;return this.setState({errors:n,isValid:e}),e}},{key:"renderParentSelector",value:function(){var e=this.props,t=e.labels,n=e.siteId,i=e.taxonomy,r=e.translate,o=e.terms,a=this.state,s=a.searchTerm,l=a.selectedParent,u={};s&&s.length&&(u.search=s);var d=(0,E.default)(this.props.term,"ID"),c=!!this.state.errors.parent;return d&&o&&1===o.length?null:T.default.createElement($.default,null,T.default.createElement(q.default,null,t.parent_item),T.default.createElement(j.default,null,T.default.createElement(U.default,{ref:"topLevel",checked:this.state.isTopLevel,onChange:this.onTopLevelChange}),T.default.createElement("span",null,r("Top level",{context:"Terms: New term being created is top level"}))),T.default.createElement(M.default,{siteId:n,taxonomy:i,isError:c,onSearch:this.onSearch,onChange:this.onParentChange,query:u,selected:l,hideTermAndChildren:d}),c&&T.default.createElement(D.default,{isError:!0,text:this.state.errors.parent}))}},{key:"render",value:function(){var e=this.props,t=e.isHierarchical,n=e.labels,i=e.term,r=e.translate,o=e.showDescriptionInput,a=e.showDialog,s=this.state,l=s.name,u=s.description,d=!i,c=r(d?"Add":"Update"),p=[{action:"cancel",label:r("Cancel")},{action:d?"add":"update",label:this.state.saving?r("Saving…"):c,isPrimary:!0,disabled:!this.state.isValid||this.state.saving,onClick:this.saveTerm}],f=!!this.state.errors.name;return T.default.createElement(I.default,{autoFocus:!1,isVisible:a,buttons:p,onClose:this.closeDialog,additionalClassNames:"term-form-dialog"},T.default.createElement(H.default,null,d?n.add_new_item:n.edit_item),T.default.createElement($.default,null,T.default.createElement(B.default,{autoFocus:a&&!Y.default.isMobile(),placeholder:n.new_item_name,ref:"termName",isError:f,onKeyUp:this.validateInput,value:l,onChange:this.onNameChange}),f&&T.default.createElement(D.default,{isError:!0,text:this.state.errors.name})),o&&T.default.createElement($.default,null,T.default.createElement(q.default,null,r("Description",{context:"Terms: Term description label"})),T.default.createElement(O.default,{ref:"termDescription",onKeyUp:this.validateInput,value:u,onChange:this.onDescriptionChange})),t&&this.renderParentSelector())}}]),t}(w.Component);te.initialState={description:"",name:"",selectedParent:[],isTopLevel:!0,isValid:!1,errors:{},saving:!1},te.propTypes={labels:w.PropTypes.object,onClose:w.PropTypes.func,onSuccess:w.PropTypes.func,postType:w.PropTypes.string,showDescriptionInput:w.PropTypes.bool,showDialog:w.PropTypes.bool,siteId:w.PropTypes.number,taxonomy:w.PropTypes.string,term:w.PropTypes.object,terms:w.PropTypes.array,translate:w.PropTypes.func,recordGoogleEvent:w.PropTypes.func,bumpStat:w.PropTypes.func},te.defaultProps={onClose:b.default,onSuccess:b.default,showDescriptionInput:!1,showDialog:!1},t.default=(0,S.connect)(function(e,t){var n=t.taxonomy,i=t.postType,r=(0,X.getSelectedSiteId)(e),o=(0,Q.getPostTypeTaxonomy)(e,r,i,n),a=(0,E.default)(o,"labels",{}),s=(0,E.default)(o,"hierarchical",!1);return{terms:(0,J.getTerms)(e,r,n),isHierarchical:s,labels:a,siteId:r}},{addTerm:Z.addTerm,updateTerm:Z.updateTerm,recordGoogleEvent:ee.recordGoogleEvent,bumpStat:ee.bumpStat})((0,P.localize)(te)),e.exports=t.default},0x6496f72648ef8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(872100829608442),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(8640881565075096),b=i(y),_=n(5921998412115101),x=i(_),C=n(5896763357248615),E=i(C),w=n(7452954268806788),T=i(w),S=n(7572476330282672),P=n(623310115397031),k=i(P),I=n(7380496197234269),N=i(I),M=n(7613110173109069),R=i(M),D=n(0xe86527ac8396b),A=i(D),O=n(6940362979991673),L=i(O),B=n(5862851293117563),F=i(B),H=n(8959178503420160),z=i(H),U=n(6753482749867647),V=i(U),j=function(e){function t(){(0,c.default)(this,t);var e=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments));return e.bumpTitleStat=function(){k.default.ga.recordEvent("Media","Changed Item Title"),k.default.mc.bumpStat("calypso_media_edit_details","title")},e.bumpAltStat=function(){k.default.ga.recordEvent("Media","Changed Image Alt"),k.default.mc.bumpStat("calypso_media_edit_details","alt")},e.bumpCaptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Caption"),k.default.mc.bumpStat("calypso_media_edit_details","caption")},e.bumpDescriptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Description"),k.default.mc.bumpStat("calypso_media_edit_details","description")},e.setFieldValue=function(t){var n=t.target,i=(0,s.default)({ID:e.props.item.ID},(0,b.default)(e.state,"modifiedItem",{}),(0,o.default)({},n.name,n.value));e.setState({modifiedItem:i}),e.persistChange()},e.scrollToShowVisibleDropdown=function(e){e.open&&"scrollIntoView"in window.Element.prototype&&x.default.findDOMNode(e.target).scrollIntoView()},e.persistChange=(0,T.default)(e.persistChange,1e3),e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.item&&e.item&&e.item.ID!==this.props.item.ID&&(this.setState({modifiedItem:null}),this.persistChange.cancel())}},{key:"isMimePrefix",value:function(e){return N.default.getMimePrefix(this.props.item)===e}},{key:"persistChange",value:function(){this.props.site&&this.state.modifiedItem&&R.default.update(this.props.site.ID,this.state.modifiedItem)}},{key:"getItemValue",value:function(e){var t=(0,b.default)(this.state,["modifiedItem",e],null);return null!==t?t:this.props.item?this.props.item[e]:void 0}},{key:"renderImageAltText",value:function(){return this.isMimePrefix("image")?E.default.createElement(V.default,{legend:this.props.translate("Alt text")},E.default.createElement(z.default,{onNewValue:this.bumpAltStat},E.default.createElement(F.default,{name:"alt",value:this.getItemValue("alt"),onChange:this.setFieldValue}))):null}},{key:"render",value:function(){var e=this.props.translate;return E.default.createElement("div",{className:"editor-media-modal-detail__fields"},E.default.createElement(V.default,{legend:e("Title")},E.default.createElement(z.default,{onNewValue:this.bumpTitleStat},E.default.createElement(F.default,{name:"title",value:this.getItemValue("title"),onChange:this.setFieldValue}))),E.default.createElement(V.default,{legend:e("Caption")},E.default.createElement(z.default,{onNewValue:this.bumpCaptionStat},E.default.createElement(L.default,{name:"caption",value:this.getItemValue("caption"),onChange:this.setFieldValue}))),this.renderImageAltText(),E.default.createElement(V.default,{legend:e("Description")},E.default.createElement(z.default,{onNewValue:this.bumpDescriptionStat},E.default.createElement(L.default,{name:"description",value:this.getItemValue("description"),onChange:this.setFieldValue}))),E.default.createElement(V.default,{legend:e("URL")},E.default.createElement(A.default,{value:N.default.url(this.props.item)})))}}]),t}(C.Component);j.propTypes={site:C.PropTypes.object,item:C.PropTypes.object},t.default=(0,S.localize)(j),e.exports=t.default},0x6925a2279f1f8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5921998412115101),s=n(5896763357248615),l=n(7452954268806788),u=n(0x8ae3881d6e8c2),d=n(8619793617189177),c=n(7904991244547051),p=n(7123518912576379),f=480,h=s.createClass({displayName:"NavTabs",propTypes:{selectedText:s.PropTypes.string,selectedCount:s.PropTypes.number,label:s.PropTypes.string,hasSiblingControls:s.PropTypes.bool},getDefaultProps:function(){return{hasSiblingControls:!1}},getInitialState:function(){return{isDropdown:!1}},componentDidMount:function(){this.setDropdown(),this.debouncedAfterResize=l(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)},componentWillReceiveProps:function(){this.setDropdown()},componentWillUnmount:function(){window.removeEventListener("resize",this.debouncedAfterResize)},render:function(){var e=s.Children.map(this.props.children,function(e,t){return e&&s.cloneElement(e,{ref:"tab-"+t})}),t=u({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),n=p.getWindowInnerWidth();return s.createElement("div",{className:"section-nav-group",ref:"navGroup"
},s.createElement("div",{className:t},this.props.label&&s.createElement("h6",{className:"section-nav-group__label"},this.props.label),s.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&n>f&&this.getDropdown()))},getTabWidths:function(){var e=0;s.Children.forEach(this.props.children,function(t,n){if(t){var i=a.findDOMNode(this.refs["tab-"+n]).offsetWidth;e+=i}}.bind(this)),this.tabsWidth=e},getDropdown:function(){var e=s.Children.map(this.props.children,function(e,t){return e?s.createElement(c,(0,o.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return s.createElement(d,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},e)},setDropdown:function(){var e;if(window.innerWidth>f){if(!this.refs.navGroup)return;e=this.refs.navGroup.offsetWidth,this.tabsWidth||this.getTabWidths(),e<=this.tabsWidth&&!this.state.isDropdown?this.setState({isDropdown:!0}):e>this.tabsWidth&&this.state.isDropdown&&this.setState({isDropdown:!1})}else window.innerWidth<=f&&this.state.isDropdown&&this.setState({isDropdown:!1})},keyHandler:function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}}});e.exports=h},0x69c14441898c8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e||"default";return s[t]||(s[t]=new a.default(t)),s[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(4730164382473449),a=i(o),s={};r._reset=function(){s={}},e.exports=t.default},0x6a500e58bc5b7:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(0xccbf267b4a70b),u=i(l),d=n(5896763357248615),c=n(0x8ae3881d6e8c2),p=n(0x45d24eaab7654),f=n(8907951692841672),h=n(5059747709250767),m=n(0xf0f4288728240),g=n(8729102622276094),v=n(0xa505046780b0c),y=n(6163540437949244),b=n(6736806188585883),_=n(0xeb71b3cc2eee),x=n(6859969075607055),C=n(7380496197234269);t.default=d.createClass({displayName:"MediaLibraryListItem",propTypes:{media:d.PropTypes.object,scale:d.PropTypes.number.isRequired,maxImageWidth:d.PropTypes.number,photon:d.PropTypes.bool,showGalleryHelp:d.PropTypes.bool,selectedIndex:d.PropTypes.number,onToggle:d.PropTypes.func,onEditItem:d.PropTypes.func,style:d.PropTypes.object},getDefaultProps:function(){return{maxImageWidth:450,photon:!0,selectedIndex:-1,onToggle:p,onEditItem:p}},shouldComponentUpdate:function(e){return!(e.media===this.props.media&&e.scale===this.props.scale&&e.maxImageWidth===this.props.maxImageWidth&&e.photon===this.props.photon&&e.selectedIndex===this.props.selectedIndex&&m(e.style,this.props.style))},clickItem:function(e){this.props.onToggle(this.props.media,e.shiftKey)},renderItem:function(){var e;if(this.props.media){switch(C.getMimePrefix(this.props.media)){case"image":e=y;break;case"video":e=b;break;case"audio":e=_;break;default:e=x}return d.createElement(e,this.props)}},renderSpinner:function(){if(this.props.media&&this.props.media.transient)return d.createElement(g,{className:"media-library__list-item-spinner"})},render:function(){var e,t,n,i;return e=c("media-library__list-item",{"is-placeholder":!this.props.media,"is-selected":-1!==this.props.selectedIndex,"is-transient":this.props.media&&this.props.media.transient,"is-small":this.props.scale<=.125}),t=h(this.props,(0,s.default)(this.constructor.propTypes)),n=f({width:100*this.props.scale+"%"},this.props.style),this.props.media&&(i=this.props.media.file),-1!==this.props.selectedIndex&&(t["data-selected-number"]=this.props.selectedIndex+1),d.createElement("div",(0,o.default)({className:e,style:n,onClick:this.clickItem},t),d.createElement("span",{className:"media-library__list-item-selected-icon"},d.createElement(v,{icon:"checkmark",size:20})),d.createElement("figure",{className:"media-library__list-item-figure",title:i},this.renderItem(),this.renderSpinner(),this.props.showGalleryHelp&&d.createElement(u.default,null)))}}),e.exports=t.default},0x7015fb554765d:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xf0f4288728240),s=i(a),l=n(0x57d0987682136),u=i(l),d=n(975622464187034),c=i(d),p=n(7613110173109069),f=i(p),h=n(7380496197234269),m=i(h);t.default=o.default.createClass({displayName:"EditorMediaModalGalleryDropZone",propTypes:{site:r.PropTypes.object,onInvalidItemAdded:r.PropTypes.func},getDefaultProps:function(){return{onInvalidItemAdded:function(){}}},filterDroppedImagesSelected:function(){var e=this.props.site;if(e){var t=c.default.getAll(e.ID),n=m.default.filterItemsByMimePrefix(t,"image");(0,s.default)(t,n)||(f.default.setLibrarySelectedItems(e.ID,n),this.props.onInvalidItemAdded())}},render:function(){return o.default.createElement(u.default,{site:this.props.site,onAddMedia:this.filterDroppedImagesSelected,fullScreen:!1})}}),e.exports=t.default},0x7023ddbae4022:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(4883949902648912),o=i(r),a=n(0x90ba166cd016c),s=n(8849175740165922),l=n(0x80279a28701b);e.exports=function(){a("/post",l.pressThis,s.siteSelection,s.sites),a("/post/new",function(){return a.redirect("/post")}),a("/post/:site?/:post?",s.siteSelection,s.fetchJetpackSettings,l.post),a.exit("/post/:site?/:post?",l.exitPost),a("/page",s.siteSelection,s.sites),a("/page/new",function(){return a.redirect("/page")}),a("/page/:site?/:post?",s.siteSelection,s.fetchJetpackSettings,l.post),a.exit("/page/:site?/:post?",l.exitPost),o.default.isEnabled("manage/custom-post-types")&&(a("/edit/:type",s.siteSelection,s.sites),a("/edit/:type/new",function(e){return a.redirect("/edit/"+e.params.type)}),a("/edit/:type/:site?/:post?",s.siteSelection,s.fetchJetpackSettings,l.post),a.exit("/edit/:type/:site?/:post?",l.exitPost))}},0x705c91d3878aa:function(e,t,n){"use strict";function i(e){var t;e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){r.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("WP_Help",function(){function n(){e.focus(),i("hide")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";r.render(o.createElement(s,{showDialog:"show"===e,onClose:n,macosx:a.Env.mac}),t)}i("show")})}var r=n(5921998412115101),o=n(5896763357248615),a=n(0x976699e5e0db4),s=n(6670453630470329);e.exports=function(){a.PluginManager.add("wpcom/help",i)}},0x7085cb51ec618:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(5896763357248615),v=i(g),y=n(0x8ae3881d6e8c2),b=i(y),_=n(6385002307104056),x=i(_),C=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){(0,x.default)(this.refs.textarea)}},{key:"componentWillUnmount",value:function(){x.default.destroy(this.refs.textarea)}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.resize()}},{key:"resize",value:function(){x.default.update(this.refs.textarea)}},{key:"render",value:function(){var e=(0,b.default)("textarea-autosize",this.props.className);return v.default.createElement("textarea",(0,o.default)({ref:"textarea"},this.props,{className:e}))}}]),t}(g.Component);C.propTypes={className:g.PropTypes.string},t.default=C,e.exports=t.default},0x7216d6618ce83:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","charmap-dialog-container"),e.getContainer().appendChild(t)}),e.on("remove",function(){a.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("Wpcom_CharMap",function(){function n(){e.focus(),i("hide")}function i(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";a.default.render(l.default.createElement(p.default,{showDialog:"show"===i,onClose:n,editor:e}),t)}i("show")})}var o=n(5921998412115101),a=i(o),s=n(5896763357248615),l=i(s),u=n(0x976699e5e0db4),d=i(u),c=n(0x9ec567b3debeb),p=i(c);e.exports=function(){d.default.PluginManager.add("wpcom/charmap",r)}},0x730b76f907111:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(0xea09f50d0ac3b),u=i(l);t.default=o.default.createClass({displayName:"TermTreeSelector",propTypes:{multiple:r.PropTypes.bool,className:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,selected:r.PropTypes.array,createLink:r.PropTypes.string,analyticsPrefix:r.PropTypes.string,taxonomy:r.PropTypes.string,height:r.PropTypes.number,compact:r.PropTypes.bool},getDefaultProps:function(){return{analyticsPrefix:"Category Selector",selected:[],taxonomy:"category",onChange:function(){},height:300}},getInitialState:function(){return{search:""}},onSearch:function(e){e!==this.state.search&&this.setState({search:e})},componentWillReceiveProps:function(e){e.taxonomy!==this.props.taxonomy&&this.setState({search:""})},render:function(){var e=this.props,t=e.className,n=e.taxonomy,i=e.onChange,r=e.selected,a=e.createLink,l=e.multiple,d=e.height,c=e.compact,p=(0,s.default)(t),f=this.state.search,h={};return f&&f.length&&(h.search=f),o.default.createElement("div",{className:p,ref:"wrapper"},o.default.createElement(u.default,{taxonomy:n,onSearch:this.onSearch,onChange:i,query:h,selected:r,createLink:a,multiple:l,height:d,compact:c}))}}),e.exports=t.default},0x73518efed105e:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(0xa505046780b0c);e.exports=i.createClass({displayName:"MediaLibraryListItemFileDetails",propTypes:{media:i.PropTypes.object,scale:i.PropTypes.number,icon:i.PropTypes.string},getDefaultProps:function(){return{icon:"pages"}},render:function(){return i.createElement("div",{className:"media-library__list-item-file-details media-library__list-item-centered"},i.createElement("div",{className:"media-library__list-item-icon"},i.createElement(r,{icon:this.props.icon})),i.createElement("div",{className:"media-library__list-item-file-name",style:{fontSize:12*(1+this.props.scale)}},this.props.media.title),i.createElement("hr",{className:"media-library__list-item-details-separator"}),i.createElement("div",{className:"media-library__list-item-file-extension",style:{fontSize:9*(1+this.props.scale)}},(this.props.media.extension||"").toUpperCase()))}})},0x7577664156f44:function(e,t){"use strict";function n(e){if(e&&"string"==typeof e){e=e.replace(/\.\.\./g," "),e=e.replace(/<.[^<>]*?>/g," "),e=e.replace(/&nbsp;|&#160;/gi," "),e=e.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3"),e=e.replace(/&.+?;/g," "),e=e.replace(/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g,"");var t=e.match(/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);if(t)return t.length}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default={countWords:n},e.exports=t.default},0x77b31439ff115:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,i=e.typeSlug,r=e.type,o=e.globalId,a=e.isSettings,s=void 0;"page"===i?s=a?t("Page Settings"):t("Page",{context:"noun"}):"post"===i?s=a?t("Post Settings"):t("Post",{context:"noun"}):r?(s=a?t("%s: Settings",{args:r.labels.singular_name,comment:"type refers to a post type's singular noun"}):r.labels.singular_name,s=(0,b.decodeEntities)(s)):s=t("Loading…");var u=(0,d.default)("editor-post-type",{"is-loading":!s});return l.default.createElement("span",{className:u},n&&"page"!==i&&"post"!==i&&l.default.createElement(y.default,{siteId:n}),s," ",l.default.createElement(x.default,{globalId:o,showAll:!0,showIcon:!1}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(872100829608442),a=i(o),s=n(5896763357248615),l=i(s),u=n(0x8ae3881d6e8c2),d=i(u),c=n(6280957995252369),p=n(7572476330282672),f=n(6007716273106560),h=n(0xe6bd8709d6a3c),m=n(5523398591803755),g=n(7284660551555503),v=n(0xc98cd4e82fe0b),y=i(v),b=n(6729227089147156),_=n(7871831694427923),x=i(_);r.propTypes={translate:s.PropTypes.func,siteId:s.PropTypes.number,typeSlug:s.PropTypes.string,type:s.PropTypes.object,globalId:s.PropTypes.string,isSettings:s.PropTypes.bool},t.default=(0,c.connect)(function(e){var t={},n=(0,h.getSelectedSite)(e);if(!n)return t;t.siteId=n.ID;var i=(0,f.getEditedPost)(e,n.ID,(0,m.getEditorPostId)(e));return i?(0,a.default)(t,{typeSlug:i.type,type:(0,g.getPostType)(e,n.ID,i.type),globalId:i.global_ID}):t})((0,p.localize)(r)),e.exports=t.default},0x7806e19fe6b42:function(e,t,n){function i(e,t,n){t=a(t,e)?[t]:r(t);var i=-1,l=t.length;for(l||(e=void 0,l=1);++i<l;){var u=null==e?void 0:e[s(t[i])];void 0===u&&(i=l,u=n),e=o(u)?u.call(e):u}return e}var r=n(7844396834262076),o=n(0x729562806a912),a=n(0xc059b38483f2c),s=n(0xa7aa8251b86be);e.exports=i},0x7ba9d7577dd1e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}t.__esModule=!0;var s=n(8804750917500280),l=i(s),u=n(8650050539059290),d=i(u),c=n(7773182142709690),p=i(c),f=function(e){function t(n,i){r(this,t),e.call(this),this.resolveOptions(i),this.listenClick(n)}return o(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=p.default(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(e.target),target:this.target(e.target),text:this.text(e.target),trigger:e.target,emitter:this})},t.prototype.defaultAction=function(e){return a("action",e)},t.prototype.defaultTarget=function(e){var t=a("target",e);if(t)return document.querySelector(t)},t.prototype.defaultText=function(e){return a("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(d.default);t.default=f,e.exports=t.default},0x7f57b3c05d9db:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(872100829608442),o=i(r),a=n(5896763357248615),s=i(a),l=n(7613110173109069),u=i(l),d=n(5862851293117563),c=i(d);t.default=s.default.createClass({displayName:"EditorMediaModalGalleryCaption",propTypes:{siteId:a.PropTypes.number,item:a.PropTypes.object},getInitialState:function(){return{caption:null}},getValue:function(){return null!==this.state.caption?this.state.caption:this.props.item?this.props.item.caption:void 0},setCaption:function(e){this.setState({caption:e.target.value})},saveCaption:function(){var e=this.props,t=e.siteId,n=e.item;if(t&&n){var i=this.getValue();n&&i===n.caption||u.default.update(t,(0,o.default)({},n,{caption:i}))}},render:function(){return s.default.createElement(c.default,{value:this.getValue(),placeholder:this.translate("Caption this image…"),onChange:this.setCaption,onBlur:this.saveCaption,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__caption"})}}),e.exports=t.default},0x8066fd8831e69:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(5896763357248615),u=n(5973119050011126),d=n(619801137403500),c=n(8907951692841672),p=n(4675954658966525)("calypso:forms:sortable-list"),f=n(0x8ae3881d6e8c2),h=n(4740245423068679);e.exports=l.createClass({displayName:"SortableList",propTypes:{direction:l.PropTypes.oneOf(["horizontal","vertical"]),allowDrag:l.PropTypes.bool,onChange:l.PropTypes.func},getInitialState:function(){return{activeIndex:null,activeOrder:null,position:null}},getDefaultProps:function(){return{direction:"horizontal",allowDrag:!0,onChange:function(){}}},componentWillMount:function(){p("Mounting "+this.constructor.displayName+" React component.")},componentDidMount:function(){document.addEventListener("mousemove",this.onMouseMove)},componentWillUnmount:function(){document.removeEventListener("mousemove",this.onMouseMove)},getPositionForCursorElement:function(e,t){return{top:t.clientY-e.clientHeight/2,left:t.clientX-e.clientWidth/2}},compareCursorVerticalToElement:function(e,t){var n=e.getBoundingClientRect();return t.clientY<n.top?-1:t.clientY>n.bottom?1:0},isCursorBeyondElementThreshold:function(e,t,n,i){var r=e.getBoundingClientRect();switch(t){case"top":return i.clientY<=r.top+r.height/2;case"right":return i.clientX>=r.left+r.width/2&&("top"===n||i.clientY>=r.top)&&("bottom"===n||i.clientY<=r.bottom);case"bottom":return i.clientY>=r.top+r.height/2;case"left":return i.clientX<=r.left+r.width/2&&("top"===n||i.clientY>=r.top)&&("bottom"===n||i.clientY<=r.bottom);default:return!1}},getAdjustedElementIndex:function(e){return this.state.activeOrder?this.state.activeOrder[e]:e},getCursorElementIndex:function(e){var t,n=this.compareCursorVerticalToElement(this.refs.list,e),i=this.getAdjustedElementIndex(this.state.activeIndex),r=this.refs["wrap-shadow-"+this.state.activeIndex].getBoundingClientRect();return t=d(this.props.children,function(t,o){var a,s,l;return o!==this.state.activeIndex&&(s=this.getAdjustedElementIndex(o),"horizontal"===this.props.direction&&(1===n&&this.refs["wrap-"+o].getBoundingClientRect().top>=r.top?l="bottom":-1===n&&this.refs["wrap-"+o].getBoundingClientRect().bottom<=r.bottom&&(l="top")),s<i?a=this.isCursorBeyondElementThreshold(this.refs["wrap-"+o],"horizontal"===this.props.direction?"left":"top",l,e):s>i&&(a=a||this.isCursorBeyondElementThreshold(this.refs["wrap-"+o],"horizontal"===this.props.direction?"right":"bottom",l,e)),a)}.bind(this)),this.getAdjustedElementIndex(t)},moveItem:function(e){var t="previous"===e?-1:1,n=(0,s.default)(this.props.children).map(Number);n[this.state.activeIndex+t]=this.state.activeIndex,n[this.state.activeIndex]=this.state.activeIndex+t,this.props.onChange(n),this.setState({activeIndex:n[this.state.activeIndex]})},onMouseDown:function(e,t){this.setState({activeIndex:e,position:this.getPositionForCursorElement(t.currentTarget.firstChild,t)})},onMouseMove:function(e){var t,n;if(null!==this.state.activeIndex&&this.props.allowDrag&&!h.hasTouch()){if(t=this.state.activeOrder,n=this.getCursorElementIndex(e),n>=0)if(this.state.activeIndex===n)t=null;else{t=(0,s.default)(this.props.children).map(Number);for(var i=0,r=t.length;i<r;i++)i>=n&&i<this.state.activeIndex?t[i]=i+1:i<=n&&i>this.state.activeIndex&&(t[i]=i-1);t[this.state.activeIndex]=n}this.setState({position:this.getPositionForCursorElement(this.refs["wrap-"+this.state.activeIndex].firstChild,e),activeOrder:t})}},onMouseUp:function(){this.state.activeOrder&&this.props.onChange(this.state.activeOrder),this.setState({activeIndex:null,activeOrder:null,position:null})},onClick:function(e){this.setState({activeIndex:e})},getOrderedListItemElements:function(){return l.Children.map(this.props.children,function(e,t){var n,i=this.state.activeIndex===t,r=this.props.allowDrag&&!h.hasTouch(),a=r?["onMouseDown","onMouseUp"]:["onClick"],s={order:this.getAdjustedElementIndex(t)},d=f({"sortable-list__item":!0,"is-active":i,"is-draggable":r});return a=u(a.map(function(e){return[e,this[e].bind(null,t)]},this)),i&&c(s,this.state.position),n=l.createElement("li",(0,o.default)({ref:"wrap-"+t,key:"wrap-"+t},a,{className:d,style:s}),e),i&&r?[l.createElement("li",{ref:"wrap-shadow-"+t,key:"wrap-shadow-"+t,className:"sortable-list__item is-shadow",style:s},e),n]:n},this)},getNavigationElement:function(){if(!this.props.allowDrag||h.hasTouch())return l.createElement("div",{className:"sortable-list__navigation"},l.createElement("button",{type:"button",onClick:this.moveItem.bind(null,"previous"),className:"sortable-list__navigation-button is-previous",disabled:null===this.state.activeIndex||0===this.state.activeIndex},l.createElement("span",{className:"screen-reader-text"},this.translate("Move previous")),l.createElement("span",{className:"noticon noticon-expand"})),l.createElement("button",{type:"button",onClick:this.moveItem.bind(null,"next"),className:"sortable-list__navigation-button is-next",disabled:null===this.state.activeIndex||this.state.activeIndex===this.props.children.length-1},l.createElement("span",{className:"screen-reader-text"},this.translate("Move next")),l.createElement("span",{className:"noticon noticon-collapse"})))},render:function(){var e=f({"sortable-list":!0,"is-horizontal":"horizontal"===this.props.direction,"is-vertical":"vertical"===this.props.direction});return l.createElement("div",{className:e},l.createElement("ol",{ref:"list",className:"sortable-list__list"},this.getOrderedListItemElements()),this.getNavigationElement())}})},0x808cb7ddb86b1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(95905449861643),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(8215864893813270),m=i(h),g=n(5369032381290393),v=i(g),y=n(842421528365869),b=i(y),_=n(6269536571656272),x=i(_),C=n(6694397819955462),E=i(C),w=n(8323279533345669),T=i(w),S=n(0xfc9c51a29abb6),P=i(S),k=n(7418474439241154),I=i(k),N=n(0xbe22cfc549891),M=i(N),R=(0,I.default)(),D=function(e){function t(){(0,u.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.sitesListener=e.updateSite.bind(e),e}return(0,v.default)(t,e),(0,c.default)(t,[{key:"onChange",value:function(){this.emit("change"),this.fetchSiteEmbeds()}},{key:"updateSite",value:function(){var e=(R.getSelectedSite()||{}).ID;this.hasOwnProperty("siteId")?this.siteId!==e&&(this.siteId=e,this.onChange()):(this.siteId=e,this.fetchSiteEmbeds())}},{key:"addListener",value:function(e,n){(0,m.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"addListener",this).call(this,e,n),"change"===e&&1===this.listeners(e).length&&(R.addListener(e,this.sitesListener),this.embedsListListener=E.default.addListener(this.onChange.bind(this)),this.embedsListener=T.default.addListener(this.onChange.bind(this)),this.updateSite())}},{key:"removeListener",value:function(e,n){(0,m.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"removeListener",this).call(this,e,n),"change"!==e||this.listeners(e).length||(R.removeListener(e,this.sitesListener),this.embedsListListener&&this.embedsListListener.remove(),this.embedsListener&&this.embedsListener.remove())}},{key:"fetchSiteEmbeds",value:function(){this.siteId&&!E.default.get(this.siteId)&&P.default.fetch(this.siteId)}},{key:"fetchEmbed",value:function(e){this.siteId&&!T.default.get(e).status&&P.default.fetch(this.siteId,e)}},{key:"match",value:function(e){var t=this;if(this.siteId){var n=E.default.get(this.siteId);if(n&&"LOADED"===n.status)for(var i=/(^|<p>)(https?:\/\/[^\s"]+?)(<\/p>\s*|$)/gi,r=void 0,a=function(){var e=r[2],i=n.embeds.some(function(t){return t.test(e)});if(!i)return"continue";var o=T.default.get(e);return o.body?{v:{index:r.index+r[1].length,content:e}}:((0,x.default)(function(){return t.fetchEmbed(e)}),"continue")};r=i.exec(e);){var s=a();switch(s){case"continue":continue;default:if("object"===("undefined"==typeof s?"undefined":(0,o.default)(s)))return s.v}}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"getComponent",value:function(){return M.default}}]),t}(b.default);t.default=D,e.exports=t.default},0x8233b1b13eca7:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorNotice=void 0;var r=n(5630966280090368),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(7572476330282672),_=n(709335331861514),x=i(_),C=n(5708247199348607),E=i(C),w=n(0xe6bd8709d6a3c),T=n(5523398591803755),S=n(6007716273106560),P=n(7284660551555503),k=n(0xc98cd4e82fe0b),I=i(k),N=n(301929001539288),M=n(7123518912576379),R=n(0x8f1527a7f80c8),D=t.EditorNotice=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){(0,M.isMobile)()&&(!this.props.message&&e.message||!this.props.error&&e.error)&&this.props.setLayoutFocus("content")}},{key:"getErrorMessage",value:function(){var e=this.props,t=e.translate,n=e.error;if(n)switch(n.message){case"NO_CONTENT":return t("You haven't written anything yet!")}}},{key:"getText",value:function(e){var t=this.props,n=t.translate,i=t.type,r=t.typeObject,o=t.site;switch(e){case"warnPublishDateChange":return n("Are you sure about that? If you change the date, existing links to your post will stop working.");case"publishFailure":return n("page"===i?"Publishing of page failed.":"Publishing of post failed.");case"saveFailure":return n("Saving of draft failed.");case"trashFailure":return n("page"===i?"Trashing of page failed.":"Trashing of post failed.");case"published":return o?"page"===i?n("Page published on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title),a:v.default.createElement("a",{href:"/page/"+o.slug})},comment:"Editor: Message displayed when a page is published, with a link to the site it was published on."}):n("Post published on {{siteLink/}}!",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title)},comment:"Editor: Message displayed when a post is published, with a link to the site it was published on."}):n("page"===i?"Page published!":"Post published!");case"scheduled":return o?"page"===i?n("Page scheduled on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title),a:v.default.createElement("a",{href:"/page/"+o.slug})},comment:"Editor: Message displayed when a page is scheduled, with a link to the site it was scheduled on."}):n("Post scheduled on {{siteLink/}}!",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title)},comment:"Editor: Message displayed when a post is scheduled, with a link to the site it was scheduled on."}):n("page"===i?"Page scheduled!":"Post scheduled!");case"publishedPrivately":return o?"page"===i?n("Page privately published on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title),a:v.default.createElement("a",{href:"/page/"+o.slug})},comment:"Editor: Message displayed when a page is published privately, with a link to the site it was published on."}):n("Post privately published on {{siteLink/}}!",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title)},comment:"Editor: Message displayed when a post is published privately, with a link to the site it was published on."}):n("page"===i?"Page privately published!":"Post privately published!");case"view":return"page"===i?n("View Page"):"post"!==i&&r?r.labels.view_item:n("View Post");case"preview":return n("View Preview");case"updated":return o?"page"===i?n("Page updated on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title),a:v.default.createElement("a",{href:"/page/"+o.slug})},comment:"Editor: Message displayed when a page is updated, with a link to the site it was updated on."}):n("Post updated on {{siteLink/}}!",{components:{siteLink:v.default.createElement("a",{href:o.URL,target:"_blank",rel:"noopener noreferrer"},o.title)},comment:"Editor: Message displayed when a post is updated, with a link to the site it was updated on."}):n("page"===i?"Page updated!":"Post updated!")}}},{key:"renderNoticeAction",value:function(){var e=this.props,t=e.action,n=e.isSitePreviewable,i=e.link,r=e.onViewClick;return r&&n&&i?v.default.createElement(x.default,{onClick:r},this.getText(t)):i&&v.default.createElement(x.default,{href:i,external:!0},this.getText(t))}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.message,i=e.status,r=e.onDismissClick,a=this.getErrorMessage()||this.getText(n);return v.default.createElement("div",{className:"editor-notice"},t&&v.default.createElement(I.default,{siteId:t}),a&&v.default.createElement(E.default,(0,o.default)({status:i,text:a,onDismissClick:r},{showDismiss:!0}),this.renderNoticeAction()))}}]),t}(g.Component);D.propTypes={translate:g.PropTypes.func,siteId:g.PropTypes.number,site:g.PropTypes.object,type:g.PropTypes.string,typeObject:g.PropTypes.object,message:g.PropTypes.string,status:g.PropTypes.string,action:g.PropTypes.string,link:g.PropTypes.string,onViewClick:g.PropTypes.func,isSitePreviewable:g.PropTypes.bool,onDismissClick:g.PropTypes.func,error:g.PropTypes.object},t.default=(0,y.connect)(function(e){var t=(0,w.getSelectedSiteId)(e),n=(0,S.getEditedPost)(e,t,(0,T.getEditorPostId)(e));return n?{siteId:t,site:(0,w.getSelectedSite)(e),type:n.type,typeObject:(0,P.getPostType)(e,t,n.type),isSitePreviewable:(0,R.isSitePreviewable)(e,t)}:{}},{setLayoutFocus:N.setLayoutFocus})((0,b.localize)(D))},0x831ab68cff9b6:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActionTypes={FETCH_SHORTCODE:"FETCH_SHORTCODE",RECEIVE_SHORTCODE:"RECEIVE_SHORTCODE"},t.LoadStatus={LOADING:"LOADING",ERROR:"ERROR",LOADED:"LOADED"}},0x856a21fcb64fd:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryList=void 0;var r=n(6203271391094927),o=i(r),a=n(6280957995252369),s=n(878132787514036),l=i(s),u=n(4517819237535069),d=n(5921998412115101),c=n(5896763357248615),p=n(8446265970839099),f=n(0x45d24eaab7654),h=n(0xa8ea23472235c),m=n(619801137403500),g=n(7613110173109069),v=n(7380496197234269),y=n(0x6a500e58bc5b7),b=n(8151746900443748),_=n(0xbfe8d6d726d55),x=n(0xba0ce520fef8a),C=n(6183759582808303)(),E=t.MediaLibraryList=c.createClass({displayName:"MediaLibraryList",propTypes:{site:c.PropTypes.object,media:c.PropTypes.arrayOf(c.PropTypes.object),mediaLibrarySelectedItems:c.PropTypes.arrayOf(c.PropTypes.object),filter:c.PropTypes.string,filterRequiresUpgrade:c.PropTypes.bool.isRequired,search:c.PropTypes.string,containerWidth:c.PropTypes.number,rowPadding:c.PropTypes.number,mediaScale:c.PropTypes.number.isRequired,photon:c.PropTypes.bool,mediaHasNextPage:c.PropTypes.bool,mediaFetchingNextPage:c.PropTypes.bool,mediaOnFetchNextPage:c.PropTypes.func,single:c.PropTypes.bool,scrollable:c.PropTypes.bool,onEditItem:c.PropTypes.func},getInitialState:function(){return{};
},getDefaultProps:function(){return{mediaLibrarySelectedItems:(0,o.default)([]),containerWidth:0,rowPadding:10,mediaHasNextPage:!1,mediaFetchingNextPage:!1,mediaOnFetchNextPage:f,single:!1,scrollable:!1,onEditItem:f}},setListContext:function(e){e&&this.setState({listContext:d.findDOMNode(e)})},getMediaItemHeight:function(){return Math.round(this.props.containerWidth*this.props.mediaScale)+this.props.rowPadding},getItemsPerRow:function(){return Math.floor(1/this.props.mediaScale)},getMediaItemStyle:function(e){var t,n,i=this.getItemsPerRow(),r=i===1/this.props.mediaScale,o=0===(e+1)%i;return t={paddingBottom:this.props.rowPadding,fontSize:225*this.props.mediaScale},r||o||(n=1%this.props.mediaScale/(i-1)*100+"%",C.isRTL()?t.marginLeft=n:t.marginRight=n),t},toggleItem:function(e,t){var n=void 0;n=this.props.single?h(this.props.mediaLibrarySelectedItems,{ID:e.ID}):p(this.props.mediaLibrarySelectedItems);var i=m(n,{ID:e.ID}),r=-1===i,o=m(this.props.media,{ID:e.ID}),a=o,s=o;!this.props.single&&t&&(a=Math.min(a,this.state.lastSelectedMediaIndex),s=Math.max(s,this.state.lastSelectedMediaIndex));for(var l=a;l<=s;l++){var u=m(n,{ID:this.props.media[l].ID});r&&-1===u?n.push(this.props.media[l]):r||-1===u||n.splice(u,1)}this.setState({lastSelectedMediaIndex:o}),this.props.site&&g.setLibrarySelectedItems(this.props.site.ID,n)},getItemRef:function(e){return"item-"+e.ID},renderItem:function(e){var t,n=m(this.props.media,{ID:e.ID}),i=this.props.mediaLibrarySelectedItems,r=m(i,{ID:e.ID}),o=this.getItemRef(e);return t=!this.props.single&&r!==-1&&1===i.length&&"image"===v.getMimePrefix(e),c.createElement(y,{ref:o,key:o,style:this.getMediaItemStyle(n),media:e,scale:this.props.mediaScale,photon:this.props.photon,showGalleryHelp:t,selectedIndex:r,onToggle:this.toggleItem,onEditItem:this.props.onEditItem})},renderLoadingPlaceholders:function(){var e=this.getItemsPerRow(),t=(this.props.media||[]).length,n=e-t%e;return Array.apply(null,new Array(n)).map(function(e,n){return c.createElement(y,{key:"placeholder-"+n,style:this.getMediaItemStyle(t+n),scale:this.props.mediaScale})},this)},render:function(){var e;return this.props.filterRequiresUpgrade?c.createElement(l.default,{filter:this.props.filter,site:this.props.site}):!this.props.mediaHasNextPage&&this.props.media&&0===this.props.media.length?c.createElement(this.props.search?b:_,{site:this.props.site,filter:this.props.filter,search:this.props.search}):(e=function(){this.props.mediaOnFetchNextPage()}.bind(this),c.createElement(x,{ref:this.setListContext,context:!!this.props.scrollable&&this.state.listContext,items:this.props.media||[],itemsPerRow:this.getItemsPerRow(),lastPage:!this.props.mediaHasNextPage,fetchingNextPage:this.props.mediaFetchingNextPage,guessedItemHeight:this.getMediaItemHeight(),fetchNextPage:e,getItemRef:this.getItemRef,renderItem:this.renderItem,renderLoadingPlaceholders:this.renderLoadingPlaceholders,className:"media-library__list"}))}});t.default=(0,a.connect)(function(e){return{mediaScale:(0,u.getPreference)(e,"mediaScale")}},null,null,{pure:!1})(E)},0x86ee4079c7943:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8640881565075096),o=i(r),a=n(5896763357248615),s=i(a),l=n(8040677854470317),u=i(l),d=n(6280957995252369),c=n(4902908805660961),p=i(c),f=n(4691924745409762),h=i(f),m=n(809412173345775),g=i(m),v=n(7082708682668568),y=i(v),b=n(6940362979991673),_=i(b),x=n(7381996410053237),C=i(x),E=n(0x78aa42617f90d),w=i(E),T=n(8959178503420160),S=i(T),P=n(6104353596224629),k=i(P),I=n(5084380759969092),N=n(474432612430512),M=i(N),R=n(0xc69f362ed57b8),D=n(0xc98cd4e82fe0b),A=i(D),O=n(6908623646137371),L=i(O),B=n(0xe6bd8709d6a3c),F=n(5523398591803755),H=n(6007716273106560),z=n(7284660551555503),U=n(0x8f1527a7f80c8),V=n(4883949902648912),j=i(V),W=n(4835514986095776),q=i(W),G=n(0x5fe8096819838),$=i(G),K=n(7271335357304085),Y=i(K),X=n(6246250103023401),Q=i(X),J=n(8958839223830722),Z=i(J),ee=n(4694318411389239),te=i(ee),ne=n(484594260005501),ie=i(ne),re={post:{thumbnail:!0,excerpt:!0,"post-formats":!0,"geo-location":!0,tags:!0,comments:!0},page:{thumbnail:!0,"page-attributes":!0,"geo-location":!0,excerpt:!0,comments:!0}},oe=function(e){n.e(0xb89765859024d,function(t){e(n(4615606665781535).__esModule?n(4615606665781535).default:n(4615606665781535))})},ae=function(e){n.e(7233042374288049,function(t){e(n(5841188419929091).__esModule?n(5841188419929091).default:n(5841188419929091))})},se=function(e){n.e(0x7dd7a704b334,function(t){e(n(5707511627981887).__esModule?n(5707511627981887).default:n(5707511627981887))})},le=function(e){n.e(6712223056815678,function(t){e(n(6853691125585919).__esModule?n(6853691125585919).default:n(6853691125585919))})},ue=function(e){n.e(7692573206357011,function(t){e(n(8060901409959745).__esModule?n(8060901409959745).default:n(8060901409959745))})},de=function(e){n.e(5981932216983787,function(t){e(n(0xd5b40834424cf).__esModule?n(0xd5b40834424cf).default:n(0xd5b40834424cf))})},ce=s.default.createClass({displayName:"EditorDrawer",propTypes:{site:s.default.PropTypes.object,savedPost:s.default.PropTypes.object,post:s.default.PropTypes.object,canJetpackUseTaxonomies:s.default.PropTypes.bool,typeObject:s.default.PropTypes.object,isNew:s.default.PropTypes.bool,type:s.default.PropTypes.string,setPostDate:s.default.PropTypes.func,onSave:s.default.PropTypes.func},onExcerptChange:function(e){k.default.edit({excerpt:e.target.value})},currentPostTypeSupports:function(e){var t=this.props,n=t.typeObject,i=t.type;return n&&n.supports?!!n.supports[e]:!re.hasOwnProperty(i)||!!re[i][e]},recordExcerptChangeStats:function(){(0,I.recordStat)("excerpt_changed"),(0,I.recordEvent)("Changed Excerpt")},renderTaxonomies:function(){var e=this.props,t=e.type,n=e.canJetpackUseTaxonomies,i=j.default.isEnabled("manage/custom-post-types"),r=!i&&this.currentPostTypeSupports("tags"),o=void 0;("post"===t||r)&&(o=s.default.createElement(g.default,null));var a=void 0;return i&&!1!==n&&(a=s.default.createElement(Y.default,null)),(0,u.default)({categories:o,taxonomies:a})},renderPostFormats:function(){if(this.props.post&&this.currentPostTypeSupports("post-formats"))return s.default.createElement(y.default,{require:oe,post:this.props.post,className:"editor-drawer__accordion"})},renderSharing:function(){return s.default.createElement(y.default,{require:ae,site:this.props.site,post:this.props.post})},renderFeaturedImage:function(){if(this.currentPostTypeSupports("thumbnail"))return s.default.createElement(y.default,{require:se,site:this.props.site,post:this.props.post})},renderExcerpt:function(){var e=void 0;if(this.currentPostTypeSupports("excerpt"))return this.props.post&&(e=this.props.post.excerpt),s.default.createElement(h.default,null,s.default.createElement(Z.default,{labelText:this.translate("Excerpt"),helpText:this.translate("Excerpts are optional hand-crafted summaries of your content.")},s.default.createElement(S.default,{onNewValue:this.recordExcerptChangeStats},s.default.createElement(_.default,{id:"excerpt",name:"excerpt",onChange:this.onExcerptChange,value:e,placeholder:this.translate("Write an excerpt…"),"aria-label":this.translate("Write an excerpt…")}))))},renderLocation:function(){if(this.props.site&&!this.props.isJetpack&&this.currentPostTypeSupports("geo-location"))return s.default.createElement(h.default,null,s.default.createElement(Z.default,{labelText:this.translate("Location")}),s.default.createElement(y.default,{require:le,coordinates:w.default.geoCoordinates(this.props.post)}))},renderDiscussion:function(){if(this.currentPostTypeSupports("comments"))return s.default.createElement(h.default,null,s.default.createElement(y.default,{require:ue,site:this.props.site,post:this.props.post,isNew:this.props.isNew}))},renderSeo:function(){var e=this.props.jetpackVersionSupportsSeo;if(this.props.site&&(!this.props.isJetpack||this.props.isSeoToolsModuleActive&&e)){var t=this.props.site.plan,n=(0,R.isBusiness)(t)||(0,R.isEnterprise)(t),i=this.props,r=i.isPrivate,o=i.isHidden;if(n&&!r&&!o)return s.default.createElement(y.default,{require:de,metaDescription:w.default.metaDescription(this.props.post)})}},renderCopyPost:function(){var e=this.props.type;if("post"===e||"page"===e)return s.default.createElement(te.default,{type:e})},renderMoreOptions:function(){if(this.currentPostTypeSupports("excerpt")||this.currentPostTypeSupports("geo-location")||this.currentPostTypeSupports("comments")||M.default.isPermalinkEditable(this.props.site))return s.default.createElement(p.default,{title:this.translate("More Options"),className:"editor-drawer__more-options"},M.default.isPermalinkEditable(this.props.site)&&s.default.createElement(C.default,null),this.renderExcerpt(),this.renderLocation(),this.renderDiscussion(),this.renderCopyPost())},renderPageOptions:function(){if(this.currentPostTypeSupports("page-attributes"))return s.default.createElement(Q.default,null)},renderStatus:function(){var e=(0,o.default)(this.props.post,"date",null),t=(0,o.default)(this.props.post,"status",null);return s.default.createElement(p.default,{title:this.translate("Status")},s.default.createElement(ie.default,{savedPost:this.props.savedPost,postDate:e,type:this.props.type,onSave:this.props.onSave,onTrashingPost:this.props.onTrashingPost,onPrivatePublish:this.props.onPrivatePublish,setPostDate:this.props.setPostDate,site:this.props.site,status:t}))},render:function(){var e=this.props.site;return s.default.createElement("div",{className:"editor-drawer"},e&&s.default.createElement(A.default,{siteId:e.ID}),e&&s.default.createElement(L.default,{siteId:e.ID}),this.renderStatus(),this.renderTaxonomies(),this.renderFeaturedImage(),this.renderPageOptions(),this.renderSharing(),this.renderPostFormats(),this.renderSeo(),this.renderMoreOptions())}});t.default=(0,d.connect)(function(e){var t=(0,B.getSelectedSiteId)(e),n=(0,H.getEditedPostValue)(e,t,(0,F.getEditorPostId)(e),"type");return{canJetpackUseTaxonomies:(0,U.isJetpackMinimumVersion)(e,t,"4.1"),isJetpack:(0,U.isJetpackSite)(e,t),isSeoToolsModuleActive:(0,U.isJetpackModuleActive)(e,t,"seo-tools"),jetpackVersionSupportsSeo:(0,U.isJetpackMinimumVersion)(e,t,"4.4-beta1"),typeObject:(0,z.getPostType)(e,t,n),isPrivate:(0,q.default)(e,t),isHidden:(0,$.default)(e,t)}},null,null,{pure:!1})(ce),e.exports=t.default},0x86efd464f7fd1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0x976699e5e0db4),o=i(r),a=n(7572476330282672),s=i(a),l=n(5896763357248615),u=i(l),d=n(5921998412115101),c=n(0x98b3dfa6a747e),p=n(0xa505046780b0c),f=i(p),h=n(0x515d1e113a7c1),m=i(h),g=n(6404962144281478),v=n(0xf973c7cf3a0bf),y=n(8025093951496706),b=function(e){var t=void 0,n=e.getParam("redux_store");e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){(0,d.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null}),e.addCommand("wpcomContactForm",function(i){function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fields";(0,y.renderWithReduxStore)((0,l.createElement)(m.default,{showDialog:"show"===i,activeTab:a,isEdit:o,onInsert:function(){var t=n.getState();e.execCommand("mceInsertContent",!1,(0,v.serialize)(t.ui.editor.contactForm)),r("hide")},onChangeTabs:function(e){r("show",e)},onClose:function(){n.dispatch((0,g.formClear)()),e.focus(),r("hide")},onFieldAdd:function(){n.dispatch((0,g.fieldAdd)())},onFieldRemove:function(e){n.dispatch((0,g.fieldRemove)(e))},onFieldUpdate:function(e,t){n.dispatch((0,g.fieldUpdate)(e,t))},onSettingsUpdate:function(e){n.dispatch((0,g.settingsUpdate)(e))}}),t,n)}var o=!1;i?(n.dispatch((0,g.formLoad)((0,v.deserialize)(i))),o=!0):n.dispatch((0,g.formClear)()),r()}),e.addButton("wpcom_add_contact_form",{classes:"btn wpcom-icon-button contact-form",title:s.default.translate("Add Contact Form"),cmd:"wpcomContactForm",onPostRender:function(){this.innerHtml((0,c.renderToStaticMarkup)(u.default.createElement("button",{type:"button",role:"presentation"},u.default.createElement(f.default,{icon:"mention"}))))}})};t.default=function(){o.default.PluginManager.add("wpcom/contactform",b)},e.exports=t.default},0x8833a0705156c:function(e,t){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},0x89ab9dd64962b:function(e,t,n){function i(e){return e=r(e),e&&a.test(e)?e.replace(o,"\\$&"):e}var r=n(6408496380893675),o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source);e.exports=i},0x8ceb0518c8930:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6203271391094927),o=i(r),a=n(5896763357248615),s=i(a),l=n(0x45d24eaab7654),u=i(l),d=n(0x8066fd8831e69),c=i(d),p=n(5704975097909473),f=i(p);t.default=s.default.createClass({displayName:"EditorMediaModalGalleryEdit",propTypes:{site:s.default.PropTypes.object,settings:a.PropTypes.object,onUpdateSetting:a.PropTypes.func},getDefaultProps:function(){return{settings:(0,o.default)({}),onUpdateSetting:u.default}},onOrderChanged:function(e){var t=[];this.props.settings.items.forEach(function(n,i){t[e[i]]=n}),this.props.onUpdateSetting({items:t,orderBy:null})},render:function(){var e=this.props,t=e.site,n=e.settings;return t&&n.items?s.default.createElement(c.default,{onChange:this.onOrderChanged},n.items.map(function(e){return s.default.createElement(f.default,{key:e.ID,site:t,item:e,showRemoveButton:n.items.length>1})})):null}}),e.exports=t.default},0x8d16af37d6a7f:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5059747709250767),s=i(a),l=n(5921998412115101),u=i(l),d=n(5896763357248615),c=i(d),p=n(4675954658966525),f=i(p),h=(0,f.default)("calypso:resizable-iframe"),m=function(){};t.default=c.default.createClass({displayName:"ResizableIframe",propTypes:{src:c.default.PropTypes.string,width:c.default.PropTypes.oneOfType([c.default.PropTypes.string,c.default.PropTypes.number]),height:c.default.PropTypes.oneOfType([c.default.PropTypes.string,c.default.PropTypes.number]),onLoad:c.default.PropTypes.func,onResize:c.default.PropTypes.func},getInitialState:function(){return{width:0,height:0}},getDefaultProps:function(){return{onLoad:m,onResize:m}},componentWillMount:function(){h("Mounting "+this.constructor.displayName+" React component.")},componentDidMount:function(){window.addEventListener("message",this.checkMessageForResize,!1),this.maybeConnect()},componentDidUpdate:function(){this.maybeConnect()},componentWillUnmount:function(){window.removeEventListener("message",this.checkMessageForResize)},getFrameBody:function(){return u.default.findDOMNode(this.refs.iframe).contentDocument.body},maybeConnect:function(){if(this.isFrameAccessible()){var e=this.getFrameBody();if(null===e.getAttribute("data-resizable-iframe-connected")){var t=document.createElement("script");t.innerHTML="\n\t\t\t( function() {\n\t\t\t\tvar observer;\n\n\t\t\t\tif ( ! window.MutationObserver || ! document.body || ! window.top ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction sendResize() {\n\t\t\t\t\twindow.top.postMessage( {\n\t\t\t\t\t\taction: 'resize',\n\t\t\t\t\t\twidth: document.body.offsetWidth,\n\t\t\t\t\t\theight: document.body.offsetHeight\n\t\t\t\t\t}, '*' );\n\t\t\t\t}\n\n\t\t\t\tobserver = new MutationObserver( sendResize );\n\t\t\t\tobserver.observe( document.body, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeOldValue: false,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tcharacterDataOldValue: false,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true\n\t\t\t\t} );\n\n\t\t\t\twindow.addEventListener( 'load', sendResize, true );\n\n\t\t\t\t// Hack: Remove viewport unit styles, as these are relative\n\t\t\t\t// the iframe root and interfere with our mechanism for\n\t\t\t\t// determining the unconstrained page bounds.\n\t\t\t\tfunction removeViewportStyles( ruleOrNode ) {\n\t\t\t\t\t[ 'width', 'height', 'minHeight', 'maxHeight' ].forEach( function( style ) {\n\t\t\t\t\t\tif ( /^\\d+(vmin|vmax|vh|vw)$/.test( ruleOrNode.style[ style ] ) ) {\n\t\t\t\t\t\t\truleOrNode.style[ style ] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tArray.prototype.forEach.call( document.querySelectorAll( '[style]' ), removeViewportStyles );\n\t\t\t\tArray.prototype.forEach.call( document.styleSheets, function( stylesheet ) {\n\t\t\t\t\tArray.prototype.forEach.call( stylesheet.cssRules || stylesheet.rules, removeViewportStyles );\n\t\t\t\t} );\n\n\t\t\t\tdocument.body.style.position = 'absolute';\n\t\t\t\tdocument.body.setAttribute( 'data-resizable-iframe-connected', '' );\n\n\t\t\t\tsendResize();\n\t\t\t} )();\n\t\t",e.appendChild(t)}}},isFrameAccessible:function(){try{return!!this.getFrameBody()}catch(e){return!1}},checkMessageForResize:function(e){var t=u.default.findDOMNode(this.refs.iframe),n=e.data||{};if("string"==typeof n)try{n=JSON.parse(n)}catch(e){}if(t&&t.contentWindow===e.source){h("Received message: %o",n);var i=n,r=i.action,o=i.width,a=i.height,s=this.state,l=s.width,d=s.height;"resize"!==r||l===o&&d===a||(this.setState({width:o,height:a}),this.props.onResize())}},onLoad:function(e){this.maybeConnect(),this.props.onLoad(e)},render:function(){var e=["onResize"];return c.default.createElement("iframe",(0,o.default)({ref:"iframe"},(0,s.default)(this.props,e),{onLoad:this.onLoad,width:this.props.width||this.state.width,height:this.props.height||this.state.height}))}}),e.exports=t.default},0x8da6885e1f6e1:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(6088762386890041),o=function(){function e(){i(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this?r(!1):void 0,this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,i=this._subscriptionsForType[t];i&&delete i[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=o},0x8e53f8540ee4b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0x94d4b19af1d06),o=i(r),a=n(5630966280090368),s=i(a),l=n(0x9d103afba06e0),u=i(l),d=n(6718701541658404),c=i(d),p=n(0xf0f4288728240),f=i(p),h=n(411492589843630),m=i(h),g=n(0xcb7da1b55058e),v=i(g),y=n(0xa8ea23472235c),b=i(y),_=n(0x83e42e33e67df),x=i(_),C=n(0x3f19c8db6e3b5),E=i(C),w=n(8640881565075096),T=i(w),S=n(0x552832cc667a6),P=i(S),k=n(7452954268806788),I=i(k),N=n(5896763357248615),M=i(N),R=n(6280957995252369),D=n(0x8ae3881d6e8c2),A=i(D),O=n(5064262455832020),L=i(O),B=n(5415223332675282),F=i(B),H=n(0x5ec133229a05a),z=i(H),U=n(6203190986888399),V=i(U),j=n(623310115397031),W=i(j),q=n(7087130997920842),G=i(q),$=n(6729227089147156),K=n(6007716273106560),Y=n(7284660551555503),X=n(0xc98cd4e82fe0b),Q=i(X),J=n(0xb0498bd0dc158),Z=i(J),ee=500,te=25,ne=20,ie=10,re=M.default.createClass({displayName:"PostSelectorPosts",propTypes:{siteId:N.PropTypes.number.isRequired,query:N.PropTypes.object,posts:N.PropTypes.array,lastPage:N.PropTypes.number,loading:N.PropTypes.bool,emptyMessage:N.PropTypes.string,createLink:N.PropTypes.string,selected:N.PropTypes.number,onSearch:N.PropTypes.func,onChange:N.PropTypes.func,multiple:N.PropTypes.bool,showTypeLabels:N.PropTypes.bool},getInitialState:function(){return{searchTerm:"",requestedPages:[1]}},getDefaultProps:function(){return{analyticsPrefix:"Post Selector",searchThreshold:8,loading:!0,emptyMessage:"",posts:[],onSearch:function(){},onChange:function(){}}},componentWillMount:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.postIds=(0,E.default)(this.props.posts,"ID"),this.getPostChildren=(0,P.default)(this.getPostChildren),this.queueRecomputeRowHeights=(0,I.default)(this.recomputeRowHeights),this.debouncedSearch=(0,I.default)(function(){e.props.onSearch(e.state.searchTerm)},ee)},componentWillReceiveProps:function(e){(0,f.default)(this.props.query,e.query)&&this.props.siteId===e.siteId||this.setState({requestedPages:[1]}),this.props.posts!==e.posts&&(this.getPostChildren.cache.clear(),this.postIds=(0,E.default)(e.posts,"ID"))},componentDidUpdate:function(e){var t=e.selected!==this.props.selected||e.loading&&!this.props.loading;t&&this.list.forceUpdateGrid(),this.props.posts!==e.posts&&this.recomputeRowHeights()},recomputeRowHeights:function(){this.list&&(this.list.recomputeRowHeights(),this.isCompact()&&this.forceUpdate())},setListRef:function(e){this.list=e},setItemRef:function(e,t){if(t&&e){var n=this.itemHeights[e.global_ID]||te,i=t.clientHeight;this.itemHeights[e.global_ID]=i,n!==i&&this.queueRecomputeRowHeights()}},hasNoSearchResults:function(){return!this.props.loading&&this.props.posts&&!this.props.posts.length&&this.state.searchTerm},hasNoPosts:function(){return!this.props.loading&&this.props.posts&&!this.props.posts.length},getItem:function(e){if(this.props.posts)return this.props.posts[e]},isCompact:function(){return!(!this.props.posts||this.state.searchTerm||this.hasNoPosts())&&this.props.posts.length<this.props.searchThreshold},isTypeLabelsVisible:function(){return"boolean"==typeof this.props.showTypeLabels?this.props.showTypeLabels:"any"===this.props.query.type},isLastPage:function(){var e=this.props,t=e.lastPage,n=e.loading,i=this.state.requestedPages;return(0,c.default)(i,t)&&!n},getPostChildren:function(e){var t=this.props.posts;return(0,b.default)(t,function(t){var n=t.parent;return n&&n.ID===e})},getItemHeight:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.parent&&!n&&(0,c.default)(this.postIds,e.parent.ID)?0:this.itemHeights[e.global_ID]?this.itemHeights[e.global_ID]:(0,x.default)(this.getPostChildren(e.ID),function(e,n){return e+t.getItemHeight(n,!0)},te):te},getRowHeight:function(e){var t=e.index;return this.getItemHeight(this.getItem(t))},getCompactContainerHeight:function(){var e=this;return(0,v.default)(0,this.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},getPageForIndex:function(e){var t=this.props,n=t.query,i=t.lastPage,r=n.number||ne,o=Math.ceil(e/r);return Math.max(Math.min(o,i||1/0),1)},getRowCount:function(){var e=0;return this.props.posts&&(e+=this.props.posts.length),this.isLastPage()||(e+=1),e},setRequestedPages:function(e){var t=e.startIndex,n=e.stopIndex,i=this.state.requestedPages,r=(0,m.default)((0,v.default)(this.getPageForIndex(t-ie),this.getPageForIndex(n+ie)+1),i);r.length&&this.setState({requestedPages:i.concat(r)})},onSearch:function(e){var t=e.target.value;this.state.searchTerm&&!t&&this.props.onSearch(""),t!==this.state.searchTerm&&(this.hasPerformedSearch||(this.hasPerformedSearch=!0,W.default.ga.recordEvent(this.props.analyticsPrefix,"Performed Post Search")),this.setState({searchTerm:t}),this.debouncedSearch())},renderItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.parent||n||!(0,c.default)(this.postIds,e.parent.ID)){var i=function(){for(var n,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=t.props).onChange.apply(n,[e].concat(r))},r=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.setItemRef.apply(t,[e].concat(i))},o=this.getPostChildren(e.ID);return M.default.createElement("div",{key:e.global_ID,ref:r,className:"post-selector__list-item"},M.default.createElement("label",null,M.default.createElement("input",{name:"posts",type:this.props.multiple?"checkbox":"radio",value:e.ID,onChange:i,checked:this.props.selected===e.ID,className:"post-selector__input"}),M.default.createElement("span",{className:"post-selector__label"},(0,$.decodeEntities)(e.title||this.translate("Untitled")),this.isTypeLabelsVisible()&&M.default.createElement("span",{className:"post-selector__label-type",style:{paddingRight:this.isCompact()?0:(0,L.default)()}},(0,$.decodeEntities)((0,T.default)(this.props.postTypes,[e.type,"labels","singular_name"],""))))),o.length>0&&M.default.createElement("div",{className:"post-selector__nested-list"},o.map(function(e){return t.renderItem(e,!0)})))}},renderEmptyContent:function(){var e=void 0;if(this.hasNoSearchResults()?e=M.default.createElement(V.default,{createLink:this.props.createLink,noResultsMessage:this.props.noResultsMessage}):this.hasNoPosts()&&(e=this.props.emptyMessage),e)return M.default.createElement("div",{key:"no-results",className:"post-selector__list-item is-empty"},e)},renderRow:function(e){var t=e.index,n=this.getItem(t);return n?this.renderItem(n):M.default.createElement("div",{key:"placeholder",className:"post-selector__list-item is-placeholder"},M.default.createElement("label",null,M.default.createElement("input",{type:this.props.multiple?"checkbox":"radio",disabled:!0,className:"post-selector__input"}),M.default.createElement("span",{className:"post-selector__label"},this.translate("Loading…"))))},cellRendererWrapper:function(e){var t=e.key,n=e.style,i=(0,u.default)(e,["key","style"]);return M.default.createElement("div",{key:t,style:n},this.renderRow(i))},render:function(){var e=this,t=this.props,n=t.className,i=t.siteId,r=t.query,a=this.state,l=a.requestedPages,u=a.searchTerm,d=this.isCompact(),c=this.isTypeLabelsVisible(),p=u.length>0||!d,f=(0,A.default)("post-selector",n,{"is-compact":d,"is-type-labels-visible":c});return M.default.createElement("div",{className:f},l.map(function(e){return M.default.createElement(Z.default,{key:"page-"+e,siteId:i,query:(0,s.default)({},r,{page:e})})}),c&&i&&M.default.createElement(Q.default,{siteId:i}),p&&M.default.createElement(G.default,{searchTerm:u,onSearch:this.onSearch}),M.default.createElement("div",{className:"post-selector__results"},M.default.createElement(z.default,{key:(0,o.default)(r),disableHeight:d},function(t){var n=t.height,i=t.width;return M.default.createElement(F.default,{ref:e.setListRef,width:i,height:d?e.getCompactContainerHeight():n,onRowsRendered:e.setRequestedPages,noRowsRenderer:e.renderEmptyContent,rowCount:e.getRowCount(),estimatedRowSize:te,rowHeight:e.getRowHeight,rowRenderer:e.cellRendererWrapper})})))}});t.default=(0,R.connect)(function(e,t){var n=t.siteId,i=t.query;return{posts:(0,K.getSitePostsForQueryIgnoringPage)(e,n,i),found:(0,K.getSitePostsFoundForQuery)(e,n,i),lastPage:(0,K.getSitePostsLastPageForQuery)(e,n,i),loading:(0,K.isRequestingSitePostsForQueryIgnoringPage)(e,n,i),postTypes:(0,Y.getPostTypes)(e,n)}})(re),e.exports=t.default},0x8fe05f688de61:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5630966280090368),a=r(o);t.default=function(e){function t(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments[1];return u||(u=e.getContainer().appendChild(document.createElement("div"))),t?void(0,E.renderWithReduxStore)(l.default.createElement(C.default,(0,a.default)({visible:t,item:n},{onClose:i,insertMedia:o})),u,s):r()}function n(e){t(!0,e)}function i(){t(!1)}function r(){u&&d.default.unmountComponentAtNode(u)}function o(t){e.execCommand("mceInsertContent",!1,t),i()}var s=e.getParam("redux_store");if(_.default.isEnabled("post-editor/media-advanced")&&s){var u=void 0;e.addButton("wp_img_advanced",{tooltip:h.default.translate("Edit",{context:"verb"}),classes:"toolbar-segment-start",onPostRender:function(){this.innerHtml(p.default.renderToStaticMarkup(l.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},l.default.createElement(g.default,{icon:"pencil",size:18}))))},onClick:function(){var t=e.selection.getStart(),i=y.deserialize(t);n(i)}}),e.on("remove",r)}};var s=n(5896763357248615),l=r(s),u=n(5921998412115101),d=r(u),c=n(0x98b3dfa6a747e),p=r(c),f=n(7572476330282672),h=r(f),m=n(0xa505046780b0c),g=r(m),v=n(5527868178721527),y=i(v),b=n(4883949902648912),_=r(b),x=n(8603174235267600),C=r(x),E=n(8025093951496706);e.exports=t.default},0x92235db56b508:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalDetail=void 0;var r=n(5477852257145688),o=i(r),a=n(0x45d24eaab7654),s=i(a),l=n(5896763357248615),u=i(l),d=n(6280957995252369),c=n(7152730280015627),p=n(5644333497174414),f=n(0xd0b910bc30aed),h=n(7380496197234269),m=n(5792510602518522),g=n(0xcab3bac218193),v=t.EditorMediaModalDetail=u.default.createClass({displayName:"EditorMediaModalDetail",propTypes:{site:u.default.PropTypes.object,items:u.default.PropTypes.array,selectedIndex:u.default.PropTypes.number,onSelectedIndexChange:u.default.PropTypes.func,onReturnToList:u.default.PropTypes.func,onEdit:u.default.PropTypes.func,onRestore:u.default.PropTypes.func},getDefaultProps:function(){return{selectedIndex:0,onSelectedIndexChange:s.default}},componentDidMount:function(){this.preloadImages()},componentDidUpdate:function(){this.preloadImages()},preloadImages:function(){h.filterItemsByMimePrefix(this.props.items,"image").forEach(function(e){var t=h.url(e,{photon:this.props.site&&!this.props.site.is_private});g(t)},this)},incrementIndex:function(e){this.props.onSelectedIndexChange(this.props.selectedIndex+e)},render:function(){var e=this.props,t=e.items,n=e.selectedIndex,i=e.site,r=e.onEditItem,o=e.onRestoreItem,a=e.onReturnToList,s=t[n];return u.default.createElement("div",{className:"editor-media-modal-detail"},u.default.createElement(m,{onClick:a,backText:this.translate("Media Library")}),u.default.createElement(f,{site:i,item:s,hasPreviousItem:n-1>=0,hasNextItem:n+1<t.length,onShowPreviousItem:this.incrementIndex.bind(this,-1),onShowNextItem:this.incrementIndex.bind(this,1),onRestore:o,onEdit:r}))}});t.default=(0,d.connect)(null,{onReturnToList:(0,o.default)(p.setEditorMediaModalView,c.ModalViews.LIST),onEditItem:(0,o.default)(p.setEditorMediaModalView,c.ModalViews.IMAGE_EDITOR)})(v)},0x9244927499a4b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(5628363501489590),u=i(l),d=n(0x4c328c9015af2),c=i(d);t.default=o.default.createClass({displayName:"section-header",getDefaultProps:function(){return{label:"",href:null}},render:function(){var e=(0,s.default)(this.props.className,"section-header");return o.default.createElement(u.default,{className:e,href:this.props.href},o.default.createElement("div",{className:"section-header__label"},o.default.createElement("span",{className:"section-header__label-text"},this.props.label),"number"==typeof this.props.count&&o.default.createElement(c.default,{count:this.props.count})),o.default.createElement("div",{className:"section-header__actions"},this.props.children))}}),e.exports=t.default},0x933a6af4ef14d:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0xda03c41286040),a=function(e){function t(n,r,o){i(this,t),e.call(this,n),this.listener=r,this.context=o}return r(t,e),t}(o);e.exports=a},0x93c1fbcbc1a22:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(6280957995252369),v=n(7572476330282672),y=n(0xe6bd8709d6a3c),b=n(0x8f1527a7f80c8),_=n(5084380759969092),x=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.recordClick=n.recordClick.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"recordClick",value:function(){(0,_.recordStat)("clicked_theme_help_link")}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.themeHelpPath,i=e.className;return n?m.default.createElement("a",{className:i,href:n,onClick:this.recordClick},t("Need help setting up your site?")):null}}]),t}(h.PureComponent);x.propTypes={themeHelpPath:h.PropTypes.string,classname:h.PropTypes.string},t.default=(0,g.connect)(function(e){var t=(0,y.getSelectedSiteId)(e);return{themeHelpPath:(0,b.getSiteThemeShowcasePath)(e,t)}})((0,v.localize)(x)),e.exports=t.default},0x94645cd7e4f62:function(e,t){(function(){tinymce.PluginManager.add("tabfocus",function(e){function t(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function n(t){function n(n){function o(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&o(e.parentNode)}function l(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&tinymce.get(t.id)&&e.tabIndex!=-1&&o(e)}if(s=i.select(":input:enabled,*[tabindex]:not(iframe)"),r(s,function(t,n){if(t.id==e.id)return a=n,!1}),n>0){for(u=a+1;u<s.length;u++)if(l(s[u]))return s[u]}else for(u=a-1;u>=0;u--)if(l(s[u]))return s[u];return null}var a,s,l,u;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(l=o(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==l.length&&(l[1]=l[0],l[0]=":prev"),s=t.shiftKey?":prev"==l[0]?n(-1):i.get(l[0]):":next"==l[1]?n(1):i.get(l[1]))){var d=tinymce.get(s.id||s.name);s.id&&d?d.focus():tinymce.util.Delay.setTimeout(function(){tinymce.Env.webkit||window.focus(),s.focus()},10),t.preventDefault()}}var i=tinymce.DOM,r=tinymce.each,o=tinymce.explode;e.on("init",function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",t),tinymce.Env.gecko?e.on("keypress keydown",n):e.on("keydown",n)})})}).call(window)},0x949dfcdc79aa8:function(e,t,n){"use strict";function i(e,t){var n=a.get(e);n!==t&&(o[e]=t)}var r=n(8769427305820155),o={},a={get:function(e){return o[e]}};a.dispatchToken=r.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":i(t.url,t.scrollPosition)}}),e.exports=a},0x976699e5e0db4:function(e,t,n){(function(t){(function(){!function(e,n){"use strict";function i(e,t){for(var n,i=[],r=0;r<e.length;++r){if(n=s[e[r]]||o(e[r]),!n)throw"module definition dependecy not found: "+e[r];i.push(n)}t.apply(null,i)}function r(e,t,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(t===n)throw"invalid module definition, dependencies must be specified";if(r===n)throw"invalid module definition, definition function must be specified";i(t,function(){s[e]=r.apply(null,arguments)})}function o(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function a(t){var i,r,o,a,l;for(i=0;i<t.length;i++){r=e,o=t[i],a=o.split(/[.\/]/);for(var u=0;u<a.length-1;++u)r[a[u]]===n&&(r[a[u]]={}),r=r[a[u]];r[a[a.length-1]]=s[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in s)l[o]=s[o];for(i=0;i<t.length;i++)delete l[t[i]];e.privateModules=l}}var s={};r("tinymce/geom/Rect",[],function(){function e(e,t,n){var i,r,a,s,l,d;return i=t.x,r=t.y,a=e.w,s=e.h,l=t.w,d=t.h,n=(n||"").split(""),"b"===n[0]&&(r+=d),"r"===n[1]&&(i+=l),"c"===n[0]&&(r+=u(d/2)),"c"===n[1]&&(i+=u(l/2)),"b"===n[3]&&(r-=s),"r"===n[4]&&(i-=a),"c"===n[3]&&(r-=u(s/2)),"c"===n[4]&&(i-=u(a/2)),o(i,r,a,s)}function t(t,n,i,r){var o,a;for(a=0;a<r.length;a++)if(o=e(t,n,r[a]),o.x>=i.x&&o.x+o.w<=i.w+i.x&&o.y>=i.y&&o.y+o.h<=i.h+i.y)return r[a];return null}function n(e,t,n){return o(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function i(e,t){var n,i,r,a;return n=l(e.x,t.x),i=l(e.y,t.y),r=s(e.x+e.w,t.x+t.w),a=s(e.y+e.h,t.y+t.h),r-n<0||a-i<0?null:o(n,i,r-n,a-i)}function r(e,t,n){var i,r,a,s,u,d,c,p,f,h;return u=e.x,d=e.y,c=e.x+e.w,p=e.y+e.h,f=t.x+t.w,h=t.y+t.h,i=l(0,t.x-u),r=l(0,t.y-d),a=l(0,c-f),s=l(0,p-h),u+=i,d+=r,n&&(c+=i,p+=r,u-=a,d-=s),c-=a,p-=s,o(u,d,c-u,p-d)}function o(e,t,n,i){return{x:e,y:t,w:n,h:i}}function a(e){return o(e.left,e.top,e.width,e.height)}var s=Math.min,l=Math.max,u=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:i,clamp:r,create:o,fromClientRect:a}}),r("tinymce/util/Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(r,this),e(o,this))}function i(e){var t=this;return null===this._state?void this._deferreds.push(e):void u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var i;try{i=n(t._value)}catch(t){return void e.reject(t)}e.resolve(i)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,a.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function l(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(e){if(i)return;i=!0,n(e)}}if(window.Promise)return window.Promise;var u=n.immediateFn||"function"==typeof t&&t||function(e){setTimeout(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n(function(n,o){i.call(r,new s(e,t,n,o))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new n(function(t,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0===--r&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)i(o,e[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},n}),r("tinymce/util/Delay",["tinymce/util/Promise"],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var i,r=window.requestAnimationFrame,o=["ms","moz","webkit"];for(i=0;i<o.length&&!r;i++)r=window[o[i]+"RequestAnimationFrame"];r||(r=n),r(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function i(e,t){return"number"!=typeof t&&(t=0),setInterval(e,t)}function r(e){return clearTimeout(e)}function o(e){return clearInterval(e)}var a;return{requestAnimationFrame:function(n,i){return a?void a.then(n):void(a=new e(function(e){i||(i=document.body),t(e,i)}).then(n))},setTimeout:n,setInterval:i,setEditorTimeout:function(e,t,i){return n(function(){e.removed||t()},i)},setEditorInterval:function(e,t,n){var r;return r=i(function(){e.removed?clearInterval(r):t()},n)},throttle:function(e,t){var i,r;return r=function(){var r=arguments;clearTimeout(i),i=n(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(i)},r},clearInterval:o,clearTimeout:r}}),r("tinymce/Env",[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t,n,i,r,o,a,s,l,u,d,c,p,f,h=navigator,m=h.userAgent;t=window.opera&&window.opera.buildNumber,u=/Android/.test(m),n=/WebKit/.test(m),i=!n&&!t&&/MSIE/gi.test(m)&&/Explorer/gi.test(h.appName),i=i&&/MSIE (\w+)\./.exec(m)[1],r=m.indexOf("Trident/")!=-1&&(m.indexOf("rv:")!=-1||h.appName.indexOf("Netscape")!=-1)&&11,o=m.indexOf("Edge/")!=-1&&!i&&!r&&12,i=i||r||o,a=!n&&!r&&/Gecko/.test(m),s=m.indexOf("Mac")!=-1,l=/(iPad|iPhone)/.test(m),d="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,c=e("only screen and (max-device-width: 480px)")&&(u||l),p=e("only screen and (min-width: 800px)")&&(u||l),f=m.indexOf("Windows Phone")!=-1,o&&(n=!1);var g=!l||d||m.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:t,webkit:n,ie:i,gecko:a,mac:s,iOS:l,android:u,contentEditable:g,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i&&!o?document.documentMode||7:10,fileApi:d,ceFalse:i===!1||i>8,desktop:!c&&!p,windowsPhone:f}}),r("tinymce/dom/EventUtils",["tinymce/util/Delay","tinymce/Env"],function(e,t){function n(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){var n,i=t;return n=e.path,n&&n.length>0&&(i=n[0]),e.deepPath&&(n=e.deepPath(),n&&n.length>0&&(i=n[0])),i}function o(e,n){function i(){return!1}function o(){return!0}var a,s,l=n||{};for(a in e)d[a]||(l[a]=e[a]);if(l.target||(l.target=l.srcElement||document),t.experimentalShadowDom&&(l.target=r(e,l.target)),e&&u.test(e.type)&&e.pageX===s&&e.clientX!==s){var c=l.target.ownerDocument||document,p=c.documentElement,f=c.body;l.pageX=e.clientX+(p&&p.scrollLeft||f&&f.scrollLeft||0)-(p&&p.clientLeft||f&&f.clientLeft||0),l.pageY=e.clientY+(p&&p.scrollTop||f&&f.scrollTop||0)-(p&&p.clientTop||f&&f.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=o,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=i,l.isPropagationStopped=i,l.isImmediatePropagationStopped=i),"undefined"==typeof l.metaKey&&(l.metaKey=!1),l}function a(t,r,o){function a(){o.domLoaded||(o.domLoaded=!0,r(d))}function s(){("complete"===u.readyState||"interactive"===u.readyState&&u.body)&&(i(u,"readystatechange",s),a())}function l(){try{u.documentElement.doScroll("left")}catch(t){return void e.setTimeout(l)}a()}var u=t.document,d={type:"ready"};return o.domLoaded?void r(d):(u.addEventListener?"complete"===u.readyState?a():n(t,"DOMContentLoaded",a):(n(u,"readystatechange",s),u.documentElement.doScroll&&t.self===t.top&&l()),void n(t,"load",a))}function s(){function e(e,t){var n,i,r,o,a=p[t];if(n=a&&a[e.type])for(i=0,r=n.length;i<r;i++)if(o=n[i],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var t,r,s,u,d,c=this,p={};r=l+(+new Date).toString(32),u="onmouseenter"in document.documentElement,s="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,c.domLoaded=!1,c.events=p,c.bind=function(i,l,f,h){function m(t){e(o(t||E.event),g)}var g,v,y,b,_,x,C,E=window;if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[r]?g=i[r]:(g=t++,i[r]=g,p[g]={}),h=h||i,l=l.split(" "),y=l.length;y--;)b=l[y],x=m,_=C=!1,"DOMContentLoaded"===b&&(b="ready"),c.domLoaded&&"ready"===b&&"complete"==i.readyState?f.call(h,o({type:b})):(u||(_=d[b],_&&(x=function(t){var n,i;if(n=t.currentTarget,i=t.relatedTarget,i&&n.contains)i=n.contains(i);else for(;i&&i!==n;)i=i.parentNode;i||(t=o(t||E.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,g))})),s||"focusin"!==b&&"focusout"!==b||(C=!0,_="focusin"===b?"focus":"blur",x=function(t){t=o(t||E.event),t.type="focus"===t.type?"focusin":"focusout",e(t,g)}),v=p[g][b],v?"ready"===b&&c.domLoaded?f({type:b}):v.push({func:f,scope:h}):(p[g][b]=v=[{func:f,scope:h}],v.fakeName=_,v.capture=C,v.nativeHandler=x,"ready"===b?a(i,x,c):n(i,_||b,x,C)));return i=v=0,f}},c.unbind=function(e,t,n){var o,a,s,l,u,d;if(!e||3===e.nodeType||8===e.nodeType)return c;if(o=e[r]){if(d=p[o],t){for(t=t.split(" "),s=t.length;s--;)if(u=t[s],a=d[u]){if(n)for(l=a.length;l--;)if(a[l].func===n){var f=a.nativeHandler,h=a.fakeName,m=a.capture;a=a.slice(0,l).concat(a.slice(l+1)),a.nativeHandler=f,a.fakeName=h,a.capture=m,d[u]=a}n&&0!==a.length||(delete d[u],i(e,a.fakeName||u,a.nativeHandler,a.capture))}}else{for(u in d)a=d[u],i(e,a.fakeName||u,a.nativeHandler,a.capture);d={}}for(u in d)return c;delete p[o];try{delete e[r]}catch(t){e[r]=null}}return c},c.fire=function(t,n,i){var a;if(!t||3===t.nodeType||8===t.nodeType)return c;i=o(null,i),i.type=n,i.target=t;do a=t[r],a&&e(i,a),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!i.isPropagationStopped());return c},c.clean=function(e){var t,n,i=c.unbind;if(!e||3===e.nodeType||8===e.nodeType)return c;if(e[r]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[r]&&i(e);return c},c.destroy=function(){p={}},c.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var l="mce-data-",u=/^(?:mouse|contextmenu)|click/,d={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1};return s.Event=new s,s.Event.bind(window,"ready",function(){}),s}),r("tinymce/dom/Sizzle",[],function(){function e(e,t,n,i){var r,o,a,s,l,u,c,f,h,m;if((t?t.ownerDocument||t:z)!==R&&M(t),t=t||R,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(A&&!i){if(r=ve.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&F(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&x.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(x.qsa&&(!O||!O.test(e))){if(f=c=H,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=T(e),(c=t.getAttribute("id"))?f=c.replace(be,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+p(u[l]);h=ye.test(e)&&d(t.parentNode)||t,m=u.join(",")}if(m)try{return Z.apply(n,h.querySelectorAll(m)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return P(e.replace(se,"$1"),t,n,i)}function t(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function r(e){var t=R.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function d(e){return e&&typeof e.getElementsByTagName!==$&&e}function c(){}function p(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=V++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u=[U,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[H]||(t[H]={}),(s=l[i])&&s[0]===U&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function g(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function v(e,t,n,r,o,a){return r&&!r[H]&&(r=v(r)),o&&!o[H]&&(o=v(o,a)),i(function(i,a,s,l){var u,d,c,p=[],f=[],h=a.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,p,e,s,l),b=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=g(b,f),r(u,[],s,l),d=u.length;d--;)(c=u[d])&&(b[f[d]]=!(y[f[d]]=c));if(i){if(o||e){if(o){for(u=[],d=b.length;d--;)(c=b[d])&&u.push(y[d]=c);o(null,b=[],u,l)}for(d=b.length;d--;)(c=b[d])&&(u=o?te.call(i,c):p[d])>-1&&(i[u]=!(a[u]=c))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return te.call(t,e)>-1},a,!0),d=[function(e,n,i){return!o&&(i||n!==k)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];s<r;s++)if(n=C.relative[e[s].type])d=[f(h(d),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[H]){for(i=++s;i<r&&!C.relative[e[i].type];i++);return v(s>1&&h(d),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<i&&y(e.slice(s,i)),i<r&&y(e=e.slice(i)),i<r&&p(e))}d.push(n)}return h(d)}function b(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var d,c,p,f=0,h="0",m=i&&[],v=[],y=k,b=i||o&&C.find.TAG("*",u),_=U+=null==y?1:Math.random()||.1,x=b.length;for(u&&(k=a!==R&&a);h!==x&&null!=(d=b[h]);h++){if(o&&d){for(c=0;p=t[c++];)if(p(d,a,s)){l.push(d);break}u&&(U=_)}r&&((d=!p&&d)&&f--,i&&m.push(d))}if(f+=h,r&&h!==f){for(c=0;p=n[c++];)p(m,v,a,s);if(i){if(f>0)for(;h--;)m[h]||v[h]||(v[h]=Q.call(l));v=g(v)}Z.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return u&&(U=_,k=y),m};return r?i(a):a}var _,x,C,E,w,T,S,P,k,I,N,M,R,D,A,O,L,B,F,H="sizzle"+-new Date,z=window.document,U=0,V=0,j=t(),W=t(),q=t(),G=function(e,t){return e===t&&(N=!0),0},$=typeof n,K=1<<31,Y={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,Z=X.push,ee=X.slice,te=X.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ce=new RegExp(ae),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(X=ee.call(z.childNodes),z.childNodes),X[z.childNodes.length].nodeType}catch(e){Z={apply:X.length?function(e,t){J.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=e.support={},w=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=e.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,i=e?e.ownerDocument||e:z,o=i.defaultView;return i!==R&&9===i.nodeType&&i.documentElement?(R=i,D=i.documentElement,A=!w(i),o&&o!==t(o)&&(o.addEventListener?o.addEventListener("unload",function(){M()},!1):o.attachEvent&&o.attachEvent("onunload",function(){M()})),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(i.getElementsByClassName),x.getById=r(function(e){return D.appendChild(e).id=H,!i.getElementsByName||!i.getElementsByName(H).length}),x.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==$&&A){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(_e,xe);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(_e,xe);return function(e){var n=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=x.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==$)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=x.getElementsByClassName&&function(e,t){if(A)return t.getElementsByClassName(e)},L=[],O=[],(x.qsa=ge.test(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(x.matchesSelector=ge.test(B=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){x.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),L.push("!=",ae)}),O=O.length&&new RegExp(O.join("|")),L=L.length&&new RegExp(L.join("|")),n=ge.test(D.compareDocumentPosition),F=n||ge.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=n?function(e,t){if(e===t)return N=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===z&&F(z,e)?-1:t===i||t.ownerDocument===z&&F(z,t)?1:I?te.call(I,e)-te.call(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return N=!0,0;var n,r=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===i?-1:t===i?1:o?-1:s?1:I?te.call(I,e)-te.call(I,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===z?-1:u[r]===z?1:0},i):R},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==R&&M(t),n=n.replace(de,"='$1']"),x.matchesSelector&&A&&(!L||!L.test(n))&&(!O||!O.test(n)))try{var i=B.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(e){}return e(n,R,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==R&&M(e),F(e,t)},e.attr=function(e,t){(e.ownerDocument||e)!==R&&M(e);var i=C.attrHandle[t.toLowerCase()],r=i&&Y.call(C.attrHandle,t.toLowerCase())?i(e,t,!A):n;return r!==n?r:x.attributes||!A?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],i=0,r=0;if(N=!x.detectDuplicates,I=!x.sortStable&&e.slice(0),e.sort(G),N){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return I=null,e},E=e.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=E(t);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,p,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(c=t;c=c[m];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(d=g[H]||(g[H]={}),u=d[e]||[],f=u[0]===U&&u[1],p=u[0]===U&&u[2],c=f&&g.childNodes[f];c=++f&&c&&c[m]||(p=f=0)||h.pop();)if(1===c.nodeType&&++p&&c===t){d[e]=[U,f,p];break}}else if(y&&(u=(t[H]||(t[H]={}))[e])&&u[0]===U)p=u[1];else for(;(c=++f&&c&&c[m]||(p=f=0)||h.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++p||(y&&((c[H]||(c[H]={}))[e]=[U,p]),c!==t)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(t,n){var r,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[H]?o(n):o.length>1?(r=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(se,"$1"));return r[H]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(e){return e=e.replace(_e,xe),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_e,xe).toLowerCase(),function(e){var n;do if(n=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=l(_);return c.prototype=C.filters=C.pseudos,C.setFilters=new c,T=e.tokenize=function(t,n){var i,r,o,a,s,l,u,d=W[t+" "];if(d)return n?0:d.slice(0);for(s=t,l=[],u=C.preFilter;s;){i&&!(r=le.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in C.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):W(t,l).slice(0)},S=e.compile=function(e,t){var n,i=[],r=[],o=q[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=y(t[n]),o[H]?i.push(o):r.push(o);o=q(e,b(r,i)),o.selector=e}return o},P=e.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,c=!i&&T(e=u.selector||e);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===t.nodeType&&A&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(_e,xe),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(_e,xe),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return Z.apply(n,i),n;break}}return(u||S(e,c))(i,t,!A,n,ye.test(e)&&d(t.parentNode)||t),n},x.sortStable=H.split("").sort(G).join("")===H,x.detectDuplicates=!!N,M(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),
e}),r("tinymce/util/Arr",[],function(){function e(e){var t,n,i=e;if(!d(e))for(i=[],t=0,n=e.length;t<n;t++)i[t]=e[t];return i}function t(e,t,i){var r,o;if(!e)return 0;if(i=i||e,e.length!==n){for(r=0,o=e.length;r<o;r++)if(t.call(i,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&t.call(i,e[r],r,e)===!1)return 0;return 1}function i(e,n){var i=[];return t(e,function(t,r){i.push(n(t,r,e))}),i}function r(e,n){var i=[];return t(e,function(t,r){n&&!n(t,r,e)||i.push(t)}),i}function o(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function a(e,t,n,i){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(i,n,e[r],r);return n}function s(e,t,n){var i,r;for(i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1}function l(e,t,i){var r=s(e,t,i);return r!==-1?e[r]:n}function u(e){return e[e.length-1]}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:d,toArray:e,each:t,map:i,filter:r,indexOf:o,reduce:a,findIndex:s,find:l,last:u}}),r("tinymce/util/Tools",["tinymce/Env","tinymce/util/Arr"],function(e,t){function i(e){return null===e||e===n?"":(""+e).replace(f,"")}function r(e,i){return i?!("array"!=i||!t.isArray(e))||typeof e==i:e!==n}function o(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n}function a(e,t,n){var i,r,o,a,s,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],r=l.createNS(e[3].replace(/\.\w+$/,""),n),!r[o]){if("static"==e[2])return r[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[o]));t[o]||(t[o]=function(){},u=1),r[o]=t[o],l.extend(r[o].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=r[o],u?r[o]=function(){return i[a].apply(this,arguments)}:r[o]=function(){return this.parent=i[a],s.apply(this,arguments)},r[o].prototype[o]=r[o],l.each(i,function(e,t){r[o].prototype[t]=i[t]}),l.each(t,function(e,t){i[t]?r[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(r[o].prototype[t]=e)})),l.each(t.static,function(e,t){r[o][t]=e})}}function s(e,t){var i,r,o,a,s=arguments;for(i=1,r=s.length;i<r;i++){t=s[i];for(o in t)t.hasOwnProperty(o)&&(a=t[o],a!==n&&(e[o]=a))}return e}function l(e,n,i,r){r=r||this,e&&(i&&(e=e[i]),t.each(e,function(e,t){return n.call(r,e,t,i)!==!1&&void l(e,n,i,r)}))}function u(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t}function d(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;n<i&&(t=t[e[n]],t);n++);return t}function c(e,n){return!e||r(e,"array")?e:t.map(e.split(n||","),i)}function p(t){var n=e.cacheSuffix;return n&&(t+=(t.indexOf("?")===-1?"?":"&")+n),t}var f=/^\s*|\s*$/g;return{trim:i,isArray:t.isArray,is:r,toArray:t.toArray,makeMap:o,each:t.each,map:t.map,grep:t.filter,inArray:t.indexOf,extend:s,create:a,walk:l,createNS:u,resolve:d,explode:c,_addCacheSuffix:p}}),r("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(e,t,i,r){function o(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e){return e&&e==e.window}function l(e,t){var n,i,r;for(t=t||E,r=t.createElement("div"),n=t.createDocumentFragment(),r.innerHTML=e;i=r.firstChild;)n.appendChild(i);return n}function u(e,t,n,i){var r;if(a(t))t=l(t,v(e[0]));else if(t.length&&!t.nodeType){if(t=p.makeArray(t),i)for(r=t.length-1;r>=0;r--)u(e,t[r],n,i);else for(r=0;r<t.length;r++)u(e,t[r],n,i);return e}if(t.nodeType)for(r=e.length;r--;)n.call(e[r],t);return e}function d(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function c(e,t,n){var i,r;return t=p(t)[0],e.each(function(){var e=this;n&&i==e.parentNode?r.appendChild(e):(i=e.parentNode,r=t.cloneNode(!1),e.parentNode.insertBefore(r,e),r.appendChild(e))}),e}function p(e,t){return new p.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function h(e){return null===e||e===C?"":(""+e).replace(O,"")}function m(e,t){var n,i,r,o,a;if(e)if(n=e.length,n===o){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],t.call(a,i,a)===!1))break}else for(r=0;r<n&&(a=e[r],t.call(a,r,a)!==!1);r++);return e}function g(e,t){var n=[];return m(e,function(e,i){t(i,e)&&n.push(i)}),n}function v(e){return e?9==e.nodeType?e:e.ownerDocument:E}function y(e,t,i){var r=[],o=e[t];for("string"!=typeof i&&i instanceof p&&(i=i[0]);o&&9!==o.nodeType;){if(i!==n){if(o===i)break;if("string"==typeof i&&p(o).is(i))break}1===o.nodeType&&r.push(o),o=o[t]}return r}function b(e,t,i,r){var o=[];for(r instanceof p&&(r=r[0]);e;e=e[t])if(!i||e.nodeType===i){if(r!==n){if(e===r)break;if("string"==typeof r&&p(e).is(r))break}o.push(e)}return o}function _(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function x(e,t,n){m(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})}var C,E=document,w=Array.prototype.push,T=Array.prototype.slice,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,P=e.Event,k=i.makeMap("children,contents,next,prev"),I=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),N=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),M={for:"htmlFor",class:"className",readonly:"readOnly"},R={float:"cssFloat"},D={},A={},O=/^\s*|\s*$/g;return p.fn=p.prototype={constructor:p,selector:"",context:null,length:0,init:function(e,t){var n,i,r=this;if(!e)return r;if(e.nodeType)return r.context=r[0]=e,r.length=1,r;if(t&&t.nodeType)r.context=t;else{if(t)return p(e).attr(t);r.context=t=document}if(a(e)){if(r.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e),!n)return p(t).find(e);if(n[1])for(i=l(e,v(t)).firstChild;i;)w.call(r,i),i=i.nextSibling;else{if(i=v(t).getElementById(n[2]),!i)return r;if(i.id!==n[2])return r.find(e);r.length=1,r[0]=i}}else this.add(e,!1);return r},toArray:function(){return i.toArray(this)},add:function(e,t){var n,i,r=this;if(a(e))return r.add(p(e));if(t!==!1)for(n=p.unique(r.toArray().concat(p.makeArray(e))),r.length=n.length,i=0;i<n.length;i++)r[i]=n[i];else w.apply(r,p.makeArray(e));return r},attr:function(e,t){var n,i=this;if("object"==typeof e)m(e,function(e,t){i.attr(e,t)});else{if(!o(t)){if(i[0]&&1===i[0].nodeType){if(n=D[e],n&&n.get)return n.get(i[0],e);if(N[e])return i.prop(e)?e:C;t=i[0].getAttribute(e,2),null===t&&(t=C)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=D[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=M[e]||e,"object"==typeof e)m(e,function(e,t){n.prop(e,t)});else{if(!o(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var r,a,s=this;if("object"==typeof e)m(e,function(e,t){s.css(e,t)});else if(o(t))e=n(e),"number"!=typeof t||I[e]||(t+="px"),s.each(function(){var n=this.style;if(a=A[e],a&&a.set)return void a.set(this,t);try{this.style[R[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(i(e)):n.removeAttribute(e))});else{if(r=s[0],a=A[e],a&&a.get)return a.get(r);if(r.ownerDocument.defaultView)try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(i(e))}catch(e){return C}else if(r.currentStyle)return r.currentStyle[n(e)]}return s},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],P.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(o(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(i){p(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(o(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return u(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return u(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?u(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?u(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return p(e).append(this),this},prependTo:function(e){return p(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return c(this,e)},wrapAll:function(e){return c(this,e,!0)},wrapInner:function(e){return this.each(function(){p(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){p(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),p(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(e.indexOf(" ")!==-1?m(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,i){var r,o;o=d(i,e),o!==t&&(r=i.className,o?i.className=h((" "+r+" ").replace(" "+e+" "," ")):i.className+=r?" "+e:e)}),n)},hasClass:function(e){return d(this[0],e)},each:function(e){return m(this,e)},on:function(e,t){return this.each(function(){P.bind(this,e,t)})},off:function(e,t){return this.each(function(){P.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?P.fire(this,e.type,e):P.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new p(T.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)p.find(e,this[t],i);return p(i)},filter:function(e){return p("function"==typeof e?g(this.toArray(),function(t,n){return e(n,t)}):p.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof p&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&p(i).is(e)){t.push(i);break}if(i==e){t.push(i);break}i=i.parentNode}}),p(t)},offset:function(e){var t,n,i,r,o=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,i=n.documentElement,t.getBoundingClientRect&&(r=t.getBoundingClientRect(),o=r.left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=r.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:o,top:a})},push:w,sort:[].sort,splice:[].splice},i.extend(p,{extend:i.extend,makeArray:function(e){return s(e)||e.nodeType?[e]:i.toArray(e)},inArray:f,isArray:i.isArray,each:m,trim:h,grep:g,find:t,expr:t.selectors,unique:t.uniqueSort,text:t.getText,contains:t.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!=t[i].nodeType&&t.splice(i,1);return t=1===t.length?p.find.matchesSelector(t[0],e)?[t[0]]:[]:p.find.matches(e,t)}}),m({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y(e,"parentNode")},next:function(e){return _(e,"nextSibling",1)},prev:function(e){return _(e,"previousSibling",1)},children:function(e){return b(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){p.fn[e]=function(n){var i=this,r=[];return i.each(function(){var e=t.call(r,this,n,r);e&&(p.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(k[e]||(r=p.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=p(r),n?r.filter(n):r}}),m({parentsUntil:function(e,t){return y(e,"parentNode",t)},nextUntil:function(e,t){return b(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return b(e,"previousSibling",1,t).slice(1)}},function(e,t){p.fn[e]=function(n,i){var r=this,o=[];return r.each(function(){var e=t.call(o,this,n,o);e&&(p.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=p.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=p(o),i?o.filter(i):o}}),p.fn.is=function(e){return!!e&&this.filter(e).length>0},p.fn.init.prototype=p.fn,p.overrideDefaults=function(e){function t(i,r){return n=n||e(),0===arguments.length&&(i=n.element),r||(r=n.context),new t.fn.init(i,r)}var n;return p.extend(t,this),t},r.ie&&r.ie<8&&(x(D,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?C:t},size:function(e){var t=e.size;return 20===t?C:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?C:t}}),x(D,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(R.float="styleFloat",x(A,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),p.attrHooks=D,p.cssHooks=A,p}),r("tinymce/html/Styles",[],function(){return function(e,t){function n(e,t,n,i){function r(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(i)}var i,r,o,a,s,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,p={},f="\ufeff";for(e=e||{},t&&(a=t.getValidStyles(),s=t.getInvalidStyles()),o=("\\\" \\' \\; \\: ; : "+f).split(" "),r=0;r<o.length;r++)p[o[r]]=f+r,p[f+r]=o[r];return{toHex:function(e){return e.replace(l,n)},parse:function(t){function i(e,t,n){var i,o,a,s;if(i=b[e+"-top"+t],i&&(o=b[e+"-right"+t],o&&(a=b[e+"-bottom"+t],a&&(s=b[e+"-left"+t])))){var l=[i,o,a,s];for(r=l.length-1;r--&&l[r]===l[r+1];);r>-1&&n||(b[e+t]=r==-1?l[0]:l.join(" "),delete b[e+"-top"+t],delete b[e+"-right"+t],delete b[e+"-bottom"+t],delete b[e+"-left"+t])}}function o(e){var t,n=b[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return b[e]=n[0],!0}}function a(e,t,n,i){o(t)&&o(n)&&o(i)&&(b[e]=b[t]+" "+b[n]+" "+b[i],delete b[t],delete b[n],delete b[i])}function s(e){return y=!0,p[e]}function f(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return p[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function h(t,n,i,r,o,a){if(o=o||a)return o=f(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=f(n||i||r),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return _&&(n=_.call(x,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var m,g,v,y,b={},_=e.url_converter,x=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,s)});m=d.exec(t);){if(g=m[1].replace(c,"").toLowerCase(),v=m[2].replace(c,""),v=v.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),g&&v.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(|\/\*|\*\//.test(v)))continue;"font-weight"===g&&"700"===v?v="bold":"color"!==g&&"background-color"!==g||(v=v.toLowerCase()),v=v.replace(l,n),v=v.replace(u,h),b[g]=y?f(v,!0):v}d.lastIndex=m.index+m[0].length}i("border","",!0),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),a("border","border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(e,t){function n(t){var n,r,o,s;if(n=a[t])for(r=0,o=n.length;r<o;r++)t=n[r],s=e[t],s!==i&&s.length>0&&(u+=(u.length>0?" ":"")+t+": "+s+";")}function r(e,t){var n;return n=s["*"],(!n||!n[e])&&(n=s[t],!n||!n[e])}var o,l,u="";if(t&&a)n("*"),n(t);else for(o in e)l=e[o],l!==i&&l.length>0&&(s&&!r(o,t)||(u+=(u.length>0?" ":"")+o+": "+l+";"));return u}}}}),r("tinymce/dom/TreeWalker",[],function(){return function(e,t){function n(e,n,i,r){var o,a;if(e){if(!r&&e[n])return e[n];if(e!=t){if(o=e[i])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[i])return o}}}function i(e,n,i,r){var o,a,s;if(e){if(o=e[i],t&&o===t)return;if(o){if(!r)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if(a=e.parentNode,a&&a!==t)return a}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)},this.prev2=function(e){return r=i(r,"lastChild","previousSibling",e)}}}),r("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(n){function i(){return O.createDocumentFragment()}function r(e,t){E(H,e,t)}function o(e,t){E(z,e,t)}function a(e){r(e.parentNode,G(e))}function s(e){r(e.parentNode,G(e)+1)}function l(e){o(e.parentNode,G(e))}function u(e){o(e.parentNode,G(e)+1)}function d(e){e?(A[j]=A[V],A[W]=A[U]):(A[V]=A[j],A[U]=A[W]),A.collapsed=H}function c(e){a(e),u(e)}function p(e){r(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=A[V],i=A[U],r=A[j],o=A[W],a=t.startContainer,s=t.startOffset,l=t.endContainer,u=t.endOffset;return 0===e?C(n,i,a,s):1===e?C(r,o,a,s):2===e?C(r,o,l,u):3===e?C(n,i,l,u):void 0}function h(){w(F)}function m(){return w(L)}function g(){return w(B)}function v(e){var t,i,r=this[V],o=this[U];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(i=r.childNodes[o]),i?r.insertBefore(e,i):3==r.nodeType?n.insertAfter(e,r):r.appendChild(e)):o?o>=r.nodeValue.length?n.insertAfter(e,r):(t=r.splitText(o),r.parentNode.insertBefore(e,t)):r.parentNode.insertBefore(e,r)}function y(e){var t=A.extractContents();A.insertNode(e),e.appendChild(t),A.selectNode(e)}function b(){return q(new t(n),{startContainer:A[V],startOffset:A[U],endContainer:A[j],endOffset:A[W],collapsed:A.collapsed,commonAncestorContainer:A.commonAncestorContainer})}function _(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function x(){return A[V]==A[j]&&A[U]==A[W]}function C(e,t,i,r){var o,a,s,l,u,d;if(e==i)return t==r?0:t<r?-1:1;for(o=i;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&a<t;)a++,s=s.nextSibling;return t<=a?-1:1}for(o=e;o&&o.parentNode!=i;)o=o.parentNode;if(o){for(a=0,s=i.firstChild;s!=o&&a<r;)a++,s=s.nextSibling;return a<r?-1:1}for(l=n.findCommonAncestor(e,i),u=e;u&&u.parentNode!=l;)u=u.parentNode;for(u||(u=l),d=i;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),u==d)return 0;for(s=l.firstChild;s;){if(s==u)return-1;if(s==d)return 1;s=s.nextSibling}}function E(e,t,i){var r,o;for(e?(A[V]=t,A[U]=i):(A[j]=t,A[W]=i),r=A[j];r.parentNode;)r=r.parentNode;for(o=A[V];o.parentNode;)o=o.parentNode;o==r?C(A[V],A[U],A[j],A[W])>0&&A.collapse(e):A.collapse(e),A.collapsed=x(),A.commonAncestorContainer=n.findCommonAncestor(A[V],A[j])}function w(e){var t,n,i,r,o,a,s,l=0,u=0;if(A[V]==A[j])return T(e);for(t=A[j],n=t.parentNode;n;t=n,n=n.parentNode){if(n==A[V])return S(t,e);++l}for(t=A[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==A[j])return P(t,e);++u}for(i=u-l,r=A[V];i>0;)r=r.parentNode,i--;for(o=A[j];i<0;)o=o.parentNode,i++;for(a=r.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)r=a,o=s;return k(r,o,e)}function T(e){var t,n,r,o,a,s,l,u,d;if(e!=F&&(t=i()),A[U]==A[W])return t;if(3==A[V].nodeType){if(n=A[V].nodeValue,r=n.substring(A[U],A[W]),e!=B&&(o=A[V],u=A[U],d=A[W]-A[U],0===u&&d>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(u,d),A.collapse(H)),e==F)return;return r.length>0&&t.appendChild(O.createTextNode(r)),t}for(o=_(A[V],A[U]),a=A[W]-A[U];o&&a>0;)s=o.nextSibling,l=R(o,e),t&&t.appendChild(l),--a,o=s;return e!=B&&A.collapse(H),t}function S(e,t){var n,r,o,a,s,l;if(t!=F&&(n=i()),r=I(e,t),n&&n.appendChild(r),o=G(e),a=o-A[U],a<=0)return t!=B&&(A.setEndBefore(e),A.collapse(z)),n;for(r=e.previousSibling;a>0;)s=r.previousSibling,l=R(r,t),n&&n.insertBefore(l,n.firstChild),--a,r=s;return t!=B&&(A.setEndBefore(e),A.collapse(z)),n}function P(e,t){var n,r,o,a,s,l;for(t!=F&&(n=i()),o=N(e,t),n&&n.appendChild(o),r=G(e),++r,a=A[W]-r,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=R(o,t),n&&n.appendChild(l),--a,o=s;return t!=B&&(A.setStartAfter(e),A.collapse(H)),n}function k(e,t,n){var r,o,a,s,l,u,d;for(n!=F&&(o=i()),r=N(e,n),o&&o.appendChild(r),a=G(e),s=G(t),++a,l=s-a,u=e.nextSibling;l>0;)d=u.nextSibling,r=R(u,n),o&&o.appendChild(r),u=d,--l;return r=I(t,n),o&&o.appendChild(r),n!=B&&(A.setStartAfter(e),A.collapse(H)),o}function I(e,t){var n,i,r,o,a,s=_(A[j],A[W]-1),l=s!=A[j];if(s==e)return M(s,l,z,t);for(n=s.parentNode,i=M(n,z,z,t);n;){for(;s;)r=s.previousSibling,o=M(s,l,z,t),t!=F&&i.insertBefore(o,i.firstChild),l=H,s=r;if(n==e)return i;s=n.previousSibling,n=n.parentNode,a=M(n,z,z,t),t!=F&&a.appendChild(i),i=a}}function N(e,t){var n,i,r,o,a,s=_(A[V],A[U]),l=s!=A[V];if(s==e)return M(s,l,H,t);for(n=s.parentNode,i=M(n,z,H,t);n;){for(;s;)r=s.nextSibling,o=M(s,l,H,t),t!=F&&i.appendChild(o),l=H,s=r;if(n==e)return i;s=n.nextSibling,n=n.parentNode,a=M(n,z,H,t),t!=F&&a.appendChild(i),i=a}}function M(e,t,i,r){var o,a,s,l,u;if(t)return R(e,r);if(3==e.nodeType){if(o=e.nodeValue,i?(l=A[U],a=o.substring(l),s=o.substring(0,l)):(l=A[W],a=o.substring(0,l),s=o.substring(l)),r!=B&&(e.nodeValue=s),r==F)return;return u=n.clone(e,z),u.nodeValue=a,u}if(r!=F)return n.clone(e,z)}function R(e,t){return t!=F?t==B?n.clone(e,H):e:void e.parentNode.removeChild(e)}function D(){return n.create("body",null,g()).outerText}var A=this,O=n.doc,L=0,B=1,F=2,H=!0,z=!1,U="startOffset",V="startContainer",j="endContainer",W="endOffset",q=e.extend,G=n.nodeIndex;return q(A,{startContainer:O,startOffset:0,endContainer:O,endOffset:0,collapsed:H,commonAncestorContainer:O,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:o,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:u,collapse:d,selectNode:c,selectNodeContents:p,compareBoundaryPoints:f,deleteContents:h,extractContents:m,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:D}),A}return t.prototype.toString=function(){return this.toStringIE()},t}),r("tinymce/html/Entities",["tinymce/util/Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),r[i]||(o="&"+e[n+1]+";",a[i]=o,a[o]=i);return a}}var i,r,o,a=e.makeMap,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\"\']/g,d=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var p={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(u,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:l,function(e){return r[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?s:l,function(e){return r[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function u(e,n){return p.encodeNamed(e,n,t)}return t=n(t)||i,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?u:p.encodeNamed:e.numeric?p.encodeNumeric:p.encodeRaw},decode:function(e){return e.replace(d,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):c[n]||String.fromCharCode(n)):o[e]||i[e]||t(e)})}};return p}),r("tinymce/dom/StyleSheetLoader",["tinymce/util/Tools","tinymce/util/Delay"],function(e,t){return function(n,i){function r(e){n.getElementsByTagName("head")[0].appendChild(e)}function o(i,o,u){function d(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function c(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function p(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function f(e,n){e()||((new Date).getTime()-y<a?t.setTimeout(n):c())}function h(){f(function(){for(var e,t,i=n.styleSheets,r=i.length;r--;)if(e=i[r],t=e.ownerNode?e.ownerNode:e.owningElement,t&&t.id===g.id)return d(),!0},h)}function m(){f(function(){try{var e=v.sheet.cssRules;return d(),!!e}catch(e){}},m)}var g,v,y,b;if(i=e._addCacheSuffix(i),l[i]?b=l[i]:(b={passed:[],failed:[]},l[i]=b),o&&b.passed.push(o),u&&b.failed.push(u),1!=b.status){if(2==b.status)return void d();if(3==b.status)return void c();if(b.status=1,g=n.createElement("link"),g.rel="stylesheet",g.type="text/css",g.id="u"+s++,g.async=!1,g.defer=!1,y=(new Date).getTime(),"onload"in g&&!p())g.onload=h,g.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=n.createElement("style"),v.textContent='@import "'+i+'"',m(),void r(v);h()}r(g),g.href=i}}var a,s=0,l={};i=i||{},a=i.maxLoadTime||5e3,this.load=o}}),r("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,t,i,r,o,a,s,l,u,d){function c(e,t){var n,i={},r=t.keep_values;return n={set:function(n,i,r){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||e,i,r,n[0])),n.attr("data-mce-"+r,i).attr(r,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},i={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(r&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(i.href=i.src=n),i}function p(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function f(e,t){var n,i,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(r++,n=i);return r}function h(e,n){var o,a=this;a.doc=e,a.win=window,a.files={},a.counter=0,a.stdMode=!b||e.documentMode>=8,a.boxModel=!b||"CSS1Compat"==e.compatMode||a.stdMode,a.styleSheetLoader=new d(e),a.boundEvents=[],a.settings=n=n||{},a.schema=n.schema,a.styles=new i({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),a.fixDoc(e),a.events=n.ownEvents?new r(n.proxy):r.Event,a.attrHooks=c(a,n),o=n.schema?n.schema.getBlockElements():{},a.$=t.overrideDefaults(function(){return{context:e,element:a.getRoot()}}),a.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}}var m=u.each,g=u.is,v=u.grep,y=u.trim,b=l.ie,_=/^([a-z0-9],?)+$/i,x=/^[ \t\r\n]*$/;return h.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(b&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,i,r=this;return!b||1!==e.nodeType||t?e.cloneNode(t):(i=r.doc,t?n.firstChild:(n=i.createElement(e.nodeName),m(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),t.indexOf("px")===-1&&(t=0),n.indexOf("px")===-1&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,i,r){var o,a=this,s=[];for(e=a.get(e),r=r===n,i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),g(t,"string")&&(o=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return a.is(e,o)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;s.push(e)}e=e.parentNode}return r?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(t,i){var r;if(t.length===n){if("*"===i)return 1==t.nodeType;if(_.test(i)){for(i=i.toLowerCase().split(/,/),t=t.nodeName.toLowerCase(),r=i.length-1;r>=0;r--)if(i[r]==t)return!0;
return!1}}if(t.nodeType&&1!=t.nodeType)return!1;var o=t.nodeType?[t]:t;return e(i,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,i,r){var o=this;return this.run(e,function(e){var a;return a=g(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):o.setHTML(a,i)),r?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,r="";r+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!=typeof t[i]&&(r+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,i,r=this.doc;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&p(this,e)},getStyle:function(e,t,i){return e=this.$$(e),i?e.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=l.ie&&l.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:n)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&p(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i,r,o=this,a=o.settings;""===n&&(n=null),e=o.$$(e),i=e.attr(t),e.length&&(r=o.attrHooks[t],r&&r.set?r.set(e,n,t):e.attr(t,n),i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,i){m(t,function(e,t){n.setAttrib(i,t,e)})})},getAttrib:function(e,t,n){var i,r,o=this;return e=o.$$(e),e.length&&(i=o.attrHooks[t],r=i&&i.get?i.get(e,t):e.attr(t)),"undefined"==typeof r&&(r=n||""),r},getPos:function(e,n){var i,r,o=this,a=0,s=0,l=o.doc,u=l.body;if(e=o.get(e),n=n||u,e){if(n===u&&e.getBoundingClientRect&&"static"===t(u).css("position"))return r=e.getBoundingClientRect(),n=o.boxModel?l.documentElement:u,a=r.left+(l.documentElement.scrollLeft||u.scrollLeft)-n.clientLeft,s=r.top+(l.documentElement.scrollTop||u.scrollTop)-n.clientTop,{x:a,y:s};for(i=e;i&&i!=n&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=n&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:a,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,i=this,r=i.doc;if(i!==h.DOM&&r===document){var o=h.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=!0,h.DOM.addedStyles=o}n=r.getElementById("mceDefaultStyles"),n||(n=r.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=r.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(r.createTextNode(e))},loadCSS:function(e){var t,n=this,i=n.doc;return n!==h.DOM&&i===document?void h.DOM.loadCSS(e):(e||(e=""),t=i.getElementsByTagName("head")[0],void m(e.split(","),function(e){var r;e=u._addCacheSuffix(e),n.files[e]||(n.files[e]=!0,r=n.create("link",{rel:"stylesheet",href:e}),b&&i.documentMode&&i.recalc&&(r.onload=function(){i.recalc&&i.recalc(),r.onload=null}),t.appendChild(r))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,n,i){this.$$(e).toggleClass(n,i).each(function(){""===this.className&&t(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,n){e=this.$$(e),b?e.each(function(e,i){if(i.canHaveHTML!==!1){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+n,i.removeChild(i.firstChild)}catch(e){t("<div>").html("<br>"+n).contents().slice(1).appendTo(i)}return n}}):e.html(n)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType&&"outerHTML"in e?e.outerHTML:t("<div>").append(t(e).clone()).html()},setOuterHTML:function(e,n){var i=this;i.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=n)}catch(e){}i.remove(t(this).html(n),!0)})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(e,t,n){var i=this;return i.run(t,function(t){return g(t,"array")&&(e=e.cloneNode(!0)),n&&m(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,i=this;return e.nodeName!=t.toUpperCase()&&(n=i.create(t),m(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return this.styles.toHex(u.trim(e))},run:function(e,t,n){var i,r=this;return"string"==typeof e&&(e=r.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],m(e,function(e,o){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,o)))}),i))},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,i,r,a,s,l=this,u=0;if(e=e.firstChild){a=new o(e,e.parentNode),t=t||(l.schema?l.schema.getNonEmptyElements():null);do{if(r=e.nodeType,1===r){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++;continue}return!1}for(i=l.getAttribs(e),n=i.length;n--;)if(s=i[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==r)return!1;if(3===r&&!x.test(e.nodeValue))return!1}while(e=a.next())}return u<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:f,split:function(e,t,n){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,r=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=r.length-1;n>=0;n--)i(r[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var a=y(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==o&&(r=e.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(r[0],e),r.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var r,o,a,s=this,l=s.createRng();if(e&&t)return l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),r=l.extractContents(),l=s.createRng(),l.setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),o=l.extractContents(),a=e.parentNode,a.insertBefore(i(r),e),n?a.insertBefore(n,e):a.insertBefore(t,e),a.insertBefore(i(o),e),s.remove(e),n||t},bind:function(e,t,n,i){var r=this;if(u.isArray(e)){for(var o=e.length;o--;)e[o]=r.bind(e[o],t,n,i);return e}return!r.settings.collect||e!==r.doc&&e!==r.win||r.boundEvents.push([e,t,n,i]),r.events.bind(e,t,n,i||r)},unbind:function(e,t,n){var i,r=this;if(u.isArray(e)){for(i=e.length;i--;)e[i]=r.unbind(e[i],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(i=r.boundEvents.length;i--;){var o=r.boundEvents[i];e!=o[0]||t&&t!=o[1]||n&&n!=o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,r=t;if(e)for("string"==typeof r&&(r=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(r(e))return e;return null}},h.DOM=new h(document),h.nodeIndex=f,h}),r("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){function n(){function e(e,n){function r(){l.remove(s),a&&(a.onreadystatechange=a.onload=a=null),n()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var a,s,l=i;s=l.uniqueId(),a=document.createElement("script"),a.id=s,a.type="text/javascript",a.src=t._addCacheSuffix(e),"onreadystatechange"in a?a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&r()}:a.onload=r,a.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(a)}var n,a=0,s=1,l=2,u={},d=[],c={},p=[],f=0;this.isDone=function(e){return u[e]==l},this.markDone=function(e){u[e]=l},this.add=this.load=function(e,t,i){var r=u[e];r==n&&(d.push(e),u[e]=a),t&&(c[e]||(c[e]=[]),c[e].push({func:t,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(d,e,t)},this.loadScripts=function(t,i,a){function d(e){r(c[e],function(e){e.func.call(e.scope)}),c[e]=n}var h;p.push({func:i,scope:a||this}),(h=function(){var n=o(t);t.length=0,r(n,function(t){return u[t]==l?void d(t):void(u[t]!=s&&(u[t]=s,f++,e(t,function(){u[t]=l,f--,d(t),h()})))}),f||(r(p,function(e){e.func.call(e.scope)}),p.length=0)})()}}var i=e.DOM,r=t.each,o=t.grep;return n.ScriptLoader=new n,n}),r("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,t){function i(){var e=this;e.items=[],e.urls={},e.lookup={}}var r=t.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:n},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var r=i.language;if(r&&i.languageLoad!==!1){if(n)if(n=","+n+",",n.indexOf(","+r.substr(0,2)+",")!=-1)r=r.substr(0,2);else if(n.indexOf(","+r+",")==-1)return;e.ScriptLoader.add(this.urls[t]+"/langs/"+r+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];r(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(t,o,a,s){function l(){var i=u.dependencies(t);r(i,function(e){var t=u.createUrl(o,e);u.load(t.resource,t,n,n)}),a&&(s?a.call(s):a.call(e))}var u=this,d=o;u.urls[t]||("object"==typeof o&&(d=o.prefix+o.resource+o.suffix),0!==d.indexOf("/")&&d.indexOf("://")==-1&&(d=i.baseURL+"/"+d),u.urls[t]=d.substring(0,d.lastIndexOf("/")),u.lookup[t]?l():e.ScriptLoader.add(d,l,s))}},i.PluginManager=new i,i.ThemeManager=new i,i}),r("tinymce/dom/NodeType",[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,i;if(t&&t.nodeType)for(i=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(i===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var i,r;if(s(n))for(i=0;i<t.length;i++)if(r=getComputedStyle(n,null).getPropertyValue(e),r===t[i])return!0;return!1}}function i(e,t){return function(n){return s(n)&&n[e]===t}}function r(e,t){return function(n){return s(n)&&n.getAttribute(e)===t}}function o(e){return s(e)&&e.hasAttribute("data-mce-bogus")}function a(e){return function(t){if(s(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var s=e(1);return{isText:e(3),isElement:s,isComment:e(8),isBr:t("br"),isContentEditableTrue:a("true"),isContentEditableFalse:a("false"),matchNodeNames:t,hasPropValue:i,hasAttributeValue:r,matchStyleValues:n,isBogus:o}}),r("tinymce/text/Zwsp",[],function(){function e(e){return e==n}function t(e){return e.replace(new RegExp(n,"g"),"")}var n="​";return{isZwsp:e,ZWSP:n,trim:t}}),r("tinymce/caret/CaretContainer",["tinymce/dom/NodeType","tinymce/text/Zwsp"],function(e,t){function n(e){return c(e)&&(e=e.parentNode),d(e)&&e.hasAttribute("data-mce-caret")}function i(e){return c(e)&&t.isZwsp(e.data)}function r(e){return n(e)||i(e)}function o(e,n){var i,o,a,s;if(i=e.ownerDocument,a=i.createTextNode(t.ZWSP),s=e.parentNode,n){if(o=e.previousSibling,c(o)){if(r(o))return o;if(u(o))return o.splitText(o.data.length-1)}s.insertBefore(a,e)}else{if(o=e.nextSibling,c(o)){if(r(o))return o;if(l(o))return o.splitText(1),o}e.nextSibling?s.insertBefore(a,e.nextSibling):s.appendChild(a)}return a}function a(e,t,n){var i,r,o;return i=t.ownerDocument,r=i.createElement(e),r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(i.createTextNode(" ")),o=t.parentNode,n?o.insertBefore(r,t):t.nextSibling?o.insertBefore(r,t.nextSibling):o.appendChild(r),r}function s(e){var n;d(e)&&r(e)&&("&nbsp;"!=e.innerHTML?e.removeAttribute("data-mce-caret"):e.parentNode&&e.parentNode.removeChild(e)),c(e)&&(n=t.trim(e.data),0===n.length&&e.parentNode&&e.parentNode.removeChild(e),e.nodeValue=n)}function l(e){return c(e)&&e.data[0]==t.ZWSP}function u(e){return c(e)&&e.data[e.data.length-1]==t.ZWSP}var d=e.isElement,c=e.isText;return{isCaretContainer:r,isCaretContainerBlock:n,isCaretContainerInline:i,insertInline:o,insertBlock:a,remove:s,startsWithCaretContainer:l,endsWithCaretContainer:u}}),r("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/dom/NodeType","tinymce/caret/CaretContainer"],function(e,t,n,i){function r(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}function o(e){this.walk=function(t,n){function i(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,r){var a=r?"nextSibling":"previousSibling";for(p=e,f=p.parentNode;p&&p!=t;p=f)f=p.parentNode,h=o(p==e?p:p[a],a),h.length&&(r||h.reverse(),n(i(h)))}var u,d,c,p,f,h,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(m=e.select("td[data-mce-selected],th[data-mce-selected]"),m.length>0)return void s(m,function(e){n([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=r(y,b)),g==y)return n(i([g]));for(u=e.findCommonAncestor(g,y),p=g;p;p=p.parentNode){if(p===y)return l(g,u,!0);if(p===u)break}for(p=y;p;p=p.parentNode){if(p===g)return l(y,u);if(p===u)break}d=a(g,u)||g,c=a(y,u)||y,l(g,d,!0),h=o(d==g?d:d.nextSibling,"nextSibling",c==y?c.nextSibling:c),h.length&&n(i(h)),l(y,c)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset;return n==r&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(r=t(n,i),n=r.previousSibling,o>i?(o-=i,n=r=t(r,o).previousSibling,o=r.nodeValue.length,i=0):o=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==r.nodeType&&o>0&&o<r.nodeValue.length&&(r=t(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:r,endOffset:o}},this.normalize=function(n){function i(i){function a(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function s(n,i){for(var r=new t(n,e.getParent(n.parentNode,e.isBlock)||_);n=r[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function d(e){for(;e&&e!=_;){if(l(e))return!0;e=e.parentNode}return!1}function c(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function p(n,i){var a,s,l;if(i=i||f,l=e.getParent(i.parentNode,e.isBlock)||_,n&&"BR"==i.nodeName&&b&&e.isEmpty(l))return f=i.parentNode,h=e.nodeIndex(i),void(r=!0);for(a=new t(i,l);g=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(g)||u(g))return;if(3===g.nodeType&&g.nodeValue.length>0)return f=g,h=n?g.nodeValue.length:0,void(r=!0);if(e.isBlock(g)||v[g.nodeName.toLowerCase()])return;s=g}o&&s&&(f=s,r=!0,h=0)}var f,h,m,g,v,y,b,_=e.getRoot();if(f=n[(i?"start":"end")+"Container"],h=n[(i?"start":"end")+"Offset"],b=1==f.nodeType&&h===f.childNodes.length,v=e.schema.getNonEmptyElements(),y=i,!u(f)){if(1==f.nodeType&&h>f.childNodes.length-1&&(y=!1),9===f.nodeType&&(f=e.getRoot(),h=0),f===_){if(y&&(g=f.childNodes[h>0?h-1:0])){if(u(g))return;if(v[g.nodeName]||"TABLE"==g.nodeName)return}if(f.hasChildNodes()){if(h=Math.min(!y&&h>0?h-1:h,f.childNodes.length-1),f=f.childNodes[h],h=0,d(f)||u(f))return;if(f.hasChildNodes()&&!/TABLE/.test(f.nodeName)){g=f,m=new t(f,_);do{if(l(g)||u(g)){r=!1;break}if(3===g.nodeType&&g.nodeValue.length>0){h=y?0:g.nodeValue.length,f=g,r=!0;break}if(v[g.nodeName.toLowerCase()]&&!a(g)){h=e.nodeIndex(g),f=g.parentNode,"IMG"!=g.nodeName||y||h++,r=!0;break}}while(g=y?m.next():m.prev())}}}o&&(3===f.nodeType&&0===h&&p(!0),1===f.nodeType&&(g=f.childNodes[h],g||(g=f.childNodes[h-1]),!g||"BR"!==g.nodeName||c(g,"A")||s(g)||s(g,!0)||p(!0,g))),y&&!o&&3===f.nodeType&&h===f.nodeValue.length&&p(!1),r&&n["set"+(i?"Start":"End")](f,h)}}var r,o;return o=n.collapsed,i(!0),o||i(),r&&o&&n.collapse(!0),r}}function a(t,n,i){var r,o,a;if(r=i.elementFromPoint(t,n),o=i.body.createTextRange(),"HTML"==r.tagName&&(r=i.body),o.moveToElementText(r),a=e.toArray(o.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return o.moveToPoint(t,n),o.collapse(!0),o}catch(e){}}return null}var s=e.each,l=n.isContentEditableFalse,u=i.isCaretContainer;return o.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},o.getCaretRangeFromPoint=function(e,t,n){var i,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(e,t),i=n.createRange(),i.setStart(r.offsetNode,r.offset),i.collapse(!0);else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(r){i=a(e,t,n)}}return i},o.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},o.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},o}),r("tinymce/NodeChange",["tinymce/dom/RangeUtils","tinymce/Env","tinymce/util/Delay"],function(e,t,n){return function(i){function r(e){var t,n;if(n=i.$(e).parentsUntil(i.getBody()).add(e),n.length===a.length){for(t=n.length;t>=0&&n[t]===a[t];t--);if(t===-1)return a=n,!0}return a=n,!1}var o,a=[];"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,r;n=i.selection.getRng(),r={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(r,o)||i.fire("SelectionChange"),o=r}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var e=i.selection.getStart(!0);!t.range&&i.selection.isCollapsed()||!r(e)&&i.dom.isChildOf(e,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==i.selection.getNode().nodeName?n.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,o=i.selection;i.initialized&&o&&!i.settings.disable_nodechange&&!i.readonly&&(r=i.getBody(),t=o.getStart()||r,t.ownerDocument==i.getDoc()&&i.dom.isChildOf(t,r)||(t=r),"IMG"==t.nodeName&&o.isCollapsed()&&(t=t.parentNode),n=[],i.dom.getParent(t,function(e){return e===r||void n.push(e)}),e=e||{},e.element=t,e.parents=n,i.fire("NodeChange",e))}}}),r("tinymce/html/Node",[],function(){function e(e,t,n){var i,r,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(i=e[a])return i;for(r=e.parent;r&&r!==t;r=r.parent)if(i=r[a])return i}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,i,r,o=this;if("string"!=typeof e){for(i in e)o.attr(i,e[i]);return o}if(n=o.attributes){if(t!==r){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),o;return o}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},clone:function(){var e,n,i,r,o,a=this,s=new t(a.name,a.type);if(i=a.attributes){for(o=[],o.map={},e=0,n=i.length;e<n;e++)r=i[e],"id"!==r.name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(t){var n,i=this,r=[];for(n=i.firstChild;n;n=e(n,i))n.name===t&&r.push(n);return r},empty:function(){var t,n,i,r=this;if(r.firstChild){for(t=[],i=r.firstChild;i;i=e(i,r))t.push(i);for(n=t.length;n--;)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(t){var i,r,o=this,a=o.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(i=a.attributes.length;i--;)if(r=a.attributes[i].name,"name"===r||0===r.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,o));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var r,o;if(r=new t(e,i[e]||1),n)for(o in n)r.attr(o,n[o]);return r},t}),r("tinymce/html/Schema",["tinymce/util/Tools"],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,i){function r(e,t){var n,i,r={};for(n=0,i=e.length;n<i;n++)r[e[n]]=t||{};return r}var s,l,u,d=arguments;for(i=i||[],n=n||"","string"==typeof i&&(i=t(i)),l=3;l<d.length;l++)"string"==typeof d[l]&&(d[l]=t(d[l])),i.push.apply(i,d[l]);for(e=t(e),s=e.length;s--;)u=[].concat(a,t(n)),f[e[s]]={attributes:r(u),attributesOrder:u,children:r(i,o)}}function i(e,n){var i,r,o,a;for(e=t(e),i=e.length,n=t(n);i--;)for(r=f[e[i]],o=0,a=n.length;o<a;o++)r.attributes[n[o]]={},r.attributesOrder.push(n[o])}var a,l,u,d,c,p,f={};return r[e]?r[e]:(a=t("id accesskey class dir lang style tabindex title"),l=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),u=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(a.push.apply(a,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),l.push.apply(l,t("article aside details dialog figure header footer hgroup section nav")),u.push.apply(u,t("audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(a.push("xml:lang"),p=t("acronym applet basefont big font strike tt"),u.push.apply(u,p),s(p,function(e){n(e,"",u)}),c=t("center dir isindex noframes"),l.push.apply(l,c),d=[].concat(l,u),s(c,function(e){n(e,"",d)})),d=d||[].concat(l,u),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",u),n("q","cite",u),n("ins del","cite datetime",d),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",d,"param"),n("param","name value"),n("map","name",d,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",d,"legend"),n("label","form for",u),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:u),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",d,"li"),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",u,"rt rp"),n("figcaption","",d),n("mark rt rp summary bdi","",u),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",d,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",d,"track source"),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",u,"option"),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",d,"figcaption"),n("time","datetime",u),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",u),n("progress","value max",u),n("meter","value min max low high optimum",u),n("details","open",d,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,delete f.script,r[e]=f,f)}function i(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),s(e,function(e,i){n[i]=n[i.toUpperCase()]="map"==t?a(e,/[, ]/):u(e,/[, ]/)})),n}var r={},o={},a=e.makeMap,s=e.each,l=e.extend,u=e.explode,d=e.inArray;return function(e){function o(t,n,i){var o=e[t];return o?o=a(o,/[, ]/,a(o.toUpperCase(),/[, ]/)):(o=r[t],o||(o=a(n," ",a(n.toUpperCase()," ")),o=l(o,i),r[t]=o)),o}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function p(e){var n,i,r,o,s,l,u,p,f,h,m,g,v,y,b,_,x,C,E,w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,T=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),M["@"]&&(_=M["@"].attributes,x=M["@"].attributesOrder),n=0,i=e.length;n<i;n++)if(s=w.exec(e[n])){if(y=s[1],f=s[2],b=s[3],p=s[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),_){for(C in _)g[C]=_[C];v.push.apply(v,x)}if(p)for(p=t(p,"|"),r=0,o=p.length;r<o;r++)if(s=T.exec(p[r])){if(u={},m=s[1],h=s[2].replace(/::/g,":"),y=s[3],E=s[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(h),u.required=!0),"-"===m){delete g[h],v.splice(d(v,h),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:h,value:E}),u.defaultValue=E),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:h,value:E}),u.forcedValue=E),"<"===y&&(u.validValues=a(E,"?"))),S.test(h)?(l.attributePatterns=l.attributePatterns||[],u.pattern=c(h),l.attributePatterns.push(u)):(g[h]||v.push(h),g[h]=u)}_||"@"!=f||(_=g,x=v),b&&(l.outputName=f,M[b]=l),S.test(f)?(l.pattern=c(f),D.push(l)):M[f]=l}}function f(e){M={},D=[],p(e),s(b,function(e,t){R[t]=e.children})}function h(e){var n=/^(~)?(.+)$/;e&&(r.text_block_elements=r.block_elements=null,s(t(e,","),function(e){var t=n.exec(e),i="~"===t[1],r=i?"span":"div",o=t[2];if(R[o]=R[r],A[o]=r,i||(T[o.toUpperCase()]={},
T[o]={}),!M[o]){var a=M[r];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,M[o]=a}s(R,function(e,t){e[r]&&(R[t]=e=l({},R[t]),e[o]=e[r])})}))}function m(n){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[e.schema]=null,n&&s(t(n,","),function(e){var n,r,o=i.exec(e);o&&(r=o[1],n=r?R[o[2]]:R[o[2]]={"#comment":{}},n=R[o[2]],s(t(o[3],"|"),function(e){"-"===r?delete n[e]:n[e]={}}))})}function g(e){var t,n=M[e];if(n)return n;for(t=D.length;t--;)if(n=D[t],n.pattern.test(e))return n}var v,y,b,_,x,C,E,w,T,S,P,k,I,N=this,M={},R={},D=[],A={},O={};e=e||{},b=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),v=i(e.valid_styles),y=i(e.invalid_styles,"map"),w=i(e.valid_classes,"map"),_=o("whitespace_elements","pre script noscript style textarea video audio iframe object"),x=o("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=o("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),E=o("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),S=o("non_empty_elements","td th iframe video audio object script",C),P=o("move_caret_before_on_enter_elements","table",S),k=o("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),T=o("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",k),I=o("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(s(b,function(e,t){M[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},R[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),M[e[1]].outputName=e[0]}),s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){M[e]&&(M[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){M[e].paddEmpty=!0}),s(t("span"),function(e){M[e].removeEmptyAttrs=!0})),h(e.custom_elements),m(e.valid_children),p(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(u(e.invalid_elements),function(e){M[e]&&delete M[e]}),g("span")||p("span[!data-mce-type|*]"),N.children=R,N.getValidStyles=function(){return v},N.getInvalidStyles=function(){return y},N.getValidClasses=function(){return w},N.getBoolAttrs=function(){return E},N.getBlockElements=function(){return T},N.getTextBlockElements=function(){return k},N.getTextInlineElements=function(){return I},N.getShortEndedElements=function(){return C},N.getSelfClosingElements=function(){return x},N.getNonEmptyElements=function(){return S},N.getMoveCaretBeforeOnEnterElements=function(){return P},N.getWhiteSpaceElements=function(){return _},N.getSpecialElements=function(){return O},N.isValidChild=function(e,t){var n=R[e];return!(!n||!n[t])},N.isValid=function(e,t){var n,i,r=g(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},N.getElementRule=g,N.getCustomElements=function(){return A},N.addValidElements=p,N.setValidElements=f,N.addCustomElements=h,N.addValidChildren=m,N.elements=M}}),r("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,n){function i(e,t,n){var i,r,o,a,s=1;for(a=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=i=n;r=o.exec(t);){if(i=o.lastIndex,"/"===r[1])s--;else if(!r[1]){if(r[2]in a)continue;s++}if(0===s)break}return i}function r(r,a){function s(){}var l=this;r=r||{},l.schema=a=a||new e,r.fix_self_closing!==!1&&(r.fix_self_closing=!0),o("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=r[e]||s)}),l.parse=function(e){function o(e){var t,n;for(t=H.length;t--&&H[t].name!==e;);if(t>=0){for(n=H.length-1;n>=t;n--)e=H[n],e.valid&&B.end(e.name);H.length=t}}function s(e,t,n,i,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in y?t:U(n||i||o||""),_&&!m&&0!==t.indexOf("data-")){if(a=T[t],!a&&S){for(s=S.length;s--&&(a=S[s],!a.pattern.test(t)););s===-1&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(V[t]&&!r.allow_script_urls){var u=n.replace(l,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(j.test(u))return;if(!r.allow_html_data_urls&&W.test(u)&&!/^data:image\//i.test(u))return}c.map[t]=n,c.push({name:t,value:n})}var l,u,d,c,p,f,h,m,g,v,y,b,_,x,C,E,w,T,S,P,k,I,N,M,R,D,A,O,L,B=this,F=0,H=[],z=0,U=t.decode,V=n.makeMap("src,href,data,background,formaction,poster"),j=/((java|vb)script|mhtml):/i,W=/^data:/i;for(R=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=a.getShortEndedElements(),M=r.self_closing_elements||a.getSelfClosingElements(),y=a.getBoolAttrs(),_=r.validate,g=r.remove_internals,L=r.fix_self_closing,A=a.getSpecialElements();l=R.exec(e);){if(F<l.index&&B.text(U(e.substr(F,l.index-F))),u=l[6])u=u.toLowerCase(),":"===u.charAt(0)&&(u=u.substr(1)),o(u);else if(u=l[7]){if(u=u.toLowerCase(),":"===u.charAt(0)&&(u=u.substr(1)),b=u in v,L&&M[u]&&H.length>0&&H[H.length-1].name===u&&o(u),!_||(x=a.getElementRule(u))){if(C=!0,_&&(T=x.attributes,S=x.attributePatterns),(w=l[8])?(m=w.indexOf("data-mce-type")!==-1,m&&g&&(C=!1),c=[],c.map={},w.replace(D,s)):(c=[],c.map={}),_&&!m){if(P=x.attributesRequired,k=x.attributesDefault,I=x.attributesForced,N=x.removeEmptyAttrs,N&&!c.length&&(C=!1),I)for(p=I.length;p--;)E=I[p],h=E.name,O=E.value,"{$uid}"===O&&(O="mce_"+z++),c.map[h]=O,c.push({name:h,value:O});if(k)for(p=k.length;p--;)E=k[p],h=E.name,h in c.map||(O=E.value,"{$uid}"===O&&(O="mce_"+z++),c.map[h]=O,c.push({name:h,value:O}));if(P){for(p=P.length;p--&&!(P[p]in c.map););p===-1&&(C=!1)}if(E=c.map["data-mce-bogus"]){if("all"===E){F=i(a,e,R.lastIndex),R.lastIndex=F;continue}C=!1}}C&&B.start(u,c,b)}else C=!1;if(d=A[u]){d.lastIndex=F=l.index+l[0].length,(l=d.exec(e))?(C&&(f=e.substr(F,l.index-F)),F=l.index+l[0].length):(f=e.substr(F),F=e.length),C&&(f.length>0&&B.text(f,!0),B.end(u)),R.lastIndex=F;continue}b||(w&&w.indexOf("/")==w.length-1?C&&B.end(u):H.push({name:u,valid:C}))}else(u=l[1])?(">"===u.charAt(0)&&(u=" "+u),r.allow_conditional_comments||"[if"!==u.substr(0,3)||(u=" "+u),B.comment(u)):(u=l[2])?B.cdata(u):(u=l[3])?B.doctype(u):(u=l[4])&&B.pi(u,l[5]);F=l.index+l[0].length}for(F<e.length&&B.text(U(e.substr(F))),p=H.length-1;p>=0;p--)u=H[p],u.valid&&B.end(u.name)}}var o=n.each;return r.findEndTag=i,r}),r("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,n,i){var r=i.makeMap,o=i.each,a=i.explode,s=i.extend;return function(i,l){function u(t){var n,i,o,a,s,u,c,p,f,h,m,g,v,y,b;for(m=r("tr,td,th,tbody,thead,tfoot,table"),h=l.getNonEmptyElements(),g=l.getTextBlockElements(),v=l.getSpecialElements(),n=0;n<t.length;n++)if(i=t[n],i.parent&&!i.fixed)if(g[i.name]&&"li"==i.parent.name){for(y=i.next;y&&g[y.name];)y.name="li",y.fixed=!0,i.parent.insert(y,i.parent),y=y.next;i.unwrap(i)}else{for(a=[i],o=i.parent;o&&!l.isValidChild(o.name,i.name)&&!m[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=u=d.filterNode(a[0].clone()),f=0;f<a.length-1;f++){for(l.isValidChild(u.name,a[f].name)?(c=d.filterNode(a[f].clone()),u.append(c)):c=u,p=a[f].firstChild;p&&p!=a[f+1];)b=p.next,c.append(p),p=b;u=c}s.isEmpty(h)?o.insert(i,a[0],!0):(o.insert(s,a[0],!0),o.insert(i,s)),o=a[0],(o.isEmpty(h)||o.firstChild===o.lastChild&&"br"===o.firstChild.name)&&o.empty().remove()}else if(i.parent){if("li"===i.name){if(y=i.prev,y&&("ul"===y.name||"ul"===y.name)){y.append(i);continue}if(y=i.next,y&&("ul"===y.name||"ul"===y.name)){y.insert(i,y.firstChild,!0);continue}i.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(d.filterNode(new e("div",1))):v[i.name]?i.empty().remove():i.unwrap()}}}var d=this,c={},p=[],f={},h={};i=i||{},i.validate=!("validate"in i)||i.validate,i.root_name=i.root_name||"body",d.schema=l=l||new t,d.filterNode=function(e){var t,n,i;n in c&&(i=f[n],i?i.push(e):f[n]=[e]),t=p.length;for(;t--;)n=p[t].name,n in e.attributes.map&&(i=h[n],i?i.push(e):h[n]=[e]);return e},d.addNodeFilter=function(e,t){o(a(e),function(e){var n=c[e];n||(c[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<p.length;n++)if(p[n].name===e)return void p[n].callbacks.push(t);p.push({name:e,callbacks:[t]})})},d.parse=function(t,o){function a(){function e(e){e&&(r=e.firstChild,r&&3==r.type&&(r.value=r.value.replace(I,"")),r=e.lastChild,r&&3==r.type&&(r.value=r.value.replace(M,"")))}var t,n,r=y.firstChild;if(l.isValidChild(y.name,B.toLowerCase())){for(;r;)t=r.next,3==r.type||1==r.type&&"p"!==r.name&&!k[r.name]&&!r.attr("data-mce-type")?n?n.append(r):(n=d(B,1),n.attr(i.forced_root_block_attrs),y.insert(n,r),n.append(r)):(e(n),n=null),r=t;e(n)}}function d(t,n){var i,r=new e(t,n);return t in c&&(i=f[t],i?i.push(r):f[t]=[r]),r}function m(e){var t,n,i,r,o=l.getBlockElements();for(t=e.prev;t&&3===t.type;){if(i=t.value.replace(M,""),i.length>0)return void(t.value=i);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}r=t.prev,t.remove(),t=r}}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,y,b,_,x,C,E,w,T,S,P,k,I,N,M,R,D,A,O,L,B,F=[];if(o=o||{},f={},h={},k=s(r("script,style,head,html,body,title,meta,param"),l.getBlockElements()),L=l.getNonEmptyElements(),O=l.children,P=i.validate,B="forced_root_block"in o?o.forced_root_block:i.forced_root_block,A=l.getWhiteSpaceElements(),I=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,R=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/,v=new n({validate:P,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(d("#cdata",4)).value=e},text:function(e,t){var n;N||(e=e.replace(R," "),b.lastChild&&k[b.lastChild.name]&&(e=e.replace(I,""))),0!==e.length&&(n=d("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(d("#comment",8)).value=e},pi:function(e,t){b.append(d(e,7)).value=t,m(b)},doctype:function(e){var t;t=b.append(d("#doctype",10)),t.value=e,m(b)},start:function(e,t,n){var i,r,o,a,s;if(o=P?l.getElementRule(e):{}){for(i=d(o.outputName||e,1),i.attributes=t,i.shortEnded=n,b.append(i),s=O[b.name],s&&O[i.name]&&!s[i.name]&&F.push(i),r=p.length;r--;)a=p[r].name,a in t.map&&(T=h[a],T?T.push(i):h[a]=[i]);k[e]&&m(i),n||(b=i),!N&&A[e]&&(N=!0)}},end:function(t){var n,i,r,o,a;if(i=P?l.getElementRule(t):{}){if(k[t]&&!N){if(n=b.firstChild,n&&3===n.type)if(r=n.value.replace(I,""),r.length>0)n.value=r,n=n.next;else for(o=n.next,n.remove(),n=o;n&&3===n.type;)r=n.value,o=n.next,(0===r.length||D.test(r))&&(n.remove(),n=o),n=o;if(n=b.lastChild,n&&3===n.type)if(r=n.value.replace(M,""),r.length>0)n.value=r,n=n.prev;else for(o=n.prev,n.remove(),n=o;n&&3===n.type;)r=n.value,o=n.prev,(0===r.length||D.test(r))&&(n.remove(),n=o),n=o}if(N&&A[t]&&(N=!1),(i.removeEmpty||i.paddEmpty)&&b.isEmpty(L))if(i.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return a=b.parent,k[b.name]?b.empty().remove():b.unwrap(),void(b=a);b=b.parent}}},l),y=b=new e(o.context||i.root_name,11),v.parse(t),P&&F.length&&(o.context?o.invalid=!0:u(F)),B&&("body"==y.name||o.isRootContent)&&a(),!o.invalid){for(S in f){for(T=c[S],_=f[S],E=_.length;E--;)_[E].parent||_.splice(E,1);for(x=0,C=T.length;x<C;x++)T[x](_,S,o)}for(x=0,C=p.length;x<C;x++)if(T=p[x],T.name in h){for(_=h[T.name],E=_.length;E--;)_[E].parent||_.splice(E,1);for(E=0,w=T.callbacks.length;E<w;E++)T.callbacks[E](_,T.name,o)}}return y},i.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,i,r,o,a,u,d,c,p=t.length,f=s({},l.getBlockElements()),h=l.getNonEmptyElements();for(f.body=1,n=0;n<p;n++)if(i=t[n],r=i.parent,f[i.parent.name]&&i===r.lastChild){for(a=i.prev;a;){if(u=a.name,"span"!==u||"bookmark"!==a.attr("data-mce-type")){if("br"!==u)break;if("br"===u){i=null;break}}a=a.prev}i&&(i.remove(),r.isEmpty(h)&&(d=l.getElementRule(r.name),d&&(d.removeEmpty?r.remove():d.paddEmpty&&(r.empty().append(new e("#text",3)).value=" "))))}else{for(o=i;r&&r.firstChild===o&&r.lastChild===o&&(o=r,!f[r.name]);)r=r.parent;o===r&&(c=new e("#text",3),c.value=" ",i.replace(c))}}),i.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,i,r,o=e.length;o--;)if(r=e[o],"a"===r.name&&r.firstChild&&!r.attr("href")){i=r.parent,t=r.lastChild;do n=t.prev,i.insert(t,r),t=n;while(t)}}),i.validate&&l.getValidClasses()&&d.addAttributeFilter("class",function(e){for(var t,n,i,r,o,a,s,u=e.length,d=l.getValidClasses();u--;){for(t=e[u],n=t.attr("class").split(" "),o="",i=0;i<n.length;i++)r=n[i],s=!1,a=d["*"],a&&a[r]&&(s=!0),a=d[t.name],!s&&a&&a[r]&&(s=!0),s&&(o&&(o+=" "),o+=r);o.length||(o=null),t.attr("class",o)}})}}),r("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var n=t.makeMap;return function(t){var i,r,o,a,s,l=[];return t=t||{},i=t.indent,r=n(t.indent_before||""),o=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var u,d,c,p;if(i&&r[e]&&l.length>0&&(p=l[l.length-1],p.length>0&&"\n"!==p&&l.push("\n")),l.push("<",e),t)for(u=0,d=t.length;u<d;u++)c=t[u],l.push(" ",c.name,'="',a(c.value,!0),'"');!n||s?l[l.length]=">":l[l.length]=" />",n&&i&&o[e]&&l.length>0&&(p=l[l.length-1],p.length>0&&"\n"!==p&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),i&&o[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",a(t),"?>"):l.push("<?",e,"?>"),i&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),r("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,i){var r=this,o=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,r.schema=i=i||new t,r.writer=o,r.serialize=function(e){function t(e){var n,s,l,u,d,c,p,f,h,m=r[e.type];if(m)m(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1&&(c=[],c.map={},h=i.getElementRule(e.name))){for(p=0,f=h.attributesOrder.length;p<f;p++)u=h.attributesOrder[p],u in l.map&&(d=l.map[u],c.map[u]=d,c.push({name:u,value:d}));for(p=0,f=l.length;p<f;p++)u=l[p].name,u in c.map||(d=l.map[u],c.map[u]=d,c.push({name:u,value:d}));l=c}if(o.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);o.end(n)}}}var r,a;return a=n.validate,r={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},o.reset(),1!=e.type||n.inner?r[11](e):t(e),o.getContent()}}}),r("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/SaxParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools","tinymce/text/Zwsp"],function(e,t,n,i,r,o,a,s,l,u){function d(e){function t(e){return e&&"br"===e.name}var n,i;n=e.lastChild,t(n)&&(i=n.prev,t(i)&&(n.remove(),i.remove()))}var c=l.each,p=l.trim,f=e.DOM,h=["data-mce-selected"];return function(e,o){function m(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi");return e=u.trim(e.replace(t,""))}function g(){var e,t,i,r,a,s=o.getBody().innerHTML,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=o.schema;for(s=m(s),a=u.getShortEndedElements();r=l.exec(s);)t=l.lastIndex,i=r[0].length,e=a[r[1]]?t:n.findEndTag(u,s,t),s=s.substring(0,t-i)+s.substring(e),l.lastIndex=t-i;return p(s)}function v(e){l.inArray(h,e)===-1&&(_.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),h.push(e))}var y,b,_;return o&&(y=o.dom,b=o.schema),y=y||f,b=b||new a(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,_=new t(e,b),_.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)n=e[i],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),_.addAttributeFilter("src,href,style",function(t,n){for(var i,r,o,a=t.length,s="data-mce-"+n,l=e.url_converter,u=e.url_converter_scope;a--;)i=t[a],r=i.attributes.map[s],r!==o?(i.attr(n,r.length>0?r:null),i.attr(s,null)):(r=i.attributes.map[n],"style"===n?r=y.serializeStyle(y.parseStyle(r),i.name):l&&(r=l.call(u,r,n,i.name)),i.attr(n,r.length>0?r:null))}),_.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),_.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,r=e.length;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),_.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)t=e[n].firstChild,t&&(t.value=i.decode(t.value))}),_.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,r,o,a=e.length;a--;)i=e[a],r=i.firstChild?i.firstChild.value:"","script"===t?(o=i.attr("type"),o&&i.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(i.firstChild.value="<!--\n"+n(r)+"\n-->")}),_.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),_.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)n=e[i],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&_.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.parent,"ul"!==n.name&&"ol"!==n.name||t.prev&&"li"===t.prev.name&&t.prev.append(t)}),_.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:b,addNodeFilter:_.addNodeFilter,addAttributeFilter:_.addAttributeFilter,serialize:function(t,n){var i,o,a,l,f,h,m=this;return s.ie&&y.select("script,style,select,map").length>0?(f=t.innerHTML,t=t.cloneNode(!1),y.setHTML(t,f)):t=t.cloneNode(!0),i=t.ownerDocument.implementation,i.createHTMLDocument&&(o=i.createHTMLDocument(""),c("BODY"==t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!=t.nodeName?o.body.firstChild:o.body,a=y.doc,y.doc=o),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,m.onPreProcess(n)),h=_.parse(p(n.getInner?t.innerHTML:y.getOuterHTML(t)),n),d(h),l=new r(e,b),n.content=l.serialize(h),n.cleanup||(n.content=u.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||m.onPostProcess(n),a&&(y.doc=a),n.node=null,n.content},addRules:function(e){b.addValidElements(e)},setRules:function(e){b.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)},addTempAttr:v,trimHtml:m,getTrimmedContent:g}}}),r("tinymce/dom/TridentSelection",[],function(){function e(e){function t(t,n){var i,r,o,a,s,l,u,d,c=0,p=-1;if(i=t.duplicate(),i.collapse(n),d=i.parentElement(),d.ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(a=d.children,r=a.length-1;c<=r;)if(u=Math.floor((c+r)/2),s=a[u],i.moveToElementText(s),p=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),p>0)r=u-1;else{if(!(p<0))return{node:s};c=u+1}if(p<0)for(s?i.collapse(!1):(i.moveToElementText(d),i.collapse(!0),s=d,o=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&d==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&d==i.parentElement();)l++;return{node:s,position:p,offset:l,inside:o}}}function n(){function n(e){var n,i,r,o,a,s=t(d,e),l=0;if(n=s.node,i=s.offset,s.inside&&!n.hasChildNodes())return void c[e?"setStart":"setEnd"](n,0);if(i===o)return void c[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(r=s.inside?n.firstChild:n.nextSibling,!r)return void c[e?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==r.nodeType?c[e?"setStart":"setEnd"](r,0):c[e?"setStartBefore":"setEndBefore"](r));for(;r;){if(3==r.nodeType&&(a=r.nodeValue,l+=a.length,l>=i)){n=r,l-=i,l=a.length-l;break}r=r.nextSibling}}else{if(r=n.previousSibling,!r)return c[e?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?c[e?"setStart":"setEnd"](r,n.nodeValue.length):c[e?"setStartAfter":"setEndAfter"](r));for(;r;){if(3==r.nodeType&&(l+=r.nodeValue.length,l>=i)){n=r,l-=i;break}r=r.previousSibling}}c[e?"setStart":"setEnd"](n,l)}var o,a,s,l,u,d=e.getRng(),c=r.createRng();if(o=d.item?d.item(0):d.parentElement(),o.ownerDocument!=r.doc)return c;if(a=e.isCollapsed(),d.item)return c.setStart(o.parentNode,r.nodeIndex(o)),c.setEnd(c.startContainer,c.startOffset+1),c;try{n(!0),a||n()}catch(t){if(t.number!=-2147024809)throw t;u=i.getBookmark(2),s=d.duplicate(),s.collapse(!0),o=s.parentElement(),a||(s=d.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,i.moveToBookmark(u),d=e.getRng(),n(!0),a||n()}return c}var i=this,r=e.dom,o=!1;this.getBookmark=function(n){function i(e){var t,n,i,o,a=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,o=i.length;o--;)if(e===i[o]){a.push(o);break}e=t,t=t.parentNode}return a}function o(e){var n;if(n=t(a,e))return{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=o(!0),e.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(e){function t(e){var t,n,i,o;for(t=r.getRoot(),n=e.length-1;n>=0;n--)o=t.children,i=e[n],i<=o.length-1&&(t=o[i]);return t}function n(n){var r,a,s,l,u=e[n?"start":"end"];u&&(r=u.position>0,a=o.createTextRange(),a.moveToElementText(t(u.indexes)),l=u.offset,l!==s?(a.collapse(u.inside||r),a.moveStart("character",r?-l:l)):a.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",a),n&&i.collapse(!0))}var i,o=r.doc.body;e.start&&(e.start.ctrl?(i=o.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=o.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,a,c,p;a=r.create("a"),t=e?s:u,n=e?l:d,c=i.duplicate(),t!=h&&t!=h.documentElement||(t=m,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),c.moveToElementText(a),c.moveStart("character",n),r.remove(a),i.setEndPoint(e?"StartToStart":"EndToEnd",c)):(p=t.childNodes,p.length?(n>=p.length?r.insertAfter(a,p[p.length-1]):t.insertBefore(a,p[n]),c.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,c.moveToElementText(a),c.collapse(o)),i.setEndPoint(e?"StartToStart":"EndToEnd",c),r.remove(a))}var i,a,s,l,u,d,c,p,f,h=e.dom.doc,m=h.body;if(s=t.startContainer,l=t.startOffset,u=t.endContainer,d=t.endOffset,i=m.createTextRange(),s==u&&1==s.nodeType){if(l==d&&!s.hasChildNodes()){if(s.canHaveHTML)return c=s.previousSibling,c&&!c.hasChildNodes()&&r.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(s.lastChild),i.select(),r.doc.selection.clear(),s.innerHTML="",void(c&&(c.innerHTML=""));l=r.nodeIndex(s),s=s.parentNode}if(l==d-1)try{if(f=s.childNodes[l],a=m.createControlRange(),a.addElement(f),a.select(),p=e.getRng(),p.item&&f===p.item(0))return}catch(e){}}n(!0),n(),i.select()},this.getRangeAt=n}return e}),r("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/util/Delay","tinymce/Env","tinymce/dom/NodeType"],function(e,t,n,i,r){var o=r.isContentEditableFalse;return function(r,a){function s(e){var t=a.settings.object_resizing;return t!==!1&&!i.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=a.getBody()&&a.dom.is(e,t)))}function l(t){var n,i,r,o,s;n=t.screenX-I,i=t.screenY-N,B=n*P[2]+D,F=i*P[3]+A,B=B<5?5:B,F=F<5?5:F,r="IMG"==E.nodeName&&a.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==E.nodeName&&P[2]*P[3]!==0,r&&(G(n)>G(i)?(F=$(B*O),B=$(F/O)):(B=$(F/O),F=$(B*O))),U.setStyles(w,{width:B,height:F}),o=P.startPos.x+n,s=P.startPos.y+i,o=o>0?o:0,s=s>0?s:0,U.setStyles(T,{left:o,top:s,display:"block"}),T.innerHTML=B+" &times; "+F,P[2]<0&&w.clientWidth<=B&&U.setStyle(w,"left",M+(D-B)),P[3]<0&&w.clientHeight<=F&&U.setStyle(w,"top",R+(A-F)),n=K.scrollWidth-H,i=K.scrollHeight-z,n+i!==0&&U.setStyles(T,{left:o-n,top:s-i}),L||(a.fire("ObjectResizeStart",{target:E,width:D,height:A}),L=!0)}function u(){function e(e,t){t&&(E.style[e]||!a.schema.isValid(E.nodeName.toLowerCase(),e)?U.setStyle(E,e,t):U.setAttrib(E,e,t))}L=!1,e("width",B),e("height",F),U.unbind(j,"mousemove",l),U.unbind(j,"mouseup",u),W!=j&&(U.unbind(W,"mousemove",l),U.unbind(W,"mouseup",u)),U.remove(w),U.remove(T),q&&"TABLE"!=E.nodeName||d(E),a.fire("ObjectResized",{target:E,width:B,height:F}),U.setAttrib(E,"style",U.getAttrib(E,"style")),a.nodeChanged()}function d(e,t,n){var r,o,d,p,f;c(),b(),r=U.getPos(e,K),M=r.x,R=r.y,f=e.getBoundingClientRect(),o=f.width||f.right-f.left,d=f.height||f.bottom-f.top,E!=e&&(y(),E=e,B=F=0),p=a.fire("ObjectSelected",{target:e}),s(e)&&!p.isDefaultPrevented()?V(S,function(e,r){function a(t){I=t.screenX,N=t.screenY,D=E.clientWidth,A=E.clientHeight,O=A/D,P=e,e.startPos={x:o*e[0]+M,y:d*e[1]+R},H=K.scrollWidth,z=K.scrollHeight,w=E.cloneNode(!0),U.addClass(w,"mce-clonedresizable"),U.setAttrib(w,"data-mce-bogus","all"),w.contentEditable=!1,w.unSelectabe=!0,U.setStyles(w,{left:M,top:R,margin:0}),w.removeAttribute("data-mce-selected"),K.appendChild(w),U.bind(j,"mousemove",l),U.bind(j,"mouseup",u),W!=j&&(U.bind(W,"mousemove",l),U.bind(W,"mouseup",u)),T=U.add(K,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},D+" &times; "+A)}var s;return t?void(r==t&&a(n)):(s=U.get("mceResizeHandle"+r),s&&U.remove(s),s=U.add(K,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),i.ie&&(s.contentEditable=!1),U.bind(s,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),a(e)}),e.elm=s,void U.setStyles(s,{left:o*e[0]+M-s.offsetWidth/2,top:d*e[1]+R-s.offsetHeight/2}))}):c(),E.setAttribute("data-mce-selected","1")}function c(){var e,t;b(),E&&E.removeAttribute("data-mce-selected");for(e in S)t=U.get("mceResizeHandle"+e),t&&(U.unbind(t),U.remove(t))}function p(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,i;if(!L&&!a.removed)return V(U.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"==e.type?e.target:r.getNode(),i=U.$(i).closest(q?"table":"table,img,hr")[0],t(i,K)&&(_(),n=r.getStart(!0),t(n,i)&&t(r.getEnd(!0),i)&&(!q||i!=n&&"IMG"!==n.nodeName))?void d(i):void c()}function f(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function m(e){var t,n,i,r,o,s,l,u=e.srcElement;t=u.getBoundingClientRect(),s=k.clientX-t.left,l=k.clientY-t.top;for(n in S)if(i=S[n],r=u.offsetWidth*i[0],o=u.offsetHeight*i[1],G(r-s)<8&&G(o-l)<8){P=i;break}L=!0,a.fire("ObjectResizeStart",{target:E,width:E.clientWidth,height:E.clientHeight}),a.getDoc().selection.empty(),d(u,n,k)}function g(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function v(e){var t=e.srcElement;if(o(t))return void g(e);if(t!=E){if(a.fire("ObjectSelected",{target:t}),y(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||(c(),E=t,f(t,"resizestart",m))}}function y(){h(E,"resizestart",m)}function b(){for(var e in S){var t=S[e];t.elm&&(U.unbind(t.elm),delete t.elm)}}function _(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function x(e){var t;if(q){t=j.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}function C(){E=w=null,q&&(y(),h(K,"controlselect",v))}var E,w,T,S,P,k,I,N,M,R,D,A,O,L,B,F,H,z,U=a.dom,V=t.each,j=a.getDoc(),W=document,q=i.ie&&i.ie<11,G=Math.abs,$=Math.round,K=a.getBody();S={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Y=".mce-content-body";return a.contentStyles.push(Y+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Y+" .mce-resizehandle:hover {background: #000}"+Y+" img[data-mce-selected],"+Y+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Y+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Y+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),a.on("init",function(){q?(a.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),x(e.target))}),f(K,"controlselect",v),a.on("mousedown",function(e){k=e})):(_(),i.ie>=11&&(a.on("mousedown click",function(e){var t=e.target.nodeName;!L&&/^(TABLE|IMG|HR)$/.test(t)&&(a.selection.select(e.target,"TABLE"==t),"mousedown"==e.type&&a.nodeChanged())}),a.dom.bind(K,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(a,function(){a.selection.select(e)})}return o(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))})));var e=n.throttle(function(e){a.composing||p(e)});a.on("nodechange ResizeEditor ResizeWindow drop",e),a.on("keyup compositionend",function(t){E&&"TABLE"==E.nodeName&&e(t)}),a.on("hide blur",c)}),a.on("remove",b),{isResizable:s,showResizeRect:d,hideResizeRect:c,updateResizeRect:p,controlSelect:x,destroy:C}}}),r("tinymce/util/Fun",[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function i(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;
return!1}}function r(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function o(e){var t=a.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return o.apply(this,e)}}var a=[].slice;return{constant:e,negate:t,and:r,or:i,curry:o,compose:n}}),r("tinymce/caret/CaretCandidate",["tinymce/dom/NodeType","tinymce/util/Arr","tinymce/caret/CaretContainer"],function(e,t,n){function i(e){return!m(e)&&(c(e)?!p(e.parentNode):f(e)||d(e)||h(e)||u(e))}function r(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(u(e))return!1;if(l(e))return!0}return!0}function o(e){return!!u(e)&&t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)!==!0}function a(e){return f(e)||o(e)}function s(e,t){return i(e)&&r(e,t)}var l=e.isContentEditableTrue,u=e.isContentEditableFalse,d=e.isBr,c=e.isText,p=e.matchNodeNames("script style textarea"),f=e.matchNodeNames("img input textarea hr iframe video audio object"),h=e.matchNodeNames("table"),m=n.isCaretContainer;return{isCaretCandidate:i,isInEditable:r,isAtomic:a,isEditableCaretCandidate:s}}),r("tinymce/geom/ClientRect",[],function(){function e(e){return e?{left:d(e.left),top:d(e.top),bottom:d(e.bottom),right:d(e.right),width:d(e.width),height:d(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function i(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function r(e,t){return e.bottom<t.top||!(e.top>t.bottom)&&i(t.top-e.bottom,e,t)}function o(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&i(t.bottom-e.top,e,t)}function a(e,t){return e.left<t.left}function s(e,t){return e.right>t.right}function l(e,t){return r(e,t)?-1:o(e,t)?1:a(e,t)?-1:s(e,t)?1:0}function u(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}var d=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:r,isBelow:o,isLeft:a,isRight:s,compare:l,containsXY:u}}),r("tinymce/text/ExtendingChar",[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:e}}),r("tinymce/caret/CaretPosition",["tinymce/util/Fun","tinymce/dom/NodeType","tinymce/dom/DOMUtils","tinymce/dom/RangeUtils","tinymce/caret/CaretCandidate","tinymce/geom/ClientRect","tinymce/text/ExtendingChar"],function(e,t,n,i,r,o,a){function s(e){return e&&/[\r\n\t ]/.test(e)}function l(e){var t,n=e.startContainer,i=e.startOffset;return!!(s(e.toString())&&g(n.parentNode)&&(t=n.data,s(t[i-1])||s(t[i+1])))}function u(e){function t(e){var t,n=e.ownerDocument,i=n.createRange(),r=n.createTextNode(" "),a=e.parentNode;return a.insertBefore(r,e),i.setStart(r,0),i.setEnd(r,1),t=o.clone(i.getBoundingClientRect()),a.removeChild(r),t}function n(e){var n,i;return i=e.getClientRects(),n=i.length>0?o.clone(i[0]):o.clone(e.getBoundingClientRect()),y(e)&&0===n.left?t(e):n}function i(e,t){return e=o.collapse(e,t),e.width=1,e.right=e.left+1,e}function r(e){0!==e.height&&(p.length>0&&o.isEqual(e,p[p.length-1])||p.push(e))}function s(e,t){var o=e.ownerDocument.createRange();if(t<e.data.length){if(a.isExtendingChar(e.data[t]))return p;if(a.isExtendingChar(e.data[t-1])&&(o.setStart(e,t),o.setEnd(e,t+1),!l(o)))return r(i(n(o),!1)),p}t>0&&(o.setStart(e,t-1),o.setEnd(e,t),l(o)||r(i(n(o),!1))),t<e.data.length&&(o.setStart(e,t),o.setEnd(e,t+1),l(o)||r(i(n(o),!0)))}var u,d,p=[];if(v(e.container()))return s(e.container(),e.offset()),p;if(c(e.container()))if(e.isAtEnd())d=_(e.container(),e.offset()),v(d)&&s(d,d.data.length),m(d)&&!y(d)&&r(i(n(d),!1));else{if(d=_(e.container(),e.offset()),v(d)&&s(d,0),m(d)&&e.isAtEnd())return r(i(n(d),!1)),p;u=_(e.container(),e.offset()-1),m(u)&&!y(u)&&(f(u)||f(d)||!m(d))&&r(i(n(u),!1)),m(d)&&r(i(n(d),!0))}return p}function d(t,n,i){function r(){return v(t)?0===n:0===n}function o(){return v(t)?n>=t.data.length:n>=t.childNodes.length}function a(){var e;return e=t.ownerDocument.createRange(),e.setStart(t,n),e.setEnd(t,n),e}function s(){return i||(i=u(new d(t,n))),i}function l(){return s().length>0}function c(e){return e&&t===e.container()&&n===e.offset()}function p(e){return _(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:s,isVisible:l,isAtStart:r,isAtEnd:o,isEqual:c,getNode:p}}var c=t.isElement,p=r.isCaretCandidate,f=t.matchStyleValues("display","block table"),h=t.matchStyleValues("float","left right"),m=e.and(c,p,e.negate(h)),g=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),v=t.isText,y=t.isBr,b=n.nodeIndex,_=i.getNode;return d.fromRangeStart=function(e){return new d(e.startContainer,e.startOffset)},d.fromRangeEnd=function(e){return new d(e.endContainer,e.endOffset)},d.after=function(e){return new d(e.parentNode,b(e)+1)},d.before=function(e){return new d(e.parentNode,b(e))},d}),r("tinymce/caret/CaretBookmark",["tinymce/dom/NodeType","tinymce/dom/DOMUtils","tinymce/util/Fun","tinymce/util/Arr","tinymce/caret/CaretPosition"],function(e,t,n,i,r){function o(e){var t=e.parentNode;return v(t)?o(t):t}function a(e){return e?i.reduce(e.childNodes,function(e,t){return v(t)&&"BR"!=t.nodeName?e=e.concat(a(t)):e.push(t),e},[]):[]}function s(e,t){for(;(e=e.previousSibling)&&g(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function u(t){var n,r,s;return n=a(o(t)),r=i.findIndex(n,l(t),t),n=n.slice(0,r+1),s=i.reduce(n,function(e,t,i){return g(t)&&g(n[i-1])&&e++,e},0),n=i.filter(n,e.matchNodeNames(t.nodeName)),r=i.findIndex(n,l(t),t),r-s}function d(e){var t;return t=g(e)?"text()":e.nodeName.toLowerCase(),t+"["+u(e)+"]"}function c(e,t,n){var i=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)i.push(t);return i}function p(t,r){var o,a,l,u,p,f=[];return o=r.container(),a=r.offset(),g(o)?l=s(o,a):(u=o.childNodes,a>=u.length?(l="after",a=u.length-1):l="before",o=u[a]),f.push(d(o)),p=c(t,o),p=i.filter(p,n.negate(e.isBogus)),f=f.concat(i.map(p,function(e){return d(e)})),f.reverse().join("/")+","+l}function f(t,n,r){var o=a(t);return o=i.filter(o,function(e,t){return!g(e)||!g(o[t-1])}),o=i.filter(o,e.matchNodeNames(n)),o[r]}function h(e,t){for(var n,i=e,o=0;g(i);){if(n=i.data.length,t>=o&&t<=o+n){e=i,t-=o;break}if(!g(i.nextSibling)){e=i,t=n;break}o+=n,i=i.nextSibling}return t>e.data.length&&(t=e.data.length),new r(e,t)}function m(e,t){var n,o,a;return t?(n=t.split(","),t=n[0].split("/"),a=n.length>1?n[1]:"before",o=i.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),f(e,t[1],parseInt(t[2],10))):null},e),o?g(o)?h(o,parseInt(a,10)):(a="after"===a?y(o)+1:y(o),new r(o.parentNode,a)):null):null}var g=e.isText,v=e.isBogus,y=t.nodeIndex;return{create:p,resolve:m}}),r("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools","tinymce/caret/CaretContainer","tinymce/caret/CaretBookmark","tinymce/caret/CaretPosition","tinymce/dom/NodeType"],function(e,t,n,i,r,o){function a(a){var l=a.dom;this.getBookmark=function(e,u){function d(e,n){var i=0;return t.each(l.select(e),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!=n&&void i++}),i}function c(e){function t(t){var n,i,r,o=t?"start":"end";n=e[o+"Container"],i=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(t?i:i-1,r.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function p(e){function t(e,t){var i,r,o=e[t?"startContainer":"endContainer"],a=e[t?"startOffset":"endOffset"],s=[],d=0;if(3==o.nodeType){if(u)for(i=o.previousSibling;i&&3==i.nodeType;i=i.previousSibling)a+=i.nodeValue.length;s.push(a)}else r=o.childNodes,a>=r.length&&r.length&&(d=1,a=Math.max(0,r.length-1)),s.push(l.nodeIndex(r[a],u)+d);for(;o&&o!=n;o=o.parentNode)s.push(l.nodeIndex(o,u));return s}var n=l.getRoot(),i={};return i.start=t(e,!0),a.isCollapsed()||(i.end=t(e)),i}function f(e){function t(e){var t;if(n.isCaretContainer(e)){if(o.isText(e)&&n.isCaretContainerBlock(e)&&(e=e.parentNode),t=e.previousSibling,s(t))return t;if(t=e.nextSibling,s(t))return t}}return t(e.startContainer)||t(e.endContainer)}var h,m,g,v,y,b,_,x="&#xFEFF;";if(2==e)return b=a.getNode(),y=b?b.nodeName:null,h=a.getRng(),s(b)||"IMG"==y?{name:y,index:d(y,b)}:a.tridentSel?a.tridentSel.getBookmark(e):(b=f(h),b?(y=b.tagName,{name:y,index:d(y,b)}):p(h));if(3==e)return h=a.getRng(),{start:i.create(l.getRoot(),r.fromRangeStart(h)),end:i.create(l.getRoot(),r.fromRangeEnd(h))};if(e)return{rng:a.getRng()};if(h=a.getRng(),g=l.uniqueId(),v=a.isCollapsed(),_="overflow:hidden;line-height:0px",h.duplicate||h.item){if(h.item)return b=h.item(0),y=b.nodeName,{name:y,index:d(y,b)};m=h.duplicate();try{h.collapse(),h.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_start" style="'+_+'">'+x+"</span>"),v||(m.collapse(!1),h.moveToElementText(m.parentElement()),0===h.compareEndPoints("StartToEnd",m)&&m.move("character",-1),m.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_end" style="'+_+'">'+x+"</span>"))}catch(e){return null}}else{if(b=a.getNode(),y=b.nodeName,"IMG"==y)return{name:y,index:d(y,b)};m=c(h.cloneRange()),v||(m.collapse(!1),m.insertNode(l.create("span",{"data-mce-type":"bookmark",id:g+"_end",style:_},x))),h=c(h),h.collapse(!0),h.insertNode(l.create("span",{"data-mce-type":"bookmark",id:g+"_start",style:_},x))}return a.moveToBookmark({id:g,keep:1}),{id:g}},this.moveToBookmark=function(n){function r(e){var t,i,r,o,a=n[e?"start":"end"];if(a){for(r=a[0],i=c,t=a.length-1;t>=1;t--){if(o=i.childNodes,a[t]>o.length-1)return;i=o[a[t]]}3===i.nodeType&&(r=Math.min(a[0],i.nodeValue.length)),1===i.nodeType&&(r=Math.min(a[0],i.childNodes.length)),e?d.setStart(i,r):d.setEnd(i,r)}return!0}function o(i){var r,o,a,s,u=l.get(n.id+"_"+i),d=n.keep;if(u&&(r=u.parentNode,"start"==i?(d?(r=u.firstChild,o=1):o=l.nodeIndex(u),p=f=r,h=m=o):(d?(r=u.firstChild,o=1):o=l.nodeIndex(u),f=r,m=o),!d)){for(s=u.previousSibling,a=u.nextSibling,t.each(t.grep(u.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=l.get(n.id+"_"+i);)l.remove(u,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!e.opera&&(o=s.nodeValue.length,s.appendData(a.nodeValue),l.remove(a),"start"==i?(p=f=s,h=m=o):(f=s,m=o))}}function s(t){return!l.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}function u(){var e,t;return e=l.createRng(),t=i.resolve(l.getRoot(),n.start),e.setStart(t.container(),t.offset()),t=i.resolve(l.getRoot(),n.end),e.setEnd(t.container(),t.offset()),e}var d,c,p,f,h,m;if(n)if(t.isArray(n.start)){if(d=l.createRng(),c=l.getRoot(),a.tridentSel)return a.tridentSel.moveToBookmark(n);r(!0)&&r()&&a.setRng(d)}else"string"==typeof n.start?a.setRng(u(n)):n.id?(o("start"),o("end"),p&&(d=l.createRng(),d.setStart(s(p),h),d.setEnd(s(f),m),a.setRng(d))):n.name?a.select(l.select(n.name)[n.index]):n.rng&&a.setRng(n.rng)}}var s=o.isContentEditableFalse;return a.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},a}),r("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/NodeType","tinymce/Env","tinymce/util/Tools"],function(e,t,i,r,o,a,s,l){function u(e,n,r,a){var s=this;s.dom=e,s.win=n,s.serializer=r,s.editor=a,s.bookmarkManager=new o(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new t(s))}var d=l.each,c=l.trim,p=s.ie;return u.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();e?(i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(e){var t,i,r,o=this,a=o.getRng(),s=o.dom.create("body"),l=o.getSel();return e=e||{},t=i="",e.get=!0,e.format=e.format||"html",e.selection=!0,o.editor.fire("BeforeGetContent",e),"text"==e.format?o.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(r=a.cloneContents(),r&&s.appendChild(r)):a.item!==n||a.htmlText!==n?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(t=" "),/\s+$/.test(s.innerHTML)&&(i=" "),e.getInner=!0,e.content=o.isCollapsed()?"":t+o.serializer.serialize(s,e)+i,o.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,i,r,o=this,a=o.getRng(),s=o.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||o.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(i=s.createDocumentFragment(),r=s.createElement("div"),i.appendChild(r),r.outerHTML=e,a.insertNode(i))),n=o.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),o.setRng(a),o.dom.remove("__caret");try{o.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=o.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),o.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||o.editor.fire("SetContent",t)},getStart:function(e){var t,n,i,r,o=this,a=o.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);for(i=a.duplicate(),i.collapse(1),t=i.parentElement(),t.ownerDocument!==o.dom.doc&&(t=o.dom.getRoot()),n=r=a.parentElement();r=r.parentNode;)if(r==t){t=n;break}return t}return t=a.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&a.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,a.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,i=this,r=i.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),t=r.parentElement(),t.ownerDocument!==i.dom.doc&&(t=i.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=r.endContainer,n=r.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,i=this,r=i.dom,o=r.createRng();if(i.lastFocusBookmark=null,e){if(!t&&i.controlSelection.controlSelect(e))return;n=r.nodeIndex(e),o.setStart(e.parentNode,n),o.setEnd(e.parentNode,n+1),t&&(i._moveEndPoint(o,e,!0),i._moveEndPoint(o,e)),i.setRng(o)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n,i,r,o,a,s,l=this;if(!l.win)return null;if(o=l.win.document,!e&&l.lastFocusBookmark){var u=l.lastFocusBookmark;return u.startContainer?(i=o.createRange(),i.setStart(u.startContainer,u.startOffset),i.setEnd(u.endContainer,u.endOffset)):i=u,i}if(e&&l.tridentSel)return l.tridentSel.getRangeAt(0);try{(n=l.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():o.createRange())}catch(e){}if(s=l.editor.fire("GetSelectionRange",{range:i}),s.range!==i)return s.range;if(p&&i&&i.setStart&&o.selection){try{a=o.selection.createRange()}catch(e){}a&&a.item&&(r=a.item(0),i=o.createRange(),i.setStartBefore(r),i.setEndAfter(r))}return i||(i=o.createRange?o.createRange():o.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(r=l.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0)),l.selectedRange&&l.explicitRange&&(0===t(i.START_TO_START,i,l.selectedRange)&&0===t(i.END_TO_END,i,l.selectedRange)?i=l.explicitRange:(l.selectedRange=null,l.explicitRange=null)),i},setRng:function(e,t){var n,i,r,o=this;if(e)if(e.select){o.explicitRange=null;try{e.select()}catch(e){}}else if(o.tridentSel){if(e.cloneRange)try{o.tridentSel.addRange(e)}catch(e){}}else{if(n=o.getSel(),r=o.editor.fire("SetSelectionRange",{range:e}),e=r.range,n){o.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!=e.endContainer||!n.setBaseAndExtent||s.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset],i&&"IMG"==i.tagName&&o.getSel().setBaseAndExtent(i,0,i,1))}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n,i,r,o,a=this,s=a.getRng(),l=a.dom.getRoot();return s?(n=s.startContainer,i=s.endContainer,r=s.startOffset,o=s.endOffset,s.setStart?(t=s.commonAncestorContainer,!s.collapsed&&(n==i&&o-r<2&&n.hasChildNodes()&&(t=n.childNodes[r]),3===n.nodeType&&3===i.nodeType&&(n=n.length===r?e(n.nextSibling,!0):n.parentNode,i=0===o?e(i.previousSibling,!1):i.parentNode,n&&n===i))?n:t&&3==t.nodeType?t.parentNode:t):(t=s.item?s.item(0):s.parentElement(),t.ownerDocument!==a.win.document&&(t=l),t)):l},getSelectedBlocks:function(t,n){var i,r,o=this,a=o.dom,s=[];if(r=a.getRoot(),t=a.getParent(t||o.getStart(),a.isBlock),n=a.getParent(n||o.getEnd(),a.isBlock),t&&t!=r&&s.push(t),t&&n&&t!=n){i=t;for(var l=new e(t,r);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}return n&&t!=n&&n!=r&&s.push(n),s},isForward:function(){var e,t,n=this.dom,i=this.getSel();return!(i&&i.anchorNode&&i.focusNode)||(e=n.createRng(),e.setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(i.focusNode,i.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();return s.range&&new r(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",function(e){var t=e.element,r=i.dom,o=r.getParents(t,null,r.getRoot()),a={};d(i.selectorChangedData,function(e,t){d(o,function(i){if(r.is(i,t))return n[t]||(d(e,function(e){e(!0,{node:i,selector:t,parents:o})}),n[t]=e),a[t]=e,!1})}),d(n,function(e,i){a[i]||(delete n[i],d(e,function(e){e(!1,{node:t,selector:i,parents:o})}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){function n(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}var i,r,o,s,l=this,u=l.dom,d=u.getRoot(),c=0;if(a.isElement(e)){if(t===!1&&(c=e.offsetHeight),"BODY"!=d.nodeName){var p=l.getScrollContainer();if(p)return i=n(e).y-n(p).y+c,s=p.clientHeight,o=p.scrollTop,void((i<o||i+25>o+s)&&(p.scrollTop=i<o?i:i-s+25))}r=u.getViewPort(l.editor.getWin()),i=u.getPos(e).y+c,o=r.y,s=r.h,(i<r.y||i+25>o+s)&&l.editor.getWin().scrollTo(0,i<o?i:i-s+25)}},placeCaretAt:function(e,t){this.setRng(r.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(t,n,i){var r=n,o=new e(n,r),a=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==c(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?o.next():o.prev());"BODY"==r.nodeName&&(i?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},u}),r("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){function n(t){this.compare=function(n,r){function o(e){var n={};return i(t.getAttribs(e),function(i){var r=i.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&"data-mce-style"!==r&&"data-mce-fragment"!=r&&(n[r]=t.getAttrib(e,r))}),n}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return n.nodeName==r.nodeName&&(!!a(o(n),o(r))&&(!!a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(r,"style")))&&(!e.isBookmarkNode(n)&&!e.isBookmarkNode(r))))}}var i=t.each;return n}),r("tinymce/fmt/Preview",["tinymce/util/Tools"],function(e){function t(e,t){function i(e){return e.replace(/%(\w+)/g,"")}var r,o,a,s,l=e.dom,u="";if(s=e.settings.preview_styles,s===!1)return"";if(s||(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return r=t.block||t.inline||"span",o=l.create(r),n(t.styles,function(e,t){e=i(e),e&&l.setStyle(o,t,e)}),n(t.attributes,function(e,t){e=i(e),e&&l.setAttrib(o,t,e)}),n(t.classes,function(e){e=i(e),l.hasClass(o,e)||l.addClass(o,e)}),e.fire("PreviewFormats"),l.setStyles(o,{position:"absolute",left:-65535}),e.getBody().appendChild(o),a=l.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(s.split(" "),function(t){var n=l.getStyle(o,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(u+="padding:0 2px;"),u+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(o),u}var n=e.each;return{getCssText:t}}),r("tinymce/fmt/Hooks",["tinymce/util/Arr","tinymce/dom/NodeType","tinymce/dom/DomQuery"],function(e,t,n){function i(e,t){var n=o[e];n||(o[e]=n=[]),o[e].push(t)}function r(e,t){s(o[e],function(e){e(t)})}var o=[],a=e.filter,s=e.each;return i("pre",function(i){function r(t){return l(t.previousSibling)&&e.indexOf(u,t.previousSibling)!=-1}function o(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}var l,u,d=i.selection.getRng();l=t.matchNodeNames("pre"),d.collapsed||(u=i.selection.getSelectedBlocks(),s(a(a(u,l),r),function(e){o(e.previousSibling,e)}))}),{postProcess:r}}),r("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview","tinymce/fmt/Hooks"],function(e,t,n,i,r,o,a){return function(s){function l(e){return e.nodeType&&(e=e.nodeName),!!s.schema.getTextBlockElements()[e.toLowerCase()]}function u(e){return/^(TH|TD)$/.test(e.nodeName)}function d(e){return e&&/^(IMG)$/.test(e.nodeName)}function c(e,t){return Q.getParents(e,t,Q.getRoot())}function p(e){return 1===e.nodeType&&"_mce_caret"===e.id}function f(){g({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){de(n,function(t,n){Q.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),de("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){g(e,{block:e,remove:"all"})}),g(s.settings.formats)}function h(){s.addShortcut("meta+b","bold_desc","Bold"),s.addShortcut("meta+i","italic_desc","Italic"),s.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)s.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])}function m(e){return e?X[e]:X}function g(e,t){e&&("string"!=typeof e?de(e,function(e,t){g(t,e)}):(t=t.length?t:[t],de(t,function(e){e.deep===$&&(e.deep=!e.selector),e.split===$&&(e.split=!e.selector||e.inline),e.remove===$&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),X[e]=t))}function v(e){return e&&X[e]&&delete X[e],X}function y(e,t){var n=m(t);if(n)for(var i=0;i<n.length;i++)if(n[i].inherit===!1&&Q.is(e,n[i].selector))return!0;return!1}function b(e){var t;return s.dom.getParent(e,function(e){return t=s.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function _(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=b(e.parentNode),s.dom.getStyle(e,"color")&&t?s.dom.setStyle(e,"text-decoration",t):s.dom.getStyle(e,"text-decoration")===t&&s.dom.setStyle(e,"text-decoration",null))}function x(t,n,i){function r(e,t){if(t=t||h,e){if(t.onformat&&t.onformat(e,t,n,i),de(t.styles,function(t,i){Q.setStyle(e,i,A(t,n))}),t.styles){var r=Q.getAttrib(e,"style");r&&e.setAttribute("data-mce-style",r)}de(t.attributes,function(t,i){Q.setAttrib(e,i,A(t,n))}),de(t.classes,function(t){t=A(t,n),Q.hasClass(e,t)||Q.addClass(e,t)})}}function o(){function t(t,n){var r=new e(n);for(i=r.prev2();i;i=r.prev2()){if(3==i.nodeType&&i.data.length>0)return i;if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}}var n=s.selection.getRng(),r=n.startContainer,o=n.endContainer;if(r!=o&&0===n.endOffset){var a=t(r,o),l=3==a.nodeType?a.data.length:a.childNodes.length;n.setEnd(a,l)}return n}function u(e,i,o){var a,s,u=[],d=!0;a=h.inline||h.block,s=Q.create(a),r(s),Z.walk(e,function(e){function i(e){var m,v,y,b,_;return _=d,m=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&le(e)&&(_=d,d="true"===le(e),b=!0),M(m,"br")?(c=0,void(h.block&&Q.remove(e))):h.wrapper&&w(e,t,n)?void(c=0):d&&!b&&h.block&&!h.wrapper&&l(m)&&ee(v,a)?(e=Q.rename(e,a),r(e),u.push(e),void(c=0)):h.selector&&(de(f,function(t){if(!("collapsed"in t&&t.collapsed!==g))return Q.is(e,t.selector)&&!p(e)?(r(e,t),y=!0,!1):void 0}),!h.inline||y)?void(c=0):void(!d||b||!ee(a,m)||!ee(v,a)||!o&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||p(e)||h.inline&&te(e)?(c=0,de(ce(e.childNodes),i),b&&(d=_),c=0):(c||(c=Q.clone(s,ae),e.parentNode.insertBefore(c,e),u.push(c)),c.appendChild(e)))}var c;de(e,i)}),h.links===!0&&de(u,function(e){function t(e){"A"===e.nodeName&&r(e,h),de(ce(e.childNodes),t)}t(e)}),de(u,function(e){function i(e){var t=0;return de(e.childNodes,function(e){O(e)||ue(e)||t++}),t}function o(e){var t,n;return de(e.childNodes,function(e){if(1==e.nodeType&&!ue(e)&&!p(e))return t=e,ae}),t&&!ue(t)&&N(t,h)&&(n=Q.clone(t,ae),r(n),Q.replace(n,e,se),Q.remove(t,1)),n||e}var a;if(a=i(e),(u.length>1||!te(e))&&0===a)return void Q.remove(e,1);if(h.inline||h.wrapper){if(h.exact||1!==a||(e=o(e)),de(f,function(t){de(Q.select(t.inline,e),function(e){ue(e)||H(t,n,e,t.exact?e:null)})}),w(e.parentNode,t,n))return Q.remove(e,1),e=0,se;h.merge_with_parents&&Q.getParent(e.parentNode,function(i){if(w(i,t,n))return Q.remove(e,1),e=0,se}),e&&h.merge_siblings!==!1&&(e=V(U(e),e),e=V(e,U(e,se)))}})}var d,c,f=m(t),h=f[0],g=!i&&J.isCollapsed();if("false"!==le(J.getNode())){if(h){if(i)i.nodeType?(c=Q.createRng(),c.setStartBefore(i),c.setEndAfter(i),u(B(c,f),null,!0)):u(i,null,!0);else if(g&&h.inline&&!Q.select("td[data-mce-selected],th[data-mce-selected]").length)W("apply",t,n);else{var v=s.selection.getNode();ne||!f[0].defaultBlock||Q.getParent(v,Q.isBlock)||x(f[0].defaultBlock),s.selection.setRng(o()),d=J.getBookmark(),u(B(J.getRng(se),f),d),h.styles&&(h.styles.color||h.styles.textDecoration)&&(pe(v,_,"childNodes"),_(v)),J.moveToBookmark(d),q(J.getRng(se)),s.nodeChanged()}a.postProcess(t,s)}}else{i=J.getNode();for(var y=0,b=f.length;y<b;y++)if(f[y].ceFalseOverride&&Q.is(i,f[y].selector))return void r(i,f[y])}}function C(e,t,n,i){function r(e){var n,i,o,a,s;if(1===e.nodeType&&le(e)&&(a=y,y="true"===le(e),s=!0),n=ce(e.childNodes),y&&!s)for(i=0,o=g.length;i<o&&!H(g[i],t,e,e);i++);if(v.deep&&n.length){for(i=0,o=n.length;i<o;i++)r(n[i]);s&&(y=a)}}function o(n){var r;return de(c(n.parentNode).reverse(),function(n){var o;r||"_start"==n.id||"_end"==n.id||(o=w(n,e,t,i),o&&o.split!==!1&&(r=n))}),r}function a(e,n,i,r){var o,a,s,l,u,d;if(e){for(d=e.parentNode,o=n.parentNode;o&&o!=d;o=o.parentNode){for(a=Q.clone(o,ae),u=0;u<g.length;u++)if(H(g[u],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!r||v.mixed&&te(e)||(n=Q.split(e,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}function l(e){return a(o(e),e,e,!0)}function d(e){var t=Q.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return ue(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),Q.remove(t,!0),n}function p(e){var t,n,i=e.commonAncestorContainer;if(e=B(e,g,se),v.split){if(t=j(e,se),n=j(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),
i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&u(n)&&n.firstChild&&(n=n.firstChild||n),Q.isChildOf(t,n)&&!te(n)&&!u(t)&&!u(n))return t=L(t,"span",{id:"_start","data-mce-type":"bookmark"}),l(t),void(t=d(se));t=L(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=L(n,"span",{id:"_end","data-mce-type":"bookmark"}),l(t),l(n),t=d(se),n=d()}else t=n=l(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=ie(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=ie(n)+1}Z.walk(e,function(e){de(e,function(e){r(e),1===e.nodeType&&"underline"===s.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===b(e.parentNode)&&H({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f,h,g=m(e),v=g[0],y=!0;if(n)return void(n.nodeType?(h=Q.createRng(),h.setStartBefore(n),h.setEndAfter(n),p(h)):p(n));if("false"!==le(J.getNode()))J.isCollapsed()&&v.inline&&!Q.select("td[data-mce-selected],th[data-mce-selected]").length?W("remove",e,t,i):(f=J.getBookmark(),p(J.getRng(se)),J.moveToBookmark(f),v.inline&&T(e,t,J.getStart())&&q(J.getRng(!0)),s.nodeChanged());else{n=J.getNode();for(var _=0,x=g.length;_<x&&(!g[_].ceFalseOverride||!H(g[_],t,n,n));_++);}}function E(e,t,n){var i=m(e);!T(e,t,n)||"toggle"in i[0]&&!i[0].toggle?x(e,t,n):C(e,t,n)}function w(e,t,n,i){function r(e,t,r){var o,a,s,l=t[r];if(t.onmatch)return t.onmatch(e,t,r);if(l)if(l.length===$){for(o in l)if(l.hasOwnProperty(o)){if(a="attributes"===r?Q.getAttrib(e,o):R(e,o),i&&!a&&!t.exact)return;if((!i||t.exact)&&!M(a,D(A(l[o],n),o)))return}}else for(s=0;s<l.length;s++)if("attributes"===r?Q.getAttrib(e,l[s]):R(e,l[s]))return t;return t}var o,a,s,l=m(t);if(l&&e)for(a=0;a<l.length;a++)if(o=l[a],N(e,o)&&r(e,o,"attributes")&&r(e,o,"styles")){if(s=o.classes)for(a=0;a<s.length;a++)if(!Q.hasClass(e,s[a]))return;return o}}function T(e,t,n){function i(n){var i=Q.getRoot();return n!==i&&(n=Q.getParent(n,function(n){return!!y(n,e)||(n.parentNode===i||!!w(n,e,t,!0))}),w(n,e,t))}var r;return n?i(n):(n=J.getNode(),i(n)?se:(r=J.getStart(),r!=n&&i(r)?se:ae))}function S(e,t){var n,i=[],r={};return n=J.getStart(),Q.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)a=e[o],!r[a]&&w(n,a,t)&&(r[a]=!0,i.push(a))},Q.getRoot()),i}function P(e){var t,n,i,r,o,a=m(e);if(a)for(t=J.getStart(),n=c(t),r=a.length-1;r>=0;r--){if(o=a[r].selector,!o||a[r].defaultBlock)return se;for(i=n.length-1;i>=0;i--)if(Q.is(n[i],o))return se}return ae}function k(e,t,n){var i;return G||(G={},i={},s.on("NodeChange",function(e){var t=c(e.element),n={};t=r.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),de(G,function(e,r){de(t,function(o){return w(o,r,{},e.similar)?(i[r]||(de(e,function(e){e(!0,{node:o,format:r,parents:t})}),i[r]=e),n[r]=e,!1):!y(o,r)&&void 0})}),de(i,function(r,o){n[o]||(delete i[o],de(r,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),de(e.split(","),function(e){G[e]||(G[e]=[],G[e].similar=n),G[e].push(t)}),this}function I(e){return o.getCssText(s,e)}function N(e,t){return M(e,t.inline)?se:M(e,t.block)?se:t.selector?1==e.nodeType&&Q.is(e,t.selector):void 0}function M(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function R(e,t){return D(Q.getStyle(e,t),t)}function D(e,t){return"color"!=t&&"backgroundColor"!=t||(e=Q.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function A(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function O(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function L(e,t,n){var i=Q.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function B(t,n,i){function r(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var i,r,o,a,s;if(i=r=e?g:y,a=e?"previousSibling":"nextSibling",s=Q.getRoot(),3==i.nodeType&&!O(i)&&(e?v>0:b<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&te(r))return r;for(o=r[a];o;o=o[a])if(!ue(o)&&!O(o)&&!t(o))return r;if(r==s||r.parentNode==s){i=r;break}r=r.parentNode}return i}function o(e,t){for(t===$&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function a(e){for(var t=e;t;){if(1===t.nodeType&&le(t))return"false"===le(t)?t:e;t=t.parentNode}return e}function u(t,n,r){function o(e,t){var n,o,a=e.nodeValue;return"undefined"==typeof t&&(t=r?a.length:0),r?(n=a.lastIndexOf(" ",t),o=a.lastIndexOf(" ",t),n=n>o?n:o,n===-1||i||n++):(n=a.indexOf(" ",t),o=a.indexOf(" ",t),n=n!==-1&&(o===-1||n<o)?n:o),n}var a,l,u,d;if(3===t.nodeType){if(u=o(t,n),u!==-1)return{container:t,offset:u};d=t}for(a=new e(t,Q.getParent(t,te)||s.getBody());l=a[r?"prev":"next"]();)if(3===l.nodeType){if(d=l,u=o(l),u!==-1)return{container:l,offset:u}}else if(te(l))break;if(d)return n=r?0:d.length,{container:d,offset:n}}function d(e,i){var r,o,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]),r=c(e),o=0;o<r.length;o++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&Q.is(r[o],s.selector))return r[o];return e}function p(e,t){var i,r=Q.getRoot();if(n[0].wrapper||(i=Q.getParent(e,n[0].block,r)),i||(i=Q.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&l(e)})),i&&n[0].wrapper&&(i=c(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!te(i[t])&&(i=i[t],!M(i,"br")););return i||e}var f,h,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(f=g.childNodes.length-1,g=g.childNodes[v>f?f:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(f=y.childNodes.length-1,y=y.childNodes[b>f?f:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=a(g),y=a(y),(ue(g.parentNode)||ue(g))&&(g=ue(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(ue(y.parentNode)||ue(y))&&(y=ue(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(m=u(g,v,!0),m&&(g=m.container,v=m.offset),m=u(y,b),m&&(y=m.container,b=m.offset)),h=o(y,b),h.node)){for(;h.node&&0===h.offset&&h.node.previousSibling;)h=o(h.node.previousSibling);h.node&&h.offset>0&&3===h.node.nodeType&&" "===h.node.nodeValue.charAt(h.offset-1)&&h.offset>1&&(y=h.node,y.splitText(h.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=r(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=r())),n[0].selector&&n[0].expand!==ae&&!n[0].inline&&(g=d(g,"previousSibling"),y=d(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=p(g,"previousSibling"),y=p(y,"nextSibling"),n[0].block&&(te(g)||(g=r(!0)),te(y)||(y=r()))),1==g.nodeType&&(v=ie(g),g=g.parentNode),1==y.nodeType&&(b=ie(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function F(e,t){return t.links&&"A"==e.tagName}function H(e,t,n,i){var r,o,a;if(!N(n,e)&&!F(n,e))return ae;if("all"!=e.remove)for(de(e.styles,function(r,o){r=D(A(r,t),o),"number"==typeof o&&(o=r,i=0),(e.remove_similar||!i||M(R(i,o),r))&&Q.setStyle(n,o,""),a=1}),a&&""===Q.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),de(e.attributes,function(e,r){var o;if(e=A(e,t),"number"==typeof r&&(r=e,i=0),!i||M(Q.getAttrib(i,r),e)){if("class"==r&&(e=Q.getAttrib(n,r),e&&(o="",de(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void Q.setAttrib(n,r,o);"class"==r&&n.removeAttribute("className"),oe.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),de(e.classes,function(e){e=A(e,t),i&&!Q.hasClass(i,e)||Q.removeClass(n,e)}),o=Q.getAttribs(n),r=0;r<o.length;r++)if(0!==o[r].nodeName.indexOf("_"))return ae;return"none"!=e.remove?(z(n,e),se):void 0}function z(e,t){function n(e,t,n){return e=U(e,t,n),!e||"BR"==e.nodeName||te(e)}var i,r=e.parentNode;t.block&&(ne?r==Q.getRoot()&&(t.list_block&&M(e,t.list_block)||de(ce(e.childNodes),function(e){ee(ne,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=L(e,ne),Q.setAttribs(i,s.settings.forced_root_block_attrs)):i=0})):te(e)&&!te(r)&&(n(e,ae)||n(e.firstChild,se,1)||e.insertBefore(Q.create("br"),e.firstChild),n(e,se)||n(e.lastChild,ae,1)||e.appendChild(Q.create("br")))),t.selector&&t.inline&&!M(t.inline,e)||Q.remove(e,1)}function U(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!O(e))return e}function V(e,t){function n(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!ue(r))return r}return e}var r,o,a=new i(Q);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(r=e.nextSibling;r&&r!=t;)o=r,r=r.nextSibling,e.appendChild(o);return Q.remove(t),de(ce(t.childNodes),function(t){e.appendChild(t)}),e}return t}function j(t,n){var i,r,o;return i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&r&&r--,i=i.childNodes[r>o?o:r]),3===i.nodeType&&n&&r>=i.nodeValue.length&&(i=new e(i,s.getBody()).next()||i),3!==i.nodeType||n||0!==r||(i=new e(i,s.getBody()).prev()||i),i}function W(t,n,i,r){function o(e){var t=Q.create("span",{id:g,"data-mce-bogus":!0,style:v?"color:red":""});return e&&t.appendChild(s.getDoc().createTextNode(re)),t}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==re||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function u(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function d(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,i;if(e)i=J.getRng(!0),a(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),Q.remove(e)):(n=d(e),n.nodeValue.charAt(0)===re&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),Q.remove(e,1)),J.setRng(i);else if(e=u(J.getStart()),!e)for(;e=Q.get(g);)c(e,!1)}function p(){var e,t,r,a,s,l,c;e=J.getRng(!0),a=e.startOffset,l=e.startContainer,c=l.nodeValue,t=u(J.getStart()),t&&(r=d(t)),c&&a>0&&a<c.length&&/\w/.test(c.charAt(a))&&/\w/.test(c.charAt(a-1))?(s=J.getBookmark(),e.collapse(!0),e=B(e,m(n)),e=Z.split(e),x(n,i,e),J.moveToBookmark(s)):(t&&r.nodeValue===re?x(n,i,t):(t=o(!0),r=t.firstChild,e.insertNode(t),a=1,x(n,i,t)),J.setCursorLocation(r,a))}function f(){var e,t,a,s,u,d,c,p,f=J.getRng(!0),h=[];for(e=f.startContainer,t=f.startOffset,u=e,3==e.nodeType&&(t!=e.nodeValue.length&&(s=!0),u=u.parentNode);u;){if(w(u,n,i,r)){d=u;break}u.nextSibling&&(s=!0),h.push(u),u=u.parentNode}if(d)if(s)a=J.getBookmark(),f.collapse(!0),f=B(f,m(n),!0),f=Z.split(f),C(n,i,f),J.moveToBookmark(a);else{for(p=o(),u=p,c=h.length-1;c>=0;c--)u.appendChild(Q.clone(h[c],!1)),u=u.firstChild;u.appendChild(Q.doc.createTextNode(re)),u=u.firstChild;var g=Q.getParent(d,l);g&&Q.isEmpty(g)?d.parentNode.replaceChild(p,d):Q.insertAfter(p,d),J.setCursorLocation(u,1),Q.isEmpty(d)&&Q.remove(d)}}function h(){var e;e=u(J.getStart()),e&&!Q.isEmpty(e)&&pe(e,function(e){1!=e.nodeType||e.id===g||Q.isEmpty(e)||Q.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",v=s.settings.caret_debug;s._hasCaretEvents||(Y=function(){var e,t=[];if(a(u(J.getStart()),t))for(e=t.length;e--;)Q.setAttrib(t[e],"data-mce-bogus","1")},K=function(e){var t=e.keyCode;c(),8==t&&J.isCollapsed()&&J.getStart().innerHTML==re&&c(u(J.getStart())),37!=t&&39!=t||c(u(J.getStart())),h()},s.on("SetContent",function(e){e.selection&&h()}),s._hasCaretEvents=!0),"apply"==t?p():f()}function q(t){var n,i,r,o,a,s=t.startContainer,l=t.startOffset;if((t.startContainer!=t.endContainer||!d(t.startContainer.childNodes[t.startOffset]))&&(3==s.nodeType&&l>=s.nodeValue.length&&(l=ie(s),s=s.parentNode,n=!0),1==s.nodeType))for(o=s.childNodes,s=o[Math.min(l,o.length-1)],i=new e(s,Q.getParent(s,Q.isBlock)),(l>o.length-1||n)&&i.next(),r=i.current();r;r=i.next())if(3==r.nodeType&&!O(r))return a=Q.create("a",{"data-mce-bogus":"all"},re),r.parentNode.insertBefore(a,r),t.setStart(r,0),J.setRng(t),void Q.remove(a)}var G,$,K,Y,X={},Q=s.dom,J=s.selection,Z=new t(Q),ee=s.schema.isValidChild,te=Q.isBlock,ne=s.settings.forced_root_block,ie=Q.nodeIndex,re="\ufeff",oe=/^(src|href|style)$/,ae=!1,se=!0,le=Q.getContentEditable,ue=n.isBookmarkNode,de=r.each,ce=r.grep,pe=r.walk,fe=r.extend;fe(this,{get:m,register:g,unregister:v,apply:x,remove:C,toggle:E,match:T,matchAll:S,matchNode:w,canApply:P,formatChanged:k,getCssText:I}),f(),h(),s.on("BeforeGetContent",function(e){Y&&"raw"!=e.format&&Y()}),s.on("mouseup keydown",function(e){K&&K(e)})}}),r("tinymce/UndoManager",["tinymce/util/VK","tinymce/Env"],function(e,t){return function(e){function n(){return e.serializer.getTrimmedContent()}function i(t){e.setDirty(t)}function r(e){s.typing=!1,s.add({},e)}var o,a,s=this,l=0,u=[],d=0;return e.on("init",function(){s.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s.beforeChange()}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&r(e)}),e.on("ObjectResizeStart Cut",function(){s.beforeChange()}),e.on("SaveContent ObjectResized blur",r),e.on("DragEnd",r),e.on("KeyUp",function(o){var l=o.keyCode;o.isDefaultPrevented()||((l>=33&&l<=36||l>=37&&l<=40||45==l||13==l||o.ctrlKey)&&(r(),e.nodeChanged()),(46==l||8==l||t.mac&&(91==l||93==l))&&e.nodeChanged(),a&&s.typing&&(e.isDirty()||(i(u[0]&&n()!=u[0].content),e.isDirty()&&e.fire("change",{level:u[0],lastLevel:null})),e.fire("TypingUndo"),a=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45==t)return void(s.typing&&r(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224==t||91==t||s.typing||n||(s.beforeChange(),s.typing=!0,s.add({},e),a=!0)}}),e.on("MouseDown",function(e){s.typing&&r(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),s={data:u,typing:!1,beforeChange:function(){d||(o=e.selection.getBookmark(2,!0))},add:function(t,r){var a,s,c=e.settings;if(t=t||{},t.content=n(),d||e.removed)return null;if(s=u[l],e.fire("BeforeAddUndo",{level:t,lastLevel:s,originalEvent:r}).isDefaultPrevented())return null;if(s&&s.content==t.content)return null;if(u[l]&&(u[l].beforeBookmark=o),c.custom_undo_redo_levels&&u.length>c.custom_undo_redo_levels){for(a=0;a<u.length-1;a++)u[a]=u[a+1];u.length--,l=u.length}t.bookmark=e.selection.getBookmark(2,!0),l<u.length-1&&(u.length=l+1),u.push(t),l=u.length-1;var p={level:t,lastLevel:s,originalEvent:r};return e.fire("AddUndo",p),l>0&&(i(!0),e.fire("change",p)),t},undo:function(){var t;return s.typing&&(s.add(),s.typing=!1),l>0&&(t=u[--l],e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(t.beforeBookmark),i(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return l<u.length-1&&(t=u[++l],e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(t.bookmark),i(!0),e.fire("redo",{level:t})),t},clear:function(){u=[],l=0,s.typing=!1,e.fire("ClearUndos")},hasUndo:function(){return l>0||s.typing&&u[0]&&n()!=u[0].content},hasRedo:function(){return l<u.length-1&&!this.typing},transact:function(e){s.beforeChange();try{d++,e()}finally{d--}s.add()}}}}),r("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(e,t,n){var i=n.ie&&n.ie<11;return function(r){function o(o){function f(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function h(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function m(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function g(e){var t,n=e,i=[];if(n){for(;n=n.firstChild;){if(a.isBlock(n))return;1!=n.nodeType||c[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)n=i[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?a.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&a.remove(n)}}function v(t){function i(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var r,o,l,u,d=t;if(t){if(n.ie&&n.ie<9&&A&&A.firstChild&&A.firstChild==A.lastChild&&"BR"==A.firstChild.tagName&&a.remove(A.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var c=i(t.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(r=new e(t,t);o=r.current();){if(3==o.nodeType){l.setStart(o,0),l.setEnd(o,0);break}if(p[o.nodeName.toLowerCase()]){l.setStartBefore(o),l.setEndBefore(o);break}d=o,o=r.next()}o||(l.setStart(d,0),l.setEnd(d,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!O||O<9)&&(u=a.create("br"),t.parentNode.insertBefore(u,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(u),s.scrollIntoView(t)}}function y(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function b(e){e.innerHTML=i?"":'<br data-mce-bogus="1">'}function _(e){var t,n,r,o=R,s=d.getTextInlineElements();if(e||"TABLE"==z?(t=a.create(e||V),y(t)):t=A.cloneNode(!1),r=t,l.keep_styles!==!1)do if(s[o.nodeName]){if("_mce_caret"==o.id)continue;n=o.cloneNode(!1),a.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(r=n,t.appendChild(n))}while((o=o.parentNode)&&o!=M);return i||(r.innerHTML='<br data-mce-bogus="1">'),t}function x(t){var n,i,r;if(3==R.nodeType&&(t?D>0:D<R.nodeValue.length))return!1;if(R.parentNode==A&&j&&!t)return!0;if(t&&1==R.nodeType&&R==A.firstChild)return!0;if("TABLE"===R.nodeName||R.previousSibling&&"TABLE"==R.previousSibling.nodeName)return j&&!t||!j&&t;for(n=new e(R,A),3==R.nodeType&&(t&&0===D?n.prev():t||D!=R.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(r=i.nodeName.toLowerCase(),c[r]&&"br"!==r))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function C(e,t){var n,i,o,s,l,u,c=V||"P";if(i=a.getParent(e,a.isBlock),!i||!f(i)){if(i=i||M,u=i==r.getBody()||h(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return n=a.create(c),y(n),i.appendChild(n),I.setStart(n,0),I.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!a.isBlock(s);)o=s,s=s.previousSibling;if(o&&d.isValidChild(u,c.toLowerCase())){for(n=a.create(c),y(n),o.parentNode.insertBefore(n,o),s=o;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;I.setStart(e,t),I.setEnd(e,t)}}return e}function E(){function e(e){for(var t=H[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===A}function t(){var e=H.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:H}if(H!=r.getBody()){var n=H.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(V="LI"),B=V?_(V):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(B,t()):a.replace(B,H):e(!0)?"LI"==n?(a.insertAfter(B,t()),B.appendChild(a.doc.createTextNode(" ")),B.appendChild(H)):H.parentNode.insertBefore(B,H):e()?(a.insertAfter(B,t()),m(B)):(H=t(),N=I.cloneRange(),N.setStartAfter(A),N.setEndAfter(H),F=N.extractContents(),"LI"==V&&"LI"==F.firstChild.nodeName?(B=F.firstChild,a.insertAfter(F,H)):(a.insertAfter(F,H),a.insertAfter(B,H))),a.remove(A),v(B),u.add()}}function w(){r.execCommand("InsertLineBreak",!1,o)}function T(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function S(e){var t,n,i=a.getRoot();for(t=e;t!==i&&"false"!==a.getContentEditable(t);)"true"===a.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==i?n:i}function P(e){var t;i||(e.normalize(),t=e.lastChild,t&&!/^(left|right)$/gi.test(a.getStyle(t,"float",!0))||a.add(e,"br"))}function k(){B=/^(H[1-6]|PRE|FIGURE)$/.test(z)&&"HGROUP"!=U?_(V):_(),l.end_container_on_empty_block&&f(H)&&a.isEmpty(A)?B=a.split(H,A):a.insertAfter(B,A),v(B)}var I,N,M,R,D,A,O,L,B,F,H,z,U,V,j;if(I=s.getRng(!0),!o.isDefaultPrevented()){if(!I.collapsed)return void r.execCommand("Delete");if(new t(a).normalize(I),R=I.startContainer,D=I.startOffset,V=(l.force_p_newlines?"p":"")||l.forced_root_block,V=V?V.toUpperCase():"",O=a.doc.documentMode,L=o.shiftKey,1==R.nodeType&&R.hasChildNodes()&&(j=D>R.childNodes.length-1,R=R.childNodes[Math.min(D,R.childNodes.length-1)]||R,D=j&&3==R.nodeType?R.nodeValue.length:0),M=S(R)){if(u.beforeChange(),!a.isBlock(M)&&M!=a.getRoot())return void(V&&!L||w());if((V&&!L||!V&&L)&&(R=C(R,D)),A=a.getParent(R,a.isBlock),H=A?a.getParent(A.parentNode,a.isBlock):null,z=A?A.nodeName.toUpperCase():"",U=H?H.nodeName.toUpperCase():"","LI"!=U||o.ctrlKey||(A=H,z=U),/^(LI|DT|DD)$/.test(z)){if(!V&&L)return void w();if(a.isEmpty(A))return void E()}if("PRE"==z&&l.br_in_pre!==!1){if(!L)return void w()}else if(!V&&!L&&"LI"!=z||V&&L)return void w();V&&A===r.getBody()||(V=V||"P",x()?k():x(!0)?(B=A.parentNode.insertBefore(_(),A),m(B),v(A)):(N=I.cloneRange(),N.setEndAfter(A),F=N.extractContents(),T(F),B=F.firstChild,a.insertAfter(F,A),g(B),P(A),a.isEmpty(A)&&b(A),B.normalize(),a.isEmpty(B)?(a.remove(B),k()):v(B)),a.setAttrib(B,"id",""),r.fire("NewBlock",{newBlock:B}),u.add())}}}var a=r.dom,s=r.selection,l=r.settings,u=r.undoManager,d=r.schema,c=d.getNonEmptyElements(),p=d.getMoveCaretBeforeOnEnterElements();r.on("keydown",function(e){13==e.keyCode&&o(e)!==!1&&e.preventDefault()})}}),r("tinymce/ForceBlocks",[],function(){return function(e){function t(){var t,s,l,u,d,c,p,f,h,m,g,v,y=r.getStart(),b=e.getBody(),_=-16777215;if(v=n.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(a[y.nodeName])return;y=y.parentNode}if(t=r.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,u=t.endContainer,d=t.endOffset;try{h=e.getDoc().activeElement===b}catch(e){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),h=t.parentElement().ownerDocument===e.getDoc(),m=t.duplicate(),m.collapse(!0),l=m.move("character",_)*-1,m.collapsed||(m=t.duplicate(),m.collapse(!1),d=m.move("character",_)*-1-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!a[y.nodeName])&&o.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){p=y,y=y.nextSibling,i.remove(p);continue}c||(c=i.create(v,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(c,y),f=!0),p=y,y=y.nextSibling,c.appendChild(p)}else c=null,y=y.nextSibling;if(f&&h){if(t.setStart)t.setStart(s,l),t.setEnd(u,d),r.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",l),d>0&&t.moveEnd("character",d),t.select()}catch(e){}e.nodeChanged()}}}var n=e.settings,i=e.dom,r=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),r("tinymce/caret/CaretUtils",["tinymce/util/Fun","tinymce/dom/TreeWalker","tinymce/dom/NodeType","tinymce/caret/CaretPosition","tinymce/caret/CaretContainer","tinymce/caret/CaretCandidate"],function(e,t,n,i,r,o){function a(e){return e>0}function s(e){return e<0}function l(e,n,i,r,o){var l=new t(e,r);if(s(n)){if(_(e)&&(e=l.prev(!0),i(e)))return e;for(;e=l.prev(o);)if(i(e))return e}if(a(n)){if(_(e)&&(e=l.next(!0),i(e)))return e;for(;e=l.next(o);)if(i(e))return e}return null}function u(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(b(e))return e;return t}function d(e,t){for(;e&&e!=t;){if(x(e))return e;e=e.parentNode}return null}function c(e,t,n){return d(e.container(),n)==d(t.container(),n)}function p(e,t,n){return u(e.container(),n)==u(t.container(),n)}function f(e,t){var n,i;return t?(n=t.container(),i=t.offset(),w(n)?n.childNodes[i+e]:null):null}function h(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function m(e,t,n){return d(t,e)==d(n,e)}function g(e,t,n){var i,r;for(r=e?"previousSibling":"nextSibling";n&&n!=t;){if(i=n[r],C(i)&&(i=i[r]),_(i)){if(m(t,i,n))return i;break}if(T(i))break;n=n.parentNode}return null}function v(e,t,i){var o,a,s,l,u=E(g,!0,t),d=E(g,!1,t);if(a=i.startContainer,s=i.startOffset,r.isCaretContainerBlock(a)){if(w(a)||(a=a.parentNode),l=a.getAttribute("data-mce-caret"),"before"==l&&(o=a.nextSibling,_(o)))return S(o);if("after"==l&&(o=a.previousSibling,_(o)))return P(o)}if(!i.collapsed)return i;if(n.isText(a)){if(C(a)){if(1===e){if(o=d(a))return S(o);if(o=u(a))return P(o)}if(e===-1){if(o=u(a))return P(o);if(o=d(a))return S(o)}return i}if(r.endsWithCaretContainer(a)&&s>=a.data.length-1)return 1===e&&(o=d(a))?S(o):i;if(r.startsWithCaretContainer(a)&&s<=1)return e===-1&&(o=u(a))?P(o):i;if(s===a.data.length)return o=d(a),o?S(o):i;if(0===s)return o=u(a),o?P(o):i}return i}function y(e,t){return _(f(e,t))}var b=n.isContentEditableTrue,_=n.isContentEditableFalse,x=n.matchStyleValues("display","block table table-cell table-caption"),C=r.isCaretContainer,E=e.curry,w=n.isElement,T=o.isCaretCandidate,S=E(h,!0),P=E(h,!1);return{isForwards:a,isBackwards:s,findNode:l,getEditingHost:u,getParentBlock:d,isInSameBlock:c,isInSameEditingHost:p,isBeforeContentEditableFalse:E(y,0),isAfterContentEditableFalse:E(y,-1),normalizeRange:v}}),r("tinymce/caret/CaretWalker",["tinymce/dom/NodeType","tinymce/caret/CaretCandidate","tinymce/caret/CaretPosition","tinymce/caret/CaretUtils","tinymce/util/Arr","tinymce/util/Fun"],function(e,t,n,i,r,o){function a(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function s(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(m(e)){if(v(t.previousSibling)&&!p(t.previousSibling))return n.before(t);if(p(t))return n(t,0)}if(g(e)){if(v(t.nextSibling)&&!p(t.nextSibling))return n.after(t);if(p(t))return n(t,t.data.length)}return g(e)?h(t)?n.before(t):n.after(t):n.before(t)}function u(t,r){var o;return!!e.isBr(t)&&(o=d(1,n.after(t),r),!!o&&!i.isInSameBlock(n.before(t),n.before(o),r))}function d(e,t,h){var _,x,C,E,w,T,S;if(!f(h)||!t)return null;if(S=t,_=S.container(),x=S.offset(),p(_)){if(g(e)&&x>0)return n(_,--x);if(m(e)&&x<_.length)return n(_,++x);C=_}else{if(g(e)&&x>0&&(E=s(_,x-1),v(E)))return!y(E)&&(w=i.findNode(E,e,b,E))?p(w)?n(w,w.data.length):n.after(w):p(E)?n(E,E.data.length):n.before(E);if(m(e)&&x<_.childNodes.length&&(E=s(_,x),v(E)))return u(E,h)?d(e,n.after(E),h):!y(E)&&(w=i.findNode(E,e,b,E))?p(w)?n(w,0):n.before(w):p(E)?n(E,0):n.after(E);C=S.getNode()}return(m(e)&&S.isAtEnd()||g(e)&&S.isAtStart())&&(C=i.findNode(C,e,o.constant(!0),h,!0),b(C))?l(e,C):(E=i.findNode(C,e,b,h),T=r.last(r.filter(a(_,h),c)),!T||E&&T.contains(E)?E?l(e,E):null:S=m(e)?n.after(T):n.before(T))}var c=e.isContentEditableFalse,p=e.isText,f=e.isElement,h=e.isBr,m=i.isForwards,g=i.isBackwards,v=t.isCaretCandidate,y=t.isAtomic,b=t.isEditableCaretCandidate;return function(e){return{next:function(t){return d(1,t,e)},prev:function(t){return d(-1,t,e)}}}}),r("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/dom/NodeType"],function(e,t,i,r,o,a,s,l,u){var d=i.each,c=i.extend,p=i.map,f=i.inArray,h=i.explode,m=t.ie,g=t.ie&&t.ie<11,v=!0,y=!1,b=u.matchNodeNames("td th");return function(u){function _(e,t,n,i){var r,o,a=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||u.focus(),i=u.fire("BeforeExecCommand",{command:e,ui:t,value:n}),i.isDefaultPrevented())return!1;if(o=e.toLowerCase(),r=F.exec[o])return r(o,t,n),u.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(d(u.plugins,function(i){if(i.execCommand&&i.execCommand(e,t,n))return u.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1}),a)return a;if(u.theme&&u.theme.execCommand&&u.theme.execCommand(e,t,n))return u.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{a=u.getDoc().execCommand(e,t,n)}catch(e){}return!!a&&(u.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}function x(e){var t;if(!u.quirks.isHidden()){if(e=e.toLowerCase(),t=F.state[e])return t(e);try{return u.getDoc().queryCommandState(e)}catch(e){}return!1}}function C(e){var t;if(!u.quirks.isHidden()){if(e=e.toLowerCase(),t=F.value[e])return t(e);try{return u.getDoc().queryCommandValue(e)}catch(e){}}}function E(e,t){t=t||"exec",d(e,function(e,n){d(n.toLowerCase().split(","),function(n){F[t][n]=e})})}function w(e,t,n){e=e.toLowerCase(),F.exec[e]=function(e,i,r,o){return t.call(n||u,i,r,o)}}function T(e){if(e=e.toLowerCase(),F.exec[e])return!0;try{return u.getDoc().queryCommandSupported(e)}catch(e){}return!1}function S(e,t,n){e=e.toLowerCase(),F.state[e]=function(){return t.call(n||u)}}function P(e,t,n){e=e.toLowerCase(),F.value[e]=function(){return t.call(n||u)}}function k(e){return e=e.toLowerCase(),!!F.exec[e]}function I(e,t,i){return t===n&&(t=y),i===n&&(i=null),u.getDoc().execCommand(e,t,i)}function N(e){return L.match(e)}function M(e,t){L.toggle(e,t?{value:t}:n),u.nodeChanged()}function R(e){B=O.getBookmark(e)}function D(){O.moveToBookmark(B)}var A,O,L,B,F={state:{},exec:{},value:{}},H=u.settings;u.on("PreInit",function(){A=u.dom,O=u.selection,H=u.settings,L=u.formatter}),c(this,{execCommand:_,queryCommandState:x,queryCommandValue:C,queryCommandSupported:T,addCommands:E,addCommand:w,addQueryStateHandler:S,addQueryValueHandler:P,hasCustomCommand:k}),E({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){u.undoManager.add()},"Cut,Copy,Paste":function(e){var n,i=u.getDoc();try{I(e)}catch(e){n=v}if("paste"!==e||i.queryCommandEnabled(e)||(n=!0),n||!i.queryCommandSupported(e)){var r=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");t.mac&&(r=r.replace(/Ctrl\+/g,"⌘+")),u.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(O.isCollapsed()){var e=O.getNode();return void("A"==e.tagName&&u.dom.remove(e,!0))}L.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),d("left,center,right,justify".split(","),function(e){t!=e&&L.remove("align"+e)}),"none"!=t&&M("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;I(e),t=A.getParent(O.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(R(),A.split(n,t),D()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){M(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){M(e,n)},FontSize:function(e,t,n){var i,r;n>=1&&n<=7&&(r=h(H.font_size_style_values),i=h(H.font_size_classes),n=i?i[n-1]||n:r[n-1]||n),M(e,n)},RemoveFormat:function(e){L.remove(e)},mceBlockQuote:function(){M("blockquote")},FormatBlock:function(e,t,n){return M(n||"p")},mceCleanup:function(){var e=O.getBookmark();u.setContent(u.getContent({cleanup:v}),{cleanup:v}),O.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||O.getNode();i!=u.getBody()&&(R(),u.dom.remove(i,v),D())},mceSelectNodeDepth:function(e,t,n){var i=0;A.getParent(O.getNode(),function(e){if(1==e.nodeType&&i++==n)return O.select(e),y},u.getBody())},mceSelectNode:function(e,t,n){O.select(n)},mceInsertContent:function(t,n,o){function a(e){function t(e){return i[e]&&3==i[e].nodeType}var n,i,r;return n=O.getRng(!0),i=n.startContainer,r=n.startOffset,3==i.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<i.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function c(){var e,t,n;e=O.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&(" "===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(o)||(o+=" ")):" "===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(o)||(o=" "+o)))}function p(e){if(R)for(I=e.firstChild;I;I=I.walk(!0))L[I.name]&&I.attr("data-mce-new","true");
}function f(){if(R){var e=u.getBody(),t=new r(A);d(A.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&A.remove(n,!0)})}}function h(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}function g(e){i.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function v(e){return!!e.getAttribute("data-mce-fragment")}function y(e){return e&&!u.schema.getShortEndedElements()[e.nodeName]}function _(e){function t(e){for(var t=u.getBody();e&&e!==t;e=e.parentNode)if("false"===u.dom.getContentEditable(e))return e;return null}function n(e){var t=l.fromRangeStart(e),n=new s(u.getBody());if(t=n.next(t))return t.toRange()}var i,r,o;if(e){if(O.scrollIntoView(e),i=t(e))return A.remove(e),void O.select(i);k=A.createRng(),I=e.previousSibling,I&&3==I.nodeType?(k.setStart(I,I.nodeValue.length),m||(N=e.nextSibling,N&&3==N.nodeType&&(I.appendData(N.data),N.parentNode.removeChild(N)))):(k.setStartBefore(e),k.setEndBefore(e)),r=A.getParent(e,A.isBlock),A.remove(e),r&&A.isEmpty(r)&&(u.$(r).empty(),k.setStart(r,0),k.setEnd(r,0),b(r)||v(r)||!(o=n(k))?A.add(r,A.create("br",{"data-mce-bogus":"1"})):(k=o,A.remove(r))),O.setRng(k)}}var x,C,E,w,T,S,P,k,I,N,M,R,D,L=u.schema.getTextInlineElements();"string"!=typeof o&&(R=o.merge,D=o.data,o=o.content),/^ | $/.test(o)&&(o=a(o)),x=u.parser,C=new e({validate:H.validate},u.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',S={content:o,format:"html",selection:!0},u.fire("BeforeSetContent",S),o=S.content,o.indexOf("{$caret}")==-1&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,M),k=O.getRng();var B=k.startContainer||(k.parentElement?k.parentElement():null),F=u.getBody();B===F&&O.isCollapsed()&&A.isBlock(F.firstChild)&&y(F.firstChild)&&A.isEmpty(F.firstChild)&&(k=A.createRng(),k.setStart(F.firstChild,0),k.setEnd(F.firstChild,0),O.setRng(k)),O.isCollapsed()||(u.selection.setRng(u.selection.getRng()),u.getDoc().execCommand("Delete",!1,null),c()),E=O.getNode();var z={context:E.nodeName.toLowerCase(),data:D};if(T=x.parse(o,z),h(T),p(T),I=T.lastChild,"mce_marker"==I.attr("id"))for(P=I,I=I.prev;I;I=I.walk(!0))if(3==I.type||!A.isBlock(I.name)){u.schema.isValidChild(I.parent.name,"span")&&I.parent.insert(P,I,"br"===I.name);break}if(u._selectionOverrides.showBlockCaretContainer(E),z.invalid){for(O.setContent(M),E=O.getNode(),w=u.getBody(),9==E.nodeType?E=I=w:I=E;I!==w;)E=I,I=I.parentNode;o=E==w?w.innerHTML:A.getOuterHTML(E),o=C.serialize(x.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return C.serialize(T)}))),E==w?A.setHTML(w,o):A.setOuterHTML(E,o)}else o=C.serialize(T),I=E.firstChild,N=E.lastChild,!I||I===N&&"BR"===I.nodeName?A.setHTML(E,o):O.setContent(o);f(),_(A.get("mce_marker")),g(u.getBody()),u.fire("SetContent",S),u.addVisual()},mceInsertRawHTML:function(e,t,n){O.setContent("tiny_mce_marker"),u.setContent(u.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){M(n)},mceSetContent:function(e,t,n){u.setContent(n)},"Indent,Outdent":function(e){var t,n,i;t=H.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),x("InsertUnorderedList")||x("InsertOrderedList")?I(e):(H.forced_root_block||A.getParent(O.getNode(),A.isBlock)||L.apply("div"),d(O.getSelectedBlocks(),function(r){if("false"!==A.getContentEditable(r)&&"LI"!=r.nodeName){var o=u.getParam("indent_use_margin",!1)?"margin":"padding";o+="rtl"==A.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(i=Math.max(0,parseInt(r.style[o]||0,10)-t),A.setStyle(r,o,i?i+n:"")):(i=parseInt(r.style[o]||0,10)+t+n,A.setStyle(r,o,i))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){u.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){u.hasVisual=!u.hasVisual,u.addVisual()},mceReplaceContent:function(e,t,n){u.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,O.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=A.getParent(O.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||L.remove("link"),n.href&&L.apply("link",n,i)},selectAll:function(){var e,t=A.getRoot();O.getRng().setStart?(e=A.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),O.setRng(e)):(e=O.getRng(),e.item||(e.moveToElementText(t),e.select()))},delete:function(){I("Delete");var e=u.getBody();A.isEmpty(e)&&(u.setContent(""),e.firstChild&&A.isBlock(e.firstChild)?u.selection.setCursorLocation(e.firstChild,0):u.selection.setCursorLocation(e,0))},mceNewDocument:function(){u.setContent("")},InsertLineBreak:function(e,t,n){function i(){for(var e,t=new a(f,m),n=u.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var r,s,l,d=n,c=O.getRng(!0);new o(A).normalize(c);var p=c.startOffset,f=c.startContainer;if(1==f.nodeType&&f.hasChildNodes()){var h=p>f.childNodes.length-1;f=f.childNodes[Math.min(p,f.childNodes.length-1)]||f,p=h&&3==f.nodeType?f.nodeValue.length:0}var m=A.getParent(f,A.isBlock),y=m?m.nodeName.toUpperCase():"",b=m?A.getParent(m.parentNode,A.isBlock):null,_=b?b.nodeName.toUpperCase():"",x=d&&d.ctrlKey;"LI"!=_||x||(m=b,y=_),f&&3==f.nodeType&&p>=f.nodeValue.length&&(g||i()||(r=A.create("br"),c.insertNode(r),c.setStartAfter(r),c.setEndAfter(r),s=!0)),r=A.create("br"),c.insertNode(r);var C=A.doc.documentMode;return g&&"PRE"==y&&(!C||C<8)&&r.parentNode.insertBefore(A.doc.createTextNode("\r"),r),l=A.create("span",{},"&nbsp;"),r.parentNode.insertBefore(l,r),O.scrollIntoView(l),A.remove(l),s?(c.setStartBefore(r),c.setEndBefore(r)):(c.setStartAfter(r),c.setEndAfter(r)),O.setRng(c),u.undoManager.add(),v}}),E({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=O.isCollapsed()?[A.getParent(O.getNode(),A.isBlock)]:O.getSelectedBlocks(),i=p(n,function(e){return!!L.matchNode(e,t)});return f(i,v)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return N(e)},mceBlockQuote:function(){return N("blockquote")},Outdent:function(){var e;if(H.inline_styles){if((e=A.getParent(O.getStart(),A.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v;if((e=A.getParent(O.getEnd(),A.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v}return x("InsertUnorderedList")||x("InsertOrderedList")||!H.inline_styles&&!!A.getParent(O.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=A.getParent(O.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),E({"FontSize,FontName":function(e){var t,n=0;return(t=A.getParent(O.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),E({Undo:function(){u.undoManager.undo()},Redo:function(){u.undoManager.redo()}})}}),r("tinymce/util/URI",["tinymce/util/Tools"],function(e){function t(e,o){var a,s,l=this;if(e=i(e),o=l.settings=o||{},a=o.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(l.source=e);var u=0===e.indexOf("//");0!==e.indexOf("/")||u||(e=(a?a.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(s=o.base_uri?o.base_uri.path:new t(location.href).directory,""===o.base_uri.protocol?e="//mce_host"+l.toAbsPath(s,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(r,function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),l[t]=i}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),u&&(l.protocol="")}var n=e.each,i=e.trim,r="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),o={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,i=this;if("./"===e)return e;if(e=new t(e,{base_uri:i}),"mce_host"!=e.host&&i.host!=e.host&&e.host||i.port!=e.port||i.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var r=i.getURI(),o=e.getURI();return r==o||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==o?r:(n=i.toRelPath(i.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,r,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,r=e.length;i<r;i++)if(i>=n.length||e[i]!=n[i]){o=i+1;break}if(e.length<n.length)for(i=0,r=n.length;i<r;i++)if(i>=e.length||e[i]!=n[i]){o=i+1;break}if(1===o)return t;for(i=0,r=e.length-(o-1);i<r;i++)a+="../";for(i=o-1,r=n.length;i<r;i++)a+=i!=o-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var i,r,o,a=0,s=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,i=t.length-1,s=[];i>=0;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?a>0?a--:s.push(t[i]):a++);return i=e.length-a,o=i<=0?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},t.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},t}),r("tinymce/util/Class",["tinymce/util/Tools"],function(e){function t(){}var n,i,r=e.each,o=e.extend;return t.extend=n=function(e){function t(){var e,t,n,r=this;if(!i&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function a(){return this}function s(e,t){return function(){var n,i=this,r=i._super;return i._super=p[e],n=t.apply(i,arguments),i._super=r,n}}var l,u,d,c=this,p=c.prototype;i=!0,l=new c,i=!1,e.Mixins&&(r(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),p.Mixins&&(e.Mixins=p.Mixins.concat(e.Mixins))),e.Methods&&r(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&r(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,i=this;return e!==t?(i[n]=e,i):i[n]}}),e.Statics&&r(e.Statics,function(e,n){t[n]=e}),e.Defaults&&p.Defaults&&(e.Defaults=o({},p.Defaults,e.Defaults));for(u in e)d=e[u],"function"==typeof d&&p[u]?l[u]=s(u,d):l[u]=d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),r("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){function t(t){function n(){return!1}function i(){return!0}function r(e,r){var o,s,l,d;if(e=e.toLowerCase(),r=r||{},r.type=e,r.target||(r.target=u),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=i},r.stopPropagation=function(){r.isPropagationStopped=i},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=i},r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(r),o=p[e])for(s=0,l=o.length;s<l;s++){if(d=o[s],d.once&&a(e,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(d.func.call(u,r)===!1)return r.preventDefault(),r}return r}function o(t,i,r,o){var a,s,l;if(i===!1&&(i=n),i)for(i={func:i},o&&e.extend(i,o),s=t.toLowerCase().split(" "),l=s.length;l--;)t=s[l],a=p[t],a||(a=p[t]=[],d(t,!0)),r?a.unshift(i):a.push(i);return c}function a(e,t){var n,i,r,o,a;if(e)for(o=e.toLowerCase().split(" "),n=o.length;n--;){if(e=o[n],i=p[e],!e){for(r in p)d(r,!1),delete p[r];return c}if(i){if(t)for(a=i.length;a--;)i[a].func===t&&(i=i.slice(0,a).concat(i.slice(a+1)),p[e]=i);else i.length=0;i.length||(d(e,!1),delete p[e])}}else{for(e in p)d(e,!1);p={}}return c}function s(e,t,n){return o(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!p[e]||0===p[e].length)}var u,d,c=this,p={};t=t||{},u=t.scope||c,d=t.toggleEvent||n,c.fire=r,c.on=o,c.off=a,c.once=s,c.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),r("tinymce/data/Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,i){function r(t){e.set(i,t.value)}function o(e){t.set(n,e.value)}var a;return e.on("change:"+i,o),t.on("change:"+n,r),a=e._bindings,a||(a=e._bindings=[],e.on("destroy",function(){for(var e=a.length;e--;)a[e]()})),a.push(function(){t.off("change:"+n,r)}),t.get(n)}})},e}),r("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}})),t._eventDispatcher}return{fire:function(e,n,i){var r=this;if(r.removed&&"remove"!==e)return n;if(n=t(r).fire(e,n,i),i!==!1&&r.parent)for(var o=r.parent();o&&!n.isPropagationStopped();)o.fire(e,n,!1),o=o.parent();return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),r("tinymce/data/ObservableObject",["tinymce/data/Binding","tinymce/util/Observable","tinymce/util/Class","tinymce/util/Tools"],function(e,t,n,i){function r(e){return e.nodeType>0}function o(e,t){var n,a;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(i.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!o(e[n],t[n]))return!1}if(r(e)||r(t))return e===t;a={};for(n in t){if(!o(e[n],t[n]))return!1;a[n]=!0}for(n in e)if(!a[n]&&!o(e[n],t[n]))return!1;return!0}return n.extend({Mixins:[t],init:function(t){var n,i;t=t||{};for(n in t)i=t[n],i instanceof e&&(t[n]=i.create(this,n));this.data=t},set:function(t,n){var i,r,a=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(i in t)this.set(i,t[i]);return this}return o(a,n)||(this.data[t]=n,r={target:this,name:t,value:n,oldValue:a},this.fire("change:"+t,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),r("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){for(var t,n=[],i=e.length;i--;)t=e[i],t.__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}var n,i=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function a(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function s(e,t,n){if(e)return function(i){var r=i[e]?i[e]():"";return t?"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!=n:"^="===t?0===r.indexOf(n):"$="===t&&r.substr(r.length-n.length)===n:!!n}}function l(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=d(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})}function u(e,r,u){function d(e){e&&r.push(e)}var c;return c=i.exec(e.replace(o,"")),d(t(c[1])),d(n(c[2])),d(a(c[3])),d(s(c[4],c[5],c[6])),d(l(c[7])),r.pseudo=!!c[7],r.direct=u,r}function d(e,t){var n,i,o,a=[];do if(r.exec(""),i=r.exec(e),i&&(e=i[3],a.push(i[1]),i[2])){n=i[3];break}while(i);for(n&&d(n,t),e=[],o=0;o<a.length;o++)">"!=a[o]&&e.push(u(a[o],[],">"===a[o-1]));return t.push(e),t}var c=this.match;this._selectors=d(e,[])},match:function(e,t){var n,i,r,o,a,s,l,u,d,c,p,f,h;for(t=t||this._selectors,n=0,i=t.length;n<i;n++){for(a=t[n],o=a.length,h=e,f=0,r=o-1;r>=0;r--)for(u=a[r];h;){if(u.pseudo)for(p=h.parent().items(),d=c=p.length;d--&&p[d]!==h;);for(s=0,l=u.length;s<l;s++)if(!u[s](h,d,c)){s=l+1;break}if(s===l){f++;break}if(r===o-1)break;h=h.parent()}if(f===o)return!0}return!1},find:function(e){function i(e,t,n){var r,o,a,l,u,d=t[n];for(r=0,o=e.length;r<o;r++){for(u=e[r],a=0,l=d.length;a<l;a++)if(!d[a](u,r,o)){a=l+1;break}if(a===l)n==t.length-1?s.push(u):u.items&&i(u.items(),t,n+1);else if(d.direct)return;u.items&&i(u.items(),t,n)}}var r,o,s=[],l=this._selectors;if(e.items){for(r=0,o=l.length;r<o;r++)i(e.items(),l[r],0);o>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),r("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,n){var i,r,o=Array.prototype.push,a=Array.prototype.slice;return r={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof i?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;t<i;t++)delete n[t];return n},filter:function(e){var n,r,o,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,r=s.length;n<r;n++)o=s[n],a(o)&&l.push(o);return new i(l)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,i,r=this;return t!==n?(r.each(function(n){n[e]&&n[e](t)}),r):(i=r[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,i)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){r[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){r[e]=function(t){return this.prop(e,t)}}),i=n.extend(r),t.Collection=i,i}),r("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},create:function(n,i,r){var o=document.createElement(n);return t.DOM.setAttribs(o,i),"string"==typeof r?o.innerHTML=r:e.each(r,function(e){e.nodeType&&o.appendChild(e)}),o},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,i,r){return t.DOM.bind(e,n,i,r)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),r("tinymce/ui/BoxUtils",[],function(){return{parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}}}}),r("tinymce/ui/ClassList",["tinymce/util/Tools"],function(e){function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),r("tinymce/ui/ReflowQueue",["tinymce/util/Delay"],function(e){var t,n={};return{add:function(i){var r=i.parent();if(r){if(!r._layout||r._layout.isNative())return;n[r._id]||(n[r._id]=r),t||(t=!0,e.requestAnimationFrame(function(){var e,i;t=!1;for(e in n)i=n[e],i.state.get("rendered")&&i.reflow();n={}},document.body))}},remove:function(e){n[e._id]&&delete n[e._id]}}}),r("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/data/ObservableObject","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/ui/BoxUtils","tinymce/ui/ClassList","tinymce/ui/ReflowQueue"],function(e,t,n,i,r,o,a,s,l,u){function d(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){i&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&c(e))}})),e._eventDispatcher}function c(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function i(t){var n,i,r,o=e.getParentCtrl(t.target),a=u._lastHoverCtrl,s=0;if(o!==a){if(u._lastHoverCtrl=o,i=o.parents().toArray().reverse(),i.push(o),a){for(r=a.parents().toArray().reverse(),r.push(a),s=0;s<r.length&&i[s]===r[s];s++);for(n=r.length-1;n>=s;n--)a=r[n],a.fire("mouseleave",{target:a.getEl()})}for(n=s;n<i.length;n++)o=i[n],o.fire("mouseenter",{target:o.getEl()})}}function r(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var o,s,l,u,d,c;if(d=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),o=0,s=l.length;!u&&o<s;o++)u=l[o]._eventsRoot;for(u||(u=l[l.length-1]||e),e._eventsRoot=u,s=o,o=0;o<s;o++)l[o]._eventsRoot=u;var p=u._delegates;p||(p=u._delegates={});for(c in d){if(!d)return!1;"wheel"!==c||h?("mouseenter"===c||"mouseleave"===c?u._hasMouseEnter||(a(u.getEl()).on("mouseleave",n).on("mouseover",i),u._hasMouseEnter=1):p[c]||(a(u.getEl()).on(c,t),p[c]=!0),d[c]=!1):f?a(e.getEl()).on("mousewheel",r):a(e.getEl()).on("DOMMouseScroll",r)}}}var p,f="onmousewheel"in document,h=!1,m="mce-",g=0,v={Statics:{classPrefix:m},isRtl:function(){return p.rtl},classPrefix:m,init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)u.classes.add(e[t])}var r,o,u=this;u.settings=e=t.extend({},u.Defaults,e),u._id=e.id||"mceu_"+g++,u._aria={role:e.role},u._elmCache={},u.$=a,u.state=new i({visible:!0,active:!1,disabled:!1,value:""}),u.data=new i(e.data),u.classes=new l(function(){u.state.get("rendered")&&(u.getEl().className=this.toString())}),u.classes.prefix=u.classPrefix,r=e.classes,r&&(u.Defaults&&(o=u.Defaults.classes,o&&r!=o&&n(o)),n(r)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&u[t](e[t])}),u.on("click",function(){if(u.disabled())return!1}),u.settings=e,u.borderBox=s.parseBox(e.border),u.paddingBox=s.parseBox(e.padding),u.marginBox=s.parseBox(e.margin),e.hidden&&u.hide()},Properties:"parent,name",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,i,r,a,l,u,d,c,p=this,f=p.settings,h=p.getEl();e=p.borderBox=p.borderBox||s.measureBox(h,"border"),p.paddingBox=p.paddingBox||s.measureBox(h,"padding"),p.marginBox=p.marginBox||s.measureBox(h,"margin"),c=o.getSize(h),u=f.minWidth,d=f.minHeight,r=u||c.width,a=d||c.height,n=f.width,i=f.height,l=f.autoResize,l="undefined"!=typeof l?l:!n&&!i,n=n||r,i=i||a;var m=e.left+e.right,g=e.top+e.bottom,v=f.maxWidth||65535,y=f.maxHeight||65535;return p._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:i,deltaW:m,deltaH:g,contentW:n-m,contentH:i-g,innerW:n-m,innerH:i-g,startMinWidth:u||0,startMinHeight:d||0,minW:Math.min(r,v),minH:Math.min(a,y),maxW:v,maxH:y,autoResize:l,scrollW:0},p._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,r,o,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(i=l.deltaW,r=l.deltaH,e.x!==o&&(l.x=e.x),e.y!==o&&(l.y=e.y),e.minW!==o&&(l.minW=e.minW),e.minH!==o&&(l.minH=e.minH),n=e.w,n!==o&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-i),n=e.h,n!==o&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-r),n=e.innerW,n!==o&&(n=n<l.minW-i?l.minW-i:n,n=n>l.maxW-i?l.maxW-i:n,l.innerW=n,l.w=n+i),n=e.innerH,n!==o&&(n=n<l.minH-r?l.minH-r:n,n=n>l.maxH-r?l.maxH-r:n,l.innerH=n,l.h=n+r),e.contentW!==o&&(l.contentW=e.contentW),e.contentH!==o&&(l.contentH=e.contentH),t=s._lastLayoutRect,t.x===l.x&&t.y===l.y&&t.w===l.w&&t.h===l.h||(a=p.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,i,r,o,a,s,l,u,d=this;l=document.createRange?function(e){return e}:Math.round,e=d.getEl().style,i=d._layoutRect,s=d._lastRepaintRect||{},r=d.borderBox,o=r.left+r.right,a=r.top+r.bottom,i.x!==s.x&&(e.left=l(i.x)+"px",s.x=i.x),i.y!==s.y&&(e.top=l(i.y)+"px",s.y=i.y),i.w!==s.w&&(u=l(i.w-o),e.width=(u>=0?u:0)+"px",s.w=i.w),i.h!==s.h&&(u=l(i.h-a),e.height=(u>=0?u:0)+"px",s.h=i.h),d._hasBody&&i.innerW!==s.innerW&&(u=l(i.innerW),n=d.getEl("body"),n&&(t=n.style,t.width=(u>=0?u:0)+"px"),s.innerW=i.innerW),d._hasBody&&i.innerH!==s.innerH&&(u=l(i.innerH),n=n||d.getEl("body"),n&&(t=t||n.style,t.height=(u>=0?u:0)+"px"),s.innerH=i.innerH),d._lastRepaintRect=s,d.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,o.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(r){return t||i.parentsAndSelf().each(function(i){var r=i.settings.callbacks;if(r&&(t=r[e]))return n=i,!1}),t?t.call(n,r):(r.action=e,void this.fire("execute",r))}}var i=this;return d(i).on(e,n(t)),i},off:function(e,t){return d(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=d(i).fire(e,t),n!==!1&&i.parent)for(var r=i.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return d(this).has(e)},parents:function(e){var t,n=this,i=new r;for(t=n.parent();t;t=t.parent())i.add(t);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=a("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&i.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return p.translate?p.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var o=n.items().toArray();for(t=o.length;t--;)o[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&a(i).off();var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return a(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return a(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,i,r,o=this,s=o.settings;o.$el=a(o.getEl()),o.state.set("rendered",!0);for(i in s)0===i.indexOf("on")&&o.on(i.substr(2),s[i]);if(o._eventsRoot){for(n=o.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)o._nativeEvents[i]=!0}c(o),s.style&&(e=o.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),o.settings.border&&(t=o.borderBox,o.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=o.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[o._id]=o;for(var d in o._aria)o.aria(d,o._aria[d]);o.state.get("visible")===!1&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(e){var t,n=e.value;o.state.get("rendered")&&(o.getEl().style.display=n===!1?"none":"",o.getEl().getBoundingClientRect()),t=o.parent(),t&&(t._lastRect=null),o.fire(n?"show":"hide"),u.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,i,r=e;
for(n=i=0;r&&r!=t&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}var n,i,r,o,a,s,l=this.getEl(),u=l.parentNode,d=t(l,u);return n=d.x,i=d.y,r=l.offsetWidth,o=l.offsetHeight,a=u.clientWidth,s=u.clientHeight,"end"==e?(n-=a-r,i-=s-o):"center"==e&&(n-=a/2-r/2,i-=s/2-o/2),u.scrollLeft=n,u.scrollTop=i,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){u.remove(this);var e=this.parent();return e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){v[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),p=e.extend(v)}),r("tinymce/ui/Factory",[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,i){var r,o,a;if(!e){a=tinymce.ui;for(o in a)t[o.toLowerCase()]=a[o];e=!0}if("string"==typeof n?(i=i||{},i.type=n):(i=n,n=i.type),n=n.toLowerCase(),r=t[n],!r)throw new Error("Could not find control by type: "+n);return r=new r(i),r.type=n,r}}}),r("tinymce/ui/KeyboardNavigation",[],function(){return function(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||b,t(e)?e.getAttribute("role"):null}function i(e){for(var t,i=e||b;i=i.parentNode;)if(t=n(i))return t}function r(e){var n=b;if(t(n))return n.getAttribute("aria-"+e)}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function a(e){return!(!o(e)||e.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e))}function s(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){a(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||x.getEl()),n}function l(e){var t,n;e=e||_,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function u(e){var t=l(e),n=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?d(t.lastAriaIndex,n):d(0,n)}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function c(e,t){var n=-1,i=l();t=t||s(i.getEl());for(var r=0;r<t.length;r++)t[r]===b&&(n=r);n+=e,i.lastAriaIndex=d(n,t)}function p(){var e=i();"tablist"==e?c(-1,s(b.parentNode)):_.parent().submenu?v():c(-1)}function f(){var e=n(),t=i();"tablist"==t?c(1,s(b.parentNode)):"menuitem"==e&&"menu"==t&&r("haspopup")?y():c(1)}function h(){c(-1)}function m(){var e=n(),t=i();"menuitem"==e&&"menubar"==t?y():"button"==e&&r("haspopup")?y({key:"down"}):c(1)}function g(e){var t=i();if("tablist"==t){var n=s(_.getEl("body"))[0];n&&n.focus()}else c(e.shiftKey?-1:1)}function v(){_.fire("cancel")}function y(e){e=e||{},_.fire("click",{target:b,aria:e})}var b,_,x=e.root;try{b=document.activeElement}catch(e){b=document.body}return _=x.getParentCtrl(b),x.on("keydown",function(e){function t(e,t){o(b)||"slider"!==n(b)&&t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,p);break;case 39:t(e,f);break;case 38:t(e,h);break;case 40:t(e,m);break;case 27:v();break;case 14:case 13:case 32:t(e,y);break;case 9:g(e)!==!1&&e.preventDefault()}}),x.on("focusin",function(e){b=e.target,_=e.control}),{focusFirst:u}}}),r("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/ui/ClassList","tinymce/ui/ReflowQueue"],function(e,t,n,i,r,o,a,s,l){var u={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=i.create((e.layout||"")+"layout"),n.settings.items?n.add(n.settings.items):n.add(n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,i,r=this;return e&&(n=r.keyboardNav||r.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(r):(i=r.find("*"),r.statusbar&&i.add(r.statusbar.items()),i.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),r)},replace:function(e,t){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===e){i[r]=t;break}r>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,r=this,a=[];return o.isArray(t)||(t=[t]),o.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=o.extend({},r.settings.defaults,t),t.type=n.type=n.type||t.type||r.settings.defaultType||(n.defaults?n.defaults.type:null),t=i.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i;t.parent(e),t.state.get("rendered")||(i=e.getEl("body"),i.hasChildNodes()&&n<=i.childNodes.length-1?a(i.childNodes[n]).before(t.renderHtml()):a(i).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i,r,o,a=this;return e=a.create(e),i=a.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(r=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(r.concat(e,o))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new r({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r("tinymce/ui/DragHelper",["tinymce/dom/DomQuery"],function(e){function t(e){var t,n,i,r,o,a,s,l,u=Math.max;return t=e.documentElement,n=e.body,i=u(t.scrollWidth,n.scrollWidth),r=u(t.clientWidth,n.clientWidth),o=u(t.offsetWidth,n.offsetWidth),a=u(t.scrollHeight,n.scrollHeight),s=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:i<o?r:i,height:a<l?s:a}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(i,r){function o(){return f.getElementById(r.handle||i)}var a,s,l,u,d,c,p,f=r.document||document;r=r||{},l=function(i){var l,h,m=t(f);n(i),i.preventDefault(),s=i.button,l=o(),c=i.screenX,p=i.screenY,h=window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,a=e("<div>").css({position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(f.body),e(f).on("mousemove touchmove",d).on("mouseup touchend",u),r.start(i)},d=function(e){return n(e),e.button!==s?u(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-p,e.preventDefault(),void r.drag(e))},u=function(t){n(t),e(f).off("mousemove touchmove",d).off("mouseup touchend",u),a.remove(),r.stop&&r.stop(t)},this.destroy=function(){e(o()).off()},e(o()).on("mousedown touchstart",l)}}),r("tinymce/ui/Scrollable",["tinymce/dom/DomQuery","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,u,d){var c,p,f,h,m,g,v,y,b;if(p=r.getEl("scroll"+t)){if(y=a.toLowerCase(),b=s.toLowerCase(),e(r.getEl("absend")).css(y,r.layoutRect()[l]-1),!u)return void e(p).css("display","none");e(p).css("display","block"),c=r.getEl("body"),f=r.getEl("scroll"+t+"t"),h=c["client"+s]-2*o,h-=n&&i?p["client"+d]:0,m=c["scroll"+s],g=h/m,v={},v[y]=c["offset"+a]+o,v[b]=h,e(p).css(v),v={},v[y]=c["scroll"+a]*g,v[b]=h*g,e(f).css(v)}}var n,i,a;a=r.getEl("body"),n=a.scrollWidth>a.clientWidth,i=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",i,"Width")}function i(){function n(n,i,a,s,l){var u,d=r._id+"-scroll"+n,c=r.classPrefix;e(r.getEl()).append('<div id="'+d+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'"><div id="'+d+'t" class="'+c+'scrollbar-thumb"></div></div>'),r.draghelper=new t(d+"t",{start:function(){u=r.getEl("body")["scroll"+i],e("#"+d).addClass(c+"active")},drag:function(e){var t,d,c,p,f=r.layoutRect();d=f.contentW>f.innerW,c=f.contentH>f.innerH,p=r.getEl("body")["client"+a]-2*o,p-=d&&c?r.getEl("scroll"+n)["client"+l]:0,t=p/r.getEl("body")["scroll"+a],r.getEl("body")["scroll"+i]=u+e["delta"+s]/t},stop:function(){e("#"+d).removeClass(c+"active")}})}r.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var r=this,o=2;r.settings.autoScroll&&(r._hasScroll||(r._hasScroll=!0,i(),r.on("wheel",function(e){var t=r.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(r.getEl("body")).on("scroll",n)),n())}}}),r("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),r("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,n,i){var r,o,a,s,l,u,d,c,p,f;return p=e.getViewPort(),o=e.getPos(n),a=o.x,s=o.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=p.x,s-=p.y),r=t.getEl(),f=e.getSize(r),l=f.width,u=f.height,f=e.getSize(n),d=f.width,c=f.height,i=(i||"").split(""),"b"===i[0]&&(s+=c),"r"===i[1]&&(a+=d),"c"===i[0]&&(s+=Math.round(c/2)),"c"===i[1]&&(a+=Math.round(d/2)),"b"===i[3]&&(s-=u),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(u/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:u}}return{testMoveRel:function(n,i){for(var r=e.getViewPort(),o=0;o<i.length;o++){var a=t(this,n,i[o]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<r.w&&a.y>0&&a.y+a.h<r.h)return i[o]}else if(a.x>r.x&&a.x+a.w<r.w+r.x&&a.y>r.y&&a.y+a.h<r.h+r.y)return i[o]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){function i(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var o=e.getViewPort(window),a=r.layoutRect();t=i(t,o.w+o.x,a.w),n=i(n,o.h+o.y,a.h)}return r.state.get("rendered")?r.layoutRect({x:t,y:n}).repaint():(r.settings.x=t,r.settings.y=n),r.fire("move",{x:t,y:n}),r}}}),r("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var i=e.getWindowSize();t=t<=1?t*i.w:t,n=n<=1?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),r("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/util/Delay"],function(e,t,n,i,r,o){function a(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function s(e){for(var t=y.length;t--;){var n=y[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i&&(a(i,n)||n.parent()===i))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){h||(h=function(e){2!=e.button&&s(e)},r(document).on("click touchstart",h))}function u(){m||(m=function(){var e;for(e=y.length;e--;)c(y[e])},r(window).on("scroll",m))}function d(){if(!g){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;g=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,_.hideAll())},r(window).on("resize",g)}}function c(e){function t(t,n){for(var i,r=0;r<y.length;r++)if(y[r]!=e)for(i=y[r].parent();i&&(i=i.parent());)i==e&&y[r].fixed(t).moveBy(0,n).repaint()}var n=i.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function p(e,t){var n,i,o=_.zIndex||65535;if(e)b.push(t);else for(n=b.length;n--;)b[n]===t&&b.splice(n,1);if(b.length)for(n=0;n<b.length;n++)b[n].modal&&(o++,i=b[n]),b[n].getEl().style.zIndex=o,b[n].zIndex=o,o++;var a=r("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?r(a).css("z-index",i.zIndex-1):a&&(a.parentNode.removeChild(a),v=!1),_.currentZIndex=o}function f(e){var t;for(t=y.length;t--;)y[t]===e&&y.splice(t,1);for(t=b.length;t--;)b[t]===e&&b.splice(t,1)}var h,m,g,v,y=[],b=[],_=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),d(),y.push(t)),e.autofix&&(u(),t.on("move",function(){c(this)})),t.on("postrender show",function(e){if(e.control==t){var n,i=t.classPrefix;t.modal&&!v&&(n=r("#"+i+"modal-block",t.getContainerElm()),n[0]||(n=r('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(t.getContainerElm())),o.setTimeout(function(){n.addClass(i+"in"),r(t.getEl()).addClass(i+"in")}),v=!0),p(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=y.length;e--&&y[e]!==t;);return e===-1&&y.push(t),n},hide:function(){return f(this),p(!1,this),this._super()},hideAll:function(){_.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),p(!1,e)),e},remove:function(){f(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return _.hideAll=function(){for(var e=y.length;e--;){var t=y[e];t&&t.settings.autohide&&(t.hide(),y.splice(e,1))}},_}),r("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/dom/DomQuery","tinymce/ui/DragHelper","tinymce/ui/BoxUtils","tinymce/Env","tinymce/util/Delay"],function(e,t,n,i,r,o,a,s){function l(e){var t,n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",r=i("meta[name=viewport]")[0];a.overrideViewPort!==!1&&(r||(r=document.createElement("meta"),r.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(r)),t=r.getAttribute("content"),t&&"undefined"!=typeof p&&(p=t),r.setAttribute("content",e?n:p))}function u(e){for(var t=0;t<c.length;t++)if(c[t]._fullscreen)return;i([document.documentElement,document.body]).removeClass(e+"fullscreen")}function d(){function e(){var e,t,i=n.getWindowSize();for(e=0;e<c.length;e++)t=c[e].layoutRect(),c[e].moveTo(c[e].settings.x||Math.max(0,i.w/2-t.w/2),c[e].settings.y||Math.max(0,i.h/2-t.h/2))}if(!a.desktop){var t={w:window.innerWidth,h:window.innerHeight};s.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},i(window).trigger("resize"))},100)}i(window).on("resize",e)}var c=[],p="",f=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var i=this;i._super(e),i.isRtl()&&i.classes.add("rtl"),i.classes.add("window"),i.bodyClasses.add("window-body"),i.state.set("fixed",!0),e.buttons&&(i.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),i.statusbar.classes.add("foot"),i.statusbar.parent(i)),i.on("click",function(e){var t=i.classPrefix+"close";(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))&&i.close()}),i.on("cancel",function(){i.close()}),i.aria("describedby",i.describedBy||i._id+"-none"),i.aria("label",e.title),i._fullscreen=!1},recalc:function(){var e,t,i,r,o=this,a=o.statusbar;o._fullscreen&&(o.layoutRect(n.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW,t>e.w&&(i=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:i}),r=!0)),a&&(a.layoutRect({w:o.layoutRect().innerW}).recalc(),t=a.layoutRect().minW+e.deltaW,t>e.w&&(i=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:i}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,i=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=n.getSize(e);i.headerW=o.width,i.headerH=o.height,r+=i.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),i.deltaH+=r,i.minH+=r,i.h+=r;var a=n.getWindowSize();return i.x=t.settings.x||Math.max(0,a.w/2-i.w/2),i.y=t.settings.y||Math.max(0,a.h/2-i.h/2),i},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,r=e.settings,o="",a="",s=r.html;return e.preRender(),t.preRender(e),r.title&&(o='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(s='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,r,a=this,l=document.documentElement,u=a.classPrefix;if(e!=a._fullscreen)if(i(window).on("resize",function(){var e;if(a._fullscreen)if(t)a._timer||(a._timer=s.setTimeout(function(){var e=n.getWindowSize();a.moveTo(0,0).resizeTo(e.w,e.h),a._timer=0},50));else{e=(new Date).getTime();var i=n.getWindowSize();a.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50&&(t=!0)}}),r=a.layoutRect(),a._fullscreen=e,e){a._initial={x:r.x,y:r.y,w:r.w,h:r.h},a.borderBox=o.parseBox("0"),a.getEl("head").style.display="none",r.deltaH-=r.headerH+2,i([l,document.body]).addClass(u+"fullscreen"),a.classes.add("fullscreen");var d=n.getWindowSize();a.moveTo(0,0).resizeTo(d.w,d.h)}else a.borderBox=o.parseBox(a.settings.border),a.getEl("head").style.display="",r.deltaH+=r.headerH,i([l,document.body]).removeClass(u+"fullscreen"),a.classes.remove("fullscreen"),a.moveTo(a._initial.x,a._initial.y).resizeTo(a._initial.w,a._initial.h);return a.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new r(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),c.push(t),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),e=c.length;e--;)c[e]===t&&c.splice(e,1);l(c.length>0),u(t.classPrefix)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return d(),f}),r("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),o(t)}}}var r,o=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[i("Ok",!0,!0),i("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:r=[i("Yes",1,!0),i("No",0)],n.buttons==t.YES_NO_CANCEL&&r.push(i("Cancel",-1));break;default:r=[i("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){o(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(n){function i(){if(s.length)return s[s.length-1]}function r(e){n.fire("OpenWindow",{win:e})}function o(e){n.fire("CloseWindow",{win:e})}var a=this,s=[];a.windows=s,n.on("remove",function(){for(var e=s.length;e--;)s[e].close()}),a.open=function(t,i){var a;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){a.find("form")[0].submit()}},{text:"Cancel",onclick:function(){a.close()}}]),a=new e(t),s.push(a),a.on("close",function(){for(var e=s.length;e--;)s[e]===a&&s.splice(e,1);s.length||n.focus(),o(a)}),t.data&&a.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),a.features=t||{},a.params=i||{},1===s.length&&n.nodeChanged(),a=a.renderTo().reflow(),r(a),a},a.alert=function(e,i,a){var s;s=t.alert(e,function(){i?i.call(a||this):n.focus()}),s.on("close",function(){o(s)}),r(s)},a.confirm=function(e,n,i){var a;a=t.confirm(e,function(e){n.call(i||this,e)}),a.on("close",function(){o(a)}),r(a)},a.close=function(){i()&&i().close()},a.getParams=function(){return i()?i().params:null},a.setParams=function(e){i()&&(i().params=e)},a.getWindows=function(){return s}}}),r("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),r("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&i.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var r=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"==r),i.classes.toggle("tooltip-nw","bc-tl"==r),i.classes.toggle("tooltip-ne","bc-tr"==r),i.moveRel(t.getEl(),r)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),r("tinymce/ui/Progress",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),r("tinymce/ui/Notification",["tinymce/ui/Control","tinymce/ui/Movable","tinymce/ui/Progress","tinymce/util/Delay"],function(e,t,n,i){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){e.target.className.indexOf(t.classPrefix+"close")!=-1&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",i="",r="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(o=' style="background-color: '+e.color+'"'),e.closeButton&&(i='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(r=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+i+"</div>"},postRender:function(){var e=this;return i.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),r("tinymce/NotificationManager",["tinymce/ui/Notification","tinymce/util/Delay"],function(e,t){return function(n){function i(){if(l.length)return l[l.length-1]}function r(){t.requestAnimationFrame(function(){o(),a()})}function o(){for(var e=0;e<l.length;e++)l[e].moveTo(0,0)}function a(){if(l.length>0){var e=l.slice(0,1)[0],t=n.inline?n.getElement():n.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),l.length>1)for(var i=1;i<l.length;i++)l[i].moveRel(l[i-1].getEl(),"bc-tc")}}var s=this,l=[];s.notifications=l,n.on("remove",function(){for(var e=l.length;e--;)l[e].close()}),n.on("ResizeEditor",a),n.on("ResizeWindow",r),s.open=function(t){var i;return n.editorManager.setActive(n),i=new e(t),l.push(i),t.timeout>0&&(i.timer=setTimeout(function(){i.close()},t.timeout)),i.on("close",function(){var e=l.length;for(i.timer&&n.getWin().clearTimeout(i.timer);e--;)l[e]===i&&l.splice(e,1);a()}),i.renderTo(),a(),i},s.close=function(){i()&&i().close()},s.getNotifications=function(){return l},n.on("SkinLoaded",function(){var e=n.settings.service_message;e&&n.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),r("tinymce/dom/NodePath",["tinymce/dom/DOMUtils"],function(e){function t(t,n,i){for(var r=[];n&&n!=t;n=n.parentNode)r.push(e.nodeIndex(n,i));return r}function n(e,t){var n,i,r;for(i=e,n=t.length-1;n>=0;n--){if(r=i.childNodes,t[n]>r.length-1)return null;i=r[t[n]]}return i}return{create:t,resolve:n}}),r("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker","tinymce/dom/NodePath","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/util/Delay","tinymce/caret/CaretContainer"],function(e,t,n,i,r,o,a,s,l,u){return function(d){function c(e,t){try{d.getDoc().execCommand(e,!1,t)}catch(e){}}function p(){var e=d.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function h(e){var t,n;e.dataTransfer&&(d.selection.isCollapsed()&&"IMG"==e.target.tagName&&ee.select(e.target),t=d.selection.getContent(),t.length>0&&(n=se+escape(d.id)+","+escape(t),e.dataTransfer.setData(le,n)))}function m(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(le),t&&t.indexOf(se)>=0)?(t=t.substr(se.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function g(e){d.queryCommandSupported("mceInsertClipboardContent")?d.execCommand("mceInsertClipboardContent",!1,{content:e}):d.execCommand("mceInsertContent",!1,e)}function v(){function r(e){var t=C.schema.getBlockElements(),n=d.getBody();if("BR"!=e.nodeName)return!1;for(;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return!1;return!0}function o(e,t){var n;for(n=e.nextSibling;n&&n!=t;n=n.nextSibling)if((3!=n.nodeType||0!==X.trim(n.data).length)&&n!==t)return!1;return n===t}function a(e,t,i){var o,a,s;for(s=C.schema.getNonEmptyElements(),o=new n(i||e,e);a=o[t?"next":"prev"]();){if(s[a.nodeName]&&!r(a))return a;if(3==a.nodeType&&a.data.length>0)return a}}function u(e){var n,i,r,o,s;if(!e.collapsed&&(n=C.getParent(t.getNode(e.startContainer,e.startOffset),C.isBlock),i=C.getParent(t.getNode(e.endContainer,e.endOffset),C.isBlock),s=d.schema.getTextBlockElements(),n!=i&&s[n.nodeName]&&s[i.nodeName]&&"false"!==C.getContentEditable(n)&&"false"!==C.getContentEditable(i)))return e.deleteContents(),r=a(n,!1),o=a(i,!0),C.isEmpty(i)||X(n).append(i.childNodes),X(i).remove(),r?1==r.nodeType?"BR"==r.nodeName?(e.setStartBefore(r),
e.setEndBefore(r)):(e.setStartAfter(r),e.setEndAfter(r)):(e.setStart(r,r.data.length),e.setEnd(r,r.data.length)):o&&(1==o.nodeType?(e.setStartBefore(o),e.setEndBefore(o)):(e.setStart(o,0),e.setEnd(o,0))),E.setRng(e),!0}function c(e,n){var i,r,s,l,u,c;if(!e.collapsed)return e;if(u=e.startContainer,c=e.startOffset,3==u.nodeType)if(n){if(c<u.data.length)return e}else if(c>0)return e;if(i=t.getNode(e.startContainer,e.startOffset),s=C.getParent(i,C.isBlock),r=a(d.getBody(),n,i),l=C.getParent(r,C.isBlock),!i||!r)return e;if(l&&s!=l)if(n){if(!o(s,l))return e;1==i.nodeType?"BR"==i.nodeName?e.setStartBefore(i):e.setStartAfter(i):e.setStart(i,i.data.length),1==r.nodeType?e.setEnd(r,0):e.setEndBefore(r)}else{if(!o(l,s))return e;1==r.nodeType?"BR"==r.nodeName?e.setStartBefore(r):e.setStartAfter(r):e.setStart(r,r.data.length),1==i.nodeType?e.setEnd(i,0):e.setEndBefore(i)}return e}function p(e){var t=E.getRng();if(t=c(t,e),u(t))return!0}function v(e,t){function n(e,n){return m=X(n).parents().filter(function(e,t){return!!d.schema.getTextInlineElements()[t.nodeName]}),l=e.cloneNode(!1),m=s.map(m,function(e){return e=e.cloneNode(!1),l.hasChildNodes()?(e.appendChild(l.firstChild),l.appendChild(e)):l.appendChild(e),l.appendChild(e),e}),m.length?(h=C.create("br"),m[0].appendChild(h),C.replace(l,e),t.setStartBefore(h),t.setEndBefore(h),d.selection.setRng(t),h):null}function r(e){return e&&d.schema.getTextBlockElements()[e.tagName]}var o,a,l,u,c,p,f,h,m;if(t.collapsed&&(p=t.startContainer,f=t.startOffset,a=C.getParent(p,C.isBlock),r(a)))if(1==p.nodeType){if(p=p.childNodes[f],p&&"BR"!=p.tagName)return;if(c=e?a.nextSibling:a.previousSibling,C.isEmpty(a)&&r(c)&&C.isEmpty(c)&&n(a,p))return C.remove(c),!0}else if(3==p.nodeType){if(o=i.create(a,p),u=a.cloneNode(!0),p=i.resolve(u,o),e){if(f>=p.data.length)return;p.deleteData(f,1)}else{if(f<=0)return;p.deleteData(f-1,1)}if(C.isEmpty(u))return n(a,p)}}function y(e){var t,n,i;p(e)||(s.each(d.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&d.dom.setAttrib(e,"style",d.dom.getAttrib(e,"style"))}),t=new w(function(){}),t.observe(d.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),d.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),n=d.selection.getRng(),i=n.startContainer.parentNode,s.each(t.takeRecords(),function(e){if(C.isChildOf(e.target,d.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,r;e==i&&(t=n.startOffset,r=e.firstChild),C.remove(e,!0),r&&(n.setStart(r,t),n.setEnd(r,t),d.selection.setRng(n))}})}}),t.disconnect(),s.each(d.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")}))}var b,_,x=d.getDoc(),C=d.dom,E=d.selection,w=window.MutationObserver;w||(b=!0,w=function(){function e(e){var t=e.relatedNode||e.target;i.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;i.push({target:t,attributeName:e.attrName})}var n,i=[];this.observe=function(i){n=i,n.addEventListener("DOMSubtreeModified",e,!1),n.addEventListener("DOMNodeInsertedIntoDocument",e,!1),n.addEventListener("DOMNodeInserted",e,!1),n.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",e,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),n.removeEventListener("DOMNodeInserted",e,!1),n.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return i}}),d.on("keydown",function(e){var t=e.keyCode==J,n=e.ctrlKey||e.metaKey;if(!f(e)&&(t||e.keyCode==Q)){var i=d.selection.getRng(),r=i.startContainer,o=i.startOffset;if(t&&e.shiftKey)return;if(v(t,i))return void e.preventDefault();if(!n&&i.collapsed&&3==r.nodeType&&(t?o<r.data.length:o>0))return;e.preventDefault(),n&&d.selection.getSel().modify("extend",t?"forward":"backward",e.metaKey?"lineboundary":"word"),y(t)}}),d.on("keypress",function(t){if(!f(t)&&!E.isCollapsed()&&t.charCode>31&&!e.metaKeyPressed(t)){var n,i,r,o,a,s;n=d.selection.getRng(),s=String.fromCharCode(t.charCode),t.preventDefault(),i=X(n.startContainer).parents().filter(function(e,t){return!!d.schema.getTextInlineElements()[t.nodeName]}),y(!0),i=i.filter(function(e,t){return!X.contains(d.getBody(),t)}),i.length?(r=C.createFragment(),i.each(function(e,t){t=t.cloneNode(!1),r.hasChildNodes()?(t.appendChild(r.firstChild),r.appendChild(t)):(a=t,r.appendChild(t)),r.appendChild(t)}),a.appendChild(d.getDoc().createTextNode(s)),o=C.getParent(n.startContainer,C.isBlock),C.isEmpty(o)?X(o).empty().append(r):n.insertNode(r),n.setStart(a.firstChild,1),n.setEnd(a.firstChild,1),d.selection.setRng(n)):d.selection.setContent(s)}}),d.addCommand("Delete",function(){y()}),d.addCommand("ForwardDelete",function(){y(!0)}),b||(d.on("dragstart",function(e){_=E.getRng(),h(e)}),d.on("drop",function(e){if(!f(e)){var n=m(e);n&&(e.preventDefault(),l.setEditorTimeout(d,function(){var i=t.getCaretRangeFromPoint(e.x,e.y,x);_&&(E.setRng(_),_=null),y(),E.setRng(i),g(n.html)}))}}),d.on("cut",function(e){f(e)||!e.clipboardData||d.selection.isCollapsed()||(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",d.selection.getContent()),e.clipboardData.setData("text/plain",d.selection.getContent({format:"text"})),l.setEditorTimeout(d,function(){y(!0)}))}))}function y(){function e(e){var t=Z.create("body"),n=e.cloneContents();return t.appendChild(n),ee.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(d.getBody()),t.compareRanges(n,i)}var r=e(n),o=Z.createRng();o.selectNode(d.getBody());var a=e(o);return r===a}d.on("keydown",function(e){var t,i,r=e.keyCode;if(!f(e)&&(r==J||r==Q)){if(t=d.selection.isCollapsed(),i=d.getBody(),t&&!Z.isEmpty(i))return;if(!t&&!n(d.selection.getRng()))return;e.preventDefault(),d.setContent(""),i.firstChild&&Z.isBlock(i.firstChild)?d.selection.setCursorLocation(i.firstChild,0):d.selection.setCursorLocation(i,0),d.nodeChanged()}})}function b(){d.shortcuts.add("meta+a",null,"SelectAll")}function _(){d.settings.content_editable||Z.bind(d.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==d.getDoc().documentElement)if(t=ee.getRng(),d.getBody().focus(),"mousedown"==e.type){if(u.isCaretContainer(t.startContainer))return;ee.placeCaretAt(e.clientX,e.clientY)}else ee.setRng(t)})}function x(){d.on("keydown",function(e){if(!f(e)&&e.keyCode===Q){if(!d.getBody().getElementsByTagName("hr").length)return;if(ee.isCollapsed()&&0===ee.getRng(!0).startOffset){var t=ee.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return Z.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(Z.remove(n),e.preventDefault())}}})}function C(){window.Range.prototype.getClientRects||d.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=d.getBody();t.blur(),l.setEditorTimeout(d,function(){t.focus()})}})}function E(){d.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==Z.getContentEditableParent(t)&&(e.preventDefault(),ee.getSel().setBaseAndExtent(t,0,t,1),d.nodeChanged()),"A"==t.nodeName&&Z.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),ee.select(t))})}function w(){function e(){var e=Z.getAttribs(ee.getStart().cloneNode(!1));return function(){var t=ee.getStart();t!==d.getBody()&&(Z.setAttrib(t,"style",null),Y(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!ee.isCollapsed()&&Z.getParent(ee.getStart(),Z.isBlock)!=Z.getParent(ee.getEnd(),Z.isBlock)}d.on("keypress",function(n){var i;if(!f(n)&&(8==n.keyCode||46==n.keyCode)&&t())return i=e(),d.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1}),Z.bind(d.getDoc(),"cut",function(n){var i;!f(n)&&t()&&(i=e(),l.setEditorTimeout(d,function(){i()}))})}function T(){document.body.setAttribute("role","application")}function S(){d.on("keydown",function(e){if(!f(e)&&e.keyCode===Q&&ee.isCollapsed()&&0===ee.getRng(!0).startOffset){var t=ee.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function P(){p()>7||(c("RespectVisibilityInDesign",!0),d.contentStyles.push(".mceHideBrInPre pre br {display: none}"),Z.addClass(d.getBody(),"mceHideBrInPre"),ne.addNodeFilter("pre",function(e){for(var t,n,i,o,a=e.length;a--;)for(t=e[a].getAll("br"),n=t.length;n--;)i=t[n],o=i.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":i.parent.insert(new r("#text",3),i,!0).value="\n"}),ie.addNodeFilter("pre",function(e){for(var t,n,i,r,o=e.length;o--;)for(t=e[o].getAll("br"),n=t.length;n--;)i=t[n],r=i.prev,r&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function k(){Z.bind(d.getBody(),"mouseup",function(){var e,t=ee.getNode();"IMG"==t.nodeName&&((e=Z.getStyle(t,"width"))&&(Z.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),Z.setStyle(t,"width","")),(e=Z.getStyle(t,"height"))&&(Z.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),Z.setStyle(t,"height","")))})}function I(){d.on("keydown",function(t){var n,i,r,o,a;if(!f(t)&&t.keyCode==e.BACKSPACE&&(n=ee.getRng(),i=n.startContainer,r=n.startOffset,o=Z.getRoot(),a=i,n.collapsed&&0===r)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(d.formatter.toggle("blockquote",null,a),n=Z.createRng(),n.setStart(i,0),n.setEnd(i,0),ee.setRng(n))}})}function N(){function e(){$(),c("StyleWithCSS",!1),c("enableInlineTableEditing",!1),te.object_resizing||c("enableObjectResizing",!1)}te.readonly||d.on("BeforeExecCommand MouseDown",e)}function M(){function e(){Y(Z.select("a"),function(e){var t=e.parentNode,n=Z.getRoot();if(t.lastChild===e){for(;t&&!Z.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}Z.add(t,"br",{"data-mce-bogus":1})}})}d.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})}function R(){te.forced_root_block&&d.on("init",function(){c("DefaultParagraphSeparator",te.forced_root_block)})}function D(){d.on("keydown",function(e){var t;f(e)||e.keyCode!=Q||(t=d.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),d.undoManager.beforeChange(),Z.remove(t.item(0)),d.undoManager.add()))})}function A(){var e;p()>=10&&(e="",Y("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),d.contentStyles.push(e+"{padding-right: 1px !important}"))}function O(){p()<9&&(ne.addNodeFilter("noscript",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),ie.addNodeFilter("noscript",function(e){for(var t,n,i,a=e.length;a--;)t=e[a],n=e[a].firstChild,n?n.value=o.decode(n.value):(i=t.attributes.map["data-mce-innertext"],i&&(t.attr("data-mce-innertext",null),n=new r("#text",3),n.value=i,n.raw=!0,t.append(n)))}))}function L(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",r)>0?i.setEndPoint("StartToStart",r):i.setEndPoint("EndToEnd",r),i.select())):n()}function n(){var e=a.selection.createRange();r&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&r.select(),Z.unbind(a,"mouseup",n),Z.unbind(a,"mousemove",t),r=i=0}var i,r,o,a=Z.doc,s=a.body;a.documentElement.unselectable=!0,Z.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(i&&n(),o=a.documentElement,o.scrollHeight>o.clientHeight)return;i=1,r=e(s.x,s.y),r&&(Z.bind(a,"mouseup",n),Z.bind(a,"mousemove",t),Z.getRoot().focus(),r.select())}})}function B(){d.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||ee.normalize()},!0)}function F(){d.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function H(){d.inline||d.on("keydown",function(){document.activeElement==document.body&&d.getWin().focus()})}function z(){d.inline||(d.contentStyles.push("body {min-height: 150px}"),d.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(a.ie>11)return void d.getBody().focus();t=d.selection.getRng(),d.getBody().focus(),d.selection.setRng(t),d.selection.normalize(),d.nodeChanged()}}))}function U(){a.mac&&d.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),d.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function V(){c("AutoUrlDetect",!1)}function j(){d.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),d.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function W(){d.on("init",function(){d.dom.bind(d.getBody(),"submit",function(e){e.preventDefault()})})}function q(){ne.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function G(){d.on("dragstart",function(e){h(e)}),d.on("drop",function(e){if(!f(e)){var n=m(e);if(n&&n.id!=d.id){e.preventDefault();var i=t.getCaretRangeFromPoint(e.x,e.y,d.getDoc());ee.setRng(i),g(n.html)}}})}function $(){var e,t;K()&&(e=d.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())}function K(){var e;return re?(e=d.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}var Y=s.each,X=d.$,Q=e.BACKSPACE,J=e.DELETE,Z=d.dom,ee=d.selection,te=d.settings,ne=d.parser,ie=d.serializer,re=a.gecko,oe=a.ie,ae=a.webkit,se="data:text/mce-internal,",le=oe?"Text":"URL";return I(),y(),a.windowsPhone||B(),ae&&(v(),_(),E(),R(),W(),S(),q(),a.iOS?(H(),z(),j()):b()),oe&&a.ie<11&&(x(),T(),P(),k(),D(),A(),O(),L()),a.ie>=11&&(z(),S()),a.ie&&(b(),V(),G()),re&&(x(),C(),w(),N(),M(),F(),U(),S()),{refreshContentEditable:$,isHidden:K}}}),r("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,n){function i(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=a.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function r(e,t){function n(e){return!e.hidden&&!e.readonly}var r,s=i(e,t);if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(o||(o={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&o){for(t in o)e.dom.unbind(i(e,t));o=null}})),o[t])return;r=function(i){for(var r=i.target,o=e.editorManager.editors,s=o.length;s--;){var l=o[s].getBody();(l===r||a.isChildOf(r,l))&&n(o[s])&&o[s].fire(t,i)}},o[t]=r,a.bind(s,t,r)}else r=function(i){n(e)&&e.fire(t,i)},a.bind(s,t,r),e.delegates[t]=r}var o,a=t.DOM,s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){r(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?r(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(i(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return s=n.extend({},e,s)}),r("tinymce/Mode",[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function t(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,i){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),i?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())}function i(e,t){var i=e.readonly?"readonly":"design";t!=i&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}return{setMode:i}}),r("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each,i=e.explode,r={f9:120,f10:121,f11:122},o=e.makeMap("alt,ctrl,shift,meta,access");return function(a){function s(e){var a,s,l={};n(i(e,"+"),function(e){e in o?l[e]=!0:/^[0-9]{2,}$/.test(e)?l.keyCode=parseInt(e,10):(l.charCode=e.charCodeAt(0),l.keyCode=r[e]||e.toUpperCase().charCodeAt(0))}),a=[l.keyCode];for(s in o)l[s]?a.push(s):l[s]=!1;return l.id=a.join(","),l.access&&(l.alt=!0,t.mac?l.ctrl=!0:l.shift=!0),l.meta&&(t.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(t,n,r,o){var l;return l=e.map(i(t,">"),s),l[l.length-1]=e.extend(l[l.length-1],{func:r,scope:o||a}),e.extend(l[0],{desc:a.translate(n),subpatterns:l.slice(1)})}function u(e){return e.altKey||e.ctrlKey||e.metaKey}function d(e){return e.keyCode>=112&&e.keyCode<=123}function c(e,t){return!!t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&(!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0))))}function p(e){return e.func?e.func.call(e.scope):null}var f=this,h={},m=[];a.on("keyup keypress keydown",function(e){!u(e)&&!d(e)||e.isDefaultPrevented()||(n(h,function(t){if(c(e,t))return m=t.subpatterns.slice(0),"keydown"==e.type&&p(t),!0}),c(e,m[0])&&(1===m.length&&"keydown"==e.type&&p(m[0]),m.shift()))}),f.add=function(t,r,o,s){var u;return u=o,"string"==typeof o?o=function(){a.execCommand(u,!1,null)}:e.isArray(u)&&(o=function(){a.execCommand(u[0],u[1],u[2])}),n(i(e.trim(t.toLowerCase())),function(e){var t=l(e,r,o,s);h[t.id]=t}),!0},f.remove=function(e){var t=l(e);return!!h[t.id]&&(delete h[t.id],!0)}}}),r("tinymce/file/Uploader",["tinymce/util/Promise","tinymce/util/Tools","tinymce/util/Fun"],function(e,t,n){return function(i){function r(e){var t,n;return n={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"},t=n[e.blob().type.toLowerCase()]||"dat",e.id()+"."+t}function o(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function a(e){return{id:e.id,blob:e.blob,base64:e.base64,filename:n.constant(r(e))}}function s(e,t,n,a){var s,l,u;s=new XMLHttpRequest,s.open("POST",i.url),s.withCredentials=i.credentials,u=a(),s.upload.onprogress=function(e){var t=Math.round(e.loaded/e.total*100);u.progressBar.value(t)},s.onerror=function(){u.close(),n("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=function(){var e;return u.close(),200!=s.status?void n("HTTP Error: "+s.status):(e=JSON.parse(s.responseText),e&&"string"==typeof e.location?void t(o(i.basePath,e.location)):void n("Invalid JSON: "+s.responseText))},l=new FormData,l.append("file",e.blob(),r(e)),s.send(l)}function l(){return new e(function(e){e([])})}function u(e){return e.then(function(e){return e}).catch(function(e){return e})}function d(e,t,n){var i=e(n),r=u(i);return delete h[t],h[t]=r,r}function c(e,n){return t.map(e,function(e){var t=e.id();return h[t]?h[t]:d(n,t,e)})}function p(t,n){function r(t){return new e(function(e){var r=i.handler;try{r(a(t),function(n){e({url:n,blobInfo:t,status:!0})},function(n){e({url:"",blobInfo:t,status:!1,error:n})},n)}catch(n){e({url:"",blobInfo:t,status:!1,error:n.message})}})}var o=c(t,r);return e.all(o)}function f(e,t){return i.url||i.handler!==s?p(e,t):l()}var h={};return i=t.extend({credentials:!1,handler:s},i),{upload:f}}}),r("tinymce/file/Conversions",["tinymce/util/Promise"],function(e){function t(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function i(t){return new e(function(e){var i,r,o;t=n(t);try{i=atob(t.data)}catch(t){return void e(new Blob([]))}for(r=new Uint8Array(i.length),o=0;o<r.length;o++)r[o]=i.charCodeAt(o);e(new Blob([r],{type:t.type}))})}function r(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?i(e):null}function o(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:r,blobToDataUri:o,parseDataUri:n}}),r("tinymce/file/ImageScanner",["tinymce/util/Promise","tinymce/util/Arr","tinymce/util/Fun","tinymce/file/Conversions","tinymce/Env"],function(e,t,n,i,r){var o=0;return function(a){function s(s,u){function d(e,t){var n,r;return 0===e.src.indexOf("blob:")?(r=a.getByUri(e.src),void(r&&t({image:e,blobInfo:r}))):(n=i.parseDataUri(e.src).data,r=a.findFirst(function(e){return e.base64()===n}),void(r?t({image:e,blobInfo:r}):i.uriToBlob(e.src).then(function(i){var r="blobid"+o++,s=a.create(r,i,n);a.add(s),t({image:e,blobInfo:s})})))}var c,p;return u||(u=n.constant(!0)),c=t.filter(s.getElementsByTagName("img"),function(e){var t=e.src;return!!r.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==r.transparentSrc)&&(0===t.indexOf("blob:")||0===t.indexOf("data:")&&u(e)))))}),p=t.map(c,function(t){var n;return l[t.src]?new e(function(e){l[t.src].then(function(n){e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e){d(t,e)}).then(function(e){return delete l[e.image.src],e}).catch(function(e){return delete l[t.src],e}),l[t.src]=n,n)}),e.all(p)}var l={};return{findAll:s}}}),r("tinymce/file/BlobCache",["tinymce/util/Arr","tinymce/util/Fun"],function(e,t){return function(){function n(e,t,n){return{id:u(e),blob:u(t),base64:u(n),blobUri:u(URL.createObjectURL(t))}}function i(e){r(e.id())||l.push(e)}function r(e){return o(function(t){return t.id()===e})}function o(t){return e.filter(l,t)[0]}function a(e){return o(function(t){return t.blobUri()==e})}function s(){e.each(l,function(e){URL.revokeObjectURL(e.blobUri())}),l=[]}var l=[],u=t.constant;return{create:n,add:i,get:r,getByUri:a,findFirst:o,destroy:s}}}),r("tinymce/EditorUpload",["tinymce/util/Arr","tinymce/file/Uploader","tinymce/file/ImageScanner","tinymce/file/BlobCache"],function(e,t,n,i){return function(r){function o(e){return function(t){return r.selection?e(t):[]}}function a(e,t,n){var i=0;do i=e.indexOf(t,i),i!==-1&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1);while(i!==-1);return e}function s(e,t,n){return e=a(e,'src="'+t+'"','src="'+n+'"'),e=a(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function l(t,n){e.each(r.undoManager.data,function(e){e.content=s(e.content,t,n)})}function u(){return r.notificationManager.open({text:r.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function d(n){return m||(m=new t({url:y.images_upload_url,basePath:y.images_upload_base_path,credentials:y.images_upload_credentials,handler:y.images_upload_handler})),p().then(o(function(t){var i;return i=e.map(t,function(e){return e.blobInfo}),m.upload(i,u).then(o(function(i){return i=e.map(i,function(e,n){var i=t[n].image;return e.status&&(l(i.src,e.url),r.$(i).attr({src:e.url,"data-mce-src":r.convertURL(e.url,"src")})),{element:i,status:e.status}}),n&&n(i),i}))}))}function c(e){if(y.automatic_uploads!==!1)return d(e)}function p(){return g||(g=new n(v)),g.findAll(r.getBody(),y.images_dataimg_filter).then(o(function(t){return e.each(t,function(e){l(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri()}),t}))}function f(){v.destroy(),g=m=null}function h(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var i=v.getByUri(n);return i||(i=e.reduce(r.editorManager.editors,function(e,t){return e||t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})}var m,g,v=new i,y=r.settings;return r.on("setContent",function(){r.settings.automatic_uploads!==!1?c():p()}),r.on("RawSaveContent",function(e){e.content=h(e.content)}),r.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=h(e.content))}),{blobCache:v,uploadImages:d,uploadImagesAuto:c,scanForImages:p,destroy:f}}}),r("tinymce/caret/FakeCaret",["tinymce/caret/CaretContainer","tinymce/caret/CaretPosition","tinymce/dom/NodeType","tinymce/dom/RangeUtils","tinymce/dom/DomQuery","tinymce/geom/ClientRect","tinymce/util/Delay"],function(e,t,n,i,r,o,a){var s=n.isContentEditableFalse;return function(t,n){function i(e,n){var i,r,a,s,l,u=o.collapse(e.getBoundingClientRect(),n);return"BODY"==t.tagName?(i=t.ownerDocument.documentElement,r=t.scrollLeft||i.scrollLeft,a=t.scrollTop||i.scrollTop):(l=t.getBoundingClientRect(),r=t.scrollLeft-l.left,a=t.scrollTop-l.top),u.left+=r,u.right+=r,u.top+=a,u.bottom+=a,u.width=1,s=e.offsetWidth-e.clientWidth,s>0&&(n&&(s*=-1),u.left+=s,u.right+=s),u}function l(){var n,i,o,a,s;for(n=r("*[contentEditable=false]",t),a=0;a<n.length;a++)i=n[a],o=i.previousSibling,e.endsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(s.length-1,1)),o=i.nextSibling,e.startsWithCaretContainer(o)&&(s=o.data,1==s.length?o.parentNode.removeChild(o):o.deleteData(0,1));return null}function u(o,a){var l,u,p;return d(),n(a)?(g=e.insertBlock("p",a,o),l=i(a,o),r(g).css("top",l.top),m=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(l).appendTo(t),o&&m.addClass("mce-visual-caret-before"),c(),u=a.ownerDocument.createRange(),p=g.firstChild,u.setStart(p,0),u.setEnd(p,1),u):(g=e.insertInline(a,o),u=a.ownerDocument.createRange(),s(g.nextSibling)?(u.setStart(g,0),u.setEnd(g,0)):(u.setStart(g,1),u.setEnd(g,1)),u)}function d(){l(),g&&(e.remove(g),g=null),m&&(m.remove(),m=null),clearInterval(h)}function c(){h=a.setInterval(function(){r("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden")},500)}function p(){a.clearInterval(h)}function f(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var h,m,g;return{show:u,hide:d,getCss:f,destroy:p}}}),r("tinymce/dom/Dimensions",["tinymce/util/Arr","tinymce/dom/NodeType","tinymce/geom/ClientRect"],function(e,t,n){function i(r){function o(t){return e.map(t,function(e){return e=n.clone(e),e.node=r,e})}if(e.isArray(r))return e.reduce(r,function(e,t){return e.concat(i(t))},[]);if(t.isElement(r))return o(r.getClientRects());if(t.isText(r)){var a=r.ownerDocument.createRange();return a.setStart(r,0),a.setEnd(r,r.data.length),o(a.getClientRects())}}return{getClientRects:i}}),r("tinymce/caret/LineWalker",["tinymce/util/Fun","tinymce/util/Arr","tinymce/dom/Dimensions","tinymce/caret/CaretCandidate","tinymce/caret/CaretUtils","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/geom/ClientRect"],function(e,t,n,i,r,o,a,s){function l(e,t,n,o){for(;o=r.findNode(o,e,i.isEditableCaretCandidate,t);)if(n(o))return}function u(e,i,r,o,a,s){function u(o){var s,l,u;for(u=n.getClientRects(o),e==-1&&(u=u.reverse()),s=0;s<u.length;s++)if(l=u[s],!r(l,c)){if(f.length>0&&i(l,t.last(f))&&p++,l.line=p,a(l))return!0;f.push(l)}}var d,c,p=0,f=[];return(c=t.last(s.getClientRects()))?(d=s.getNode(),u(d),l(e,o,u,d),f):f}function d(e,t){return t.line>e}function c(e,t){return t.line===e}function p(e,n,i,r){function l(n){return 1==e?t.last(n.getClientRects()):t.last(n.getClientRects())}var u,d,c,p,f,h,m=new o(n),g=[],v=0;1==e?(u=m.next,d=s.isBelow,c=s.isAbove,p=a.after(r)):(u=m.prev,d=s.isAbove,c=s.isBelow,p=a.before(r)),h=l(p);do if(p.isVisible()&&(f=l(p),!c(f,h))){if(g.length>0&&d(f,t.last(g))&&v++,f=s.clone(f),f.position=p,f.line=v,i(f))return g;g.push(f)}while(p=u(p));return g}var f=e.curry,h=f(u,-1,s.isAbove,s.isBelow),m=f(u,1,s.isBelow,s.isAbove);return{upUntil:h,downUntil:m,positionsUntil:p,isAboveLine:f(d),isLine:f(c)}}),r("tinymce/caret/LineUtils",["tinymce/util/Fun","tinymce/util/Arr","tinymce/dom/NodeType","tinymce/dom/Dimensions","tinymce/geom/ClientRect","tinymce/caret/CaretUtils","tinymce/caret/CaretCandidate"],function(e,t,n,i,r,o,a){function s(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function u(e,n){function i(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var r,o;return r=Math.min(s(e,n),l(e,n)),o=Math.min(s(t,n),l(t,n)),i(n,t)?t:i(n,e)?e:o==r&&m(t.node)?t:o<r?t:e})}function d(e,t,n,i){for(;i=g(i,e,a.isEditableCaretCandidate,t);)if(n(i))return}function c(e,n){function o(e,r){var o;return o=t.filter(i.getClientRects(r),function(t){return!e(t,n)}),a=a.concat(o),0===o.length}var a=[];return a.push(n),d(-1,e,v(o,r.isAbove),n.node),d(1,e,v(o,r.isBelow),n.node),a}function p(e){return t.filter(t.toArray(e.getElementsByTagName("*")),m)}function f(e,t){return{node:e.node,before:s(e,t)<l(e,t)}}function h(e,n,r){var o,a;return o=i.getClientRects(p(e)),o=t.filter(o,function(e){return r>=e.top&&r<=e.bottom}),a=u(o,n),a&&(a=u(c(e,a),n),a&&m(a.node))?f(a,n):null}var m=n.isContentEditableFalse,g=o.findNode,v=e.curry;return{findClosestClientRect:u,findLineNodeRects:c,closestCaret:h}}),r("tinymce/DragDropOverrides",["tinymce/dom/NodeType","tinymce/util/Arr","tinymce/util/Fun"],function(e,t,n){function i(e){function i(e){return r(e)}function a(t){p(e.getBody()).css("cursor",t)}function s(t){return t!=g.element&&!e.dom.isChildOf(t,g.element)&&!r(t)}function l(t){var n,i,r,o,s,l,u,d,c=0,f=0;0===t.button&&(n=t.screenX-g.screenX,i=t.screenY-g.screenY,s=Math.max(Math.abs(n),Math.abs(i)),!g.dragging&&s>10&&(g.dragging=!0,a("default"),g.clone=g.element.cloneNode(!0),r=m.getPos(g.element),g.relX=g.clientX-r.x,g.relY=g.clientY-r.y,g.width=g.element.offsetWidth,g.height=g.element.offsetHeight,p(g.clone).css({width:g.width,height:g.height}).removeAttr("data-mce-selected"),g.ghost=p("<div>").css({position:"absolute",opacity:.5,overflow:"hidden",width:g.width,height:g.height}).attr({"data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}).addClass("mce-drag-container mce-reset").append(g.clone).appendTo(e.getBody())[0],o=e.dom.getViewPort(e.getWin()),g.maxX=o.w,g.maxY=o.h),g.dragging&&(e.selection.placeCaretAt(t.clientX,t.clientY),l=g.clientX+n-g.relX,u=g.clientY+i+5,l+g.width>g.maxX&&(c=l+g.width-g.maxX),u+g.height>g.maxY&&(f=u+g.height-g.maxY),d="BODY"!=e.getBody().nodeName?e.getBody().getBoundingClientRect():{left:0,top:0},p(g.ghost).css({left:l-d.left,top:u-d.top,width:g.width-c,height:g.height-f})))}function u(){var t;if(g.dragging&&(e.selection.setRng(e.selection.getSel().getRangeAt(0)),s(e.selection.getNode()))){var n=g.element;if(t=e.fire("drop",{targetClone:n}),t.isDefaultPrevented())return;n=t.targetClone,e.undoManager.transact(function(){e.insertContent(m.getOuterHTML(n)),p(g.element).remove()})}c()}function d(a){var s,d;if(c(),0===a.button&&(s=t.find(e.dom.getParents(a.target),n.or(r,o)),i(s))){if(d=e.fire("dragstart",{target:s}),d.isDefaultPrevented())return;e.on("mousemove",l),e.on("mouseup",u),f!=h&&(m.bind(f,"mousemove",l),m.bind(f,"mouseup",u)),g={screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,element:s}}}function c(){p(g.ghost).remove(),a(null),e.off("mousemove",l),e.off("mouseup",c),f!=h&&(m.unbind(f,"mousemove",l),m.unbind(f,"mouseup",c)),g={}}var p=e.$,f=document,h=e.getDoc(),m=e.dom,g={};e.on("mousedown",d),e.on("drop",function(t){var n=e.getDoc().elementFromPoint(t.clientX,t.clientY);(r(n)||r(e.dom.getContentEditableParent(n)))&&t.preventDefault()})}var r=e.isContentEditableFalse,o=e.isContentEditableTrue;return{init:i}}),r("tinymce/SelectionOverrides",["tinymce/Env","tinymce/caret/CaretWalker","tinymce/caret/CaretPosition","tinymce/caret/CaretContainer","tinymce/caret/CaretUtils","tinymce/caret/FakeCaret","tinymce/caret/LineWalker","tinymce/caret/LineUtils","tinymce/dom/NodeType","tinymce/dom/RangeUtils","tinymce/geom/ClientRect","tinymce/util/VK","tinymce/util/Fun","tinymce/util/Arr","tinymce/util/Delay","tinymce/DragDropOverrides","tinymce/text/Zwsp"],function(e,t,n,i,r,o,a,s,l,u,d,c,p,f,h,m,g){
function v(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}function y(u){function y(e){return u.dom.isBlock(e)}function S(e){e&&u.selection.setRng(e)}function P(){return u.selection.getRng()}function k(e,t){u.selection.scrollIntoView(e,t)}function I(e,t,n){var i;return i=u.fire("ShowCaret",{target:t,direction:e,before:n}),i.isDefaultPrevented()?null:(k(t,e===-1),re.show(n,t))}function N(e){var t;return re.hide(),t=u.fire("BeforeObjectSelected",{target:e}),t.isDefaultPrevented()?null:M(e)}function M(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}function R(e,t){var n=r.isInSameBlock(e,t);return!(n||!l.isBr(e.getNode()))||n}function D(e,t){return t=r.normalizeRange(e,ee,t),e==-1?n.fromRangeStart(t):n.fromRangeEnd(t)}function A(e){return i.isCaretContainerBlock(e.startContainer)}function O(e,t,n,i){var r,o,a,s;return!i.collapsed&&(r=T(i),x(r))?I(e,r,e==-1):(s=A(i),o=D(e,i),n(o)?N(o.getNode(e==-1)):(o=t(o))?n(o)?I(e,o.getNode(e==-1),1==e):(a=t(o),n(a)&&R(o,a)?I(e,a.getNode(e==-1),1==e):s?j(o.toRange()):null):s?i:null)}function L(e,t,n){var i,r,o,l,u,d,c,p,h;if(h=T(n),i=D(e,n),r=t(ee,a.isAboveLine(1),i),o=f.filter(r,a.isLine(1)),u=f.last(i.getClientRects()),w(i)&&(h=i.getNode()),E(i)&&(h=i.getNode(!0)),!u)return null;if(d=u.left,l=s.findClosestClientRect(o,d),l&&x(l.node))return c=Math.abs(d-l.left),p=Math.abs(d-l.right),I(e,l.node,c<p);if(h){var m=a.positionsUntil(e,ee,a.isAboveLine(1),h);if(l=s.findClosestClientRect(f.filter(m,a.isLine(1)),d))return j(l.position.toRange());if(l=f.last(f.filter(m,a.isLine(0))))return j(l.position.toRange())}}function B(t,i){function r(){var t=u.dom.create(u.settings.forced_root_block);return(!e.ie||e.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}var o,a,s;if(i.collapsed&&u.settings.forced_root_block){if(o=u.dom.getParent(i.startContainer,"PRE"),!o)return;a=1==t?ne(n.fromRangeStart(i)):ie(n.fromRangeStart(i)),a||(s=r(),1==t?u.$(o).after(s):u.$(o).before(s),u.selection.select(s,!0),u.selection.collapse())}}function F(e,t,n,i){var r;return(r=O(e,t,n,i))?r:(r=B(e,i),r?r:null)}function H(e,t,n){var i;return(i=L(e,t,n))?i:(i=B(e,n),i?i:null)}function z(){return ae("*[data-mce-caret]")[0]}function U(e){e=ae(e),e.attr("data-mce-caret")&&(re.hide(),e.removeAttr("data-mce-caret"),e.removeAttr("data-mce-bogus"),e.removeAttr("style"),S(P()),k(e[0]))}function V(e){var t,i;return e=r.normalizeRange(1,ee,e),t=n.fromRangeStart(e),x(t.getNode())?I(1,t.getNode(),!t.isAtEnd()):x(t.getNode(!0))?I(1,t.getNode(!0),!1):(i=u.dom.getParent(t.getNode(),p.or(x,_)),x(i)?I(1,i,!1):(re.hide(),null))}function j(e){var t;return e&&e.collapsed?(t=V(e),t?t:e):e}function W(e){var t,r,o,a;return x(e)?(x(e.previousSibling)&&(o=e.previousSibling),r=ie(n.before(e)),r||(t=ne(n.after(e))),t&&C(t.getNode())&&(a=t.getNode()),i.remove(e.previousSibling),i.remove(e.nextSibling),u.dom.remove(e),Q(),u.dom.isEmpty(u.getBody())?(u.setContent(""),void u.focus()):o?n.after(o).toRange():a?n.before(a).toRange():r?r.toRange():t?t.toRange():null):null}function q(e,t,n){var i,r,o,a,s=u.dom;if(e===-1){if(E(n)&&y(n.getNode(!0)))return W(n.getNode(!0))}else if(w(t)&&y(t.getNode()))return W(t.getNode());if(a=u.schema.getTextBlockElements(),i=s.getParent(t.getNode(),s.isBlock),r=s.getParent(n.getNode(),s.isBlock),i===r||!a[i.nodeName]||!a[r.nodeName])return null;for(;o=i.firstChild;)r.appendChild(o);return u.dom.remove(i),n.toRange()}function G(e,t,n){var i,r,o;return!n.collapsed&&(i=T(n),x(i))?j(W(i)):(r=D(e,n),t(r)?j(W(r.getNode(e==-1))):(o=e==-1?te.prev(r):te.next(r),t(o)?e===-1?q(e,r,o):q(e,o,r):void 0))}function $(){function e(e,t){var n=t(P());n&&!e.isDefaultPrevented()&&(e.preventDefault(),S(n))}function t(e){for(var t=u.getBody();e&&e!=t;){if(_(e)||x(e))return e;e=e.parentNode}return null}function i(e,t,n){return!n.collapsed&&f.reduce(n.getClientRects(),function(n,i){return n||d.containsXY(i,e,t)},!1)}function r(){var e,i=t(u.selection.getNode());_(i)&&y(i)&&u.dom.isEmpty(i)&&(e=u.dom.create("br",{"data-mce-bogus":"1"}),u.$(i).empty().append(e),u.selection.setRng(n.before(e).toRange()))}function o(e){var t=z();if(t)return"compositionstart"==e.type?(e.preventDefault(),e.stopPropagation(),void U(t)):void("&nbsp;"!=t.innerHTML&&U(t))}function l(e){var t;switch(e.keyCode){case c.DELETE:t=r();break;case c.BACKSPACE:t=r()}t&&e.preventDefault()}var p=b(F,1,ne,w),g=b(F,-1,ie,E),v=b(G,1,w),C=b(G,-1,E),T=b(H,-1,a.upUntil),k=b(H,1,a.downUntil);u.on("mouseup",function(){var e=P();e.collapsed&&S(V(e))}),u.on("click",function(e){var n;n=t(e.target),n&&x(n)&&e.preventDefault()}),u.on("mousedown",function(e){var n;if(n=t(e.target))x(n)?(e.preventDefault(),X(N(n))):(Q(),i(e.clientX,e.clientY,u.selection.getRng())||u.selection.placeCaretAt(e.clientX,e.clientY));else{Q(),re.hide();var r=s.closestCaret(ee,e.clientX,e.clientY);r&&(e.preventDefault(),u.getBody().focus(),S(I(1,r.node,r.before)))}}),u.on("keydown",function(t){if(!c.modifierPressed(t))switch(t.keyCode){case c.RIGHT:e(t,p);break;case c.DOWN:e(t,k);break;case c.LEFT:e(t,g);break;case c.UP:e(t,T);break;case c.DELETE:e(t,v);break;case c.BACKSPACE:e(t,C);break;default:x(u.selection.getNode())&&t.preventDefault()}}),u.on("keyup compositionstart",function(e){o(e),l(e)},!0),u.on("cut",function(){var e=u.selection.getNode();x(e)&&h.setEditorTimeout(u,function(){S(j(W(e)))})}),u.on("getSelectionRange",function(e){var t=e.range;if(Z){if(!Z.parentNode)return void(Z=null);t=t.cloneRange(),t.selectNode(Z),e.range=t}}),u.on("setSelectionRange",function(e){var t;t=X(e.range),t&&(e.range=t)}),u.on("focus",function(){h.setEditorTimeout(u,function(){u.selection.setRng(j(u.selection.getRng()))},0)}),m.init(u)}function K(){var e=u.contentStyles,t=".mce-content-body";e.push(re.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;width: 100px;height: 100px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function Y(e){return i.isCaretContainer(e.startContainer)||i.isCaretContainer(e.endContainer)}function X(t){var n,i,r,o,a,s,l,d,c,p,f=u.$,h=u.dom;if(!t)return Q(),null;if(t.collapsed){if(Q(),!Y(t)){if(d=D(1,t),x(d.getNode()))return I(1,d.getNode(),!d.isAtEnd());if(x(d.getNode(!0)))return I(1,d.getNode(!0),!1)}return null}return o=t.startContainer,a=t.startOffset,s=t.endOffset,3==o.nodeType&&0==a&&x(o.parentNode)&&(o=o.parentNode,a=h.nodeIndex(o),o=o.parentNode),1!=o.nodeType?(Q(),null):(s==a+1&&(n=o.childNodes[a]),x(n)?(c=p=n.cloneNode(!0),l=u.fire("ObjectSelected",{target:n,targetClone:c}),l.isDefaultPrevented()?(Q(),null):(c=l.targetClone,i=f("#"+oe),0===i.length&&(i=f('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",oe),i.appendTo(u.getBody())),t=u.dom.createRng(),c===p&&e.ie?(i.empty().append(g.ZWSP).append(c).append(g.ZWSP),t.setStart(i[0].firstChild,0),t.setEnd(i[0].lastChild,1)):(i.empty().append(" ").append(c).append(" "),t.setStart(i[0].firstChild,1),t.setEnd(i[0].lastChild,0)),i.css({top:h.getPos(n,u.getBody()).y}),u.getBody().focus(),i[0].focus(),r=u.selection.getSel(),r.removeAllRanges(),r.addRange(t),u.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),Z=n,t)):(Q(),null))}function Q(){Z&&(Z.removeAttribute("data-mce-selected"),u.$("#"+oe).remove(),Z=null)}function J(){re.destroy(),Z=null}var Z,ee=u.getBody(),te=new t(ee),ne=b(v,te.next),ie=b(v,te.prev),re=new o(u.getBody(),y),oe="sel-"+u.dom.uniqueId(),ae=u.$;return e.ceFalse&&($(),K()),{showBlockCaretContainer:U,destroy:J}}var b=p.curry,_=l.isContentEditableTrue,x=l.isContentEditableFalse,C=l.isElement,E=r.isAfterContentEditableFalse,w=r.isBeforeContentEditableFalse,T=u.getSelectedNode;return y}),r("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/NotificationManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/util/Delay","tinymce/EditorObservable","tinymce/Mode","tinymce/Shortcuts","tinymce/EditorUpload","tinymce/SelectionOverrides"],function(e,t,i,r,o,a,s,l,u,d,c,p,f,h,m,g,v,y,b,_,x,C,E,w,T,S,P,k,I){function N(e,n,r){var o,a,s,l=this;o=l.documentBaseUrl=r.documentBaseURL,a=r.baseURI,s=r.defaultSettings,n=A({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:l.convertURL,url_converter_scope:l,ie7_compat:!0},s,n),s&&s.external_plugins&&n.external_plugins&&(n.external_plugins=A({},s.external_plugins,n.external_plugins)),l.settings=n,i.language=n.language||"en",i.languageLoad=n.language_load,i.baseURL=r.baseURL,l.id=n.id=e,l.setDirty(!1),l.plugins={},l.documentBaseURI=new h(n.document_base_url||o,{base_uri:a}),l.baseURI=a,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new P(l),l.loadedCSS={},l.editorCommands=new f(l),n.target&&(l.targetElm=n.target),l.suffix=r.suffix,l.editorManager=r,l.inline=n.inline,n.cache_suffix&&(C.cacheSuffix=n.cache_suffix.replace(/^[\?\&]+/,"")),n.override_viewport===!1&&(C.overrideViewPort=!1),r.fire("SetupEditor",l),l.execCallback("setup",l),l.$=t.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})}var M=e.DOM,R=i.ThemeManager,D=i.PluginManager,A=E.extend,O=E.each,L=E.explode,B=E.inArray,F=E.trim,H=E.resolve,z=g.Event,U=C.gecko,V=C.ie;return N.prototype={render:function(){function e(){M.unbind(window,"ready",e),n.render()}function t(){var e=m.ScriptLoader;if(i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=n.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&e.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!R.urls[i.theme]){var t=i.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+o+".js",R.load(i.theme,t)}E.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),O(i.external_plugins,function(e,t){D.load(t,e),i.plugins+=" "+t}),O(i.plugins.split(/[ ,]/),function(e){if(e=F(e),e&&!D.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=D.dependencies(e);O(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=D.createUrl(t,e),D.load(e.resource,e)})}else D.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,i=n.settings,r=n.id,o=n.suffix;if(!z.domLoaded)return void M.bind(window,"ready",e);if(n.getElement()&&C.contentEditable){i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||M.getParent(r,"form");a&&(n.formElement=a,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(M.insertAfter(M.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},M.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),a._mceOldSubmit(a)})),n.windowManager=new v(n),n.notificationManager=new y(n),"xml"==i.encoding&&n.on("GetContent",function(e){e.save&&(e.content=M.encode(e.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(t){var n,i,r=D.get(t);if(n=D.urls[t]||p.documentBaseUrl.replace(/\/$/,""),t=F(t),r&&B(m,t)===-1){if(O(D.dependencies(t),function(t){e(t)}),p.plugins[t])return;i=new r(p,n,p.$),p.plugins[t]=i,i.init&&(i.init(p,n),m.push(t))}}var t,n,i,r,o,a,s,l,u,d,c,p=this,f=p.settings,h=p.getElement(),m=[];if(this.editorManager.i18n.setCode(f.language),p.rtl=f.rtl_ui||this.editorManager.i18n.rtl,p.editorManager.add(p),f.aria_label=f.aria_label||M.getAttrib(h,"aria-label",p.getLang("aria.rich_text_area")),f.theme&&("function"!=typeof f.theme?(f.theme=f.theme.replace(/-/,""),a=R.get(f.theme),p.theme=new a(p,R.urls[f.theme]),p.theme.init&&p.theme.init(p,R.urls[f.theme]||p.documentBaseUrl.replace(/\/$/,""),p.$)):p.theme=f.theme),O(f.plugins.replace(/\-/g,"").split(/[ ,]/),e),f.render_ui&&p.theme&&(p.orgDisplay=h.style.display,"function"!=typeof f.theme?(t=f.width||h.style.width||h.offsetWidth,n=f.height||h.style.height||h.offsetHeight,i=f.min_height||100,d=/^[0-9\.]+(|px)$/i,d.test(""+t)&&(t=Math.max(parseInt(t,10),100)),d.test(""+n)&&(n=Math.max(parseInt(n,10),i)),o=p.theme.renderUI({targetNode:h,width:t,height:n,deltaWidth:f.delta_width,deltaHeight:f.delta_height}),f.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""),n<i&&(n=i))):(o=f.theme(p,h),o.editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||p.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||p.id+"_iframecontainer"),n=o.iframeHeight||h.offsetHeight),p.editorContainer=o.editorContainer),f.content_css&&O(L(f.content_css),function(e){p.contentCSS.push(p.documentBaseURI.toAbsolute(e))}),f.content_style&&p.contentStyles.push(f.content_style),f.content_editable)return h=r=o=null,p.initContentBody();if(p.iframeHTML=f.doctype+"<html><head>",f.document_base_url!=p.documentBaseUrl&&(p.iframeHTML+='<base href="'+p.documentBaseURI.getURI()+'" />'),!C.caretAfter&&f.ie7_compat&&(p.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),p.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(c=0;c<p.contentCSS.length;c++){var g=p.contentCSS[c];p.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+E._addCacheSuffix(g)+'" />',p.loadedCSS[g]=!0}l=f.body_id||"tinymce",l.indexOf("=")!=-1&&(l=p.getParam("body_id","","hash"),l=l[p.id]||l),u=f.body_class||"",u.indexOf("=")!=-1&&(u=p.getParam("body_class","","hash"),u=u[p.id]||""),f.content_security_policy&&(p.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+f.content_security_policy+'" />'),p.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+u+'" data-id="'+p.id+'"><br></body></html>';var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+p.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&C.ie&&C.ie<12&&(s=v);var y=M.create("iframe",{id:p.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:p.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}});if(y.onload=function(){y.onload=null,p.fire("load")},M.setAttrib(y,"src",s||'javascript:""'),p.contentAreaContainer=o.iframeContainer,p.iframeElement=y,r=M.add(o.iframeContainer,y),V)try{p.getDoc()}catch(e){r.src=s=v}o.editorContainer&&(M.get(o.editorContainer).style.display=p.orgDisplay,p.hidden=M.isHidden(o.editorContainer)),p.getElement().style.display="none",M.setAttrib(p.id,"aria-hidden",!0),s||p.initContentBody(),h=r=o=null},initContentBody:function(t){var n,i,s=this,f=s.settings,h=s.getElement(),m=s.getDoc();f.inline||(s.getElement().style.visibility=s.orgVisibility),t||f.content_editable||(m.open(),m.write(s.iframeHTML),m.close()),f.content_editable&&(s.on("remove",function(){var e=this.getBody();M.removeClass(e,"mce-content-body"),M.removeClass(e,"mce-edit-focus"),M.setAttrib(e,"contentEditable",null)}),M.addClass(h,"mce-content-body"),s.contentDocument=m=f.content_document||document,s.contentWindow=f.content_window||window,s.bodyElement=h,f.content_document=f.content_window=null,f.root_name=h.nodeName.toLowerCase()),n=s.getBody(),n.disabled=!0,s.readonly=f.readonly,s.readonly||(s.inline&&"static"==M.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.editorUpload=new k(s),s.schema=new b(f),s.dom=new e(m,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:f.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}}),s.parser=new _(f,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,r,o=e.length,a=s.dom;o--;)if(n=e[o],i=n.attr(t),r="data-mce-"+t,!n.attributes.map[r]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?(i=a.serializeStyle(a.parseStyle(i),n.name),i.length||(i=null),n.attr(r,i),n.attr(t,i)):"tabindex"===t?(n.attr(r,i),n.attr(t,null)):n.attr(r,s.convertURL(i,t,n.name))}}),s.parser.addNodeFilter("script",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=s.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(i)&&(t.append(new o("br",1)).shortEnded=!0)}),s.serializer=new a(f,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new u(s),s.undoManager=new d(s),s.forceBlocks=new p(s),s.enterKey=new c(s),s._nodeChangeDispatcher=new r(s),s._selectionOverrides=new I(s),s.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(m.body.spellcheck=!1,M.setAttrib(n,"spellcheck","false")),s.quirks=new x(s),s.fire("PostRender"),f.directionality&&(n.dir=f.directionality),f.nowrap&&(n.style.whiteSpace="nowrap"),f.protect&&s.on("BeforeSetContent",function(e){O(f.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),f.padd_empty_editor&&s.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.on("compositionstart compositionend",function(e){s.composing="compositionstart"===e.type}),s.contentStyles.length>0&&(i="",O(s.contentStyles,function(e){i+=e+"\r\n"}),s.dom.addStyle(i)),O(s.contentCSS,function(e){s.loadedCSS[e]||(s.dom.loadCSS(e),s.loadedCSS[e]=!0)}),f.auto_focus&&w.setEditorTimeout(s,function(){var e;e=f.auto_focus===!0?s:s.editorManager.get(f.auto_focus),e.destroyed||e.focus()},100),h=m=n=null},focus:function(e){function t(e){return o.dom.getParent(e,function(e){return"true"===o.dom.getContentEditable(e)})}var n,i,r,o=this,a=o.selection,s=o.settings.content_editable,l=o.getDoc(),u=o.getBody();if(!e){if(n=a.getRng(),n.item&&(i=n.item(0)),o.quirks.refreshContentEditable(),r=t(a.getNode()),o.$.contains(u,r))return r.focus(),a.normalize(),void o.editorManager.setActive(o);if(s||(C.opera||o.getBody().focus(),o.getWin().focus()),U||s){if(u.setActive)try{u.setActive()}catch(e){u.focus()}else u.focus();s&&a.normalize()}i&&i.ownerDocument==l&&(n=l.body.createControlRange(),n.addElement(i),n.select())}o.editorManager.setActive(o)},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?H(t):0,i=H(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?(e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}),this.editorManager.translate(e)):""},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==n?t:"{#"+e+"}")},getParam:function(e,t,n){var i,r=e in this.settings?this.settings[e]:t;return"hash"===n?(i={},"string"==typeof r?O(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),e.length>1?i[F(e[0])]=F(e[1]):i[F(e[0])]=F(e)}):i=r,i):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return i.dom.is(e,n)}),i.contextToolbars.push({predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(M.show(e.getContainer()),M.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(V&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(M.hide(e.getContainer()),M.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,i=this,r=i.getElement();if(r)return e=e||{},e.load=!0,t=i.setContent(r.value!==n?r.value:r.innerHTML,e),e.element=r,e.no_events||i.fire("LoadContent",e),e.element=r=null,t},save:function(e){var t,n,i=this,r=i.getElement();if(r&&i.initialized)return e=e||{},e.save=!0,e.element=r,t=e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),"raw"==e.format&&i.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=t:(i.inline||(r.innerHTML=t),(n=M.getParent(i.id,"form"))&&O(n.elements,function(e){if(e.name==i.id)return e.value=t,!1})),e.element=r=null,e.set_dirty!==!1&&i.setDirty(!1),t},setContent:function(e,t){var n,i,r=this,o=r.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||r.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(i=V&&V<11?"":'<br data-mce-bogus="1">',"TABLE"==o.nodeName?e="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(o.nodeName)&&(e="<li>"+i+"</li>"),n=r.settings.forced_root_block,n&&r.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())?(e=i,e=r.dom.createHTML(n,r.settings.forced_root_block_attrs,e)):V||e||(e='<br data-mce-bogus="1">'),r.dom.setHTML(o,e),r.fire("SetContent",t)):("raw"!==t.format&&(e=new s({validate:r.validate},r.schema).serialize(r.parser.parse(e,{isRootContent:!0}))),t.content=F(e),r.dom.setHTML(o,t.content),t.no_events||r.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,i=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?n.serializer.getTrimmedContent():"text"==e.format?i.innerText||i.textContent:n.serializer.serialize(i,e),"text"!=e.format?e.content=F(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=A({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){S.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=M.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=M.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,i=this,r=i.settings,o=i.dom;e=e||i.getBody(),i.hasVisual===n&&(i.hasVisual=r.visual),O(o.select("table,a",e),function(e){var n;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",n=o.getAttrib(e,"border"),void(n&&"0"!=n||!i.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href",!1)||(n=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",n&&i.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),i.fire("VisualAid",{element:e,hasVisual:i.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&M.remove(e.getElement().nextSibling),e.inline||(V&&V<10&&e.getDoc().execCommand("SelectAll",!1,null),M.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),M.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),M.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},A(N.prototype,T),N}),r("tinymce/util/I18n",[],function(){var e={},t="en";return{setCode:function(e){e&&(t=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return t},rtl:!1,add:function(t,n){var i=e[t];i||(e[t]=i={});for(var r in n)i[r]=n[r];this.setCode(t)},translate:function(n){var i;if(i=e[t],i||(i={}),"undefined"==typeof n)return n;if("string"!=typeof n&&n.raw)return n.raw;if(n.push){var r=n.slice(1);n=(i[n[0]]||n[0]).replace(/\{([0-9]+)\}/g,function(e,t){return r[t]})}return(i[n]||n).replace(/{context:\w+}$/,"")},data:e}}),r("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/util/Delay","tinymce/Env"],function(e,t,n){function i(e){function l(){try{return document.activeElement}catch(e){return document.body}}function u(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function d(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function c(e){return!!s.getParent(e,i.isEditorUIElement)}function p(i){var p=i.editor;p.on("init",function(){(p.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?p.dom.bind(p.getBody(),"beforedeactivate",function(e){if(e.target==p.getBody())try{p.lastRng=p.selection.getRng()}catch(e){}}):p.on("nodechange mouseup keyup",function(e){var t=l();"nodechange"==e.type&&e.selectionChange||(t&&t.id==p.id+"_ifr"&&(t=p.getBody()),p.dom.isChildOf(t,p.getBody())&&(p.lastRng=p.selection.getRng()))}),n.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(p.lastRng=n)}},s.bind(document,"selectionchange",r)))}),p.on("setcontent",function(){p.lastRng=null}),p.on("mousedown",function(){p.selection.lastFocusBookmark=null}),p.on("focusin",function(){var t,n=e.focusedEditor;p.selection.lastFocusBookmark&&(t=d(p,p.selection.lastFocusBookmark),p.selection.lastFocusBookmark=null,p.selection.setRng(t)),n!=p&&(n&&n.fire("blur",{focusedEditor:p}),e.setActive(p),e.focusedEditor=p,p.fire("focus",{blurredEditor:n}),p.focus(!0)),p.lastRng=null}),p.on("focusout",function(){t.setEditorTimeout(p,function(){var t=e.focusedEditor;c(l())||t!=p||(p.fire("blur",{focusedEditor:null}),e.focusedEditor=null,p.selection&&(p.selection.lastFocusBookmark=null))})}),o||(o=function(t){var n,i=e.activeEditor;n=t.target,i&&n.ownerDocument==document&&(i.selection&&n!=i.getBody()&&(i.selection.lastFocusBookmark=u(i.dom,i.lastRng)),n==document.body||c(n)||e.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},s.bind(document,"focusin",o)),p.inline&&!a&&(a=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},s.bind(document,"mouseup",a))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(document,"selectionchange",r),s.unbind(document,"focusin",o),s.unbind(document,"mouseup",a),r=o=a=null)}e.on("AddEditor",p),e.on("RemoveEditor",f)}var r,o,a,s=e.DOM;return i.isEditorUIElement=function(e){return e.className.toString().indexOf("mce-")!==-1},i}),r("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Promise","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,n,i,r,o,a,s,l,u){function d(e){y(m.editors,function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})}function c(e,n){n!==x&&(n?t(window).on("resize scroll",d):t(window).off("resize scroll",d),x=n)}function p(e){var t,n=m.editors;delete n[e.id];for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1),t=!0;break}return m.activeEditor==e&&(m.activeEditor=n[0]),m.focusedEditor==e&&(m.focusedEditor=null),
t}function f(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(p(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e}var h,m,g=n.DOM,v=o.explode,y=o.each,b=o.extend,_=0,x=!1;return m={$:t,majorVersion:"4",minorVersion:"3.12",releaseDate:"2016-05-10",editors:[],i18n:l,activeEditor:null,setup:function(){var e,t,n,r,o=this,a="";if(t=i.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,a=n.suffix;else{for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){r=s[l].src;var d=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){d.indexOf(".min")!=-1&&(a=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(r=document.currentScript.src,r.indexOf(".min")!=-1&&(a=".min"),e=r.substring(0,r.lastIndexOf("/")))}o.baseURL=new i(t).toAbsolute(e),o.documentBaseURL=t,o.baseURI=new i(o.baseURL),o.suffix=a,o.focusManager=new u(o)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new i(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new i(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e},init:function(n){function i(e){var t=e.id;return t||(t=e.name,t=t&&!g.get(t)?e.name:g.uniqueId(),e.setAttribute("id",t)),t}function r(e){var t=n[e];if(t)return t.apply(c,Array.prototype.slice.call(arguments,2))}function s(e,t){return t.constructor===RegExp?t.test(e.className):g.hasClass(e,t)}function l(e){var t,n=[];if(e.types)return y(e.types,function(e){n=n.concat(g.select(e.selector))}),n;if(e.selector)return g.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&y(v(t),function(e){var t;(t=g.get(e))?n.push(t):y(document.forms,function(t){y(t.elements,function(t){t.name===e&&(e="mce_editor_"+_++,g.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":y(g.select("textarea"),function(t){e.editor_deselector&&s(t,e.editor_deselector)||e.editor_selector&&!s(t,e.editor_selector)||n.push(t)})}return n}function u(){function a(t,n,i){if(!f(c.get(t))){var r=new e(t,n,c);h.push(r),r.on("init",function(){++d===s.length&&p(h)}),r.targetElm=r.targetElm||i,r.render()}}var s,d=0,h=[];return g.unbind(window,"ready",u),r("onpageload"),s=t.unique(l(n)),n.types?void y(n.types,function(e){o.each(s,function(t){return!g.is(t,e.selector)||(a(i(t),b({},n,e),t),!1)})}):void y(s,function(e){a(i(e),n,e)})}var d,c=this,p=function(e){d=e};return c.settings=n,g.bind(window,"ready",u),new a(function(e){d?e(d):p=function(t){e(t)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),c(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),h||(h=function(){t.fire("BeforeUnload")},g.bind(window,"beforeunload",h)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,i=this,r=i.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void y(g.select(e),function(e){n=r[e.id],n&&i.remove(n)})):(n=e,r[n.id]?(p(n)&&i.fire("RemoveEditor",{editor:n}),r.length||g.unbind(window,"beforeunload",h),n.remove(),c(r,r.length>0),n):null);for(t=r.length-1;t>=0;t--)i.remove(r[t])}},execCommand:function(t,n,i){var r=this,o=r.get(i);switch(t){case"mceAddEditor":return r.get(i)||new e(i,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",0,i),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(t,n,i)},triggerSave:function(){y(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},b(m,s),m.setup(),window.tinymce=window.tinyMCE=m,m}),r("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function r(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=i(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(n,i){"html4"===t.settings.schema&&e(i,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",r))})})}),r("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(e,t){var n={send:function(e){function i(){!e.async||4==r.readyState||o++>1e4?(e.success&&o<1e4&&200==r.status?e.success.call(e.success_scope,""+r.responseText,r,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",r,e),r=null):setTimeout(i,10)}var r,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),r=new XMLHttpRequest){if(r.overrideMimeType&&r.overrideMimeType(e.content_type),r.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(r.withCredentials=!0),e.content_type&&r.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){r.setRequestHeader(e.key,e.value)}),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=n.fire("beforeSend",{xhr:r,settings:e}).xhr,r.send(e.data),!e.async)return i();setTimeout(i,10)}}};return t.extend(n,e),n}),r("tinymce/util/JSON",[],function(){function e(t,n){var i,r,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(i=r.indexOf(t),i+1?"\\"+r.charAt(i+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,r="[";i<t.length;i++)r+=(i>0?",":"")+e(t[i],n);return r+"]"}r="{";for(a in t)t.hasOwnProperty(a)&&(r+="function"!=typeof t[a]?(r.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return r+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),r("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,n){function i(e){this.settings=r({},e),this.count=0}var r=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,o=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,r):o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),r("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var i=this,r=e.DOM,o=t.count!==n?t.count:i.count,a="tinymce_jsonp_"+o;i.callbacks[o]=function(e){r.remove(a),delete i.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:a,src:t.url,type:"text/javascript"}),i.count++}}}),r("tinymce/util/LocalStorage",[],function(){function e(){s=[];for(var e in a)s.push(e);r.length=s.length}function t(){function t(e){var t,i;return i=e!==n?d+e:r.indexOf(",",d),i===-1||i>r.length?null:(t=r.substring(d,i),d=i+1,t)}var i,r,s,d=0;if(a={},u){o.load(l),r=o.getAttribute(l)||"";do{var c=t();if(null===c)break;if(i=t(parseInt(c,32)||0),null!==i){if(c=t(),null===c)break;s=t(parseInt(c,32)||0),i&&(a[i]=s)}}while(null!==i);e()}}function i(){var t,n="";if(u){for(var i in a)t=a[i],n+=(n?",":"")+i.length.toString(32)+","+i+","+t.length.toString(32)+","+t;o.setAttribute(l,n);try{o.save(l)}catch(e){}e()}}var r,o,a,s,l,u;try{if(window.localStorage)return localStorage}catch(e){}return l="tinymce",o=document.documentElement,u=!!o.addBehavior,u&&o.addBehavior("#default#userData"),r={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,i()},removeItem:function(e){delete a[e],i()},clear:function(){a={},i()}},t(),r}),r("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,n,i,r,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,r.each(r,function(e,t){a[t]=e}),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,i,r,o=this,a=o.settings;t=a.firstControlClass,n=a.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(a.controlClass),e.visible()&&(i||(i=e),r=e)}),i&&i.classes.add(t),r&&r.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),r("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,r=t.state.get("icon"),o=t.state.get("text"),a="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(t.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+t.encode(o)+"</span>"),r=t.settings.icon?i+"ico "+i+"i-"+r:"",'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+a+"</button></div>"},bindStates:function(){function e(e){var r=n("span."+i,t.getEl());e?(r[0]||(n("button:first",t.getEl()).append('<span class="'+i+'"></span>'),r=n("span."+i,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,i=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var i=n.value,r=t.classPrefix;t.settings.icon=i,i=i?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];i?(a&&a==o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=i):a&&o.removeChild(a),e(t.state.get("text"))}),t._super()}})}),r("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,o=r.getElementsByTagName("i")[0];n?(o&&o==r.firstChild||(o=document.createElement("i"),r.insertBefore(o,r.firstChild)),o.className=n):o&&r.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}})}),r("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils","tinymce/dom/DomQuery"],function(e,t,n,i){return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,o=t.getEl();if(i.contains(o,r)||r==o)for(;r&&r!=o;)r.id&&r.id.indexOf("-open")!=-1&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){var i=t.state.get("value"),r=t.getEl("inp").value;if(e.preventDefault(),t.state.set("value",r),i!=r&&t.fire("change"),n.hasEventListeners("submit")&&n.toJSON)return n.fire("submit",{data:n.toJSON()}),!1})}),t.on("keyup",function(e){"INPUT"==e.target.nodeName&&t.state.set("value",e.target.value)})},showMenu:function(){var e,n=this,i=n.settings;n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,r=this,o=r.getEl(),a=r.getEl("open"),s=r.layoutRect();e=a?s.w-n.getSize(a).width-10:s.w-10;var l=document;return l.all&&(!l.documentMode||l.documentMode<=8)&&(t=r.layoutRect().h-2+"px"),i(o.firstChild).css({width:e,lineHeight:t}),r._super(),r},postRender:function(){var e=this;return i(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,i=n._id,r=n.settings,o=n.classPrefix,a=n.state.get("value")||"",s="",l="";return"spellcheck"in r&&(l+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(l+=' maxlength="'+r.maxLength+'"'),r.size&&(l+=' size="'+r.size+'"'),r.subtype&&(l+=' type="'+r.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),e=r.icon,e&&"caret"!=e&&(e=o+"ico "+o+"i-"+r.icon),t=n.state.get("text"),(e||t)&&(s='<div id="'+i+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+i+'" class="'+n.classes+'"><input id="'+i+'-inp" class="'+o+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(r.placeholder)+'" />'+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e._super()},remove:function(){i(this.getEl("inp")).off(),this._super()}})}),r("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),r("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,e.panel=new t(i).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),r("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return i&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=e||n.getParent(i.target,"."+e.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(e,i))}),delete e.settings.onclick,e._super()}})}),r("tinymce/util/Color",[],function(){function e(e){function r(e,r,o){var a,s,l,u,d,c;return a=0,s=0,l=0,e/=255,r/=255,o/=255,d=t(e,t(r,o)),c=n(e,n(r,o)),d==c?(l=d,{h:0,s:0,v:100*l}):(u=e==d?r-o:o==d?e-r:o-e,a=e==d?3:o==d?1:5,a=60*(a-u/(c-d)),s=(c-d)/c,l=c,{h:i(a),s:i(100*s),v:i(100*l)})}function o(e,r,o){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,r=parseInt(r,10)/100,o=parseInt(o,10)/100,r=n(0,t(r,1)),o=n(0,t(o,1)),0===r)return void(c=p=f=i(255*o));switch(a=e/60,s=o*r,l=s*(1-Math.abs(a%2-1)),u=o-s,Math.floor(a)){case 0:c=s,p=l,f=0;break;case 1:c=l,p=s,f=0;break;case 2:c=0,p=s,f=l;break;case 3:c=0,p=l,f=s;break;case 4:c=l,p=0,f=s;break;case 5:c=s,p=0,f=l;break;default:c=p=f=0}c=i(255*(c+u)),p=i(255*(p+u)),f=i(255*(f+u))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(c)+e(p)+e(f)}function s(){return{r:c,g:p,b:f}}function l(){return r(c,p,f)}function u(e){var t;return"object"==typeof e?"r"in e?(c=e.r,p=e.g,f=e.b):"v"in e&&o(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(c=parseInt(t[1],10),p=parseInt(t[2],10),f=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(c=parseInt(t[1],16),p=parseInt(t[2],16),f=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(c=parseInt(t[1]+t[1],16),p=parseInt(t[2]+t[2],16),f=parseInt(t[3]+t[3],16)),c=c<0?0:c>255?255:c,p=p<0?0:p>255?255:p,f=f<0?0:f>255?255:f,d}var d=this,c=0,p=0,f=0;e&&u(e),d.toRgb=s,d.toHsv=l,d.toHex=a,d.parse=u}var t=Math.min,n=Math.max,i=Math.round;return e}),r("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var i,r,o=n.getPos(e);return i=t.pageX-o.x,r=t.pageY-o.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:i,y:r}}function r(e,t){var r=(360-e.h)/360;n.css(u,{top:100*r+"%"}),t||n.css(c,{left:e.s+"%",top:100-e.v+"%"}),d.style.background=new i({s:100,v:100,h:e.h}).toHex(),p.color().parse({s:e.s,v:e.v,h:e.h})}function o(t){var n;n=e(d,t),s.s=100*n.x,s.v=100*(1-n.y),r(s),p.fire("change")}function a(t){var n;n=e(l,t),s=f.toHsv(),s.h=360*(1-n.y),r(s,!0),p.fire("change")}var s,l,u,d,c,p=this,f=p.color();l=p.getEl("h"),u=p.getEl("hp"),d=p.getEl("sv"),c=p.getEl("svp"),p._repaint=function(){s=f.toHsv(),r(s)},p._super(),p._svdraghelper=new t(p._id+"-sv",{start:o,drag:o}),p._hdraghelper=new t(p._id+"-h",{start:a,drag:a}),p._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){function e(){var e,t,n,i,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=o.split(","),e=0,t=i.length-1;e<t;e++)a+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}var t,n=this,i=n._id,r=n.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");";return t='<div id="'+i+'-h" class="'+r+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+i+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+i+'" class="'+n.classes+'"><div id="'+i+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+i+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),r("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,i=this,r=e||[],o="",a=i.classPrefix;for(t=0,n=r.length;t<n;t++)o+=(t>0?'<div class="'+a+'divider" aria-hidden="true"> '+i.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(t==n-1?" "+a+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+i._id+"-"+t+'" aria-level="'+t+'">'+r[t].name+"</div>";return o||(o='<div class="'+a+'path-item"> </div>'),o}})}),r("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,i=t.activeEditor;return i.settings.elementpath!==!1&&(n.on("select",function(e){i.focus(),i.selection.select(this.row()[e.index].element),i.nodeChanged()}),i.on("nodeChange",function(t){for(var r=[],o=t.parents,a=o.length;a--;)if(1==o[a].nodeType&&!e(o[a])){var s=i.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||r.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}n.row(r)})),n._super()}})}),r("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each(function(i){var r,o=i.settings.label;o&&(r=new t(n.extend({items:{type:"label",id:i._id+"-l",text:o,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults)),r.type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),e.replace(i,r),r.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,i,r=0,o=[];if(t.settings.labelGapCalc!==!1)for(i="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),i.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,o.push(t)}),n=t.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=r+n}var t=this;t._super(),t.on("show",e),e()}})}),r("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(e,t){return e.extend({init:function(e){var n,i,r,o=this,a=tinymce.activeEditor,s=a.settings;e.spellcheck=!1,r=s.file_picker_types||s.file_browser_callback_types,r&&(r=t.makeMap(r,/[, ]/)),r&&!r[e.filetype]||(i=s.file_picker_callback,!i||r&&!r[e.filetype]?(i=s.file_browser_callback,!i||r&&!r[e.filetype]||(n=function(){i(o.getEl("inp").id,o.value(),e.filetype,window)})):n=function(){var n=o.fire("beforecall").meta;n=t.extend({filetype:e.filetype},n),i.call(a,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),n)}),n&&(e.icon="browse",e.onaction=n),o._super(e)}})}),r("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,d,c,p,f,h,m,g,v,y,b,_,x,C,E,w,T,S,P,k,I,N,M,R,D,A,O,L,B,F,H=[],z=Math.max,U=Math.min;for(i=e.items().filter(":visible"),r=e.layoutRect(),o=e.paddingBox,a=e.settings,p=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,"row-reversed"!=p&&"column-reverse"!=p||(i=i.set(i.toArray().reverse()),p=p.split("-")[0]),"column"==p?(T="y",E="h",w="minH",S="maxH",k="innerH",P="top",I="deltaH",N="contentH",O="left",D="w",M="x",R="innerW",A="minW",L="right",B="deltaW",F="contentW"):(T="x",E="w",w="minW",S="maxW",k="innerW",P="left",I="deltaW",N="contentW",O="top",D="h",M="y",R="innerH",A="minH",L="bottom",B="deltaH",F="contentH"),c=r[k]-o[P]-o[P],C=d=0,t=0,n=i.length;t<n;t++)f=i[t],h=f.layoutRect(),m=f.settings,g=m.flex,c-=t<n-1?u:0,g>0&&(d+=g,h[S]&&H.push(f),h.flex=g),c-=h[w],v=o[O]+h[A]+o[L],v>C&&(C=v);if(_={},c<0?_[w]=r[w]-c+r[I]:_[w]=r[k]-c+r[I],_[A]=C+r[B],_[N]=r[k]-c,_[F]=C,_.minW=U(_.minW,r.maxW),_.minH=U(_.minH,r.maxH),_.minW=z(_.minW,r.startMinWidth),_.minH=z(_.minH,r.startMinHeight),!r.autoResize||_.minW==r.minW&&_.minH==r.minH){for(b=c/d,t=0,n=H.length;t<n;t++)f=H[t],h=f.layoutRect(),y=h[S],v=h[w]+h.flex*b,v>y?(c-=h[S]-h[w],d-=h.flex,h.flex=0,h.maxFlexSize=y):h.maxFlexSize=0;for(b=c/d,x=o[P],_={},0===d&&("end"==l?x=c+o[P]:"center"==l?(x=Math.round(r[k]/2-(r[k]-c)/2)+o[P],x<0&&(x=o[P])):"justify"==l&&(x=o[P],u=Math.floor(c/(i.length-1)))),_[M]=o[O],t=0,n=i.length;t<n;t++)f=i[t],h=f.layoutRect(),v=h.maxFlexSize||h[w],"center"===s?_[M]=Math.round(r[R]/2-h[D]/2):"stretch"===s?(_[D]=z(h[A]||0,r[R]-o[O]-o[L]),_[M]=o[O]):"end"===s&&(_[M]=r[R]-h[D]-o.top),h.flex>0&&(v+=h.flex*b),_[E]=v,_[T]=x,f.layoutRect(_),f.recalc&&f.recalc(),x+=v+u}else if(_.w=_.minW,_.h=_.minH,e.layoutRect(_),this.recalc(e),null===e._lastRect){var V=e.parent();V&&(V._lastRect=null,V.recalc())}}})}),r("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),r("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(e,t,n,i,r,o){function a(e){function t(t,n){return function(){var i=this;e.on("nodeChange",function(r){var o=e.formatter,a=null;s(r.parents,function(e){if(s(t,function(t){if(n?o.matchNode(e,n,{
value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),i.value(a)})}}function i(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function r(){function t(e){var n=[];if(e)return s(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=t(e.items);else{var a=e.format||"custom"+i++;e.format||(e.name=a,r.push(e)),o.format=a,o.cmd=e.cmd}n.push(o)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?o.concat(e.settings.style_formats):o:e.settings.style_formats||o)}var i=0,r=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(r,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&u(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function o(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function a(t){return function(){function n(){return!!e.undoManager&&e.undoManager[t]()}var i=this;t="redo"==t?"hasRedo":"hasUndo",i.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(e.readonly||!n())})}}function l(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function u(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var d;d=r(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:o(n),onclick:function(){u(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:o(n)})}),e.addButton("undo",{tooltip:"Undo",onPostRender:a("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:a("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:a("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:a("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:l,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),s({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:d}),e.addButton("formatselect",function(){var n=[],r=i(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return s(r,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:r[0][0],values:n,fixedWidth:!0,onselect:u,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=i(e.settings.font_formats||n);return s(o,function(e){r.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")==-1?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:t(r,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],i="8pt 10pt 12pt 14pt 18pt 24pt 36pt",r=e.settings.fontsize_formats||i;return s(r.split(" "),function(e){var t=e,i=e,r=e.split("=");r.length>1&&(t=r[0],i=r[1]),n.push({text:t,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:d})}var s=i.each;r.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return r.translate(e)},t.tooltips=!o.iOS}),r("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,r,o,a,s,l,u,d,c,p,f,h,m,g,v,y,b,_,x,C,E,w,T,S,P,k,I,N=[],M=[];t=e.settings,r=e.items().filter(":visible"),o=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,_=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,k="reverseRows"in t?t.reverseRows:e.isRtl(),_&&"string"==typeof _&&(_=[_]),x&&"string"==typeof x&&(x=[x]);for(c=0;c<i;c++)N.push(0);for(p=0;p<n;p++)M.push(0);for(p=0;p<n;p++)for(c=0;c<i&&(d=r[p*i+c],d);c++)u=d.layoutRect(),w=u.minW,T=u.minH,N[c]=w>N[c]?w:N[c],M[p]=T>M[p]?T:M[p];for(S=o.innerW-g.left-g.right,C=0,c=0;c<i;c++)C+=N[c]+(c>0?y:0),S-=(c>0?y:0)+N[c];for(P=o.innerH-g.top-g.bottom,E=0,p=0;p<n;p++)E+=M[p]+(p>0?b:0),P-=(p>0?b:0)+M[p];if(C+=g.left+g.right,E+=g.top+g.bottom,l={},l.minW=C+(o.w-o.innerW),l.minH=E+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),!o.autoResize||l.minW==o.minW&&l.minH==o.minH){o.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH);var R;R="start"==t.packV?0:P>0?Math.floor(P/n):0;var D=0,A=t.flexWidths;if(A)for(c=0;c<A.length;c++)D+=A[c];else D=i;var O=S/D;for(c=0;c<i;c++)N[c]+=A?A[c]*O:O;for(h=g.top,p=0;p<n;p++){for(f=g.left,s=M[p]+R,c=0;c<i&&(I=k?p*i+i-1-c:p*i+c,d=r[I],d);c++)m=d.settings,u=d.layoutRect(),a=Math.max(N[c],u.startMinWidth),u.x=f,u.y=h,v=m.alignH||(_?_[c]||_[0]:null),"center"==v?u.x=f+a/2-u.w/2:"right"==v?u.x=f+a-u.w:"stretch"==v&&(u.w=a),v=m.alignV||(x?x[c]||x[0]:null),"center"==v?u.y=h+s/2-u.h/2:"bottom"==v?u.y=h+s-u.h:"stretch"==v&&(u.h=s),d.layoutRect(u),f+=a+y,d.recalc&&d.recalc();h+=s+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var L=e.parent();L&&(L._lastRect=null,L.recalc())}}})}),r("tinymce/ui/Iframe",["tinymce/ui/Widget","tinymce/util/Delay"],function(e,t){return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var i=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,n&&n()):t.setTimeout(function(){i.html(e)}),this}})}),r("tinymce/ui/InfoBox",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),r("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var i=t.getSize(e.getEl());i.width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,i=n.settings.forId;return!i&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0],e&&(i=e._id)),i?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+n.encode(n.state.get("text"))+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+n.encode(n.state.get("text"))+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),r("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),r("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),r("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,n){function i(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var r=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(){var e,n=this;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(e=n.state.get("menu")||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=t.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,i=t._id,r=t.classPrefix,o=t.settings.icon,a=t.state.get("text"),s="";return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",a&&(t.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+t.encode(a)+"</span>"),o=t.settings.icon?r+"ico "+r+"i-"+o:"",t.aria("role",t.parent()instanceof n?"menuitem":"button"),'<div id="'+i+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+s+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&i(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,o=e.parent();i&&o&&i instanceof r&&i.parent()==o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return r}),r("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env","tinymce/util/Delay"],function(e,t,n,i){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,i=n.settings,r=n.parent();if(r.items().each(function(e){e!==n&&e.hideMenu()}),i.menu){e=n.menu,e?e.show():(e=i.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var o=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),o),e.rel=o,o="menu-sub-"+o,e.classes.remove(e._lastRel).add(o),e._lastRel=o,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,i,r={};for(r=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)i=r[e[t].toLowerCase()],i&&(e[t]=i);return e.join("+")}var t=this,i=t._id,r=t.settings,o=t.classPrefix,a=t.encode(t.state.get("text")),s=t.settings.icon,l="",u=r.shortcut;return s&&t.parent().classes.add("menu-has-icons"),r.image&&(l=" style=\"background-image: url('"+r.image+"')\""),u&&(u=e(u)),s=o+"ico "+o+"i-"+(t.settings.icon||"none"),'<div id="'+i+'" class="'+t.classes+'" tabindex="-1">'+("-"!==a?'<i class="'+s+'"'+l+"></i> ":"")+("-"!==a?'<span id="'+i+'-text" class="'+o+'text">'+a+"</span>":"")+(u?'<div id="'+i+'-shortcut" class="'+o+'menu-shortcut">'+u+"</div>":"")+(r.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),i.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r("tinymce/ui/Throbber",["tinymce/dom/DomQuery","tinymce/ui/Control","tinymce/util/Delay"],function(e,t,n){return function(i,r){var o,a,s=this,l=t.classPrefix;s.show=function(t,u){function d(){o&&(e(i).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),u&&u())}return s.hide(),o=!0,t?a=n.setTimeout(d,t):d(),s},s.hide=function(){var e=i.lastChild;return n.clearTimeout(a),e&&e.className.indexOf("throbber")!=-1&&e.parentNode.removeChild(e),o=!1,s}}}),r("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/ui/Throbber","tinymce/util/Tools"],function(e,t,n,i){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=i.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,i,r=this;i=r.settings.itemsFactory,i&&(r.throbber||(r.throbber=new n(r.getEl("body"),(!0)),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){return 0===n.length?void r.hide():void(r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded")))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e._super()}})}),r("tinymce/ui/ListBox",["tinymce/ui/MenuButton","tinymce/ui/Menu"],function(e,t){return e.extend({init:function(e){function t(n){for(var o=0;o<n.length;o++){if(i=n[o].selected||e.value===n[o].value)return r=r||n[o].text,a.state.set("value",n[o].value),!0;if(n[o].menu&&t(n[o].menu))return!0}}var n,i,r,o,a=this;a._super(e),e=a.settings,a._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!i&&n.length>0&&(r=n[0].text,a.state.set("value",n[0].value)),a.state.set("menu",n)),a.state.set("text",e.text||r),a.classes.add("listbox"),a.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):a.value(t.control.value()),o=n})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu&&(i=n(e[r].menu,t)))return i}}var i=this;return i.on("show",function(t){e(t.control,i.value())}),i.state.on("change:value",function(e){var t=n(i.state.get("menu"),e.value);t?i.text(t.text):i.text(i.settings.text)}),i._super()}})}),r("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),r("tinymce/ui/SelectBox",["tinymce/ui/Widget"],function(e){function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,n=this,i="";return e=t(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),r("tinymce/ui/Slider",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils"],function(e,t,n){function i(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function r(e,t,n){e.setAttribute("aria-"+t,n)}function o(e,t){var i,o,a,s,l,u;"v"==e.settings.orientation?(s="top",a="height",o="h"):(s="left",a="width",o="w"),u=e.getEl("handle"),i=(e.layoutRect()[o]||100)-n.getSize(u)[a],l=i*((t-e._minValue)/(e._maxValue-e._minValue))+"px",u.style[s]=l,u.style.height=e.layoutRect().h+"px",r(u,"valuenow",t),r(u,"valuetext",""+e.settings.previewFilter(t)),r(u,"valuemin",e._minValue),r(u,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function r(e,t,n){return n*(t-e)-e}function o(t,n){function o(o){var a;a=f.value(),a=r(t,n,e(t,n,a)+.05*o),a=i(a,t,n),f.value(a),f.fire("dragstart",{value:a}),f.fire("drag",{value:a}),f.fire("dragend",{value:a})}f.on("keydown",function(e){switch(e.keyCode){case 37:case 38:o(-1);break;case 39:case 40:o(1)}})}function a(e,r,o){var a,s,l,h,m;f._dragHelper=new t(f._id,{handle:f._id+"-handle",start:function(e){a=e[u],s=parseInt(f.getEl("handle").style[d],10),l=(f.layoutRect()[p]||100)-n.getSize(o)[c],f.fire("dragstart",{value:m})},drag:function(t){var n=t[u]-a;h=i(s+n,0,l),o.style[d]=h+"px",m=e+h/l*(r-e),f.value(m),f.tooltip().text(""+f.settings.previewFilter(m)).show().moveRel(o,"bc tc"),f.fire("drag",{value:m})},stop:function(){f.tooltip().hide(),f.fire("dragend",{value:m})}})}var s,l,u,d,c,p,f=this;s=f._minValue,l=f._maxValue,"v"==f.settings.orientation?(u="screenY",d="top",c="height",p="h"):(u="screenX",d="left",c="width",p="w"),f._super(),o(s,l,f.getEl("handle")),a(s,l,f.getEl("handle"))},repaint:function(){this._super(),o(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){o(e,t.value)}),e._super()}})}),r("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),r("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils","tinymce/dom/DomQuery"],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,i,r=this,o=r.getEl(),a=r.layoutRect();return r._super(),e=o.firstChild,i=o.lastChild,n(e).css({width:a.w-t.getSize(i).width,height:a.h-2}),n(i).css({height:a.h-2}),r},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,r=t.state.get("icon"),o=t.state.get("text"),a="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?i+"ico "+i+"i-"+r:"",o&&(t.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+t.encode(o)+"</span>"),'<div id="'+n+'" class="'+t.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+a+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(r?" ":"")+t._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&n.className.indexOf("open")==-1)return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),r("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/dom/DomQuery","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var o=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,t,i,r=this;t=n.getSize(r.getEl("head")).width,t=t<0?0:t,i=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=i,e.layoutRect({x:0,y:0,w:t,h:i})});var o=n.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=i+o,e=r._super(),e.deltaH+=o,e.innerH=e.h-e.deltaH,e}})}),r("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,i,r,o=this,a=0;e=o.getEl().style,t=o._layoutRect,r=o._lastRepaintRect||{};var s=document;return!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=o.borderBox,i=n.left+n.right+8,a=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-i+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-a+"px",r.h=t.h),o._lastRepaintRect=r,o.fire("repaint",{},!1),o},renderHtml:function(){var e,i,r=this,o=r.settings;return e={id:r._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=o[t]}),r.disabled()&&(e.disabled="disabled"),o.subtype&&(e.type=o.subtype),i=n.create(o.multiline?"textarea":"input",e),i.value=r.state.get("value"),i.className=r.classes,i.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),r("tinymce/Register",[],function(){var e=this||window,t=function(){return e.tinymce};return"function"==typeof e.define&&(e.define.amd||e.define("ephox/tinymce",[],t)),{}}),a(["tinymce/geom/Rect","tinymce/util/Promise","tinymce/util/Delay","tinymce/Env","tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/util/Observable","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/ReflowQueue","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Progress","tinymce/ui/Notification","tinymce/NotificationManager","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/InfoBox","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/MenuItem","tinymce/ui/Throbber","tinymce/ui/Menu","tinymce/ui/ListBox","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/SelectBox","tinymce/ui/Slider","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox"]);
}(this)}).call(window),e.exports=window.tinymce}).call(t,n(0xcf2940d7ada80).setImmediate)},0x978232dc30641:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){w=new m.default,w.map=S,w._isTinyMCE=!0,w.getAttrib=function(e,t){return T.getAttrib(e,t)},w.findSpans=function(e){return void 0===e?T.select("span"):T.select("span",e)},w.hasClass=function(e,t){return T.hasClass(e,t)},w.contents=function(e){return e.childNodes},w.replaceWith=function(e,t){return T.replace(t,e)},w.create=function(e){return T.create("span",{class:"mceItemHidden","data-mce-bogus":1},e)},w.removeParent=function(e){return T.remove(e,!0),e},w.remove=function(e){T.remove(e)},w.setIgnoreStrings(e.getParam("atd_ignore_strings",[]).join(",")),w.showTypes(e.getParam("atd_show_types",""))}function n(e){return e.className&&/\bhidden(GrammarError|SpellError|Suggestion)\b/.test(e.className)}function i(t){return w.markMyWords(w.contents(e.getBody()),t)}function r(){e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion").length||(y&&y.hide(),s())}function o(t,n,i){i?S(e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion"),function(e){var t=e.innerText||e.textContent;t===n&&T.remove(e,!0)}):e.dom.remove(t,!0),r()}function s(){for(var t,n=new RegExp("mceItemHidden|hidden(((Grammar|Spell)Error)|Suggestion)"),i=e.dom.select("span"),r=i.length;r--;)t=i[r],t.className&&n.test(t.className)&&e.dom.remove(t,!0);e.setContent(e.getContent({format:"raw"}),{format:"raw"}),E=!1,e.nodeChanged(),e.fire("SpellcheckEnd")}function u(){var e=(0,f.getLocaleSlug)(),t=(0,d.default)(x,function(t){return e===t||0===e.indexOf(t+"-")});return t?t+"."+_:_}function c(t,n,i){e.setProgressState(!0);var r=new XMLHttpRequest;r.open("POST","https://"+u()+"/"+t),r.addEventListener("readystatechange",function(){4===r.readyState&&(e.setProgressState(),200===r.status&&i(""+r.responseText,r))});var o=e.getParam("atd_rpc_id");r.send(l.default.stringify({data:n,key:o}))}function h(e){var t=b.default.get(C)||[];-1===t.indexOf(e)&&t.push(e),v.default.set(C,t)}function g(t){var n=[],i=t.innerText||t.textContent,a=w.findSuggestion(t);a?(n.push({text:a.description,classes:"atd-menu-title",disabled:!0}),a.suggestions.length&&(n.push({text:"-"}),S(a.suggestions,function(e){n.push({text:e,onclick:function(){w.applySuggestion(t,e),r()}})}))):n.push({text:(0,f.translate)("No suggestions",{comment:"Editor proofreading no suggestions"}),classes:"atd-menu-title",disabled:!0}),a&&a.moreinfo&&(n.push({text:"-"}),n.push({text:(0,f.translate)("Explain…",{comment:"Editor proofreading menu item"}),onclick:function(){e.windowManager.open({title:(0,f.translate)("Explain…",{comment:"Editor proofreading menu item"}),url:a.moreinfo,width:480,height:380,inline:!0})}})),n.push.apply(n,[{text:"-"},{text:(0,f.translate)("Ignore suggestion",{comment:"Editor proofreading menu item"}),onclick:function(){o(t,i)}}]),e.getParam("atd_ignore_enable")?n.push({text:(0,f.translate)("Ignore always",{comment:"Editor proofreading menu item"}),onclick:function(){h(i),o(t,i,!0)}}):n.push({text:(0,f.translate)("Ignore all",{comment:"Editor proofreading menu item"}),onclick:function(){o(t,i,!0)}}),y=new P({items:n,target:t}),y.renderTo(document.body),y.on("hide",function(){y=null})}var y,E,w,T,S=a.default.each,P=a.default.ui.Menu.extend({init:function(e){e.context="contextmenu",e.autofix=!1,this.throttledReposition=(0,p.default)(this.reposition.bind(this),200),this.on("autohide",function(e){return e.preventDefault()}),this.boundHideIfNotMarked=this.hideIfNotMarked.bind(this),this._super(e)},hideIfNotMarked:function(e){n(e.target)||this.hide()},hide:function(){this._super(),this.remove(),window.removeEventListener("scroll",this.throttledReposition),e.off("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},postRender:function(){this._super(),this.reposition(),window.addEventListener("scroll",this.throttledReposition),e.on("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},reposition:function(){var t=e.dom.getRoot(),n=a.default.DOM.getPos(e.getContentAreaContainer()),i=e.dom.getPos(this.settings.target);"BODY"===t.nodeName?(i.x-=t.ownerDocument.documentElement.scrollLeft||t.scrollLeft,i.y-=t.ownerDocument.documentElement.scrollTop||t.scrollTop):(i.x-=t.scrollLeft,i.y-=t.scrollTop),n.x+=i.x,n.y+=i.y,this.moveTo(n.x,n.y+this.settings.target.offsetHeight)}});e.on("init",function(){T=e.dom,t(),e.addCommand("mceWritingImprovementTool",function(t){var n,r=0;return"function"!=typeof t&&(t=function(){}),"undefined"!=typeof window.AtD_proofread_click_count&&window.AtD_proofread_click_count++,E?void s():void c("checkDocument",e.getContent({format:"raw"}),function(o,a){return e.setProgressState(),200===a.status&&"html"!==a.responseText.substr(1,4)&&a.responseXML?null!==a.responseXML.getElementsByTagName("message").item(0)?void e.windowManager.alert(a.responseXML.getElementsByTagName("message").item(0).firstChild.data,t(0)):(n=w.processXML(a.responseXML),n.count>0&&(r=i(n.errors)),r?(E=!0,e.fire("SpellcheckStart")):e.windowManager.alert((0,f.translate)("No writing errors were found.",{comment:"Editor proofreading success prompt"})),void t(r)):void e.windowManager.alert((0,f.translate)("There was a problem communicating with the Proofreading service. Try again in one minute.",{comment:"Editor proofreading error"}),t(0))})}),e.settings.content_css!==!1&&T.addStyle(".hiddenSpellError{border-bottom:2px solid red;cursor:default;}.hiddenGrammarError{border-bottom:2px solid green;cursor:default;}.hiddenSuggestion{border-bottom:2px solid blue;cursor:default;}"),e.on("click",function(t){n(t.target)&&(t.preventDefault(),e.selection.select(t.target),g(t.target))})}),function(){function t(){var e=b.default.get(C);e&&w.setIgnoreStrings(e)}e.getParam("atd_ignore_enable")&&(void 0===b.default.getAll()&&v.default.fetch(),e.on("init",function(){b.default.on("change",t)}),e.on("remove",function(){b.default.off("change",t)}))}(),e.on("SpellcheckStart SpellcheckEnd",function(t){e.contentDocument.body.spellcheck="spellcheckend"===t.type,e.contentDocument.body.spellcheck||(e.contentDocument.body.focus(),e.contentDocument.body.blur())}),e.addMenuItem("spellchecker",{text:(0,f.translate)("Proofread Writing",{comment:"Editor proofreading toolbar tooltip"}),context:"tools",cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(E)})}}),e.addButton("spellchecker",{tooltip:(0,f.translate)("Proofread Writing",{comment:"Editor proofreading button tooltip"}),cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(E)})}}),e.on("remove",function(){y&&(y.remove(),y=null)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.default.PluginManager.add("AtD",r)};var o=n(0x976699e5e0db4),a=i(o),s=n(0xd90e2e8d1585a),l=i(s),u=n(5020179656051692),d=i(u),c=n(0xd0219df97eb97),p=i(c),f=n(7572476330282672),h=n(0x5923dd53307e9),m=i(h),g=n(7013801475801899),v=i(g),y=n(0x7325fdfe77d0d),b=i(y),_="service.afterthedeadline.com",x=["en","pt","de","es","fr"],C="editorProofreadIgnore";e.exports=t.default},0x9880b97edca88:function(e,t){"use strict";function n(e){return e.ui.mediaModal.view}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaModalView=n},0x98b3dfa6a747e:function(e,t,n){"use strict";e.exports=n(0xe1e8f0c73b00d)},0x9b11f56529aa0:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return a.default.createElement("li",{onClick:s,className:"select-dropdown__label"},a.default.createElement("label",null,e.children))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(5896763357248615),a=i(o),s=function(e){return e.stopPropagation()};e.exports=t.default},0x9ec567b3debeb:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(7127988529575974),s=i(a),l=n(0x7470881db6733),u=i(l);t.default=o.default.createClass({displayName:"CharMap",propTypes:{onClose:o.default.PropTypes.func,showDialog:o.default.PropTypes.bool,editor:o.default.PropTypes.object},defaultCharMap:function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},renderCell:function(e){return o.default.createElement("div",{key:e[0],onClick:this.onCellClick,role:"button",title:e[1],className:"wpcom-charmap__character"},String.fromCharCode(parseInt(e[0],10)))},onCellClick:function(e){this.props.editor.execCommand("mceInsertContent",!1,e.target.textContent.trim())},getButtons:function(){return[o.default.createElement(u.default,{isPrimary:!1,"aria-label":this.translate("Close special characters dialog"),onClick:this.props.onClose},this.translate("Close"))]},render:function(){return o.default.createElement(s.default,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-charmap__dialog",onClose:this.props.onClose},o.default.createElement("h2",{className:"wpcom-charmap__heading"},this.translate("Special characters")),o.default.createElement("div",{className:"wpcom-charmap__table"},this.defaultCharMap().map(this.renderCell,this)))}}),e.exports=t.default},0xa0300e218a145:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x8817212fc310f),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(5896763357248615),b=i(y),_=n(6280957995252369),x=n(7572476330282672),C=n(0xa505046780b0c),E=i(C),w=n(0xc46966cb87a6f),T=i(w),S=n(72591479426812),P=i(S),k=n(8277184115649475),I=n(7629348406412959),N=n(8693344302354816),M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={showAspectPopover:!1},n.setAspectMenuContext=n.setAspectMenuContext.bind(n),n.onAspectOpen=n.onAspectOpen.bind(n),n.onAspectClose=n.onAspectClose.bind(n),n.rotate=n.rotate.bind(n),n.flip=n.flip.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault(),this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,n=e.showAspectPopover,i=this.props,r=i.translate,o=i.aspectRatio,a=i.allowedAspectRatios;if(t&&1!==a.length){var s=[{action:k.AspectRatios.FREE,label:r("Free")},{action:k.AspectRatios.ORIGINAL,label:r("Original")},{action:k.AspectRatios.ASPECT_1X1,label:r("Square")},{action:k.AspectRatios.ASPECT_16X9,label:r("16:9")},{action:k.AspectRatios.ASPECT_4X3,label:r("4:3")},{action:k.AspectRatios.ASPECT_3X2,label:r("3:2")}];return b.default.createElement(T.default,{isVisible:n,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},s.map(function(e){return a.indexOf(e.action)!==-1?b.default.createElement(P.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},o===e.action&&b.default.createElement(E.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,n=e.allowedAspectRatios,i=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===n.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"layout",text:t("Aspect"),onClick:this.onAspectOpen},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return i.map(function(e){return e?b.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:"image-editor__toolbar-button",onClick:e.onClick},b.default.createElement(E.default,{icon:e.icon}),b.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return b.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(y.Component);M.propTypes={aspectRatio:y.PropTypes.string,imageEditorRotateCounterclockwise:y.PropTypes.func,imageEditorFlip:y.PropTypes.func,setImageEditorAspectRatio:y.PropTypes.func,allowedAspectRatios:y.PropTypes.array},M.defaultProps={imageEditorRotateCounterclockwise:v.default,imageEditorFlip:v.default,setImageEditorAspectRatio:v.default,allowedAspectRatios:(0,m.default)(k.AspectRatios)},t.default=(0,_.connect)(function(e){return{aspectRatio:(0,I.getImageEditorAspectRatio)(e)}},{imageEditorRotateCounterclockwise:N.imageEditorRotateCounterclockwise,imageEditorFlip:N.imageEditorFlip,setImageEditorAspectRatio:N.setImageEditorAspectRatio})((0,x.localize)(M)),e.exports=t.default},0xa0910ac2d5a25:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(6269536571656272),s=i(a),l=n(7613110173109069),u=i(l),d=n(0xcf73c9e6ccc62),c=i(d),p=n(6104353596224629),f=i(p),h=n(0x3f584e1a4360f),m=i(h);t.default=o.default.createClass({displayName:"EditorFeaturedImagePreviewContainer",propTypes:{siteId:r.PropTypes.number.isRequired,itemId:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]).isRequired,maxWidth:r.PropTypes.number},getInitialState:function(){return{image:null}},componentDidMount:function(){this.fetchImage(),c.default.on("change",this.updateImageState)},componentDidUpdate:function(e){var t=this.props,n=t.siteId,i=t.itemId;n===e.siteId&&i===e.itemId||this.fetchImage()},componentWillUnmount:function(){c.default.off("change",this.updateImageState)},fetchImage:function(){var e=this;this.updateImageState(function(){e.state.image||(0,s.default)(function(){u.default.fetch(e.props.siteId,e.props.itemId)})})},updateImageState:function(e){var t=this,n=c.default.get(this.props.siteId,this.props.itemId);this.setState({image:n},function(){"function"==typeof e&&e()}),(0,s.default)(function(){n&&n.ID!==t.props.itemId&&f.default.edit({featured_image:n.ID})})},render:function(){return o.default.createElement(m.default,{image:this.state.image,maxWidth:this.props.maxWidth})}}),e.exports=t.default},0xa25b20d0f839b:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0xeaacda33b2ed2),a=n(0xe923f90582867),s=n(0xac06b1ed1d098),l=function(e){function t(){i(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.getInitialState=function(){return a.Map()},t.prototype.at=function(e){return this.has(e)?void 0:s(!1),this.get(e)},t.prototype.has=function(e){return this.getState().has(e)},t.prototype.get=function(e){return this.getState().get(e)},t.prototype.getAll=function(e,t){var n=this,i=a.Set(e),r=t||a.Map();return r.withMutations(function(e){for(var t=r,o=Array.isArray(t),a=0,t=o?t:t[Symbol.iterator]();;){var s;if(o){if(a>=t.length)break;s=t[a++]}else{if(a=t.next(),a.done)break;s=a.value}var l=s,u=l[0];i.has(u)&&n.has(u)||e.delete(u)}for(var d=i,c=Array.isArray(d),p=0,d=c?d:d[Symbol.iterator]();;){var f;if(c){if(p>=d.length)break;f=d[p++]}else{if(p=d.next(),p.done)break;f=p.value}var h=f;n.has(h)&&e.set(h,n.at(h))}})},t}(o);e.exports=l},0xa3a7282d99c02:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.USER_SUGGESTIONS_RECEIVE,suggestions:t,siteId:e}}function o(e){return function(t){return t({type:l.USER_SUGGESTIONS_REQUEST,siteId:e}),s.default.users().suggest({site_id:e}).then(function(n){t(r(e,n.suggestions)),t({type:l.USER_SUGGESTIONS_REQUEST_SUCCESS,siteId:e,data:n})}).catch(function(n){return t({type:l.USER_SUGGESTIONS_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveUserSuggestions=r,t.requestUserSuggestions=o;var a=n(8478035041892969),s=i(a),l=n(0xd047e5c4c63f8)},0xa43cefeb7a625:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(0x64c31c0caeb4b),g=i(m),v=n(6280957995252369),y=n(8634650774322227),b={requestMedia:y.requestMedia,requestMediaItem:y.requestMediaItem},_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){this.props.siteId===e.siteId&&this.props.mediaId===e.mediaId&&(0,g.default)(this.props.query,e.query)||this.request()}},{key:"request",value:function(){var e=this.props,t=e.siteId,n=e.mediaId,i=e.query,r=!!n;r?this.props.requestMediaItem(t,n):this.props.requestMedia(t,i)}},{key:"render",value:function(){return null}}]),t}(h.Component);_.propTypes={siteId:h.PropTypes.number.isRequired,query:h.PropTypes.object,mediaId:h.PropTypes.number,request:h.PropTypes.func},_.defaultProps={request:function(){}},t.default=(0,v.connect)(null,b)(_),e.exports=t.default},0xa5310149f0ec1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return{type:l.POST_TYPES_TAXONOMIES_RECEIVE,siteId:e,postType:t,taxonomies:n}}function o(e,t){return function(n){return n({type:l.POST_TYPES_TAXONOMIES_REQUEST,siteId:e,postType:t}),s.default.site(e).postType(t).taxonomiesList().then(function(i){var o=i.taxonomies;n(r(e,t,o)),n({type:l.POST_TYPES_TAXONOMIES_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(i){n({type:l.POST_TYPES_TAXONOMIES_REQUEST_FAILURE,siteId:e,postType:t,error:i})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostTypeTaxonomies=r,t.requestPostTypeTaxonomies=o;var a=n(8478035041892969),s=i(a),l=n(0xd047e5c4c63f8)},0xa639d42c9c86f:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a);t.default=o.default.createClass({displayName:"TermTreeSelectorSearch",propTypes:{searchTerm:r.PropTypes.string,onSearch:r.PropTypes.func.isRequired},render:function(){return o.default.createElement("div",{className:"term-tree-selector__search"},o.default.createElement(s.default,{icon:"search",size:18}),o.default.createElement("input",{type:"search",placeholder:this.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}),e.exports=t.default},0xaa068d7de9e4a:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767),u=n(7346600848553968);e.exports=a.createClass({displayName:"CompactFormToggle",render:function(){return a.createElement(u,(0,o.default)({},l(this.props,"className"),{className:s(this.props.className,"is-compact")}),this.props.children)}})},0xae534335c04a6:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767);e.exports=a.createClass({displayName:"FormRadio",render:function(){var e=l(this.props,["className","type"]);return a.createElement("input",(0,o.default)({},e,{type:"radio",className:s(this.props.className,"form-radio")}))}})},0xae7966875cbd1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l),d=n(0xa505046780b0c),c=i(d),p=n(0x5dd72de17825d),f=i(p),h=n(7566439433639150),m=i(h);t.default=o.default.createClass({displayName:"StatusLabel",propTypes:{onClick:o.default.PropTypes.func,post:o.default.PropTypes.object,type:o.default.PropTypes.string,advancedStatus:o.default.PropTypes.bool},mixins:[s.default],getDefaultProps:function(){return{onClick:null,post:null,advancedStatus:!1,type:"post"}},getInitialState:function(){return{currentTime:Date.now()}},componentDidMount:function(){this.currentTimeTimer=setInterval(this.updateCurrentTime,6e4)},componentWillReceiveProps:function(e){e.post!==this.props.post&&this.updateCurrentTime()},componentWillUnmount:function(){clearInterval(this.currentTimeTimer)},render:function(){var e="editor-status-label";return this.props.post?(e=(0,u.default)(e,"is-"+this.props.post.status),this.props.onClick?o.default.createElement("button",{className:e,onClick:this.props.onClick,ref:"statusLabel","aria-label":this.translate("Show advanced status details"),"aria-pressed":!!this.props.advancedStatus,role:"alert","aria-live":"polite"},o.default.createElement(c.default,{icon:"cog",size:18}),this.renderLabel()):o.default.createElement("span",{className:(0,u.default)(e,"is-plain")},this.renderLabel())):o.default.createElement(m.default,{className:e})},renderLabel:function(){var e,t=this.props.post,n=this.moment(f.default.getEditedTime(t));if(!t.modified)return this.translate("New Draft");"draft"===t.status&&n.isAfter(this.state.currentTime)&&(n=this.moment(this.state.currentTime));var i=n.from(this.state.currentTime);switch(t.status){case"publish":e=this.translate("{{strong}}Published{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:i},components:{strong:o.default.createElement("strong",null)}});break;case"private":e=this.translate("{{strong}}Published Privately{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:i},components:{strong:o.default.createElement("strong",null)}});break;case"draft":e=this.translate("{{strong}}Saved{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:i},components:{strong:o.default.createElement("strong",null)}});break;case"pending":e=this.translate("{{strong}}Pending Review{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:i},components:{strong:o.default.createElement("strong",null)}});break;case"future":e=this.translate("{{strong}}Scheduled{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:i},components:{strong:o.default.createElement("strong",null)}});break;case"trash":e=this.translate("{{strong}}Trashed{{/strong}}",{components:{strong:o.default.createElement("strong",null)}});break;default:e=""}return e},updateCurrentTime:function(){this.setState({currentTime:Date.now()})}}),e.exports=t.default},0xafda1ffa4bb63:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x8ae3881d6e8c2),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(0x4a39808d5f717),_=i(b),x=n(7552314505839195),C=n(0x8f1527a7f80c8),E=n(492788797284063),w=n(8723137961575025),T=i(w),S=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.jetpackSite,i=e.siteId,r=e.sitePlanSlug,o=e.siteSlug;return n||!r?null:r===E.PLAN_BUSINESS?null:v.default.createElement("div",{className:(0,m.default)(t,"plan-storage")},v.default.createElement(_.default,{siteId:i}),v.default.createElement(T.default,{siteSlug:o,sitePlanSlug:r,mediaStorage:this.props.mediaStorage},this.props.children))}}]),t}(g.Component);S.propTypes={className:g.PropTypes.string,mediaStorage:g.PropTypes.object,siteId:g.PropTypes.number,sitePlanSlug:g.PropTypes.string,siteSlug:g.PropTypes.string},t.default=(0,y.connect)(function(e,t){var n=t.siteId;return{mediaStorage:(0,x.getMediaStorage)(e,n),jetpackSite:(0,C.isJetpackSite)(e,n),sitePlanSlug:(0,C.getSitePlanSlug)(e,n),siteSlug:(0,C.getSiteSlug)(e,n)}})(S),e.exports=t.default},0xb024e910044c3:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(6442230718320275),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l),d=n(7380496197234269),c=n(0x5a3fcba3e9b9c),p=i(c);t.default=o.default.createClass({displayName:"EditorMediaModalGalleryPreviewShortcode",propTypes:{siteId:r.PropTypes.number,settings:r.PropTypes.object},getInitialState:function(){return{isLoading:!0,shortcode:(0,d.generateGalleryShortcode)(this.props.settings)}},componentWillReceiveProps:function(e){var t=(0,d.generateGalleryShortcode)(e.settings);this.state.shortcode!==t&&this.setState({isLoading:!0,shortcode:t})},setLoaded:function(){this.isMounted()&&this.setState({isLoading:!1})},render:function(){var e=this.props,t=e.siteId,n=e.settings,i=this.state,r=i.isLoading,a=i.shortcode,l=(0,u.default)("editor-media-modal-gallery__preview-shortcode",{"is-loading":r||(0,s.default)(n.items,"transient")});return o.default.createElement("div",{className:l},o.default.createElement(p.default,{siteId:t,onLoad:this.setLoaded},a))}}),e.exports=t.default},0xb139136b8340a:function(e,t,n){"use strict";function i(){return{type:o.DROPZONE_SHOW}}function r(){return{type:o.DROPZONE_HIDE}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=i,t.hideDropZone=r;var o=n(0xd047e5c4c63f8)},0xb143e095a1b27:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5059747709250767),s=i(a),l=n(5896763357248615),u=i(l),d=n(0x8ae3881d6e8c2),c=i(d);t.default=u.default.createClass({
displayName:"FormSettingExplanation",propTypes:{noValidate:u.default.PropTypes.bool,isIndented:u.default.PropTypes.bool,className:u.default.PropTypes.string},getDefaultProps:function(){return{noValidate:!1,isIndented:!1}},render:function(){var e=(0,c.default)(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return u.default.createElement("p",(0,o.default)({},(0,s.default)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}),e.exports=t.default},0xb3ac8a3d65ba9:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){o=e.getContainer()}function n(t){r=t,e.dom.toggleClass(o,"is-pinned",r)}var i=!1,r=!1,o=void 0,a=(0,l.default)(function(){o&&(r&&window.pageYOffset<o.offsetTop?n(!1):!r&&window.pageYOffset>o.offsetTop&&n(!0))},50),s=(0,l.default)(function(r){var o=!e.isHidden(),s="remove"!==r.type&&o&&(0,u.isWithinBreakpoint)(">660px");if(s!==i){var l=(s?"add":"remove")+"EventListener";window[l]("scroll",a),i=s,i?(t(),a()):n(!1)}},200);e.on("init show hide remove",s),window.addEventListener("resize",s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.default.PluginManager.add("wpcom/toolbarpin",r)};var o=n(0x976699e5e0db4),a=i(o),s=n(0xd0219df97eb97),l=i(s),u=n(7123518912576379);e.exports=t.default},0xb560658d4deef:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(5896763357248615),u=i(l),d=n(5059747709250767),c=i(d),p=n(0x45d24eaab7654),f=i(p),h={PENDING:"PENDING",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"};t.default=u.default.createClass({displayName:"ImagePreloader",propTypes:{src:u.default.PropTypes.string,placeholder:u.default.PropTypes.element.isRequired,children:u.default.PropTypes.node,onLoad:u.default.PropTypes.func,onError:u.default.PropTypes.func},getInitialState:function(){return{status:h.PENDING}},componentWillMount:function(){this.createLoader()},componentWillReceiveProps:function(e){e.src!==this.props.src&&this.createLoader(e)},componentWillUnmount:function(){this.destroyLoader()},createLoader:function(e){var t=(e||this.props).src;this.destroyLoader(),this.setState({status:h.LOADING}),t&&(this.image=new Image,this.image.src=t,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete)},destroyLoader:function(){this.image&&(this.image.onload=f.default,this.image.onerror=f.default,delete this.image)},onLoadComplete:function(e){var t=this;return this.destroyLoader(),"load"!==e.type?this.setState({status:h.FAILED},function(){t.props.onError&&t.props.onError(e)}):void this.setState({status:h.LOADED},function(){t.props.onLoad&&t.props.onLoad(e)})},render:function(){var e=void 0,t=void 0;switch(this.state.status){case h.LOADING:e=this.props.placeholder;break;case h.LOADED:t=(0,c.default)(this.props,(0,s.default)(this.constructor.propTypes)),e=u.default.createElement("img",(0,o.default)({src:this.props.src},t));break;case h.FAILED:e=this.props.children}return u.default.createElement("div",{className:"image-preloader"},e)}}),e.exports=t.default},0xb5cc28d413619:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7628562603262516),o=i(r),a=n(8381554966536394),s=i(a),l=n(8776892500958844),u=i(l),d=n(5141390167647390),c=i(d),p=n(8703698825217725),f=i(p),h=n(988599274866424),m=i(h);t.default={dom:o,string:s,shortcode:u,object:c,api:f,unknown:m},e.exports=t.default},0xb73f756b9ac2e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(95905449861643),o=i(r);t.default=function(e){return"string"==typeof e?l.Formats.STRING:"object"===("undefined"==typeof e?"undefined":(0,o.default)(e))&&"string"==typeof e.nodeName?l.Formats.DOM:e&&e.tag&&(0,s.default)(c,e.type)?l.Formats.SHORTCODE:e&&e.type&&(0,s.default)(l.MediaTypes,e.type)?l.Formats.OBJECT:d.default.getMimePrefix(e)?l.Formats.API:l.Formats.UNKNOWN};var a=n(6718701541658404),s=i(a),l=n(6519958819961068),u=n(7380496197234269),d=i(u),c=["closed","self-closing","single"];e.exports=t.default},0xb79f0d8848861:function(e,t,n){"use strict";function i(e){return{mediaLibrarySelectedItems:o.getAll(e)}}var r=n(5896763357248615),o=n(975622464187034),a=n(921923039590806);e.exports=r.createClass({displayName:"MediaLibrarySelectedData",propTypes:{siteId:r.PropTypes.number.isRequired},getInitialState:function(){return i(this.props.siteId)},componentDidMount:function(){o.on("change",this.updateState)},componentWillUnmount:function(){o.off("change",this.updateState)},componentWillReceiveProps:function(e){this.props.siteId!==e.siteId&&this.setState(i(e.siteId))},updateState:function(){this.setState(i(this.props.siteId))},render:function(){return a(this,this.state)}})},0xba0ce520fef8a:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(477028190620861),o=i(r),a=n(4675954658966525),s=i(a),l=n(5059747709250767),u=i(l),d=n(0x90ba166cd016c),c=i(d),p=n(5896763357248615),f=i(p),h=n(5921998412115101),m=i(h),g=n(8130523061664933),v=i(g),y=n(0xe96395f1eded3),b=i(y),_=n(6346297615794200),x=i(_),C=n(0x949dfcdc79aa8),E=i(C),w=n(0x4ce9eddf96ff4),T=i(w),S=n(0xac26052d5c9f7),P=i(S),k=n(0x7a27b5b6e9228),I=i(k),N=(0,s.default)("calypso:infinite-list");e.exports=f.default.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:f.default.PropTypes.array.isRequired,fetchingNextPage:f.default.PropTypes.bool.isRequired,lastPage:f.default.PropTypes.bool.isRequired,guessedItemHeight:f.default.PropTypes.number.isRequired,itemsPerRow:f.default.PropTypes.number,fetchNextPage:f.default.PropTypes.func.isRequired,getItemRef:f.default.PropTypes.func.isRequired,renderItem:f.default.PropTypes.func.isRequired,renderLoadingPlaceholders:f.default.PropTypes.func.isRequired,renderTrailingItems:f.default.PropTypes.func,context:f.default.PropTypes.oneOfType([f.default.PropTypes.object,f.default.PropTypes.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:I.default,componentWillMount:function(){var e=c.default.current,t=void 0,n=void 0;v.default.loadedViaHistory()&&(t=x.default.get(e),n=E.default.get(e)),t&&n&&(N("overriding scrollTop:",n),t.scrollTop=n),this.scrollHelper=new T.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?N("infinite-list positions loaded from store"):(N("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),N("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),v.default.loadedViaHistory()&&this._overrideHistoryScroll(),N("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),v.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new T.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(N("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,P.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=c.default.current,n=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),b.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(n={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,N("new scroll positions",n,this.state),this.smartSetState(n),b.default.storePositions(t,n)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?m.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=m.default.findDOMNode(this),n=[],i=this.state.firstRenderedIndex,r=this.state.lastRenderedIndex,o=e&&e.offsetTop?e.offsetTop:0,a=void 0,s=void 0,l=void 0,u=void 0,d=e&&e.offsetBottom?e.offsetBottom:0;if(d=d||0,r>-1)for(l=t.children,u=1;u<l.length-1;u++)s=t.children[u].getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,(s.top<0&&Math.abs(s.top)<s.height-o||s.top>0&&s.top<a-d)&&n.push({index:i+u-1,bounds:s});return n},render:function(){var e=(0,u.default)(this.props,(0,o.default)(this.constructor.propTypes)),t="infinite-list__spacer",n=void 0,i=this.state.lastRenderedIndex,r=[];for((i===-1||i>this.props.items.length-1)&&(N("resetting lastRenderedIndex, currently at %s, %d items",i,this.props.items.length),i=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),N("reset lastRenderedIndex to %s",i)),N("rendering %d to %d",this.state.firstRenderedIndex,i),n=this.state.firstRenderedIndex;n<=i;n++)r.push(this.props.renderItem(this.props.items[n],n));return this.props.fetchingNextPage&&(r=r.concat(this.props.renderLoadingPlaceholders())),f.default.createElement("div",e,f.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),r,this.props.renderTrailingItems(),f.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(N("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),N("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}})},0xbceb83e51862c:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(0xf0f4288728240),o=n(0x8ae3881d6e8c2),a=n(0x6925a2279f1f8),s=n(5890255058533989),l=n(0x75aac138cedeb),u=i.createClass({displayName:"SectionNav",propTypes:{children:i.PropTypes.node,selectedText:i.PropTypes.node,selectedCount:i.PropTypes.number,hasPinnedItems:i.PropTypes.bool,onMobileNavPanelOpen:i.PropTypes.func},getInitialState:function(){return{mobileOpen:!1}},getDefaultProps:function(){return{onMobileNavPanelOpen:function(){}}},componentWillMount:function(){this.checkForSiblingControls(this.props.children)},componentWillReceiveProps:function(e){r(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())},render:function(){var e,t=this.getChildren();return t?(e=o({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems}),i.createElement("div",{className:e},i.createElement("div",{className:"section-nav__mobile-header",onClick:this.toggleMobileOpenState},i.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText)),i.createElement("div",{className:"section-nav__panel"},t))):(e=o({"section-nav":!0,"is-empty":!0}),i.createElement("div",{className:e},i.createElement("div",{className:"section-nav__panel"},i.createElement(s,null))))},getChildren:function(){return i.Children.map(this.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==a||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===a&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===l&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),i.cloneElement(e,t)):null}.bind(this))},closeMobilePanel:function(){window.innerWidth<480&&this.state.mobileOpen&&this.setState({mobileOpen:!1})},toggleMobileOpenState:function(){var e=!this.state.mobileOpen;this.setState({mobileOpen:e}),e&&this.props.onMobileNavPanelOpen()},generateOnSearch:function(e){return function(){e.apply(this,arguments),this.closeMobilePanel()}.bind(this)},checkForSiblingControls:function(e){this.hasSiblingControls=!1,i.Children.forEach(e,function(e,t){t&&e&&e.type!==l&&(this.hasSiblingControls=!0)}.bind(this))}});e.exports=u},0xbd0e0719f6e72:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){return(0,g.getPreference)(o(),"editorAdvancedVisible")}function n(){var t=e.theme.panel.find(".toolbar:not(.menubar)"),n=(0,h.isWithinBreakpoint)("<960px"),i=0;t.each(function(e,t){var r=n||0===t||u;e.visible(r),r&&(n?i=Math.max(i,e.getEl().clientHeight):i+=e.getEl().clientHeight)}),d.default.DOM.setStyles(e.getContainer(),{"padding-top":i}),p&&p.active(u)}var i=e.getParam("redux_store");if(i){var r=i.dispatch,o=i.getState,s=i.subscribe,u=t(),p=void 0;e.addButton("wpcom_advanced",{text:(0,c.translate)("Toggle Advanced"),tooltip:(0,c.translate)("Toggle Advanced"),classes:"btn wpcom-icon-button advanced",cmd:"WPCOM_ToggleAdvancedVisible",onPostRender:function(){p=this,this.innerHtml(l.default.renderToStaticMarkup(a.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},a.default.createElement(f.default,{icon:"ellipsis",size:28}))))}}),e.addCommand("WPCOM_ToggleAdvancedVisible",function(){r((0,m.savePreference)("editorAdvancedVisible",!u))}),e.on("init",function(){(0,g.isFetchingPreferences)(o())||r((0,m.fetchPreferences)())}),e.on("preInit",function(){e.shortcuts.add("access+z","","WPCOM_ToggleAdvancedVisible")}),e.on("init show",n),window.addEventListener("resize",n),s(function(){var e=t();e!==u&&(u=e,n())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.PluginManager.add("wpcom/advanced",r)};var o=n(5896763357248615),a=i(o),s=n(0x98b3dfa6a747e),l=i(s),u=n(0x976699e5e0db4),d=i(u),c=n(7572476330282672),p=n(0xa505046780b0c),f=i(p),h=n(7123518912576379),m=n(5380278257315674),g=n(4517819237535069);e.exports=t.default},0xbe22cfc549891:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5921998412115101),m=i(h),g=n(5896763357248615),v=i(g),y=n(6450322511845945),b=n(83765757817552),_=i(b),x=n(0x8d16af37d6a7f),C=i(x),E=n(8323279533345669),w=i(E),T=n(0x47248ea013aac),S=i(T),P=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:this.refs.view},this.setHtml)}},{key:"componentDidUpdate",value:function(e,t){this.state.body!==t.body&&this.setHtml(),this.constrainEmbedDimensions()}},{key:"constrainEmbedDimensions",value:function(){if(this.refs.iframe){var e=m.default.findDOMNode(this.refs.view),t=m.default.findDOMNode(this.refs.iframe);if(t.contentDocument){var n=t.contentDocument.querySelector("iframe");if(n&&n.width){var i=parseInt(n.width,10);if(!(i<=e.clientWidth)&&(n.style.width=e.clientWidth+"px",n.height)){var r=parseInt(n.height,10)/i;n.style.height=Math.round(e.clientWidth*r)+"px"}}}}}},{key:"setHtml",value:function(){if(this.state.body&&this.refs.iframe){var e=m.default.findDOMNode(this.refs.iframe);if(e.contentDocument){var t=(0,S.default)((0,_.default)(this.state,"body","scripts","styles"));e.contentDocument.open(),e.contentDocument.write(t),e.contentDocument.body.style.width="100%",e.contentDocument.body.style.overflow="hidden",e.contentDocument.close()}}}},{key:"renderFrame",value:function(){if(this.state.wrapper)return v.default.createElement(C.default,{ref:"iframe",onResize:this.props.onResize,frameBorder:"0",seamless:!0,width:"100%"})}},{key:"render",value:function(){return v.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-embed"},this.renderFrame())}}],[{key:"getStores",value:function(){return[w.default]}},{key:"calculateState",value:function(e,t){return w.default.get(t.content)}}]),t}(g.Component);P.propTypes={siteId:g.PropTypes.number,content:g.PropTypes.string,onResize:g.PropTypes.func},P.defaultProps={onResize:function(){}};var k=y.Container.create(P,{withProps:!0});t.default=k,e.exports=t.default},0xbe8099e1748ed:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(8640881565075096),v=i(g),y=n(0x3f19c8db6e3b5),b=i(y),_=n(5477852257145688),x=i(_),C=n(6442230718320275),E=i(C),w=n(5896763357248615),T=i(w),S=n(6280957995252369),P=n(0xb79f0d8848861),k=i(P),I=n(5040701568233094),N=i(I),M=n(6104353596224629),R=i(M),D=n(7380496197234269),A=n(5172337875599245),O=i(A),L=n(4725747483787960),B=n(0xe6bd8709d6a3c),F=function(e){function t(){var e,n,i,r;(0,u.default)(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=i=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),i.onClose=function(e){e?i.insertMedia(e):i.props.onClose()},r=n,(0,f.default)(i,r)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"insertMedia",value:function(e){var t=e.type,n=e.items,i=e.settings,r=this.props.site,o=void 0,a=void 0,s=(0,x.default)(O.default.get,r);switch(t){case"gallery":o="individual"===(0,v.default)(i,"type")?(0,b.default)(i.items,s).join(""):(0,D.generateGalleryShortcode)(i),a="insert_gallery";break;case"media":default:o=(0,b.default)(n,s).join(""),a="insert_item"}(0,E.default)(n,"transient")&&R.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),o&&(this.props.onInsertMedia(o),a&&this.props.bumpStat("editor_media_actions",a)),this.props.onClose()}},{key:"render",value:function(){var e=this.props.site;return T.default.createElement(k.default,{siteId:(0,v.default)(e,"ID")},T.default.createElement(N.default,(0,o.default)({},this.props,{onClose:this.onClose})))}}]),t}(w.Component);F.propTypes={site:w.PropTypes.object,onInsertMedia:w.PropTypes.func,onClose:w.PropTypes.func},F.defaultProps={onInsertMedia:function(){},onClose:function(){}},t.default=(0,S.connect)(function(e){return{site:(0,B.getSelectedSite)(e)}},{bumpStat:L.bumpStat})(F),e.exports=t.default},0xbfc1d78d01b05:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(7572476330282672),u=i(l),d=n(0xa505046780b0c),c=i(d),p=n(0xdf89f3ebaff8b),f=i(p),h=n(7186610166862683),m=i(h),g=n(7123518912576379),v=i(g),y={windowWidth:480,characterLength:8};t.default=o.default.createClass({displayName:"HeaderCakeBack",mixins:[f.default],propTypes:{onClick:r.PropTypes.func,href:r.PropTypes.string,text:r.PropTypes.string,spacer:r.PropTypes.bool},getDefaultProps:function(){return{spacer:!1,disabled:!1}},hideText:function(e){var t=v.default.getWindowInnerWidth();return t<=y.windowWidth&&e.length>=y.characterLength||t<=300},render:function(){var e=this.props,t=e.text,n=void 0===t?u.default.translate("Back"):t,i=e.href,r=e.onClick,a=e.spacer,l=e.icon,d=(0,s.default)({"header-cake__back":!0,"is-spacer":a,"is-action":!!l});return o.default.createElement(m.default,{compact:!0,borderless:!0,className:d,href:i,onClick:r,disabled:a},o.default.createElement(c.default,{icon:l||"arrow-left",size:18}),!this.hideText(n)&&n)},onWindowResize:function(){this.forceUpdate()}}),e.exports=t.default},0xbfe8d6d726d55:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xbfad9041fa583),s=i(a),l=n(8133512704209156),u=i(l),d=n(474432612430512);t.default=o.default.createClass({displayName:"MediaLibraryListNoContent",propTypes:{site:o.default.PropTypes.object,filter:o.default.PropTypes.string},getLabel:function(){switch(this.props.filter){case"images":return this.translate("You don't have any images.",{textOnly:!0,context:"Media no results"});case"videos":return this.translate("You don't have any videos.",{textOnly:!0,context:"Media no results"});case"audio":return this.translate("You don't have any audio files.",{textOnly:!0,context:"Media no results"});case"documents":return this.translate("You don't have any documents.",{textOnly:!0,context:"Media no results"});default:return this.translate("You don't have any media.",{textOnly:!0,context:"Media no results"})}},render:function(){var e=void 0,t=void 0;return(0,d.userCan)("upload_files",this.props.site)&&(e=this.translate("Would you like to upload something?"),t=o.default.createElement(u.default,{className:"button is-primary",site:this.props.site},this.translate("Upload Media"))),o.default.createElement(s.default,{title:this.getLabel(),line:e,action:t,illustration:"/calypso/images/media/illustration-media.svg",illustrationWidth:150})}}),e.exports=t.default},0xbff38eca5e16d:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767);e.exports=a.createClass({displayName:"FormInputCheckbox",render:function(){var e=l(this.props,["className","type"]);return a.createElement("input",(0,o.default)({},e,{type:"checkbox",className:s(this.props.className,"form-checkbox")}))}})},0xc142161262f7e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return!(!Array.isArray(e)||0===e.length)&&(0,s.default)(e,function(e){return"radio"!==e.type&&"select"!==e.type?!!e.label:!!e.label&&!!e.options})}function o(e){var t=e?e.split(",").map(function(e){return e.trim()}):[];return(0,s.default)(t,u.default.validate)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateFormFields=r,t.validateSettingsToEmail=o;var a=n(8144892545705911),s=i(a),l=n(460768211778561),u=i(l)},0xc1e8e66f15266:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(0xa5310149f0ec1),v=n(0x3e6242fdbac66),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.postType===e.postType||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestPostTypeTaxonomies(e.siteId,e.postType)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(h.Component);y.propTypes={siteId:h.PropTypes.number,postType:h.PropTypes.string.isRequired,requesting:h.PropTypes.bool.isRequired,requestPostTypeTaxonomies:h.PropTypes.func.isRequired},t.default=(0,m.connect)(function(e,t){return{requesting:(0,v.isRequestingPostTypeTaxonomies)(e,t.siteId,t.postType)}},{requestPostTypeTaxonomies:g.requestPostTypeTaxonomies})(y),e.exports=t.default},0xc4a28bf84c2aa:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=l.default.next("wpvideo",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}function o(e){return encodeURIComponent(e)}function a(){return d.default}Object.defineProperty(t,"__esModule",{value:!0}),t.match=r,t.serialize=o,t.getComponent=a;var s=n(5106151372138902),l=i(s),u=n(5564679258395031),d=i(u)},0xc540c5b85c2ff:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a),l=n(7082708682668568),u=i(l),d=n(0x3a83e8cbe848e),c=i(d),p=n(0x5dd72de17825d),f=i(p),h=n(5369935525269188),m=i(h),g=n(7186610166862683),v=i(g),y=n(4595189797701980),b=i(y),_=n(0xae7966875cbd1),x=i(_),C=function(e){n.e(0xf996ef8ca3aa4,function(t){e(n(967096454627967).__esModule?n(967096454627967).default:n(967096454627967))})};t.default=o.default.createClass({displayName:"EditorActionBar",propTypes:{isNew:o.default.PropTypes.bool,onPrivatePublish:o.default.PropTypes.func,post:o.default.PropTypes.object,savedPost:o.default.PropTypes.object,site:o.default.PropTypes.object,type:o.default.PropTypes.string},getInitialState:function(){return{viewLinkTooltip:!1}},render:function(){var e=this,t=this.props.site&&!this.props.site.single_user_site;return o.default.createElement("div",{className:"editor-action-bar"},o.default.createElement("div",{className:"editor-action-bar__cell is-left"},o.default.createElement(x.default,{post:this.props.savedPost,advancedStatus:!0,type:this.props.type})),o.default.createElement("div",{className:"editor-action-bar__cell is-center"},t&&o.default.createElement(u.default,{require:C,post:this.props.post,isNew:this.props.isNew})),o.default.createElement("div",{className:"editor-action-bar__cell is-right"},this.props.post&&"post"===this.props.type&&o.default.createElement(c.default,null),f.default.isPublished(this.props.savedPost)&&o.default.createElement(v.default,{href:this.props.savedPost.URL,target:"_blank",rel:"noopener noreferrer",onMouseEnter:function(){return e.setState({viewLinkTooltip:!0})},onMouseLeave:function(){return e.setState({viewLinkTooltip:!1})},ref:"viewLink",borderless:!0},o.default.createElement(s.default,{icon:"external"}),o.default.createElement(m.default,{className:"editor-action-bar__view-post-tooltip",context:this.refs&&this.refs.viewLink,isVisible:this.state.viewLinkTooltip,position:"bottom left"},o.default.createElement(b.default,null)))))}}),e.exports=t.default},0xc7ac4c49328af:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(19189154744278),l=a.createClass({displayName:"TokenInput",propTypes:{onChange:a.PropTypes.func,onBlur:a.PropTypes.func,value:a.PropTypes.string,disabled:a.PropTypes.bool},getDefaultProps:function(){return{onChange:function(){},onBlur:function(){},value:"",disabled:!1}},mixins:[s],render:function(){var e=(0,o.default)({},this.props,{onChange:this._onChange});return a.createElement("input",(0,o.default)({ref:"input",type:"text"},e,{size:this.props.value.length+1,className:"token-field__input"}))},focus:function(){this.isMounted()&&this.refs.input.focus()},hasFocus:function(){return this.isMounted()&&this.refs.input===document.activeElement},_onChange:function(e){this.props.onChange({value:e.target.value})}});e.exports=l},0xc9190bc4603c5:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.content,n=e.initial,i=e.load;return t=t.replace(u,function(e,t){return t=t.replace(/\r/,""),t=t.replace(/<br ?\/?>\n?/g,"\n").replace(/<\/?p( [^>]*)?>\n?/g,"\n"),n&&!i||(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),"<pre>"+t+"</pre>"})}function o(e){var t=e.content;return t&&t.indexOf("[")!==-1?t.replace(u,function(e,t){return t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),"<p>"+t+"</p>"}):t}function a(e){e.on("BeforeSetContent",function(e){e.content&&"html"!==e.mode&&(e.content=r(e))}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=o(e))}),e.on("PostProcess",function(e){e.content&&(e.content=o(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapPre=r,t.unwrapPre=o,t.default=function(){l.default.PluginManager.add("wpcom/sourcecode",a)};var s=n(0x976699e5e0db4),l=i(s),u=new RegExp("(?:<p>\\s*)?(?:<pre>\\s*)?(\\[(code|sourcecode)[^\\]]*\\][\\s\\S]*?\\[\\/\\2\\])(?:\\s*<\\/pre>)?(?:\\s*<\\/p>)?","gi")},0xca0552a60cec1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5921998412115101),o=i(r),a=n(5896763357248615),s=i(a),l=n(6718701541658404),u=i(l),d=n(0x8ae3881d6e8c2),c=i(d),p=n(0xa505046780b0c),f=i(p),h=n(6280957995252369),m=n(0x4505d8ebb162c),g=i(m),v=n(6080475287248452),y=i(v),b=n(0x965a288d34003),_=i(b),x=n(0x3e2c4fba474d9),C=i(x),E=n(0xae534335c04a6),w=i(E),T=n(5862851293117563),S=i(T),P=n(0xb143e095a1b27),k=i(P),I=n(7186610166862683),N=i(I),M=n(8326181498771179),R=i(M),D=n(4740245423068679),A=i(D),O=n(6104353596224629),L=i(O),B=n(5084380759969092),F=n(0xdb2b9985047d7),H=i(F),z=n(7996551768540594),U=n(0xe6bd8709d6a3c),V=n(5523398591803755),j=s.default.createClass({
displayName:"EditorVisibility",showingAcceptDialog:!1,getDefaultProps:function(){return{isPrivateSite:!1}},propTypes:{onPrivatePublish:s.default.PropTypes.func,isPrivateSite:s.default.PropTypes.bool,type:s.default.PropTypes.string,status:s.default.PropTypes.string,password:s.default.PropTypes.string,savedStatus:s.default.PropTypes.string,savedPassword:s.default.PropTypes.string,siteId:s.default.PropTypes.number,postId:s.default.PropTypes.number},getInitialState:function(){return{showPopover:!1,passwordIsValid:!0,showVisibilityInfotips:!1}},getVisibility:function(){return this.props.password?"password":"private"===this.props.status?"private":"public"},togglePopover:function(){this.state.showPopover?((0,B.recordStat)("visibility-dialog-closed"),(0,B.recordEvent)("Closed visibility dialog"),this.closePopover()):((0,B.recordStat)("visibility-dialog-opened"),(0,B.recordEvent)("Opened visibility dialog"),this.setState({showPopover:!0}))},closePopover:function(e){var t={};return this.showingAcceptDialog&&e?void e.preventDefault():(e&&"click"===e.type&&e.stopImmediatePropagation(),this.isPasswordValid()?t.showPopover=!1:t.passwordIsValid=!1,void this.setState(t))},isPasswordValid:function(){var e;return"password"!==this.getVisibility()||(e=o.default.findDOMNode(this.refs.postPassword).value.trim(),e.length)},renderVisibilityTip:function(e){var t;if(!this.state.showVisibilityInfotips)return null;switch(e){case"public":t=this.translate("Visible to everyone.",{context:"Post visibility: info text shown when changing post visibility to public."}),this.props.isPrivateSite&&(t=this.translate("Any member of the site can view this post.",{context:"Post visibility: info text shown when changing post visibility to public on a members-only site."}));break;case"private":t=this.translate("Only visible to site admins and editors.",{context:"Post visibility: info text shown when changing post visibility to private."});break;case"password":t=this.translate("Protected with a password you choose. Only those with the password can view this post.",{context:"Post visibility: info text shown when changing post visibility to password protected."})}return s.default.createElement(k.default,{className:e},t)},updateVisibility:function(e){var t=this.props,n=t.siteId,i=t.postId,r="draft"===this.props.status?"draft":"publish",o=e.target.value,a={status:r},s=void 0;switch(o){case"public":s={password:""};break;case"password":s={password:this.props.savedPassword||" "},this.setState({passwordIsValid:!0})}(0,B.recordStat)("visibility-set-"+o),(0,B.recordEvent)("Changed visibility",o),L.default.edit(a),s&&this.props.editPost(n,i,s)},onKey:function(e){(0,u.default)(["Enter","Escape"],e.key)&&this.closePopover()},setPostToPrivate:function(){var e=this.props,t=e.siteId,n=e.postId;L.default.edit({status:"private"}),this.props.editPost(t,n,{password:""}),(0,B.recordStat)("visibility-set-private"),(0,B.recordEvent)("Changed visibility","private")},onPrivatePublish:function(){var e=this;this.setPostToPrivate(),this.setState({showPopover:!1}),setTimeout(function(){return e.props.onPrivatePublish()},0)},onSetToPrivate:function(){var e=this;if("private"===this.props.savedStatus)return void this.setPostToPrivate();this.showingAcceptDialog=!0;var t=void 0;t="page"===this.props.type?this.translate("Private pages are only visible to administrators and editors of this site. Would you like to privately publish this page now?"):this.translate("Private posts are only visible to administrators and editors of this site. Would you like to privately publish this post now?"),(0,H.default)(t,function(t){e.showingAcceptDialog=!1,t&&e.onPrivatePublish()},this.translate("Yes"),this.translate("No"))},onPasswordChange:function(e){var t=this.props,n=t.siteId,i=t.postId,r=e.target.value.trim(),o=r.length>0;this.setState({passwordIsValid:o}),o||(r=" "),this.props.editPost(n,i,{password:r})},renderPasswordInput:function(){var e,t,n;return e=this.props.password?this.props.password.trim():null,t=!this.state.passwordIsValid,n=this.translate("Password is empty.",{context:"Editor: Error shown when password is empty."}),s.default.createElement("div",null,s.default.createElement(S.default,{onKeyUp:this.onKey,onChange:this.onPasswordChange,value:e,isError:t,ref:"postPassword",className:this.state.showVisibilityInfotips?"is-info-open":null,placeholder:this.translate("Create password",{context:"Editor: Create password for post"})}),t?s.default.createElement(y.default,{isError:!0,text:n}):null)},toggleVisibilityInfotips:function(){this.state.showVisibilityInfotips?((0,B.recordEvent)("InfoPopover: Visibility Closed"),this.setState({showVisibilityInfotips:!1})):((0,B.recordEvent)("InfoPopover: Visibility Opened"),this.setState({showVisibilityInfotips:!0}))},render:function(){var e=this.getVisibility(),t={password:"lock",private:"not-visible",public:"visible"},n=(0,c.default)("editor-visibility",{"is-dialog-open":this.state.showPopover,"is-touch":A.default.hasTouch()});return s.default.createElement("div",{className:n},this.translate("Visibility"),s.default.createElement(N.default,{compact:!0,borderless:!0,onClick:this.togglePopover,ref:"setVisibility"},s.default.createElement(f.default,{icon:t[e]||"visible"})," ",e,s.default.createElement(R.default,{className:"editor-visibility__popover",isVisible:this.state.showPopover,onClose:this.closePopover,position:"bottom left",context:this.refs&&this.refs.setVisibility},s.default.createElement("div",{className:"editor-visibility__dialog"},s.default.createElement(g.default,{className:"editor-fieldset"},s.default.createElement(C.default,{className:"editor-fieldset__legend"},this.translate("Post Visibility"),s.default.createElement(f.default,{icon:"info-outline",size:18,className:(0,c.default)("editor-visibility__dialog-info",{is_active:this.state.showVisibilityInfotips}),onClick:this.toggleVisibilityInfotips})),s.default.createElement(_.default,null,s.default.createElement(w.default,{name:"site-visibility",value:"public",onChange:this.updateVisibility,checked:"public"===e}),s.default.createElement("span",null,this.props.isPrivateSite?this.translate("Visible for members of the site",{context:"Editor: Radio label to set post visibility"}):this.translate("Public",{context:"Editor: Radio label to set post visible to public"}))),this.renderVisibilityTip("public"),s.default.createElement(_.default,null,s.default.createElement(w.default,{name:"site-visibility",value:"private",onChange:this.onSetToPrivate,checked:"private"===e}),s.default.createElement("span",null,this.translate("Private",{context:"Editor: Radio label to set post to private"}))),this.renderVisibilityTip("private"),s.default.createElement(_.default,null,s.default.createElement(w.default,{name:"site-visibility",value:"password",onChange:this.updateVisibility,checked:"password"===e}),s.default.createElement("span",null,this.translate("Password Protected",{context:"Editor: Radio label to set post to password protected"}))),this.renderVisibilityTip("password"),"password"===e?this.renderPasswordInput():null)))))}});t.default=(0,h.connect)(function(e){var t=(0,U.getSelectedSiteId)(e),n=(0,V.getEditorPostId)(e);return{siteId:t,postId:n}},{editPost:z.editPost})(j),e.exports=t.default},0xcab3bac218193:function(e,t,n){"use strict";var i=n(0x552832cc667a6);e.exports=i(function(e){(new window.Image).src=e})},0xcab4d46c3278d:function(e,t){"use strict";function n(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,a=e.startIndex,s=e.stopIndex,l=void 0,u=void 0;switch(o){case r:l=a,u=s+n;break;case i:l=a-n,u=s}return{overscanStartIndex:Math.max(0,l),overscanStopIndex:Math.min(t-1,u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=t.SCROLL_DIRECTION_BACKWARD=-1,r=t.SCROLL_DIRECTION_FORWARD=1},0xcb457547016f1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(836058157808856),s=i(a);t.default=o.default.createClass({displayName:"ContactFormDialogFieldHeader",propTypes:{label:r.PropTypes.string.isRequired,type:r.PropTypes.string.isRequired,options:r.PropTypes.string,required:r.PropTypes.bool},getLegend:function(){if(this.props.options){var e=this.props.options.split(",").length;return this.props.required?this.translate('Required field "%(fieldName)s" with %(numOption)d option','Required field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,s.default)(this.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."}):this.translate('Optional field "%(fieldName)s" with %(numOption)d option','Optional field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,s.default)(this.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."})}return this.props.required?this.translate('Required field "%(fieldName)s"',{args:{fieldName:(0,s.default)(this.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."}):this.translate('Optional field "%(fieldName)s"',{args:{fieldName:(0,s.default)(this.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."})},render:function(){return o.default.createElement("div",null,o.default.createElement("div",null,this.props.label),o.default.createElement("div",null,o.default.createElement("small",null,this.getLegend())))}}),e.exports=t.default},0xcc466803b7af0:function(e,t){(function(){tinymce.PluginManager.add("directionality",function(e){function t(t){var n,i=e.dom,r=e.selection.getSelectedBlocks();r.length&&(n=i.getAttrib(r[0],"dir"),tinymce.each(r,function(e){i.getParent(e.parentNode,"*[dir='"+t+"']",i.getRoot())||(n!=t?i.setAttrib(e,"dir",t):i.setAttrib(e,"dir",null))}),e.nodeChanged())}function n(e){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")}e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:n("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:n("rtl")})})}).call(window)},0xccbf267b4a70b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(6280957995252369),u=n(78648220391165),d=n(0xa505046780b0c),c=i(d),p=n(7123518912576379),f=n(8326181498771179),h=i(f),m=n(0xbff38eca5e16d),g=i(m),v=n(7186610166862683),y=i(v),b=n(5380278257315674),_=n(4517819237535069),x=n(0xe6bd8709d6a3c),C=n(0xd424d627de403),E=i(C),w=o.default.createClass({displayName:"EditorMediaModalGalleryHelp",mixins:[s.default],propTypes:{onDismiss:r.PropTypes.func,sectionName:r.PropTypes.string},getInitialState:function(){return{isDismissed:!1,rememberDismiss:!0}},getDefaultProps:function(){return{onDismiss:function(){}}},setRenderContext:function(e){e&&this.setState({renderContext:e})},toggleRememberDismiss:function(){var e=this;setTimeout(function(){e.setState({rememberDismiss:!e.state.rememberDismiss})},0)},dismiss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.remember;this.setState({isDismissed:!0}),this.props.onDismiss({remember:t})},renderPopover:function(){var e=this,t=this.state,n=t.renderContext,i=t.isDismissed;if(n&&!i)return o.default.createElement(h.default,{onClose:function(){return e.dismiss()},context:n,position:"bottom",isVisible:!(0,p.isMobile)(),className:"popover__gallery-help is-dialog-visible"},o.default.createElement("div",{className:"editor-media-modal__gallery-help-content"},o.default.createElement("div",{className:"editor-media-modal__gallery-help-instruction"},o.default.createElement("span",{className:"editor-media-modal__gallery-help-icon"},o.default.createElement(c.default,{icon:"image-multiple",size:20})),o.default.createElement("span",{className:"editor-media-modal__gallery-help-text"},this.translate("Select more than one image to create a gallery."))),o.default.createElement("div",{className:"editor-media-modal__gallery-help-actions"},o.default.createElement("label",{className:"editor-media-modal__gallery-help-remember-dismiss"},o.default.createElement(g.default,{checked:this.state.rememberDismiss,onChange:this.toggleRememberDismiss}),o.default.createElement("span",null,this.translate("Don't show again"))),o.default.createElement(y.default,{onClick:function(){return e.dismiss({remember:e.state.rememberDismiss})},compact:!0},this.translate("Got it",{context:"Button label",comment:"User clicks this to confirm that he has understood the text"})))))},render:function(){return"post-editor"!==this.props.sectionName?null:this.props.isMediaModalGalleryInstructionsDismissed?null:o.default.createElement("div",{ref:this.setRenderContext,className:"editor-media-modal__gallery-help"},o.default.createElement(E.default,null),this.renderPopover())}});t.default=(0,l.connect)(function(e){return{sectionName:(0,x.getSectionName)(e),isMediaModalGalleryInstructionsDismissed:(0,_.getPreference)(e,"mediaModalGalleryInstructionsDismissed")||(0,_.getPreference)(e,"mediaModalGalleryInstructionsDismissedForSession")}},function(e){return(0,u.bindActionCreators)({onDismiss:function(e){return e.remember?(0,b.savePreference)("mediaModalGalleryInstructionsDismissed",!0):(0,b.setPreference)("mediaModalGalleryInstructionsDismissedForSession",!0)}},e)})(w),e.exports=t.default},0xd0b910bc30aed:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(8640881565075096),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(5896763357248615),b=i(y),_=n(0x8ae3881d6e8c2),x=i(_),C=n(7572476330282672),E=n(0x8f7d57519e61b),w=i(E),T=n(0xa505046780b0c),S=i(T),P=n(0x6496f72648ef8),k=i(P),I=n(23649646081021),N=i(I),M=n(6183147428912508),R=i(M),D=n(0xff6d7a3192d0f),A=i(D),O=n(8172390258800330),L=i(O),B=n(341838321612891),F=i(B),H=n(7186610166862683),z=i(H),U=n(474432612430512),V=n(0xbc30bb6c305c5),j=i(V),W=n(7380496197234269),q=i(W),G=n(4883949902648912),$=i(G),K=function(e,t){return!!e&&(!!$.default.isEnabled("post-editor/image-editor")&&(!(0,m.default)(t,"is_private")&&(!(0,m.default)(t,"jetpack",!1)||!(0,j.default)((0,m.default)(t,"options.jetpack_version","0.0"),"4.7-alpha","<"))))},Y=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.handleOnRestoreClick=function(){var e=i.props,t=e.site,n=e.item,r=e.onRestore;r(t&&t.ID,n)},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderEditButton",value:function(){var e=this.props,t=e.item,n=e.onEdit,i=e.site,r=e.translate;if(!(0,U.userCan)("upload_files",i))return null;var o=q.default.getMimePrefix(t);return"image"!==o?null:b.default.createElement(z.default,{className:"editor-media-modal-detail__edit",onClick:n,disabled:(0,W.isItemBeingUploaded)(t)},b.default.createElement(S.default,{icon:"pencil",size:36})," ",r("Edit Image"))}},{key:"renderRestoreButton",value:function(){var e=this.props,t=e.item,n=e.translate,i=w.default.parse(t.guid),r=w.default.parse(t.URL);return i.pathname!==r.pathname&&b.default.createElement(z.default,{className:(0,x.default)("editor-media-modal-detail__restore"),onClick:this.handleOnRestoreClick,disabled:(0,W.isItemBeingUploaded)(t)},b.default.createElement(S.default,{icon:"refresh",size:36}),n("Restore Original"))}},{key:"renderImageEditorButtons",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-desktop",n=this.props.site;if(!K(e,n))return null;var i=(0,x.default)("editor-media-modal-detail__edition-bar",t);return b.default.createElement("div",{className:i},this.renderRestoreButton(t),this.renderEditButton())}},{key:"renderFields",value:function(){var e=this.props,t=e.site,n=e.item;return(0,U.userCan)("upload_files",t)?b.default.createElement(k.default,{site:t,item:n}):null}},{key:"renderPreviousItemButton",value:function(){var e=this.props,t=e.hasPreviousItem,n=e.onShowPreviousItem,i=e.translate;return t?b.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__previous"},b.default.createElement(S.default,{icon:"chevron-left",size:36}),b.default.createElement("span",{className:"screen-reader-text"},i("Previous"))):null}},{key:"renderNextItemButton",value:function(){var e=this.props,t=e.hasNextItem,n=e.onShowNextItem,i=e.translate;return t?b.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__next"},b.default.createElement(S.default,{icon:"chevron-right",size:36}),b.default.createElement("span",{className:"screen-reader-text"},i("Next"))):null}},{key:"renderItem",value:function(){var e=this.props,t=e.item,n=e.site;if(!t)return null;var i=q.default.getMimePrefix(t),r=void 0;switch(i){case"image":r=R.default;break;case"video":r=A.default;break;case"audio":r=L.default;break;default:r=F.default}return b.default.createElement(r,{className:"editor-media-modal-detail__preview",site:n,item:t})}},{key:"render",value:function(){var e=this.props.item,t=(0,x.default)("editor-media-modal-detail__item",{"is-loading":!e});return b.default.createElement("figure",{className:t},b.default.createElement("div",{className:"editor-media-modal-detail__content editor-media-modal__content"},b.default.createElement("div",{className:"editor-media-modal-detail__preview-wrapper"},this.renderItem(),this.renderImageEditorButtons(e),this.renderPreviousItemButton(),this.renderNextItemButton()),b.default.createElement("div",{className:"editor-media-modal-detail__sidebar"},this.renderImageEditorButtons(e,"is-mobile"),this.renderFields(),b.default.createElement(N.default,{item:e}))))}}]),t}(y.Component);Y.propTypes={site:y.PropTypes.object,item:y.PropTypes.object,hasPreviousItem:y.PropTypes.bool,hasNextItem:y.PropTypes.bool,onShowPreviousItem:y.PropTypes.func,onShowNextItem:y.PropTypes.func,onEdit:y.PropTypes.func,onRestore:y.PropTypes.func},Y.defaultProps={hasPreviousItem:!1,hasNextItem:!1,onShowPreviousItem:v.default,onShowNextItem:v.default,onEdit:v.default,onRestore:v.default},t.default=(0,C.localize)(Y),e.exports=t.default},0xd27e24cc381e8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=n(0xa505046780b0c),b=i(y),_=n(5369935525269188),x=i(_),C={info:"info",warning:"notice",error:"notice"},E=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.state={},e.setTooltipContext=function(t){t&&e.setState({tooltipContext:t})},e.showTooltip=e.toggleTooltip.bind(e,!0),e.hideTooltip=e.toggleTooltip.bind(e,!1),e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"toggleTooltip",value:function(e){this.setState({isTooltipVisible:e})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.text,i=e.url,r=e.position;return m.default.createElement("a",{href:i,onClick:this.props.onClick,ref:this.setTooltipContext,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,className:(0,v.default)("accordion__status","is-"+t)},m.default.createElement(b.default,{icon:C[t]}),n&&m.default.createElement(x.default,{position:r,isVisible:this.state.isTooltipVisible,context:this.state.tooltipContext},n))}}]),t}(h.PureComponent);E.propTypes={type:h.PropTypes.oneOf(["info","warning","error"]),text:h.PropTypes.node,url:h.PropTypes.string,position:h.PropTypes.string,onClick:h.PropTypes.func},E.defaultProps={type:"info",onClick:function(){}},t.default=E,e.exports=t.default},0xd3916271a22ef:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=function(e){var t=e.username;return o.default.createElement("span",null,"@",t)};a.propTypes={username:o.default.PropTypes.string.isRequired},t.default=a,e.exports=t.default},0xd3942cae2556e:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(0xbb64639c81e11),v=i(g),y=n(0x3f19c8db6e3b5),b=i(y),_=n(619801137403500),x=i(_),C=n(0xf269f492f5361),E=i(C),w=n(5896763357248615),T=i(w),S=n(6280957995252369),P=n(0x730b76f907111),k=i(P),I=n(7438657326200142),N=i(I),M=n(0xbc79ee44c328),R=i(M),D=n(7996551768540594),A=n(0xe6bd8709d6a3c),O=n(5523398591803755),L=n(6007716273106560),B=function(e){function t(e){(0,u.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.onAddTerm=function(e){var t=n.props,i=t.postId,r=t.taxonomyName,o=t.siteId;n.props.addTermForPost(o,r,e,i)},n.boundOnTermsChange=n.onTermsChange.bind(n),n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"onTermsChange",value:function(e){var t=this.props,n=t.postTerms,i=t.taxonomyName,r=t.siteId,a=t.postId,s=(0,E.default)(n)||{},l=(0,v.default)(s[i]),u=(0,x.default)(l,{ID:e.ID});u!==-1?l.splice(u,1):l.push(e),this.props.editPost(r,a,{terms:(0,o.default)({},i,l)})}},{key:"getSelectedTermIds",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName,i=t?t[n]:[];return(0,b.default)(i,"ID")}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.siteId,i=e.taxonomyName,r=e.canEditTerms,o=e.compact;return T.default.createElement("div",null,T.default.createElement(k.default,{analyticsPrefix:"Editor",onChange:this.boundOnTermsChange,selected:this.getSelectedTermIds(),taxonomy:i,siteId:n,multiple:!0,compact:o}),r&&T.default.createElement(N.default,{taxonomy:i,postType:t,onSuccess:this.onAddTerm}))}}]),t}(w.Component);B.propTypes={siteId:w.PropTypes.number,postId:w.PropTypes.number,postTerms:w.PropTypes.object,postType:w.PropTypes.string,taxonomyName:w.PropTypes.string,canEditTerms:w.PropTypes.bool,compact:w.PropTypes.bool},t.default=(0,S.connect)(function(e){var t=(0,A.getSelectedSiteId)(e),n=(0,O.getEditorPostId)(e);return{postType:(0,L.getEditedPostValue)(e,t,(0,O.getEditorPostId)(e),"type"),postTerms:(0,L.getEditedPostValue)(e,t,n,"terms"),canEditTerms:(0,R.default)(e,t,"manage_categories"),siteId:t,postId:n}},{editPost:D.editPost,addTermForPost:D.addTermForPost})(B),e.exports=t.default},0xd7e4aa02a24fb:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0xccd53b671ebb6),a=r(o),s=n(5143893728007863),l=r(s),u=n(5880884711457125),d=r(u),c=n(8173823076638946),p=r(c),f=n(5369032381290393),h=r(f),m=n(7838254689997789),g=r(m),v=n(5896763357248615),y=r(v),b=n(0x8ae3881d6e8c2),_=r(b),x=n(0xa505046780b0c),C=r(x),E=n(6280957995252369),w=n(0xb79f0d8848861),T=r(w),S=n(5040701568233094),P=r(S),k=n(7613110173109069),I=r(k),N=n(6104353596224629),M=r(N),R=n(0x5dd72de17825d),D=r(R),A=n(5084380759969092),O=i(A),L=n(0xa0910ac2d5a25),B=r(L),F=n(7186610166862683),H=r(F),z=n(0x7c3e14028c1b8),U=r(z),V=n(0xa43cefeb7a625),j=r(V),W=n(7572476330282672),q=n(4725747483787960),G=function(e){function t(){var e,n,i,r;(0,l.default)(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=i=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),i.state={isSelecting:!1},i.showMediaModal=function(){var e=i.props,t=e.featuredImage,n=e.site;t&&I.default.setLibrarySelectedItems(n.ID,[t]),i.setState({isSelecting:!0})},i.hideMediaModal=function(){i.setState({isSelecting:!1})},i.setImage=function(e){i.hideMediaModal(),i.props.onImageSelected(),e&&(M.default.edit({featured_image:e.items[0].ID}),O.recordStat("featured_image_set"),O.recordEvent("Featured image set"),i.props.recordTracksEvent("calypso_editor_featured_image_upload",{source:"medialibrary",type:"click"}))},i.renderMediaModal=function(){if(i.props.site)return y.default.createElement(T.default,{siteId:i.props.site.ID},y.default.createElement(P.default,{visible:i.props.selecting||i.state.isSelecting,onClose:i.setImage,site:i.props.site,labels:{confirm:i.props.translate("Set Featured Image")},enabledFilters:["images"],single:!0}))},i.renderCurrentImage=function(){if(i.props.site&&i.props.post){var e=D.default.getFeaturedImageId(i.props.post);if(e)return y.default.createElement(B.default,{siteId:i.props.site.ID,itemId:e,maxWidth:i.props.maxWidth})}},r=n,(0,p.default)(i,r)}return(0,h.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,n=e.post,i=(0,R.getFeaturedImageId)(n),r=(0,_.default)("editor-featured-image",{"is-assigned":!!D.default.getFeaturedImageId(this.props.post)});return y.default.createElement("div",{className:r},t&&i&&(0,g.default)(i)?y.default.createElement(j.default,{siteId:t.ID,mediaId:i}):null,this.renderMediaModal(),y.default.createElement(H.default,{className:"editor-featured-image__current-image",onClick:this.showMediaModal,borderless:!0,compact:!0},this.renderCurrentImage(),y.default.createElement(C.default,{icon:"pencil",className:"editor-featured-image__edit-icon"})))}}]),t}(v.Component);G.propTypes={maxWidth:y.default.PropTypes.number,site:y.default.PropTypes.object,post:y.default.PropTypes.object,selecting:y.default.PropTypes.bool,onImageSelected:y.default.PropTypes.func,featuredImage:y.default.PropTypes.object},G.defaultProps={maxWidth:450,onImageSelected:function(){}},t.default=(0,E.connect)(function(e,t){var n=t.post,i=t.site,r=i&&i.ID,o=(0,R.getFeaturedImageId)(n);return{featuredImage:(0,U.default)(e,r,o)}},{recordTracksEvent:q.recordTracksEvent})((0,W.localize)(G)),e.exports=t.default},0xd8a00252dc682:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r);t.default=o.default.createClass({displayName:"ContactFormViewPreviewRequired",render:function(){return this.props.required?o.default.createElement("em",null," (",this.translate("required"),")"):null}}),e.exports=t.default},0xda03c41286040:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){n(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=i},0xdd1953831d8f6:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(5921998412115101),s=i(a),l=n(0x976699e5e0db4),u=i(l),d=n(0x98b3dfa6a747e),c=n(7572476330282672),p=i(c),f=n(0xa505046780b0c),h=i(f),m=n(0x51b8723849e16),g=i(m),v=function(e){g.default.forEach(function(t){return e.addMenuItem(t.name,{classes:"wpcom-insert-menu__menu-item",cmd:t.cmd,onPostRender:function(){this.innerHtml((0,d.renderToString)(t.item))}})}),e.addButton("wpcom_insert_menu",{type:"splitbutton",title:p.default.translate("Insert content"),classes:"btn wpcom-insert-menu insert-menu",cmd:g.default[0].cmd,menu:g.default.map(function(t){var n=t.name;return e.menuItems[n]}),onPostRender:function(){s.default.render(o.default.createElement(h.default,{icon:"add-outline"}),this.$el[0].children[0])}})};t.default=function(){u.default.PluginManager.add("wpcom/insertmenu",v)},e.exports=t.default},0xdf89f3ebaff8b:function(e,t,n){"use strict";var i=n(0xd0219df97eb97),r={componentDidMount:function(){this._handleWindowResize=i(this.onWindowResize,100),window.addEventListener("resize",this._handleWindowResize)},componentWillUnmount:function(){window.removeEventListener("resize",this._handleWindowResize)}};e.exports=r},0xe02daa8244860:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return function(i){var r=(0,y.default)("temporary");return i(s(e,t,(0,g.default)({},n,{ID:r}))),w.default.site(e).taxonomy(t).term().add(n).then(function(n){return i(s(e,t,n)),n},function(){return h.default.resolve()}).then(function(n){return i(u(e,t,r)),n})}}function o(e,t,n,i,r){return function(o,a){return w.default.site(e).taxonomy(t).term(i).update(r).then(function(i){var r=a(),s=(0,C.default)((0,N.getTerms)(r,e,t),{parent:n}).map(function(e){return(0,g.default)({},e,{parent:i.ID})});o(u(e,t,n)),o(l(e,t,s.concat([i])));var d=(0,k.getSitePostsByTerm)(r,e,t,n);d.forEach(function(r){var a=(0,C.default)(r.terms[t],function(e){return e.ID!==n});a.push(i),o((0,S.editPost)(e,r.ID,{terms:(0,p.default)({},t,a)}))});var c=(0,I.getSiteSettings)(r,e);return"category"===t&&(0,_.default)(c,["default_category"])===n&&i.ID!==n&&o((0,P.updateSiteSettings)(e,{default_category:i.ID})),i})}}function a(e,t,n,i){return function(r,o){return w.default.site(e).taxonomy(t).term(i).delete().then(function(){var i=o(),a=(0,N.getTerm)(i,e,t,n),d=(0,_.default)(a,"post_count",0),c=(0,C.default)((0,N.getTerms)(i,e,t),function(e){return e.parent===n}).map(function(e){return(0,g.default)({},e,{parent:a.parent})});c.length&&r(l(e,t,c));var f=(0,k.getSitePostsByTerm)(i,e,t,n);if(f.forEach(function(i){var o=(0,C.default)(i.terms[t],function(e){return e.ID!==n});r((0,S.editPost)(e,i.ID,{terms:(0,p.default)({},t,o)}))}),"category"===t&&d>0){var h=(0,I.getSiteSettings)(i,e),m=(0,N.getTerm)(i,e,t,(0,_.default)(h,["default_category"]));m&&r(s(e,t,(0,g.default)({},m,{post_count:m.post_count+d})))}r(u(e,t,n))})}}function s(e,t,n){return l(e,t,[n])}function l(e,t,n,i,r){return{type:T.TERMS_RECEIVE,siteId:e,taxonomy:t,terms:n,query:i,found:r}}function u(e,t,n){return{type:T.TERM_REMOVE,siteId:e,taxonomy:t,termId:n}}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(i){return i({type:T.TERMS_REQUEST,siteId:e,taxonomy:t,query:n}),w.default.site(e).taxonomy(t).termsList(n).then(function(r){i({type:T.TERMS_REQUEST_SUCCESS,siteId:e,taxonomy:t,query:n}),i(l(e,t,r.terms,n,r.found))}).catch(function(r){i({type:T.TERMS_REQUEST_FAILURE,siteId:e,taxonomy:t,query:n,error:r})})}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0xc729f06ce7488),p=i(c),f=n(6632847112607300),h=i(f),m=n(5630966280090368),g=i(m),v=n(6772289601052933),y=i(v),b=n(8640881565075096),_=i(b),x=n(0xa8ea23472235c),C=i(x);t.addTerm=r,t.updateTerm=o,t.deleteTerm=a,t.receiveTerm=s,t.receiveTerms=l,t.removeTerm=u,t.requestSiteTerms=d;var E=n(8478035041892969),w=i(E),T=n(0xd047e5c4c63f8),S=n(7996551768540594),P=n(8577545892344610),k=n(6007716273106560),I=n(0xe1187785d15e7),N=n(0xf4d0801157df9)},0xe1e8f0c73b00d:function(e,t,n){"use strict";var i=n(8190611192608525),r=n(7749691109491001),o=n(0xd7d1ca02bb3d8);i.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};e.exports=a},0xe5816b799bd0f:function(e,t,n){"use strict";function i(e){var t=a.get(e.global_ID);t&&s(e,t)||(c[e.global_ID]=e)}function r(e,t){var n=t||{},r=n.global_ID;if(!r)return void l("global_ID is required for a post",t);var o=a.get(r);return o&&"local"===e?void l("existing record (%o), do not overwrite with local response",o):void u.normalizeSync(t,function(e,t){i(t)})}function o(e,t){var n=r.bind(null,t);e.forEach(n)}var a,s=n(0xf0f4288728240),l=n(4675954658966525)("calypso:posts"),u=n(0x5dd72de17825d),d=n(8769427305820155),c={};
a={get:function(e){return c[e]}},a.dispatchToken=d.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var n=t.data.__sync&&t.data.__sync.responseSource;o(t.data.posts,n)}break;case"RECEIVE_UPDATED_POST":t.error||r("server",t.post)}}),e.exports=a},0xe7409a0052965:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(6203271391094927),o=i(r),a=n(0x3f19c8db6e3b5),s=n(5896763357248615),l=n(19189154744278),u=n(0x8ae3881d6e8c2),d=n(6504877943469043),c=s.createClass({displayName:"SuggestionsList",propTypes:{isExpanded:s.PropTypes.bool,match:s.PropTypes.string,displayTransform:s.PropTypes.func.isRequired,onSelect:s.PropTypes.func,suggestions:s.PropTypes.array,selectedIndex:s.PropTypes.number},getDefaultProps:function(){return{isExpanded:!1,match:"",onHover:function(){},onSelect:function(){},suggestions:(0,o.default)([])}},mixins:[l],componentDidUpdate:function(e){var t;e.isExpanded&&this.props.isExpanded&&this.props.selectedIndex>-1&&this.props.scrollIntoView&&(this._scrollingIntoView=!0,t=this.refs.list,d(t.children[this.props.selectedIndex],t,{onlyScrollIfNeeded:!0}),setTimeout(function(){this._scrollingIntoView=!1}.bind(this),100))},_computeSuggestionMatch:function(e){var t,n=this.props.displayTransform(this.props.match||"").toLocaleLowerCase();return 0===n.length?null:(e=this.props.displayTransform(e),t=e.toLocaleLowerCase().indexOf(n),{suggestionBeforeMatch:e.substring(0,t),suggestionMatch:e.substring(t,t+n.length),suggestionAfterMatch:e.substring(t+n.length)})},render:function(){var e=u("token-field__suggestions-list",{"is-expanded":this.props.isExpanded&&this.props.suggestions.length>0});return s.createElement("ul",{ref:"list",className:e,tabIndex:"-1"},this._renderSuggestions())},_renderSuggestions:function(){return a(this.props.suggestions,function(e,t){var n=this._computeSuggestionMatch(e),i=u("token-field__suggestion",{"is-selected":t===this.props.selectedIndex});return s.createElement("li",{className:i,key:e,onMouseDown:this._handleMouseDown,onClick:this._handleClick(e),onMouseEnter:this._handleHover(e)},n?s.createElement("span",null,n.suggestionBeforeMatch,s.createElement("strong",{className:"token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):this.props.displayTransform(e))}.bind(this))},_handleHover:function(e){return function(){this._scrollingIntoView||this.props.onHover(e)}.bind(this)},_handleClick:function(e){return function(){this.props.onSelect(e)}.bind(this)},_handleMouseDown:function(e){e.preventDefault()}});e.exports=c},0xe7c2b215c4243:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x45d24eaab7654),s=i(a),l=n(0x90ba166cd016c),u=i(l),d=n(0x636974ee9c84e),c=i(d),p=n(7127988529575974),f=i(p),h=n(0x7470881db6733),m=i(h),g=n(0x5f3ca1371830b);t.default=o.default.createClass({displayName:"EditorTrashedDialog",getInitialState:function(){return{isPage:this.isPage()}},isPage:function(){return(0,c.default)(u.default.current,"/page/")},getDefaultProps:function(){return{onClose:s.default,onSave:s.default}},propTypes:{onClose:o.default.PropTypes.func,onSave:o.default.PropTypes.func},getDialogButtons:function(){var e=this.state.isPage?this.translate("New Page"):this.translate("New Post");return[o.default.createElement(m.default,{key:"startNewPage",isPrimary:!0,onClick:this.startNewPage},e),o.default.createElement(m.default,{key:"back",isPrimary:!1,onClick:this.props.onClose},this.translate("Close"))]},startNewPage:function(){var e=(0,g.getSiteFragment)(u.default.current),t=this.state.isPage?"/page/":"/post/";(0,u.default)(t+e)},getStrings:function(e){return e?{dialogTitle:this.translate("Invalid Page Address"),dialogContent:this.translate("This page cannot be found. Check the web address or start a new page.")}:{dialogTitle:this.translate("Invalid Post Address"),dialogContent:this.translate("This post cannot be found. Check the web address or start a new post.")}},render:function(){var e=this.getStrings(this.state.isPage);return o.default.createElement(f.default,{isVisible:!0,buttons:this.getDialogButtons()},o.default.createElement("h1",null,e.dialogTitle),o.default.createElement("p",null,e.dialogContent))}}),e.exports=t.default},0xe86527ac8396b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l),d=n(5059747709250767),c=i(d),p=n(5736415905129993),f=i(p),h=n(5862851293117563),m=i(h);t.default=s.default.createClass({displayName:"ClipboardButtonInput",propTypes:{value:a.PropTypes.string,disabled:a.PropTypes.bool,className:a.PropTypes.string},getInitialState:function(){return{isCopied:!1,disabled:!1}},getDefaultProps:function(){return{value:""}},componentWillUnmount:function(){clearTimeout(this.confirmationTimeout),delete this.confirmationTimeout},showConfirmation:function(){var e=this;this.setState({isCopied:!0}),this.confirmationTimeout=setTimeout(function(){e.setState({isCopied:!1})},4e3)},render:function(){var e=this.props,t=e.value,n=e.className,i=e.disabled,r=(0,u.default)("clipboard-button-input",n);return s.default.createElement("span",{className:r},s.default.createElement(m.default,(0,o.default)({},(0,c.default)(this.props,"className"),{type:"text",selectOnFocus:!0,readOnly:!0})),s.default.createElement(f.default,{text:t,onCopy:this.showConfirmation,disabled:i,compact:!0},this.state.isCopied?this.translate("Copied!"):this.translate("Copy",{context:"verb"})))}}),e.exports=t.default},0xe96395f1eded3:function(e,t,n){"use strict";var i=n(8769427305820155),r=n(0x949dfcdc79aa8),o=n(6346297615794200),a=n(0xf0f4288728240),s=n(0xd0219df97eb97),l=null,u=null,d=1e3,c={leading:!1};e.exports={storePositions:s(function(e,t){l||setTimeout(function(){var e=o.get(l.url);a(l.positions,e)||i.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:l.url,positions:l.positions}),l=null},0),l={url:e,positions:t}},d,c),storeScroll:s(function(e,t){u||setTimeout(function(){var e=r.get(u.url);u.scrollPosition!==e&&i.handleViewAction({type:"SCROLL_CHANGED",url:u.url,scrollPosition:u.scrollPosition}),u=null},0),u={url:e,scrollPosition:t}},d,c)}},0xea07a7ab78058:function(e,t,n){n(7526047878087096),e.exports=n(8854536544192095).Math.trunc},0xea09f50d0ac3b:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0x9d103afba06e0),s=i(a),l=n(0x83e42e33e67df),u=i(l),d=n(0xcb7da1b55058e),c=i(d),p=n(0x552832cc667a6),f=i(p),h=n(0x3f19c8db6e3b5),m=i(h),g=n(0xa8ea23472235c),v=i(g),y=n(0xf0f4288728240),b=i(y),_=n(6718701541658404),x=i(_),C=n(411492589843630),E=i(C),w=n(7452954268806788),T=i(w),S=n(5896763357248615),P=i(S),k=n(6280957995252369),I=n(0x8ae3881d6e8c2),N=i(I),M=n(7572476330282672),R=n(5415223332675282),D=i(R),A=n(623310115397031),O=i(A),L=n(5878662102936072),B=i(L),F=n(0xa639d42c9c86f),H=i(F),z=n(6729227089147156),U=n(6920980932387437),V=i(U),j=n(0xe6bd8709d6a3c),W=n(0xf4d0801157df9),q=500,G=100,$=10,K=25,Y=P.default.createClass({displayName:"TermTreeSelectorList",propTypes:{hideTermAndChildren:S.PropTypes.number,terms:S.PropTypes.array,taxonomy:S.PropTypes.string,multiple:S.PropTypes.bool,selected:S.PropTypes.array,search:S.PropTypes.string,siteId:S.PropTypes.number,translate:S.PropTypes.func,defaultTermId:S.PropTypes.number,lastPage:S.PropTypes.number,onSearch:S.PropTypes.func,onChange:S.PropTypes.func,isError:S.PropTypes.bool,height:S.PropTypes.number},getInitialState:function(){return{searchTerm:"",requestedPages:[1]}},getDefaultProps:function(){return{analyticsPrefix:"Category Selector",searchThreshold:8,loading:!0,terms:[],onSearch:function(){},onChange:function(){},onNextPage:function(){},height:300}},componentWillMount:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.list=null,this.termIds=(0,m.default)(this.props.terms,"ID"),this.getTermChildren=(0,f.default)(this.getTermChildren),this.queueRecomputeRowHeights=(0,T.default)(this.recomputeRowHeights),this.debouncedSearch=(0,T.default)(function(){e.props.onSearch(e.state.searchTerm)},q)},componentWillReceiveProps:function(e){e.taxonomy!==this.props.taxonomy&&this.setState(this.getInitialState()),this.props.terms!==e.terms&&(this.getTermChildren.cache.clear(),this.termIds=(0,m.default)(e.terms,"ID"))},componentDidUpdate:function(e){var t=!(0,b.default)(e.selected,this.props.selected)||e.loading&&!this.props.loading||!e.terms&&this.props.terms;t&&this.list.forceUpdateGrid(),this.props.terms!==e.terms&&this.recomputeRowHeights()},recomputeRowHeights:function(){this.list&&(this.list.recomputeRowHeights(),this.isSmall()&&this.forceUpdate())},setSelectorRef:function(e){e&&this.setState({selectorRef:e})},getPageForIndex:function(e){var t=this.props,n=t.query,i=t.lastPage,r=n.number||G,o=Math.ceil(e/r);return Math.max(Math.min(o,i||1/0),1)},setRequestedPages:function(e){var t=e.startIndex,n=e.stopIndex,i=this.state.requestedPages,r=(0,E.default)((0,c.default)(this.getPageForIndex(t-$),this.getPageForIndex(n+$)+1),i);r.length&&this.setState({requestedPages:i.concat(r)})},setItemRef:function(e,t){if(t&&e){var n=this.itemHeights[e.ID]||K,i=t.clientHeight;this.itemHeights[e.ID]=i,n!==i&&this.queueRecomputeRowHeights()}},hasNoSearchResults:function(){return!this.props.loading&&this.props.terms&&!this.props.terms.length&&!!this.state.searchTerm.length},hasNoTerms:function(){return!this.props.loading&&this.props.terms&&!this.props.terms.length},getItem:function(e){if(this.props.terms)return this.props.terms[e]},isSmall:function(){return!(!this.props.terms||this.state.searchTerm)&&this.props.terms.length<this.props.searchThreshold},isRowLoaded:function(e){var t=e.index;return this.props.lastPage||!!this.getItem(t)},getTermChildren:function(e){var t=this.props.terms;return(0,v.default)(t,function(t){var n=t.parent;return n===e})},getItemHeight:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.parent&&!n&&(0,x.default)(this.termIds,e.parent)?0:e.ID===this.props.hideTermAndChildren?0:this.itemHeights[e.ID]?this.itemHeights[e.ID]:(0,u.default)(this.getTermChildren(e.ID),function(e,n){return e+t.getItemHeight(n,!0)},K):K},getRowHeight:function(e){var t=e.index;return this.getItemHeight(this.getItem(t))},getCompactContainerHeight:function(){var e=this;return(0,c.default)(0,this.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},getResultsWidth:function(){var e=this.state.selectorRef;return e?e.clientWidth:0},getRowCount:function(){var e=0;return this.props.terms&&(e+=this.props.terms.length),!this.props.loading&&this.props.terms||(e+=1),e},onSearch:function(e){var t=e.target.value;this.state.searchTerm&&!t&&this.props.onSearch(""),t!==this.state.searchTerm&&(this.hasPerformedSearch||(this.hasPerformedSearch=!0,O.default.ga.recordEvent(this.props.analyticsPrefix,"Performed Term Search")),this.setState({searchTerm:t}),this.debouncedSearch())},setListRef:function(e){this.list=e},renderItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((!e.parent||n||!(0,x.default)(this.termIds,e.parent))&&e.ID!==this.props.hideTermAndChildren){var i=function(){for(var n,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=t.props).onChange.apply(n,[e].concat(r))},r=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.setItemRef.apply(t,[e].concat(i))},o=this.getTermChildren(e.ID),a=this.props,s=a.multiple,l=a.defaultTermId,u=a.translate,d=a.selected,c=e.ID,p=(0,z.decodeEntities)(e.name)||u("Untitled"),f=(0,x.default)(d,c),h=s?"checkbox":"radio",m=s&&f&&l&&1===d.length&&l===c,g=P.default.createElement("input",{type:h,value:c,onChange:i,disabled:m,checked:f});return P.default.createElement("div",{key:c,ref:r,className:"term-tree-selector__list-item"},P.default.createElement("label",null,g,P.default.createElement("span",{className:"term-tree-selector__label"},p)),o.length>0&&P.default.createElement("div",{className:"term-tree-selector__nested-list"},o.map(function(e){return t.renderItem(e,!0)})))}},renderNoResults:function(){if(this.hasNoSearchResults()||this.hasNoTerms())return P.default.createElement("div",{key:"no-results",className:"term-tree-selector__list-item is-empty"},(this.hasNoSearchResults()||!this.props.emptyMessage)&&P.default.createElement(B.default,{createLink:this.props.createLink}),this.hasNoTerms()&&this.props.emptyMessage)},renderRow:function(e){var t=e.index,n=this.getItem(t);return n?this.renderItem(n):P.default.createElement("div",{key:"placeholder",className:"term-tree-selector__list-item is-placeholder"},P.default.createElement("label",null,P.default.createElement("input",{type:this.props.multiple?"checkbox":"radio",disabled:!0,className:"term-tree-selector__input"}),P.default.createElement("span",{className:"term-tree-selector__label"},this.props.translate("Loading…"))))},cellRendererWrapper:function(e){var t=e.key,n=e.style,i=(0,s.default)(e,["key","style"]);return P.default.createElement("div",{key:t,style:n},this.renderRow(i))},render:function(){var e=this.getRowCount(),t=this.isSmall(),n=this.state.searchTerm.length,i=(n>0||!t)&&(this.props.terms||!this.props.terms&&n>0),r=this.props,a=r.className,s=r.isError,l=r.loading,u=r.siteId,d=r.taxonomy,c=r.query,p=r.height,f=(0,N.default)("term-tree-selector",a,{"is-loading":l,"is-small":t,"is-error":s,"is-compact":this.props.compact});return P.default.createElement("div",{ref:this.setSelectorRef,className:f},this.state.requestedPages.map(function(e){return P.default.createElement(V.default,{key:"query-"+e,siteId:u,taxonomy:d,query:(0,o.default)({},c,{page:e})})}),i&&P.default.createElement(H.default,{searchTerm:this.state.searchTerm,onSearch:this.onSearch}),P.default.createElement(D.default,{ref:this.setListRef,width:this.getResultsWidth(),height:t?this.getCompactContainerHeight():p,onRowsRendered:this.setRequestedPages,rowCount:e,estimatedRowSize:K,rowHeight:this.getRowHeight,rowRenderer:this.cellRendererWrapper,noRowsRenderer:this.renderNoResults,className:"term-tree-selector__results"}))}});t.default=(0,k.connect)(function(e,t){var n=(0,j.getSelectedSiteId)(e),i=t.taxonomy,r=t.query;return{loading:(0,W.isRequestingTermsForQueryIgnoringPage)(e,n,i,r),terms:(0,W.getTermsForQueryIgnoringPage)(e,n,i,r),lastPage:(0,W.getTermsLastPageForQuery)(e,n,i,r),siteId:n,query:r}})((0,M.localize)(Y)),e.exports=t.default},0xeaacda33b2ed2:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(7304172455339035),a=n(83079821603588),s=n(0xac06b1ed1d098),l=function(e){function t(n){i(this,t),e.call(this,n),this._state=this.getInitialState()}return r(t,e),t.prototype.getState=function(){return this._state},t.prototype.getInitialState=function(){return a("FluxReduceStore","getInitialState")},t.prototype.reduce=function(e,t){return a("FluxReduceStore","reduce")},t.prototype.areEqual=function(e,t){return e===t},t.prototype.__invokeOnDispatch=function(e){this.__changed=!1;var t=this._state,n=this.reduce(t,e);void 0===n?s(!1):void 0,this.areEqual(t,n)||(this._state=n,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},t}(o);e.exports=l},0xec85148153f7e:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var i=t.cellCount,r=t.cellSizeGetter,o=t.estimatedCellSize;n(this,e),this._cellSizeGetter=r,this._cellCount=i,this._estimatedCellSize=o,this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1}return i(e,[{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize;this._cellCount=t,this._estimatedCellSize=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,i=this._lastMeasuredIndex+1;i<=e;i++){var r=this._cellSizeGetter({index:i});if(null==r||isNaN(r))throw Error("Invalid size returned for cell "+i+" of value "+r);this._cellSizeAndPositionData[i]={offset:n,size:r},n+=r}this._lastMeasuredIndex=e}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,i=e.containerSize,r=e.currentOffset,o=e.targetIndex;if(i<=0)return 0;var a=this.getSizeAndPositionOfCell(o),s=a.offset,l=s-i+a.size,u=void 0;switch(n){case"start":u=s;break;case"end":u=l;break;case"center":u=s-(i-a.size)/2;break;default:u=Math.max(l,Math.min(s,r))}var d=this.getTotalSize();return Math.max(0,Math.min(d-i,u))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset,i=this.getTotalSize();if(0===i)return{};var r=n+t,o=this._findNearestCell(n),a=this.getSizeAndPositionOfCell(o);n=a.offset+a.size;for(var s=o;n<r&&s<this._cellCount-1;)s++,n+=this.getSizeAndPositionOfCell(s).size;return{start:o,stop:s}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e){for(var t=e.high,n=e.low,i=e.offset,r=void 0,o=void 0;n<=t;){if(r=n+Math.floor((t-n)/2),o=this.getSizeAndPositionOfCell(r).offset,o===i)return r;o<i?n=r+1:o>i&&(t=r-1)}if(n>0)return n-1}},{key:"_exponentialSearch",value:function(e){for(var t=e.index,n=e.offset,i=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<n;)t+=i,i*=2;return this._binarySearch({high:Math.min(t,this._cellCount-1),low:Math.floor(t/2),offset:n})}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:n,low:0,offset:e}):this._exponentialSearch({index:n,offset:e})}}]),e}();t.default=r},0xeda8327ee8a41:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0xd424d627de403),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(0xf0f4288728240),u=n(5160034419142391),d=n(7613110173109069),c=n(0x57d0987682136),p=n(975622464187034),f=n(7380496197234269),h=n(8704992829886403),m=n(5972971398089741).default,g=n(7102502412386958),v=n(5008048254971775);e.exports=a.createClass({displayName:"MediaLibrary",mixins:[v],propTypes:{className:a.PropTypes.string,site:a.PropTypes.object,filter:a.PropTypes.string,enabledFilters:a.PropTypes.arrayOf(a.PropTypes.string),search:a.PropTypes.string,onAddMedia:a.PropTypes.func,onFilterChange:a.PropTypes.func,onSearch:a.PropTypes.func,onScaleChange:a.PropTypes.func,onEditItem:a.PropTypes.func,fullScreenDropZone:a.PropTypes.bool,containerWidth:a.PropTypes.number,single:a.PropTypes.bool,scrollable:a.PropTypes.bool},getDefaultProps:function(){return{fullScreenDropZone:!0,onAddMedia:function(){},onScaleChange:function(){},scrollable:!1}},componentDidMount:function(){this.onSearch=this.props.onSearch},componentDidUpdate:function(){this.onSearch=this.props.onSearch},componentWillUnmount:function(){delete this.onSearch},onAddMedia:function(){var e=p.getAll(this.props.site.ID),t=e;this.props.site&&(this.props.filter&&(t=f.filterItemsByMimePrefix(t,h(this.props.filter))),this.props.single&&t.length>1&&(t=t.slice(-1)),l(e,t)||d.setLibrarySelectedItems(this.props.site.ID,t),this.props.onAddMedia())},filterRequiresUpgrade:function(){var e=this.props,t=e.filter,n=e.site;switch(t){case"audio":return!(n&&n.options.upgraded_filetypes_enabled||n.jetpack);case"videos":return!(n&&n.options.videopress_enabled||n.jetpack)}return!1},renderDropZone:function(){return a.createElement(c,{site:this.props.site,filter:this.props.filter,fullScreen:this.props.fullScreenDropZone,onAddMedia:this.onAddMedia})},render:function(){var e,t;return t=a.createElement(u,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),search:this.props.search,containerWidth:this.props.containerWidth,single:this.props.single,scrollable:this.props.scrollable,onAddMedia:this.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,onMediaScaleChange:this.props.onScaleChange,selectedItems:this.props.mediaLibrarySelectedItems,onDeleteItem:this.props.onDeleteItem,onEditItem:this.props.onEditItem,onViewDetails:this.props.onViewDetails}),this.props.site&&(t=a.createElement(g,{siteId:this.props.site.ID},t)),e=s("media-library",{"is-single":this.props.single},this.props.className),a.createElement("div",{className:e},a.createElement(o.default,null),this.renderDropZone(),a.createElement(m,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),enabledFilters:this.props.enabledFilters,search:this.props.search,onFilterChange:this.props.onFilterChange,onSearch:this.doSearch}),t)}})},0xef89aa5779a96:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","alert-container"),e.getContainer().appendChild(t),e.windowManager.alert=function(n,i,r){function o(){a("hide"),"function"==typeof i?i.call(r||e.windowManager):e.focus()}function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";l.default.render(d.default.createElement(p.default,{isVisible:"show"===i,onClose:o,message:e.editorManager.i18n.translate(n)}),t)}a("show")},e.notificationManager.open=function(t){e.windowManager.alert(t.text)}}),e.on("remove",function(){l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0x976699e5e0db4),a=i(o),s=n(5921998412115101),l=i(s),u=n(5896763357248615),d=i(u),c=n(7125958772513228),p=i(c);t.default=function(){a.default.PluginManager.add("wpcom/calypsoalert",r)},e.exports=t.default},0xf3d118a24f723:function(e,t,n){function i(e){return e=r(e),e&&s.test(e)?e.replace(a,o):e}var r=n(6408496380893675),o=n(7543726903783169),a=/&(?:amp|lt|gt|quot|#39|#96);/g,s=RegExp(a.source);e.exports=i},0xf4d0801157df9:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){var r=(0,y.getSerializedTermsQuery)(i);return!!(0,f.default)(e.terms.queryRequests,[t,n,r])}function o(e,t,n,i){var o=a(e,t,n,i);return null!==o&&(0,m.default)(1,o+1).some(function(o){var a=(0,c.default)({},i,{page:o});return r(e,t,n,a)})}function a(e,t,n,i){var r=(0,f.default)(e.terms.queries,[t,n]);if(!r)return null;var o=r.getNumberOfPages(i);return null===o?null:Math.max(o,1)}function s(e,t,n){var i=(0,f.default)(e.terms.queries,[t,n]);return i?i.getItems():null}function l(e,t,n,i){var r=(0,f.default)(e.terms.queries,[t,n]);if(!r)return null;var o=r.getItem(i);return o?o:null}function u(e,t,n,i){var r=(0,f.default)(e.terms.queries,[t,n]);return r?r.getFound(i):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getTermsForQueryIgnoringPage=t.getTermsForQuery=void 0;var d=n(5630966280090368),c=i(d);t.isRequestingTermsForQuery=r,t.isRequestingTermsForQueryIgnoringPage=o,t.getTermsLastPageForQuery=a,t.getTerms=s,t.getTerm=l,t.countFoundTermsForQuery=u;var p=n(8640881565075096),f=i(p),h=n(0xcb7da1b55058e),m=i(h),g=n(5044467350155036),v=i(g),y=n(0x66848a940a850);t.getTermsForQuery=(0,v.default)(function(e,t,n,i){var r=(0,f.default)(e.terms.queries,[t,n]);return r?r.getItems(i):null},function(e,t,n){return(0,f.default)(e.terms.queries,[t,n])},function(e,t,n,i){var r=(0,y.getSerializedTermsQuery)(i);return[t,n,r].join()}),t.getTermsForQueryIgnoringPage=(0,v.default)(function(e,t,n,i){var r=(0,f.default)(e.terms.queries,[t,n]);return r?r.getItemsIgnoringPage(i):null},function(e,t,n){return(0,f.default)(e.terms.queries,[t,n])},function(e,t,n,i){var r=(0,y.getSerializedTermsQueryWithoutPage)(i);return[t,n,r].join()})},0xf5ce934723186:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l),d=n(5369935525269188),c=i(d);t.default=o.default.createClass({displayName:"Token",propTypes:{value:o.default.PropTypes.string.isRequired,displayTransform:o.default.PropTypes.func.isRequired,onClickRemove:o.default.PropTypes.func,status:o.default.PropTypes.oneOf(["error","success","validating"]),isBorderless:o.default.PropTypes.bool,tooltip:o.default.PropTypes.string,disabled:o.default.PropTypes.bool},getDefaultProps:function(){return{onClickRemove:function(){},isBorderless:!1,disabled:!1}},mixins:[s.default],render:function(){var e=this.props,t=e.value,n=e.status,i=e.isBorderless,r=e.tooltip,a=e.displayTransform,s=(0,u.default)("token-field__token",{"is-error":"error"===n,"is-success":"success"===n,"is-validating":"validating"===n,"is-borderless":i,"is-disabled":this.props.disabled});return o.default.createElement("span",{className:s,tabIndex:"-1",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},o.default.createElement("span",{className:"token-field__token-text"},a(t)),o.default.createElement("span",{className:"token-field__remove-token noticon noticon-close-alt",onClick:!this.props.disabled&&this._onClickRemove}),r&&o.default.createElement(c.default,{showOnMobile:!0,context:this,status:n,isVisible:!0,position:"bottom"},r))},_onClickRemove:function(){this.props.onClickRemove({value:this.props.value})}}),e.exports=t.default},0xf8581dc705558:function(e,t,n){"use strict";var i=n(0x8f7d57519e61b),r=n(83765757817552);e.exports=function(e,t){var n=i.parse(e,!0);return t?n.query.s=t:delete n.query.s,n=r(n,"pathname","hash","query"),i.format(n).replace(/\%20/g,"+")}},0xf87db33e549e0:function(e,t,n){"use strict";var i=n(7572476330282672);e.exports={Formats:i.translate("Formats",{context:"TinyMCE"}),Headings:i.translate("Headings",{context:"TinyMCE"}),"Heading 1":i.translate("Heading 1"),"Heading 2":i.translate("Heading 2"),"Heading 3":i.translate("Heading 3"),"Heading 4":i.translate("Heading 4"),"Heading 5":i.translate("Heading 5"),"Heading 6":i.translate("Heading 6"),Blocks:i.translate("Blocks",{context:"TinyMCE",comment:"block tags"}),Paragraph:i.translate("Paragraph"),Blockquote:i.translate("Blockquote"),Div:i.translate("Div",{context:"HTML tag"}),Pre:i.translate("Pre",{context:"HTML tag"}),Preformatted:i.translate("Preformatted",{context:"HTML tag"}),Address:i.translate("Address",{context:"HTML tag"}),Inline:i.translate("Inline",{context:"HTML elements"}),Underline:i.translate("Underline"),Strikethrough:i.translate("Strikethrough"),Subscript:i.translate("Subscript"),Superscript:i.translate("Superscript"),"Clear formatting":i.translate("Clear formatting"),Bold:i.translate("Bold"),Italic:i.translate("Italic"),"Source code":i.translate("Source code"),"Font Family":i.translate("Font Family"),"Font Sizes":i.translate("Font Sizes"),"Align center":i.translate("Align center"),"Align right":i.translate("Align right"),"Align left":i.translate("Align left"),Justify:i.translate("Justify"),"Increase indent":i.translate("Increase indent"),"Decrease indent":i.translate("Decrease indent"),Cut:i.translate("Cut"),Copy:i.translate("Copy"),Paste:i.translate("Paste"),"Select all":i.translate("Select all"),Undo:i.translate("Undo"),Redo:i.translate("Redo"),Ok:i.translate("OK"),Cancel:i.translate("Cancel"),Close:i.translate("Close"),"Visual aids":i.translate("Visual aids"),"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":i.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.")+"\n\n"+i.translate("If you’re looking to paste rich content from Microsoft Word, try turning this option off. The editor will clean up text pasted from Word automatically."),"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":i.translate("Rich Text Area. Press Alt-Shift-H for help"),"You have unsaved changes are you sure you want to navigate away?":i.translate("The changes you made will be lost if you navigate away from this page."),"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":i.translate("Your browser does not support direct access to the clipboard. Please use keyboard shortcuts or your browser’s edit menu instead."),"Bullet list":i.translate("Bulleted list"),"Numbered list":i.translate("Numbered list"),"Toolbar Toggle":i.translate("Toolbar Toggle"),"Insert Read More tag":i.translate("Insert Read More tag"),"Insert Page Break tag":i.translate("Insert Page Break tag"),"No alignment":i.translate("No alignment"),Remove:i.translate("Remove"),"Edit ":i.translate("Edit"),"Horizontal line":i.translate("Horizontal line"),"Text color":i.translate("Text color"),"Paste as text":i.translate("Paste as text")}},0xf973c7cf3a0bf:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.to,n=e.subject,i=e.fields,r=void 0===i?[]:i,o=r.map(function(e){var t=e.label,n=e.type,i=e.options,r=e.required;if(t&&n){var o={tag:"contact-field",type:"self-closing",attrs:(0,s.default)({label:t,type:n,options:i})};return r&&(o.attrs.required=1),u.default.stringify(o)}}).join("");return u.default.stringify({tag:"contact-form",type:"closed",content:o,attrs:(0,s.default)({to:t,subject:n})})}function o(e){if(!e)return null;var t=u.default.parse(e);return t?function(e){var t=e.attrs;t=void 0===t?{}:t;var n=t.named;n=void 0===n?{}:n;for(var i=n.to,r=n.subject,o=e.content,a=[],l=void 0;o&&(l=u.default.next("contact-field",o));){if("attrs"in l.shortcode){var d=l.shortcode.attrs.named,c=d.label,p=d.type,f=d.options,h=d.required,m=(0,s.default)({label:c,type:p,options:f,required:h});"required"in m&&(m.required=!0),a.push(m)}o=o.slice(l.index+l.content.length)}return(0,s.default)({to:i,subject:r,fields:a})}(t):{}}Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=r,t.deserialize=o;var a=n(7208022666315176),s=i(a),l=n(5106151372138902),u=i(l)},0xfc39d08e8350d:function(e,t){"use strict";function n(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var i=n.callback,r=n.indices,o=Object.keys(r),a=!e||o.every(function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0}),s=o.length!==Object.keys(t).length||o.some(function(e){var n=t[e],i=r[e];return Array.isArray(i)?n.join(",")!==i.join(","):n!==i});t=r,a&&s&&i(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},0xfc9c51a29abb6:function(e,t,n){
"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8769427305820155),o=i(r),a=n(8478035041892969),s=i(a);t.default={fetch:function(e,t){var n=s.default.undocumented().site(e),i=void 0;t?(o.default.handleViewAction({type:"FETCH_EMBED",siteId:e,url:t}),i={embed_url:t,force:"wpcom"}):o.default.handleViewAction({type:"FETCH_EMBEDS",siteId:e}),n.embeds(i,function(n,i){t?o.default.handleServerAction({type:"RECEIVE_EMBED",siteId:e,url:t,data:i,error:n}):o.default.handleServerAction({type:"RECEIVE_EMBEDS",siteId:e,embeds:i?i.embeds:null,error:n})})}},e.exports=t.default},0xff00a1437bc26:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,i=e.type,r=e.typeObject,o=e.newPost,s=void 0;return s="post"===i?o?t("New Post",{textOnly:!0}):t("Edit Post",{textOnly:!0}):"page"===i?o?t("New Page",{textOnly:!0}):t("Edit Page",{textOnly:!0}):o?r?r.labels.new_item:t("New",{textOnly:!0}):r?r.labels.edit_item:t("Edit",{context:"verb",textOnly:!0}),a.default.createElement("div",null,n&&"page"!==i&&"post"!==i&&a.default.createElement(p.default,{siteId:n}),a.default.createElement(d.default,{title:s}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5896763357248615),a=i(o),s=n(6280957995252369),l=n(7572476330282672),u=n(4672980129057221),d=i(u),c=n(0xc98cd4e82fe0b),p=i(c),f=n(0xe6bd8709d6a3c),h=n(5523398591803755),m=n(6007716273106560),g=n(7284660551555503);r.propTypes={translate:o.PropTypes.func,siteId:o.PropTypes.number,type:o.PropTypes.string,typeObject:o.PropTypes.object,newPost:o.PropTypes.bool},t.default=(0,s.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,h.getEditorPostId)(e),i=(0,m.getEditedPostValue)(e,t,n,"type");return{siteId:t,type:i,typeObject:(0,g.getPostType)(e,t,i),newPost:(0,h.isEditorNewPost)(e)}})((0,l.localize)(r)),e.exports=t.default},0xff6d7a3192d0f:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(7380496197234269),u=n(7679108601361337);e.exports=o.default.createClass({displayName:"EditorMediaModalDetailPreviewVideo",propTypes:{className:o.default.PropTypes.string,item:o.default.PropTypes.object.isRequired},render:function(){if(l.isVideoPressItem(this.props.item))return o.default.createElement(u,this.props);var e=(0,s.default)(this.props.className,"is-video");return o.default.createElement("video",{src:l.url(this.props.item),controls:!0,className:e})}})},4546992338875139:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0x90ba166cd016c),o=i(r),a=n(7082708682668568),s=i(a),l=n(8379756226737232),u=i(l),d=n(7186610166862683),c=i(d),p=n(0x77b31439ff115),f=i(p),h=n(0x45d24eaab7654),m=n(5896763357248615),g=n(19189154744278),v=n(7572476330282672),y=n(6881822108913591),b=n(0xa505046780b0c),_=n(8326181498771179),x=n(5621169132512541),C=n(0x5dd72de17825d),E=n(474432612430512),w=n(8465445476206728),T=n(5084380759969092),S=function(e){n.e(8751463333862434,function(t){e(n(4597847833630232).__esModule?n(4597847833630232).default:n(4597847833630232))})};t.default=m.createClass({displayName:"EditorGroundControl",propTypes:{hasContent:m.PropTypes.bool,isDirty:m.PropTypes.bool,isSaveBlocked:m.PropTypes.bool,isPublishing:m.PropTypes.bool,isSaving:m.PropTypes.bool,onPreview:m.PropTypes.func,onPublish:m.PropTypes.func,onSave:m.PropTypes.func,onSaveDraft:m.PropTypes.func,onMoreInfoAboutEmailVerify:m.PropTypes.func,post:m.PropTypes.object,savedPost:m.PropTypes.object,setPostDate:m.PropTypes.func,site:m.PropTypes.object,user:m.PropTypes.object,userUtils:m.PropTypes.object,toggleSidebar:m.PropTypes.func,type:m.PropTypes.string},mixins:[g],getDefaultProps:function(){return{hasContent:!1,isDirty:!1,isSaveBlocked:!1,isPublishing:!1,isSaving:!1,onPublish:h,onSaveDraft:h,post:null,savedPost:null,site:{},user:null,userUtils:null,setPostDate:h}},componentDidMount:function(){this.props.user&&this.props.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)},componentWillUnmount:function(){this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification)},updateNeedsVerification:function(){this.setState({needsVerification:this.props.userUtils&&this.props.userUtils.needsVerificationForSite(this.props.site)})},getInitialState:function(){return{showSchedulePopover:!1,showAdvanceStatus:!1,firstDayOfTheMonth:this.getFirstDayOfTheMonth(),lastDayOfTheMonth:this.getLastDayOfTheMonth(),needsVerification:this.props.userUtils&&this.props.userUtils.needsVerificationForSite(this.props.site)}},componentWillReceiveProps:function(e){this.setState({needsVerification:e.userUtils&&e.userUtils.needsVerificationForSite(e.site)}),this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification),e.user&&e.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)},setCurrentMonth:function(e){this.setState({firstDayOfTheMonth:this.getFirstDayOfTheMonth(e),lastDayOfTheMonth:this.getLastDayOfTheMonth(e)})},getPreviewLabel:function(){return C.isPublished(this.props.savedPost)&&this.props.site.jetpack?this.translate("View"):this.translate("Preview")},getVerificationNoticeLabel:function(){var e=(0,l.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t={update:v.translate("To update, check your email and confirm your address."),schedule:v.translate("To schedule, check your email and confirm your address."),publish:v.translate("To publish, check your email and confirm your address."),requestReview:v.translate("To submit for review, check your email and confirm your address.")};return t[e]},toggleSchedulePopover:function(){this.setState({showSchedulePopover:!this.state.showSchedulePopover})},closeSchedulePopover:function(e){if(e){var t=this.props.savedPost&&this.props.savedPost.date?this.moment(this.props.savedPost.date):null;this.setPostDate(t)}this.setState({showSchedulePopover:!1})},renderPostScheduler:function(){var e=E.timezone(this.props.site),t=E.gmtOffset(this.props.site),n=this.props.post&&this.props.post.date?this.props.post.date:null;return m.createElement(s.default,{require:S,selectedDay:n,timezone:e,gmtOffset:t,onDateChange:this.props.setPostDate,onMonthChange:this.setCurrentMonth,site:this.props.site})},schedulePostPopover:function(){var e=this.renderPostScheduler();return m.createElement(_,{isVisible:this.state.showSchedulePopover,onClose:this.closeSchedulePopover,position:"bottom left",context:this.refs&&this.refs.schedulePost,id:"editor-post-schedule"},m.createElement("span",{className:"editor-ground-control__schedule-post"},C.isPage(this.props.post)?e:m.createElement(w,{siteID:this.props.site.ID,status:"publish,future",before:this.state.lastDayOfTheMonth.format(),after:this.state.firstDayOfTheMonth.format(),number:100},e)))},getFirstDayOfTheMonth:function(e){var t=E.timezone(this.props.site);return e=e||this.moment(),C.getOffsetDate(e,t).set({year:e.year(),month:e.month(),date:1,hours:0,minutes:0,seconds:0,milliseconds:0})},getLastDayOfTheMonth:function(e){return this.getFirstDayOfTheMonth(e).add(1,"month").second(-1)},getSaveStatusLabel:function(){return this.props.isSaving?this.translate("Saving…"):this.props.post&&!C.isPublished(this.props.post)&&this.props.post.ID?this.translate("Saved"):null},isSaveEnabled:function(){return!this.props.isSaving&&!this.props.isSaveBlocked&&this.props.isDirty&&this.props.hasContent&&!!this.props.post&&!C.isPublished(this.props.post)},isPreviewEnabled:function(){return this.props.hasContent&&!(this.props.isNew&&!this.props.isDirty)&&!this.props.isSaveBlocked},canPublishPost:function(){return E.userCan("publish_posts",this.props.site)},toggleAdvancedStatus:function(){this.setState({showAdvanceStatus:!this.state.showAdvanceStatus})},onSaveButtonClick:function(){this.props.onSave();var e=C.isPage(this.props.page)?"Clicked Save Page Button":"Clicked Save Post Button";T.recordEvent(e),T.recordStat("save_draft_clicked")},onPreviewButtonClick:function(e){if(this.isPreviewEnabled()){this.props.onPreview(e);var t=C.isPage(this.props.page)?"Clicked Preview Page Button":"Clicked Preview Post Button";T.recordEvent(t)}},render:function(){return m.createElement(y,{className:"editor-ground-control"},m.createElement(c.default,{borderless:!0,className:"editor-ground-control__back",href:"",onClick:o.default.back.bind(o.default,this.props.allPostsUrl),"aria-label":this.translate("Go back")},m.createElement(b,{icon:"arrow-left"})),m.createElement(x,{compact:!0,site:this.props.site,indicator:!1,homeLink:!0,externalLink:!0}),this.state.needsVerification&&m.createElement("div",{className:"editor-ground-control__email-verification-notice",tabIndex:7,onClick:this.props.onMoreInfoAboutEmailVerify},m.createElement(b,{icon:"info",className:"editor-ground-control__email-verification-notice-icon"}),this.getVerificationNoticeLabel()," ",m.createElement("span",{className:"editor-ground-control__email-verification-notice-more"},this.translate("Learn More"))),m.createElement("div",{className:"editor-ground-control__status"},this.isSaveEnabled()&&m.createElement("button",{className:"editor-ground-control__save button is-link",onClick:this.onSaveButtonClick,tabIndex:3},this.translate("Save")),!this.isSaveEnabled()&&m.createElement("span",{className:"editor-ground-control__save-status"},this.getSaveStatusLabel())),m.createElement("div",{className:"editor-ground-control__action-buttons"},m.createElement(c.default,{borderless:!0,className:"editor-ground-control__preview-button",disabled:!this.isPreviewEnabled(),onClick:this.onPreviewButtonClick,tabIndex:4},m.createElement(b,{icon:"visible"})," ",m.createElement("span",{className:"editor-ground-control__button-label"},this.getPreviewLabel())),m.createElement(c.default,{borderless:!0,className:"editor-ground-control__toggle-sidebar",onClick:this.props.toggleSidebar},m.createElement(b,{icon:"cog"})," ",m.createElement("span",{className:"editor-ground-control__button-label"},m.createElement(f.default,{isSettings:!0}))),m.createElement("div",{className:"editor-ground-control__publish-combo"},m.createElement(u.default,{site:this.props.site,post:this.props.post,savedPost:this.props.savedPost,onSave:this.props.onSave,onPublish:this.props.onPublish,tabIndex:5,isPublishing:this.props.isPublishing,isSaveBlocked:this.props.isSaveBlocked,hasContent:this.props.hasContent,needsVerification:this.state.needsVerification,busy:this.props.isPublishing||C.isPublished(this.props.savedPost)&&this.props.isSaving}),this.canPublishPost()&&m.createElement(c.default,{primary:!0,compact:!0,ref:"schedulePost",className:"editor-ground-control__time-button",onClick:this.toggleSchedulePopover,"aria-label":this.translate("Schedule date and time to publish post."),"aria-pressed":!!this.state.showSchedulePopover,title:this.translate("Set date and time"),tabIndex:6},C.isFutureDated(this.props.post)?m.createElement(b,{icon:"scheduled"}):m.createElement(b,{icon:"calendar"}),m.createElement("span",{className:"editor-ground-control__time-button-label"},C.isFutureDated(this.props.post)?this.moment(this.props.post.date).calendar():this.translate("Choose Date")))),this.canPublishPost()&&this.schedulePostPopover()))}}),e.exports=t.default},4595189797701980:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,i=e.typeSlug,r=e.type,o=void 0;return o="page"===i?t("View page"):"post"===i?t("View post"):r?(0,c.decodeEntities)(r.labels.view_item):t("View",{context:"verb"}),l.default.createElement("span",{className:"editor-action-bar__view-label"},n&&"page"!==i&&"post"!==i&&l.default.createElement(v.default,{siteId:n}),o)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(872100829608442),a=i(o),s=n(5896763357248615),l=i(s),u=n(6280957995252369),d=n(7572476330282672),c=n(6729227089147156),p=n(6007716273106560),f=n(0xe6bd8709d6a3c),h=n(5523398591803755),m=n(7284660551555503),g=n(0xc98cd4e82fe0b),v=i(g);r.propTypes={translate:s.PropTypes.func,siteId:s.PropTypes.number,typeSlug:s.PropTypes.string,type:s.PropTypes.object},t.default=(0,u.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n={siteId:t},i=(0,p.getEditedPost)(e,t,(0,h.getEditorPostId)(e));return i?(0,a.default)(n,{typeSlug:i.type,type:(0,m.getPostType)(e,t,i.type)}):n})((0,d.localize)(r)),e.exports=t.default},4615267926548559:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(t){e.execCommand("mceInsertContent",!1,t)}function i(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=N();if(a){if(r({visible:!n.visible}),S.modal||(S.modal=e.getContainer().appendChild(document.createElement("div"))),n.visible&&!o.preserveFocus&&e.focus(!1),n.visible){var l=o.view,u=void 0===l?fe.ModalViews.LIST:l;C.dispatch((0,pe.setEditorMediaModalView)(u))}(0,he.renderWithReduxStore)(T.default.createElement(ee.default,(0,s.default)({},n,{onClose:i.bind(null,{visible:!1}),onInsertMedia:function(e){t(e),i({visible:!1})}})),S.modal,C)}}function r(n){var r=n.visible;return r?(S.dropzone||(S.dropzone=document.createElement("div"),e.getContainer().parentNode.insertBefore(S.dropzone,e.getContainer())),void(0,he.renderWithReduxStore)(T.default.createElement(re.default,{editor:e,sites:ve,onInsertMedia:t,onRenderModal:i}),S.dropzone,C)):void(S.dropzone&&x.default.unmountComponentAtNode(S.dropzone))}function o(e){r({visible:"dragend"===e.type})}function a(t){var n=e.selection.getStart(),i=(0,K.deserialize)(n),r=N();if(i&&r){var o=e.dom.getParent(n,".mceTemp");o&&(e.selection.select(o),i.media.caption=e.dom.$(".wp-caption-dd",o).text());var a=(0,b.default)({},J.default.get(r.ID,i.media.ID));delete a.caption,a=(0,b.default)({},i.media,a);var s=ge.map(function(e){return A($.default.getThumbnailSizeDimensions(e,r),a)}),l=ge.indexOf(i.appearance.size),u=l!==-1?s[l]:A(i.media,a),d=function(e,n){return!(s[n]>1)&&(t>0?s[n]>u:s[n]<u)},c=t>0?m.default:f.default,p=c(ge,d)||ge[ge.length-1],h=X.default.get(r,a,(0,b.default)(i.appearance,{size:p}));e.selection.setContent(h);var g=e.selection.getStart();"IMG"!==g.nodeName&&(g=g.querySelector("img")),g&&(e.selection.select(g),e.selection.controlSelection.showResizeRect(g)),e.nodeChanged()}}function l(e,t){var n=N();if(t.element&&"IMG"===t.element.nodeName&&n){var i=(0,K.deserialize)(t.element),r=(0,b.default)({width:1/0,height:1/0},J.default.get(n.ID,i.media.ID)),o=A(i.media,r),a=!!i.media.transient;if(this.classes.toggle("hidden",a),e){var s=o>=1;this.disabled(s)}else{var l=A($.default.getThumbnailSizeDimensions(ge[0],n),r),u=o<=l||ge[0]===i.appearance.size;this.disabled(u)}}}function d(e){"IMG"===e.target.nodeName&&P()}function p(e){var t=N();t&&(e.content.match(me)||[]).forEach(function(e){var n=(0,K.deserialize)(e);n.media.ID&&!J.default.get(t.ID,n.media.ID)&&setTimeout(function(){q.default.fetch(t.ID,n.media.ID)},0)})}function h(t){if(t.detail&&!(t.detail<2)){var n=(0,D.default)(t.target,".wp-caption-dd",!0);n&&e.selection.select(n)}}function g(t){if(8===t.keyCode||46===t.keyCode){var n=e.selection.getStart(!0);if(e.dom.hasClass(n,"wp-caption-dd")){var i=e.selection.getRng();(8===t.keyCode&&0===i.startOffset||46===t.keyCode&&n.textContent.length===i.endOffset)&&t.preventDefault()}}}function y(t){t||e.dom.select(".wp-caption-dd").forEach(function(t){if(!t.textContent.trim().length){var n=(0,D.default)(t,".wp-caption"),i=n.querySelector("img");e.dom.replace(i,n.parentNode)}})}function _(){var t=!1;return function(n){switch(n.type){case"touchstart":t=!1;break;case"touchmove":t=!0;break;case"touchend":t||"IMG"!==n.target.nodeName||(e.selection.select(n.target),n.preventDefault())}}}var C=e.getParam("redux_store");if(C){var w=C.getState,S={},P=void 0,k=void 0,N=function(){return(0,ce.getSelectedSite)(w())},R=function(){function e(e){return!!n[e]}function t(e){n[e]=!0,k()}var n={};return{isLoaded:e,onLoad:t}}();k=(0,v.default)(function(){var t=!1,n=0,i=void 0,r=void 0,o=N();if(o){var a=!e.isHidden();if(a)r=e.dom.select("img");else{if(i=U.default.getRawContent(),!i)return;r=i.match(me)||[]}r.forEach(function(r){var s=(0,K.deserialize)(r);if(s.media.ID){var l=J.default.get(o.ID,s.media.ID),u=!1,d=null;if(l&&l.isDirty){if(!ye||ye.ID!==l.ID){ye=l;var p=e.dom.select("img.wp-image-"+l.ID);be=p.length}s.media.transient=!0,d=e.dom.getParent(r,".mceTemp"),d&&(l.caption=e.dom.$(".wp-caption-dd",d).text(),u=!0)}if(s.media.transient&&(n++,t=!0),!(!s.media.transient||l&&l.transient)||s.media.transient&&l&&l.isDirty&&l.transient){n--;var f=void 0;if(l){if(l.ID===s.media.ID&&l.URL===s.media.URL)return;var h=!1;l.isDirty&&(h=l.width<s.media.width||l.height<s.media.height);var m=(0,b.default)({},l,s.media,(0,c.default)(l,"ID","URL",h?"width":"",h?"height":""),{transient:!!l.transient}),g=(0,b.default)({},s.appearance,{forceResize:!l.transient&&s.media.width&&s.media.width!==l.width});u||delete m.caption,f=X.default.get(o,m,g),u&&(f=e.wpSetImgCaption(f))}else ne.default.error("An error occurred while uploading the file"),f="";var v={content:f,mode:a?"tinymce":"html"};e.fire("BeforeSetWpcomMedia",v);var y=l.URL;if(!R.isLoaded(y)){var _=new Image;return _.src=y,_.onload=R.onLoad.bind(null,y),_.onerror=_.onload,void n++}var x="";u&&d.outerHTML?(x=d.outerHTML,d.outerHTML=v.content):r.outerHTML?(x=r.outerHTML,r.outerHTML=v.content):x=r,i&&(i=i.replace(x,v.content)),e.undoManager.data=e.undoManager.data.map(function(e){return e.content=e.content.replace(x,v.content),e}),be>0&&(be-=1)}}}),!n&&U.default.isSaveBlocked("MEDIA_MODAL_TRANSIENT_INSERT")&&H.default.unblockSave("MEDIA_MODAL_TRANSIENT_INSERT"),t&&!n&&(a||e.fire("SetTextAreaContent",{content:i}),e.fire("change")),ye&&ye.isDirty&&0===be&&(q.default.edit(o.ID,(0,s.default)({},ye,{isDirty:!1})),be=null)}}),e.addCommand("wpcomAddMedia",function(){var e=N();e&&q.default.clearValidationErrors(e.ID),i({visible:!0})}),e.addButton("wpcom_add_media",{classes:"btn wpcom-icon-button media",cmd:"wpcomAddMedia",title:I.default.translate("Add Media"),onPostRender:function(){this.innerHtml(E.default.renderToStaticMarkup(T.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},T.default.createElement(O.default,{icon:"image-multiple",size:20}))))}}),e.addButton("wp_img_caption",{tooltip:I.default.translate("Caption",{context:"verb"}),icon:"dashicon dashicons-admin-comments",classes:"toolbar-segment-start toolbar-segment-end",stateSelector:".wp-caption",onclick:function(){var t=e.selection.getStart(),n=(0,K.deserialize)(t),i=N(),r=void 0;if(n&&i){var o=(0,D.default)(t,".wp-caption");if(o)return e.dom.replace(t,o.parentNode),e.selection.getStart()!==t&&e.selection.select(t),e.selection.controlSelection.showResizeRect(t),void e.nodeChanged();var a=J.default.get(i.ID,n.media.ID);r=a&&a.caption?a.caption:I.default.translate("Enter a caption"),["width","height"].forEach(function(e){null===t.getAttribute(e)&&n.media[e]&&t.setAttribute(e,n.media[e])});var s={width:n.media.width};n.media.ID&&(s.id="attachment_"+n.media.ID),n.appearance.align&&(s.align="align"+n.appearance.align);var l=M.default.stringify({tag:"caption",attrs:s,content:[t.outerHTML,r].join(" ")});e.selection.setContent(l),e.selection.select(e.selection.getStart().querySelector(".wp-caption-dd"),!0),e.selection.controlSelection.hideResizeRect(),this.rootControl.hide()}}});var A=function(e,t){var n=(0,s.default)({},t,e),i=n.width,r=n.height;return Math.min(i/t.width||1/0,r/t.height||1/0)};if(e.addButton("wpcom_img_size_decrease",{tooltip:I.default.translate("Decrease size"),classes:"toolbar-segment-start img-size-decrease",icon:"dashicon dashicons-minus",onPostRender:function(){e.on("wptoolbar",l.bind(this,!1))},onclick:function(){a(-1)}}),e.addButton("wpcom_img_size_increase",{tooltip:I.default.translate("Increase size"),classes:"toolbar-segment-end img-size-increase",icon:"dashicon dashicons-plus",onPostRender:function(){e.on("wptoolbar",l.bind(this,!0))},onclick:function(){a(1)}}),e.addCommand("WP_Medialib",function(){i({visible:!0})}),e.addCommand("wpcomEditGallery",function(e){var t=N();if(t){var n=M.default.parse(e);"gallery"===n.tag&&(n=(0,b.default)({},j.GalleryDefaultAttrs,n.attrs.named),n.items=n.ids.split(",").map(function(e){e=parseInt(e,10);var n=J.default.get(t.ID,e);return n||q.default.fetch(t.ID,e),(0,b.default)({ID:e},n)}),delete n.ids,n.columns&&(n.columns=parseInt(n.columns,10)),n.orderby&&(n.orderBy=n.orderby,delete n.orderby),q.default.setLibrarySelectedItems(t.ID,n.items),i({visible:!0,initialGallerySettings:n,labels:{confirm:I.default.translate("Update",{context:"verb"})}},{preserveFocus:!0,view:fe.ModalViews.GALLERY}))}}),P=(0,v.default)(function(){e.execCommand("wpcomAutoResize",null,null,{skip_focus:!0})},400,{leading:!0}),e.on("click",h),e.on("keydown",g),de.default.isEnabled("desktop")){var L=n(5).ipcRenderer;e.on("contextmenu",function(e){L.send("mce-contextmenu",e)})}e.on("touchstart touchmove touchend",_()),e.on("init",function(){J.default.on("change",k),e.getDoc().addEventListener("load",d,!0),e.dom.bind(e.getDoc(),"dragstart dragend",o),e.selection.selectorChanged(".wp-caption",y)}),e.on("init show hide",function(){r({visible:!e.isHidden()})}),e.on("SetContent",p),e.on("remove",function(){(0,u.default)(S).forEach(function(e){x.default.unmountComponentAtNode(e),e.parentNode.removeChild(e)}),S={},J.default.off("change",k),e.getDoc().removeEventListener("load",d)}),(0,ae.default)(e),(0,le.default)(e)}}var a=n(5630966280090368),s=r(a),l=n(0x8817212fc310f),u=r(l),d=n(83765757817552),c=r(d),p=n(8784809385079961),f=r(p),h=n(5020179656051692),m=r(h),g=n(7452954268806788),v=r(g),y=n(8907951692841672),b=r(y),_=n(5921998412115101),x=r(_),C=n(0x98b3dfa6a747e),E=r(C),w=n(5896763357248615),T=r(w),S=n(0x976699e5e0db4),P=r(S),k=n(7572476330282672),I=r(k),N=n(5106151372138902),M=r(N),R=n(8680067948098285),D=r(R),A=n(0xa505046780b0c),O=r(A),L=n(7418474439241154),B=r(L),F=n(6104353596224629),H=r(F),z=n(5367243434992214),U=r(z),V=n(6803892143900866),j=i(V),W=n(7613110173109069),q=r(W),G=n(7380496197234269),$=r(G),K=n(5527868178721527),Y=n(5172337875599245),X=r(Y),Q=n(0xcf73c9e6ccc62),J=r(Q),Z=n(0xbe8099e1748ed),ee=r(Z),te=n(640686485904272),ne=r(te),ie=n(6969452716050595),re=r(ie),oe=n(5703081709495860),ae=r(oe),se=n(0x8fe05f688de61),le=r(se),ue=n(4883949902648912),de=r(ue),ce=n(0xe6bd8709d6a3c),pe=n(5644333497174414),fe=n(7152730280015627),he=n(8025093951496706),me=/<img\s[^>]*\/?>/gi,ge=["thumbnail","medium","large","full"],ve=(0,B.default)(),ye=null,be=null;e.exports=function(){P.default.PluginManager.add("wpcom/media",o)}},4667735711868943:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,a.default)(e).reduce(function(t,n){switch(n){case"default_category":t[n]=parseInt(e[n]);break;default:t[n]=e[n]}return t},{})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(477028190620861),a=i(o);t.normalizeSettings=r},4670161186515471:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(5477852257145688),s=i(a),l=n(0xf0f4288728240),u=i(l),d=n(6442230718320275),c=i(d),p=n(4661506978213564),f=i(p),h=n(8907951692841672),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(5896763357248615),b=i(y),_=n(6280957995252369),x=n(5792510602518522),C=i(x),E=n(0xcf73c9e6ccc62),w=i(E),T=n(0x7015fb554765d),S=i(T),P=n(7841572780754165),k=i(P),I=n(7348519744449462),N=i(I),M=n(6803892143900866),R=n(7152730280015627),D=n(5644333497174414),A=n(474432612430512),O=b.default.createClass({displayName:"EditorMediaModalGallery",propTypes:{site:b.default.PropTypes.object,items:b.default.PropTypes.array,settings:b.default.PropTypes.object,onUpdateSettings:b.default.PropTypes.func,onReturnToList:b.default.PropTypes.func},getInitialState:function(){return{invalidItemDropped:!1}},getDefaultProps:function(){return{onUpdateSettings:v.default}},componentWillMount:function(){this.props.settings?(this.maybeUpdateColumnsSetting(),this.reconcileSettingsItems(this.props.settings,this.props.items)):this.setDefaultSettings()},componentDidUpdate:function(e){this.props.settings&&(this.maybeUpdateColumnsSetting(),(0,u.default)(e.items,this.props.items)||this.reconcileSettingsItems(this.props.settings,this.props.items))},reconcileSettingsItems:function(e,t){var n=this,i=e.items.filter(function(e){return(0,c.default)(t,{ID:e.ID})}).concat(t.filter(function(t){return!(0,c.default)(e.items,{ID:t.ID})})).map(function(e){return w.default.get(n.props.site.ID,e.ID)});(0,u.default)(i,e.items)||this.updateSetting("items",i)},maybeUpdateColumnsSetting:function(){this.props.items.length<this.props.settings.columns&&this.updateSetting("columns",this.props.items.length)},setDefaultSettings:function(){var e=this.props,t=e.site,n=e.settings,i=e.items,r=e.onUpdateSettings;if(!n){var o=(0,m.default)({},M.GalleryDefaultAttrs,{items:i});!t||t.jetpack&&!(0,A.isModuleActive)(t,"tiled-gallery")||(o.type="rectangular"),r(o)}},updateSetting:function(e,t){"string"==typeof e&&(e=(0,o.default)({},e,t));var n=(0,m.default)({},this.props.settings,e);n=(0,f.default)(n,function(e){return null===e}),this.props.onUpdateSettings(n)},render:function(){var e=this,t=this.props,n=t.site,i=t.items,r=t.settings;return b.default.createElement("div",{className:"editor-media-modal-gallery"},b.default.createElement(S.default,{site:n,onInvalidItemAdded:function(){return e.setState({invalidItemDropped:!0})}}),b.default.createElement(C.default,{onClick:this.props.onReturnToList,backText:this.translate("Media Library")}),b.default.createElement("div",{className:"editor-media-modal-gallery__content editor-media-modal__content"},b.default.createElement(N.default,{site:n,items:i,settings:r,onUpdateSetting:this.updateSetting,invalidItemDropped:this.state.invalidItemDropped,onDismissInvalidItemDropped:function(){return e.setState({invalidItemDropped:!1})}}),b.default.createElement("div",{className:"editor-media-modal-gallery__sidebar"},b.default.createElement(k.default,{site:n,settings:r,onUpdateSetting:this.updateSetting,numberOfItems:i.length}))))}});t.default=(0,_.connect)(null,{onReturnToList:(0,s.default)(D.setEditorMediaModalView,R.ModalViews.LIST)})(O),e.exports=t.default},4670304791128587:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){s(e);var n=l({},p,t||{}),o=function(t){function o(r){i(this,o),t.call(this,r),this.state=n.withProps?e.calculateState(null,r):e.calculateState(null,void 0)}return r(o,t),o.prototype.componentDidMount=function(){var i=this;t.prototype.componentDidMount&&t.prototype.componentDidMount.call(this);var r=e.getStores(),o=!1,a=function(){o=!0};this._fluxContainerSubscriptions=r.map(function(e){return e.addListener(a)});var s=function(){o&&i.setState(function(t){return n.withProps?e.calculateState(t,i.props):e.calculateState(t,void 0)}),o=!1};this._fluxContainerStoreGroup=new u(r,s)},o.prototype.componentWillReceiveProps=function(i,r){t.prototype.componentWillReceiveProps&&t.prototype.componentWillReceiveProps.call(this,i,r),n.withProps&&(n.pure&&c(this.props,i)||this.setState(function(t){return e.calculateState(t,i)}))},o.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount&&t.prototype.componentWillUnmount.call(this),this._fluxContainerStoreGroup.release();for(var e=this._fluxContainerSubscriptions,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r;o.remove()}this._fluxContainerSubscriptions=[]},o}(e),d=n.pure?a(o):o,f=e.displayName||e.name;return d.displayName="FluxContainer("+f+")",d}function a(e){var t=function(e){function t(){i(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!c(this.props,e)||!c(this.state,t)},t}(e);return t}function s(e){e.getStores?void 0:d(!1),e.calculateState?void 0:d(!1)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(8865855001618329),d=n(0xac06b1ed1d098),c=n(8130069503713202),p={pure:!0,withProps:!1};e.exports={create:o}},4680937997690485:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(0xa505046780b0c),u=i(l),d=n(6104353596224629),c=i(d),p=n(0xdb2b9985047d7),f=i(p),h=n(0x5dd72de17825d),m=i(h),g=n(7186610166862683),v=i(g);t.default=o.default.createClass({displayName:"EditorDeletePost",propTypes:{site:o.default.PropTypes.object,post:o.default.PropTypes.object,onTrashingPost:o.default.PropTypes.func},getInitialState:function(){return{isTrashing:!1}},sendToTrash:function(){this.setState({isTrashing:!0});var e=function(e){e&&this.setState({isTrashing:!1}),this.props.onTrashingPost&&this.props.onTrashingPost(e)}.bind(this);m.default.userCan("delete_post",this.props.post)&&c.default.trash(this.props.post,e)},onSendToTrash:function(){var e=this,t=void 0;this.state.isTrashing||(t="page"===this.props.post.type?this.translate("Are you sure you want to trash this page?"):this.translate("Are you sure you want to trash this post?"),(0,f.default)(t,function(t){t&&e.sendToTrash()},this.translate("Move to trash"),this.translate("Back")))},render:function(){var e=this.props.post;if(!e||!e.ID||"trash"===e.status)return null;var t=(0,s.default)("editor-delete-post__button",{"is-trashing":this.state.isTrashing}),n=this.state.isTrashing?this.translate("Trashing..."):this.translate("Move to trash");return o.default.createElement("div",{className:"editor-delete-post"},o.default.createElement(v.default,{borderless:!0,className:t,onClick:this.onSendToTrash,"aria-label":n},o.default.createElement(u.default,{icon:"trash",size:18}),n))}}),e.exports=t.default},4691924745409762:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a);t.default=o.default.createClass({displayName:"section",render:function(){return o.default.createElement("section",{className:(0,s.default)("accordion__section",this.props.className)},this.props.children)}}),e.exports=t.default},4694318411389239:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(6280957995252369),v=n(7572476330282672),y=n(0x90ba166cd016c),b=i(y),_=n(0xa505046780b0c),x=i(_),C=n(0x8f1527a7f80c8),E=n(0xe6bd8709d6a3c),w=n(4691924745409762),T=i(w),S=n(7186610166862683),P=i(S),k=n(7127988529575974),I=i(k),N=n(8958839223830722),M=i(N),R=n(7455782401390732),D=i(R),A=n(6675946561311414),O=i(A),L=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.state={selectedPostId:null,showDialog:!1
},i.isPost=function(){return"post"===i.props.type},i.openDialog=function(e){e.preventDefault(),i.setState({showDialog:!0})},i.closeDialog=function(){i.setState({selectedPostId:null,showDialog:!1})},i.setPostToCopy=function(e){i.setState({selectedPostId:e.ID})},i.goToNewDraft=function(){var e=i.props,t=e.siteSlug,n=e.type,r=i.state.selectedPostId;""!==r&&(b.default.redirect("/"+n+"/"+t+"?copy="+r),i.closeDialog())},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.translate,i=e.type,r=this.state,o=r.selectedPostId,a=r.showDialog,s=[{action:"cancel",label:n("Cancel")},{action:"copy",label:n("Overwrite"),isPrimary:!0,disabled:!o,onClick:this.goToNewDraft}];return m.default.createElement(T.default,{className:"editor-more-options__copy-post"},m.default.createElement(M.default,{labelText:n(this.isPost()?"Copy Post":"Copy Page"),helpText:n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")},m.default.createElement(P.default,{borderless:!0,compact:!0,onClick:this.openDialog},m.default.createElement(x.default,{icon:"clipboard"}),n(this.isPost()?"Select a post to copy":"Select a page to copy"))),m.default.createElement(I.default,{autoFocus:!1,isVisible:a,buttons:s,onClose:this.closeDialog,additionalClassNames:"editor-more-options__copy-post-select-dialog"},m.default.createElement(D.default,null,n(this.isPost()?"Select a post to copy":"Select a page to copy")),m.default.createElement("p",null,n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")),t&&m.default.createElement(O.default,{emptyMessage:n(this.isPost()?"No posts found":"No pages found"),onChange:this.setPostToCopy,order:"DESC",orderBy:"date",selected:o,siteId:t,status:"draft,future,pending,private,publish",type:i})))}}]),t}(h.Component);L.propTypes={siteId:h.PropTypes.number,siteSlug:h.PropTypes.string,translate:h.PropTypes.func,type:h.PropTypes.oneOf(["page","post"]).isRequired},t.default=(0,g.connect)(function(e){var t=(0,E.getSelectedSiteId)(e);return{siteId:t,siteSlug:(0,C.getSiteSlug)(e,t)}})((0,v.localize)(L)),e.exports=t.default},4730164382473449:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(e.length<3||t.length<2)return[];var n=e.indexOf(t[0]);if(n===-1)return r(e,t.slice(1));var i=e.indexOf(t.slice(-1)[0]);if(i===-1)return r(e,t.slice(0,-1));var o=e.slice(n,i+1);return(0,S.default)(o,t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0xccd53b671ebb6),a=i(o),s=n(5143893728007863),l=i(s),u=n(5880884711457125),d=i(u),c=n(8173823076638946),p=i(c),f=n(5369032381290393),h=i(f),m=n(95905449861643),g=i(m);t.getRemovedPosts=r,t.default=function(e){function t(e){var t=(0,C.default)({},V,e);t.siteID&&"string"==typeof t.siteID&&(t.siteID=t.siteID.replace(/::/g,"/")),"draft,pending"===t.status&&(t.orderBy="modified");var n=(0,z.getCacheKey)(t),i=U.default.get(n);i?u=i:(u={id:W,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:n},W++)}function n(e){return(0,w.default)(e,function(e,t,n){null!=t&&(e[n]=t)},{})}function i(){var e=u.query.orderBy;u.postIds.sort(function(t,n){var i=H.default.get(t),r=H.default.get(n),o=i[e],a=r[e];return o===a?i.title===r.title?0:i.title>r.title?1:-1:o>a?-1:1})}function o(e,t,n){if(t||!n||"object"!==("undefined"==typeof n?"undefined":(0,g.default)(n)))return t=t||{message:"Error fetching PostsList: empty data response"},j("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void u.errors.push(t);var o=n.found,a=n.meta,s=n.posts,l=n.__sync,d=l||{},c=d.responseSource,p=d.requestKey;if(e===u.id){u.isFetchingNextPage=!1,u.nextPageHandle=a&&a.next_page,u.nextPageHandle&&o||(u.isLastPage=!0);var f=s.map(function(e){return e.global_ID}),h=u.postIds.slice(0);if("local"===c&&p)(0,z.setCanonicalList)(u.listKey,p,h);else{var m=(0,z.getCanonicalList)(u.listKey,p);m&&(j("canonicalList found (%o)",m),h=m,(0,z.deleteCanonicalList)(u.listKey,p))}var v=r(h,f);v.length&&(j("removePosts (%o)",v),h=(0,S.default)(h,v));var y=(0,S.default)(f,h);y.length&&(j("newPosts (%o)",y),h=h.concat(y),u.page++),u.postIds=h,i()}}function s(e,t,n){var r=void 0,o=void 0,a=void 0;return t?void j("An error occurred while fetching updated posts %o",t):void(e===u.id&&n.posts.length&&(r=n.posts,j("Fetched updated posts:",r),o=r.map(function(e){return e.global_ID}),a=(0,S.default)(o,u.postIds),a.length&&(u.postIds=u.postIds.concat(a),i())))}if(!e)throw new Error("must supply a post-list-store id");var u={postIds:[],errors:[],query:(0,_.default)(V),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(i){function r(){(0,l.default)(this,r);var t=(0,p.default)(this,(r.__proto__||(0,a.default)(r)).call(this));return t.id=e,t.dispatchToken=O.default.register(t.handlePayload.bind(t)),t}return(0,h.default)(r,i),(0,d.default)(r,[{key:"get",value:function(){return u}},{key:"getID",value:function(){return u.id}},{key:"getSiteID",value:function(){return u.query.siteID}},{key:"getAll",value:function(){return u.postIds.map(function(e){return H.default.get(e)})}},{key:"getTree",value:function(){var e=[];return u.postIds.forEach(function(t){var n=(0,_.default)(H.default.get(t));n.parent=n.parent?n.parent.ID:0,e.push(n)}),(0,B.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(u.postIds.indexOf(e)>-1)return H.default.get(e)}},{key:"getPage",value:function(){return u.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return u.isLastPage}},{key:"isFetchingNextPage",value:function(){return u.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,D.default)(u.errors,function(n){return t-n.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=u.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=u.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),e.siteID||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),n(e)}},{key:"getUpdatesParams",value:function(){var e={},t=u.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),e.siteID||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),u.postIds.length&&(e.modified_after=(0,N.default)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||u.isLastPage||(e.after=this.getPost((0,k.default)(u.postIds)).date)),n(e)}},{key:"handlePayload",value:function(e){var n=e.action;if(!n.postListStoreId||n.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===n.type)switch(O.default.waitFor([H.default.dispatchToken]),n.type){case"QUERY_POSTS":j("QUERY_POSTS",n),t(n.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":j("FETCH_NEXT_POSTS_PAGE",n),u.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":j("receivePage",n),o(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":s(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":n.post&&u.postIds.indexOf(n.post.global_ID)>-1&&this.emit("change")}}}]),r}(M.EventEmitter))};var v=n(4675954658966525),y=i(v),b=n(8446265970839099),_=i(b),x=n(8907951692841672),C=i(x),E=n(9002016994434229),w=i(E),T=n(411492589843630),S=i(T),P=n(4881459746320230),k=i(P),I=n(7880968143996541),N=i(I),M=n(842421528365869),R=n(6442230718320275),D=i(R),A=n(8769427305820155),O=i(A),L=n(5408478231187706),B=i(L),F=n(0xe5816b799bd0f),H=i(F),z=n(95148365001489),U=i(z),V={siteID:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,perPage:20},j=(0,y.default)("calypso:posts-list"),W=0},4758804133786506:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(8640881565075096),m=i(h),g=n(5896763357248615),v=i(g),y=n(7572476330282672),b=n(6280957995252369),_=n(6675946561311414),x=i(_),C=n(0x965a288d34003),E=i(C),w=n(0xaa068d7de9e4a),T=i(w),S=n(4691924745409762),P=i(S),k=n(0xe6bd8709d6a3c),I=n(5523398591803755),N=n(6007716273106560),M=n(7996551768540594),R=n(7284660551555503),D=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.boundUpdatePageParent=n.updatePageParent.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"updatePageParent",value:function(e){var t=this.props,n=t.siteId,i=t.postId,r=e&&e.ID?e.ID:null;this.props.editPost(n,i,{parent:r})}},{key:"render",value:function(){var e=this.props,t=e.parentId,n=e.translate,i=e.postId,r=e.siteId,o=e.postType,a=e.labels;return v.default.createElement(P.default,{className:"editor-page-parent"},v.default.createElement(E.default,null,v.default.createElement("span",{className:"editor-page-parent__label-text"},a.parent||n("Parent Page"))),v.default.createElement(E.default,{className:"editor-page-parent__top-level"},v.default.createElement("span",{className:"editor-page-parent__top-level-label"},n("Top level",{context:"Editor: Page being edited is top level i.e. has no parent"})),v.default.createElement(T.default,{checked:!t,onChange:this.boundUpdatePageParent,"aria-label":n("Toggle to set as top level")})),v.default.createElement(x.default,{type:o,siteId:r,onChange:this.boundUpdatePageParent,selected:t,excludeTree:i,emptyMessage:a.not_found||n("You have no other pages yet.")}))}}]),t}(g.Component);D.propTypes={siteId:g.PropTypes.number,postId:g.PropTypes.number,parentId:g.PropTypes.number,postType:g.PropTypes.string,translate:g.PropTypes.func,labels:g.PropTypes.object},t.default=(0,b.connect)(function(e){var t=(0,k.getSelectedSiteId)(e),n=(0,I.getEditorPostId)(e),i=(0,N.getEditedPostValue)(e,t,n,"type"),r=(0,N.getEditedPostValue)(e,t,n,"parent"),o=(0,m.default)(r,"ID",r)||0,a=(0,m.default)((0,R.getPostType)(e,t,i),"labels",{});return{siteId:t,postId:n,postType:i,parentId:o,labels:a}},{editPost:M.editPost})((0,y.localize)(D)),e.exports=t.default},4773810351376775:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mentions=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(83765757817552),m=i(h),g=n(4881459746320230),v=i(g),y=n(6718701541658404),b=i(y),_=n(6897165321438721),x=i(_),C=n(8640881565075096),E=i(C),w=n(619801137403500),T=i(w),S=n(0x89ab9dd64962b),P=i(S),k=n(5896763357248615),I=i(k),N=n(0x98b3dfa6a747e),M=i(N),R=n(6280957995252369),D=n(0x976699e5e0db4),A=i(D),O=n(462836914210103),L=i(O),B=n(0xd3916271a22ef),F=i(B),H=n(0x4aa49df546d8c),z=i(H),U=n(0xe6bd8709d6a3c),V=n(5190340364196702),j=A.default.util.VK,W=t.Mentions=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.matchingSuggestions=[],i.state={popoverContext:null,query:"",showPopover:!1},i.insertSuggestion=function(e){var t=e.user_login;if(t){var n=i.props.editor.selection,r=I.default.createElement(F.default,{username:t}),o=n.getRng(),a=document.createRange();a.setStart(o.startContainer,Math.max(o.startOffset-(i.state.query.length+1),0)),a.setEnd(o.endContainer,o.endOffset),n.setRng(a),n.setContent(n.getContent().replace(/@\S*/,M.default.renderToStaticMarkup(r))),i.props.editor.getBody().focus()}},i.onKeyDown=function(e){var t=e.keyCode,n=e.preventDefault,r=i.getSelectedSuggestionIndex();if((0,b.default)([j.DOWN,j.UP],t)&&-1!==r){var o=void 0;n(),t===j.DOWN?o=(r+1)%i.matchingSuggestions.length:(o=r-1,o<0&&(o=i.matchingSuggestions.length-1)),i.setState({selectedSuggestionId:i.matchingSuggestions[o].ID})}},i.onKeyUp=function(e){var t=e.keyCode;if(!(0,b.default)([j.DOWN,j.UP],t)){if((0,b.default)([j.SPACEBAR,27],t))return i.hidePopover();if(t===j.ENTER){if(!i.state.showPopover||0===i.matchingSuggestions.length)return;var n=i.getSuggestion();return n&&i.insertSuggestion(n),i.hidePopover()}var r=i.getQueryText();i.setState({showPopover:null!==r,selectedSuggestionId:null,query:r})}},i.setPopoverContext=function(e){return e&&i.setState({popoverContext:e})},i.hidePopover=function(){return i.setState({showPopover:!1})},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.editor,t=this.getPosition(),n=t.left,i=t.top;e.on("keyup",this.onKeyUp),e.on("click",this.hidePopover),this.left=n,this.top=i}},{key:"componentWillUpdate",value:function(e,t){if(!this.state.showPopover&&t.showPopover)return this.updatePosition(t),void this.props.editor.on("keydown",this.onKeyDown);if(this.state.showPopover&&!t.showPopover)return void this.props.editor.off("keydown",this.onKeyDown);if(t.showPopover){var n=this.getPosition(),i=n.top,r=n.left,o=this.top>i&&this.left<r,a=this.top<i&&this.left>r;(o||a)&&this.updatePosition(t,{top:i,left:r})}}},{key:"componentWillUnmount",value:function(){var e=this.props.editor;e.off("keydown",this.onKeyDown),e.off("keyup",this.onKeyUp),e.off("click",this.hidePopover)}},{key:"getMatchingSuggestions",value:function(e,t){if(t){t=(0,P.default)(t);var n=new RegExp("^"+t+"|\\s"+t,"ig");e=e.filter(function(e){var t=e.user_login,i=e.display_name;return n.test(t+" "+i)})}return e.slice(0,10)}},{key:"getPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.query,n=this.props.editor,i=n.selection.getRng(),r=document.createRange();r.setStart(i.startContainer,i.startOffset-t.length),r.setEnd(i.endContainer,i.endOffset);var o=r.getClientRects(),a=o.length>0?(0,v.default)(o):A.default.$(n.selection.getNode()).offset();return(0,m.default)(a,["left","top"])}},{key:"updatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPosition(e),n=t.left,i=t.top,r=this.props,o=r.editor,a=r.node,s=(0,E.default)(A.default.$(".mce-toolbar-grp",o.getContainer())[0],"offsetHeight",0),l=o.selection.getRng(),u=l.getClientRects(),d=void 0;d=u.length>0?u[0].height:o.selection.getNode().offsetHeight,this.left=n,this.top=i,a.style.left=this.left+"px",a.style.top=s+this.top+d-10+"px"}},{key:"getQueryText",value:function(){var e=new RegExp("(?:^|\\s)@([A-Za-z0-9_+-]*)$","gi"),t=this.props.editor.selection.getRng(),n=t.startContainer.textContent.slice(0,t.startOffset),i=e.exec(n);return i&&i.length>1?i[1]:null}},{key:"getSelectedSuggestionIndex",value:function(){var e=this;return this.state.selectedSuggestionId?(0,T.default)(this.matchingSuggestions,function(t){var n=t.ID;return n===e.state.selectedSuggestionId}):0}},{key:"getSuggestion",value:function(){var e=this.getSelectedSuggestionIndex();return e>-1?this.matchingSuggestions[e]:null}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.suggestions,i=this.state,r=i.query,o=i.showPopover,a=i.popoverContext;this.matchingSuggestions=this.getMatchingSuggestions(n,r);var s=this.state.selectedSuggestionId||(0,E.default)((0,x.default)(this.matchingSuggestions),"ID");return I.default.createElement("div",{ref:this.setPopoverContext},I.default.createElement(z.default,{siteId:t}),this.matchingSuggestions.length>0&&o&&I.default.createElement(L.default,{query:r,suggestions:this.matchingSuggestions,selectedSuggestionId:s,popoverContext:a,onClick:this.insertSuggestion,onClose:this.hidePopover}))}}]),t}(k.Component);W.propTypes={editor:k.PropTypes.object.isRequired,node:k.PropTypes.object.isRequired,siteId:k.PropTypes.number.isRequired,suggestions:k.PropTypes.array},W.defaultProps={suggestions:[]},t.default=(0,R.connect)(function(e){var t=(0,U.getSelectedSiteId)(e);return{siteId:t,suggestions:(0,V.getUserSuggestions)(e,t)}})(W)},4829273500945928:function(e,t,n){"use strict";var i=n(5921998412115101),r=n(5896763357248615),o=n(0xd0219df97eb97),a=n(0x8ae3881d6e8c2),s=n(7123518912576379);e.exports=r.createClass({displayName:"StickyPanel",propTypes:{minLimit:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.number])},getDefaultProps:function(){return{minLimit:!1}},getInitialState:function(){return{isSticky:!1,spacerHeight:0,blockWidth:0}},componentDidMount:function(){this.threshold=i.findDOMNode(this).offsetTop,this.throttleOnResize=o(this.onWindowResize,200),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.throttleOnResize),this.updateIsSticky()},componentWillUnmount:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.throttleOnResize),window.cancelAnimationFrame(this.rafHandle)},onWindowScroll:function(){this.rafHandle=window.requestAnimationFrame(this.updateIsSticky)},onWindowResize:function(){this.setState({spacerHeight:this.state.isSticky?i.findDOMNode(this).clientHeight:0,blockWidth:this.state.isSticky?i.findDOMNode(this).clientWidth:0})},updateIsSticky:function(){var e=window.pageYOffset>this.threshold;return this.props.minLimit!==!1&&this.props.minLimit>=window.innerWidth||s.isMobile()?this.setState({isSticky:!1}):void(e!==this.state.isSticky&&this.setState({isSticky:e,spacerHeight:e?i.findDOMNode(this).clientHeight:0,blockWidth:e?i.findDOMNode(this).clientWidth:0}))},getBlockStyle:function(){var e;if(this.state.isSticky)return e=document.getElementById("header").getBoundingClientRect().height,{top:e,width:this.state.blockWidth}},render:function(){var e=a("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return r.createElement("div",{className:e},r.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),r.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}})},4831732755810365:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(872100829608442),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(6450322511845945),b=n(7208022666315176),_=i(b),x=n(7905250771901207),C=i(x),E=n(8769427305820155),w=i(E),T=n(5106151372138902),S=i(T),P=n(0x831ab68cff9b6),k=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e,t){var n=this.getState();if(n[e]&&n[e][t])return n[e][t]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case P.ActionTypes.FETCH_SHORTCODE:e=(0,s.default)({},e,(0,o.default)({},t.payload.siteId,(0,s.default)({},e[t.payload.siteId],(0,o.default)({},t.payload.shortcode,{status:P.LoadStatus.LOADING}))));break;case P.ActionTypes.RECEIVE_SHORTCODE:e=(0,s.default)({},e,(0,o.default)({},t.payload.siteId,(0,s.default)({},e[t.payload.siteId],(0,o.default)({},t.payload.shortcode,{status:t.error?P.LoadStatus.ERROR:P.LoadStatus.LOADED})))),t.error||(0,s.default)(e[t.payload.siteId][t.payload.shortcode],{body:t.payload.data.result,scripts:t.payload.data.scripts,styles:t.payload.data.styles});break;case"RECEIVE_MEDIA_ITEMS":case"RECEIVE_MEDIA_ITEM":if(!e.hasOwnProperty(t.siteId))break;var n=void 0;n=Array.isArray(t.data.media)?t.data.media:[t.data];var i=n.map(function(e){return e.ID.toString()});e=(0,s.default)({},e,(0,o.default)({},t.siteId,(0,_.default)(e[t.siteId],function(e,t){var n=S.default.parse(t);if("gallery"!==n.tag||!n.attrs.named||!n.attrs.named.ids)return!0;var r=n.attrs.named.ids.split(",");return!(0,C.default)(r,i).length})))}return e}}]),t}(y.ReduceStore);t.default=new k(w.default),e.exports=t.default},4900806889462533:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.types,i=e.type,r=e.typeObject,o=e.writePostPath,s=e.siteSlug;if(!n||!i||r)return null;var l=[a.default.createElement(v.default,{href:"/posts/"+s},t("Back to My Sites"))],d=(0,u.default)(_,i),c=void 0;if(d){switch(i){case"jetpack-portfolio":c=t("Portfolios are not enabled. Open your site settings to activate them.");break;case"jetpack-testimonial":c=t("Testimonials are not enabled. Open your site settings to activate them.")}l.push(a.default.createElement(v.default,{href:"/settings/writing/"+s,primary:!0},t("Site Settings")))}else c=t("To use this post type, please check that your theme and site support it."),l.push(a.default.createElement(v.default,{href:o,primary:!0},t("Write a Blog Post")));return a.default.createElement(b.default,{isVisible:!0,buttons:l,className:"editor-post-type-unsupported"},a.default.createElement("h1",null,t("This post type is not supported")),a.default.createElement("p",null,c),a.default.createElement("p",null,t("For more information, visit our {{supportLink}}support page on custom content types{{/supportLink}}.",{components:{supportLink:a.default.createElement("a",{href:"https://support.wordpress.com/custom-post-types/"})}})))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5896763357248615),a=i(o),s=n(6280957995252369),l=n(6718701541658404),u=i(l),d=n(7572476330282672),c=n(0xe6bd8709d6a3c),p=n(5523398591803755),f=n(6007716273106560),h=n(7284660551555503),m=n(0x8f1527a7f80c8),g=n(7186610166862683),v=i(g),y=n(7127988529575974),b=i(y),_=["jetpack-portfolio","jetpack-testimonial"];r.propTypes={translate:o.PropTypes.func,types:o.PropTypes.object,type:o.PropTypes.string,typeObject:o.PropTypes.object,writePostPath:o.PropTypes.string,siteSlug:o.PropTypes.string},t.default=(0,s.connect)(function(e){var t=(0,c.getSelectedSiteId)(e),n=(0,f.getEditedPostValue)(e,t,(0,p.getEditorPostId)(e),"type");return{type:n,types:(0,h.getPostTypes)(e,t),typeObject:(0,h.getPostType)(e,t,n),writePostPath:(0,p.getEditorNewPostPath)(e,t),siteSlug:(0,m.getSiteSlug)(e,t)}})((0,d.localize)(r)),e.exports=t.default},4902908805660961:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(5896763357248615),v=i(g),y=n(0x8ae3881d6e8c2),b=i(y),_=n(0xa505046780b0c),x=i(_),C=n(0xd27e24cc381e8),E=i(C),w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return n.toggleExpanded=function(){var e=!n.state.isExpanded;n.setState({isExpanded:e}),n.props.onToggle(e)},n.state={isExpanded:e.initialExpanded},n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.icon,i=e.title,r=e.subtitle,o=e.status,a=e.children,s=(0,b.default)("accordion",t,{"is-expanded":this.state.isExpanded,"has-icon":!!n,"has-subtitle":!!r,"has-status":!!o});return v.default.createElement("div",{className:s},v.default.createElement("header",{className:"accordion__header"},v.default.createElement("button",{type:"button",onClick:this.toggleExpanded,className:"accordion__toggle"},n&&v.default.createElement("span",{className:"accordion__icon"},n),v.default.createElement("span",{className:"accordion__title"},i),r&&v.default.createElement("span",{className:"accordion__subtitle"},r),v.default.createElement("span",{className:"accordion__arrow"},v.default.createElement(x.default,{icon:"dropdown"}))),o&&v.default.createElement(E.default,o)),v.default.createElement("div",{className:"accordion__content"},v.default.createElement("div",{className:"accordion__content-wrap"},a)))}}]),t}(g.Component);w.propTypes={initialExpanded:g.PropTypes.bool,onToggle:g.PropTypes.func,title:g.PropTypes.string.isRequired,subtitle:g.PropTypes.string,status:g.PropTypes.object,icon:g.PropTypes.element},w.defaultProps={initialExpanded:!1,onToggle:m.default},t.default=w,e.exports=t.default},4910067807891286:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a),l=n(8326181498771179),u=i(l),d=n(0x8ae3881d6e8c2),c=i(d),p=n(623310115397031),f=i(p);t.default=o.default.createClass({displayName:"InfoPopover",propTypes:{id:o.default.PropTypes.string,position:o.default.PropTypes.string,className:o.default.PropTypes.string,rootClassName:o.default.PropTypes.string,gaEventCategory:o.default.PropTypes.string,popoverName:o.default.PropTypes.string,ignoreContext:o.default.PropTypes.shape({getDOMNode:o.default.PropTypes.function})},getDefaultProps:function(){return{position:"bottom"}},getInitialState:function(){return{showPopover:!1}},render:function(){return o.default.createElement("span",{onClick:this._onClick,ref:"infoPopover",className:(0,c.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},o.default.createElement(s.default,{icon:"info-outline",size:18}),o.default.createElement(u.default,{id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this._onClose,className:(0,c.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))},_onClick:function(e){e.preventDefault(),this.setState({showPopover:!this.state.showPopover},this._recordStats)},_onClose:function(){this.setState({showPopover:!1},this._recordStats)},_recordStats:function(){var e=this.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){var i=this.state.showPopover?" Opened":" Closed";f.default.ga.recordEvent(t,"InfoPopover: "+n+i)}}}),e.exports=t.default},4925618939972770:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a),l=n(0xc46966cb87a6f),u=i(l),d=n(72591479426812),c=i(d),p=n(7377732992038500),f=i(p),h=n(8133512704209156),m=i(h),g=n(5509695933445186),v=i(g),y=n(474432612430512),b=n(8866223909723576),_=i(b),x=n(6881822108913591),C=i(x),E=n(325652704738040),w=i(E),T=n(7186610166862683),S=i(T),P=n(4829273500945928),k=i(P);t.default=o.default.createClass({displayName:"MediaLibraryHeader",propTypes:{site:r.PropTypes.object,filter:r.PropTypes.string,sliderPositionCount:r.PropTypes.number,onMediaScaleChange:o.default.PropTypes.func,onAddMedia:r.PropTypes.func,sticky:o.default.PropTypes.bool},getInitialState:function(){return{addingViaUrl:!1,isMoreOptionsVisible:!1}},getDefaultProps:function(){return{onAddMedia:function(){},sliderPositionCount:100,sticky:!1}},setMoreOptionsContext:function(e){e&&this.setState({moreOptionsContext:e})},toggleAddViaUrl:function(e){this.setState({addingViaUrl:e,isMoreOptionsVisible:!1})},toggleMoreOptions:function(e){this.setState({isMoreOptionsVisible:e})},renderUploadButtons:function(){var e=this.props,t=e.site,n=e.filter,i=e.onAddMedia;if((0,y.userCan)("upload_files",t))return o.default.createElement(w.default,{className:"media-library__upload-buttons"},o.default.createElement(m.default,{site:t,filter:n,onAddMedia:i,className:"button is-compact"},o.default.createElement(s.default,{icon:"add-image"}),o.default.createElement("span",{className:"is-desktop"},this.translate("Add New",{context:"Media upload"}))),o.default.createElement(S.default,{compact:!0,ref:this.setMoreOptionsContext,onClick:this.toggleMoreOptions.bind(this,!this.state.isMoreOptionsVisible),className:"button media-library__upload-more"},o.default.createElement("span",{className:"screen-reader-text"},this.translate("More Options")),o.default.createElement(s.default,{icon:"chevron-down",size:20}),o.default.createElement(u.default,{context:this.state.moreOptionsContext,isVisible:this.state.isMoreOptionsVisible,onClose:this.toggleMoreOptions.bind(this,!1),position:"bottom right",className:"is-dialog-visible media-library__header-popover"},o.default.createElement(c.default,{onClick:this.toggleAddViaUrl.bind(this,!0)},this.translate("Add via URL",{context:"Media upload"})))))},render:function(){var e=this.props,t=e.site,n=e.onAddMedia;if(this.state.addingViaUrl)return o.default.createElement(v.default,{site:t,onAddMedia:n,onClose:this.toggleAddViaUrl.bind(this,!1),className:"media-library__header"});var i=o.default.createElement(C.default,{className:"media-library__header"},this.renderUploadButtons(),o.default.createElement(_.default,{selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDelete:this.props.onDeleteItem,site:this.props.site,view:"LIST"}),o.default.createElement(f.default,{onChange:this.props.onMediaScaleChange}));return this.props.sticky?o.default.createElement(k.default,{minLimit:660},i):i}}),e.exports=t.default},4927003406530879:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PostEditor=void 0;var r=n(5630966280090368),o=i(r),a=n(8640881565075096),s=i(a),l=n(0xd0219df97eb97),u=i(l),d=n(7452954268806788),c=i(d),p=n(6280957995252369),f=n(78648220391165),h=n(7572476330282672),m=n(0x8ae3881d6e8c2),g=i(m),v=n(0xe6bd8709d6a3c),y=n(0x95495ed56acd8),b=n(5523398591803755),_=n(7996551768540594),x=n(6007716273106560),C=n(0x956a8e02ae2a5),E=n(6647034042708241),w=i(E),T=n(0xff00a1437bc26),S=i(T),P=n(4900806889462533),k=i(P),I=n(8740607814572903),N=i(I),M=n(0x8233b1b13eca7),R=i(M),D=n(5380278257315674),A=n(4517819237535069),O=n(0xd424d627de403),L=i(O),B=n(301929001539288),F=n(0xbe531fd7d9ba8),H=n(0xfc9bb7928e56),z=n(52422017452564),U=i(z),V=n(5621169132512541),j=i(V),W=n(0xae7966875cbd1),q=i(W),G=n(0xf547d15346066),$=i(G),K=n(4546992338875139),Y=i(K),X=n(7123518912576379),Q=n(0x8f1527a7f80c8),J=n(5921998412115101),Z=n(5896763357248615),ee=n(0x90ba166cd016c),te=n(6104353596224629),ne=n(4808587282202068),ie=n(5367243434992214),re=n(0xc540c5b85c2ff),oe=n(0xd7e4aa02a24fb),ae=n(6818283491640046),se=n(8188869101160678),le=n(735638222779233),ue=n(7500633124798471),de=n(5736137603839510),ce=n(7542443254063963),pe=n(70219791644428),fe=n(0xe7c2b215c4243),he=n(974944542775038),me=n(352453761200960),ge=n(0x5dd72de17825d),ve=n(8582600978391152),ye=n(5084380759969092),be=n(623310115397031),_e=t.PostEditor=Z.createClass({displayName:"PostEditor",propTypes:{siteId:Z.PropTypes.number,preferences:Z.PropTypes.object,setEditorModePreference:Z.PropTypes.func,setEditorSidebar:Z.PropTypes.func,setLayoutFocus:Z.PropTypes.func.isRequired,editorModePreference:Z.PropTypes.string,editorSidebarPreference:Z.PropTypes.string,sites:Z.PropTypes.object,user:Z.PropTypes.object,userUtils:Z.PropTypes.object,editPath:Z.PropTypes.string,markChanged:Z.PropTypes.func.isRequired,markSaved:Z.PropTypes.func.isRequired,translate:Z.PropTypes.func.isRequired,hasBrokenPublicizeConnection:Z.PropTypes.bool},_previewWindow:null,mixins:[pe("sites")],getInitialState:function(){return(0,o.default)({},this.getPostEditState(),{isSaving:!1,isPublishing:!1,notice:null,showVerifyEmailDialog:!1,showAutosaveDialog:!0,isLoadingAutosave:!1,isTitleFocused:!1})},getPostEditState:function(){return{savedPost:ie.getSavedPost(),loadingError:ie.getLoadingError(),isDirty:ie.isDirty(),isSaveBlocked:ie.isSaveBlocked(),hasContent:ie.hasContent(),previewUrl:ie.getPreviewUrl(),post:ie.get(),isNew:ie.isNew(),isAutosaving:ie.isAutosaving(),isLoading:ie.isLoading()}},componentWillMount:function(){ie.on("change",this.onEditedPostChange),this.debouncedSaveRawContent=(0,c.default)(this.saveRawContent,200),this.throttledAutosave=(0,u.default)(this.autosave,2e4),
this.debouncedAutosave=(0,c.default)(this.throttledAutosave,3e3),this.switchEditorVisualMode=this.switchEditorMode.bind(this,"tinymce"),this.switchEditorHtmlMode=this.switchEditorMode.bind(this,"html"),this.useDefaultSidebarFocus(),be.mc.bumpStat("calypso_default_sidebar_mode",this.props.editorSidebarPreference),this.setState({isEditorInitialized:!1})},componentWillUpdate:function(e,t){var n=t.isNew,i=t.savedPost;!n&&i&&i!==this.state.savedPost&&e.receivePost(i),t.isDirty||e.dirty?this.props.markChanged():this.props.markSaved()},componentDidMount:function(){this.state.post&&this.state.post.content&&this.editor.setEditorContent(this.state.post.content,{initial:!0})},componentWillUnmount:function(){ie.removeListener("change",this.onEditedPostChange),te.stopEditing(),this.debouncedAutosave.cancel(),this.throttledAutosave.cancel(),this.debouncedSaveRawContent.cancel(),this._previewWindow=null,clearTimeout(this._switchEditorTimeout)},componentWillReceiveProps:function(e){var t=this.props,n=t.siteId,i=t.postId;e.siteId===n&&e.postId!==i&&ee.replace(e.editPath,null,!1,!1),(e.siteId!==n||e.siteId===n&&e.postId!==i)&&this.useDefaultSidebarFocus(e)},storeEditor:function(e){this.editor=e},useDefaultSidebarFocus:function(e){var t=e||this.props;(0,X.isMobile)()||"open"!==t.editorSidebarPreference&&!t.hasBrokenPublicizeConnection||this.props.setLayoutFocus("sidebar")},hideNotice:function(){this.setState({notice:null})},getLayout:function(){return this.props.setLayoutFocus("content")},toggleSidebar:function(){"sidebar"===this.props.layoutFocus?(this.props.setEditorSidebar("closed"),this.props.setLayoutFocus("content"),ye.recordStat("close-sidebar"),ye.recordEvent("Sidebar Toggle","close")):(this.props.setEditorSidebar("open"),this.props.setLayoutFocus("sidebar"),ye.recordStat("open-sidebar"),ye.recordEvent("Sidebar Toggle","open"))},render:function(){var e,t,n,i=this.props.sites.getSelectedSite()||void 0,r=this.getEditorMode(),a=this.state.loadingError,l=i?i.URL+"/":null;this.state.post&&(e=ge.isPage(this.state.post),t="trash"===this.state.post.status,n=(0,s.default)(this.state.post.meta,["data","autosave"]));var u=(0,g.default)("post-editor",{"is-loading":!this.state.isEditorInitialized});return Z.createElement("div",{className:u},Z.createElement(L.default,null),Z.createElement(S.default,null),Z.createElement(k.default,null),Z.createElement(N.default,null),Z.createElement("div",{className:"post-editor__inner"},Z.createElement(Y.default,{setPostDate:this.setPostDate,hasContent:this.state.hasContent,isDirty:this.state.isDirty||this.props.dirty,isSaveBlocked:this.isSaveBlocked(),isPublishing:this.state.isPublishing,isSaving:this.state.isSaving,onPreview:this.onPreview,onPublish:this.onPublish,onSave:this.onSave,onSaveDraft:this.props.onSaveDraft,post:this.state.post,savedPost:this.state.savedPost,site:i,user:this.props.user,userUtils:this.props.userUtils,toggleSidebar:this.toggleSidebar,type:this.props.type,onMoreInfoAboutEmailVerify:this.onMoreInfoAboutEmailVerify,allPostsUrl:this.getAllPostsUrl()}),Z.createElement("div",{className:"post-editor__content"},Z.createElement("div",{className:"editor"},Z.createElement(R.default,(0,o.default)({},this.state.notice,{onDismissClick:this.hideNotice,onViewClick:this.onPreview})),Z.createElement(re,{isNew:this.state.isNew,onPrivatePublish:this.onPublish,post:this.state.post,savedPost:this.state.savedPost,site:i,type:this.props.type}),Z.createElement("div",{className:"post-editor__site"},Z.createElement(j.default,{compact:!0,site:i,indicator:!1,homeLink:!0,externalLink:!0}),Z.createElement(q.default,{post:this.state.savedPost,type:this.props.type})),Z.createElement(oe,{site:i,post:this.state.post,maxWidth:1462}),Z.createElement("div",{className:"editor__header"},Z.createElement(ae,{onChange:this.debouncedAutosave,tabIndex:1}),this.state.post&&e&&i?Z.createElement(se,{path:this.state.post.URL&&this.state.post.URL!==l?ge.getPagePath(this.state.post):l}):null,Z.createElement(de,{className:"editor__switch-mode",compact:!0},Z.createElement(ce,{selected:"tinymce"===r,onClick:this.switchEditorVisualMode,title:this.props.translate("Edit with a visual editor")},this.props.translate("Visual",{context:"Editor writing mode"})),Z.createElement(ce,{selected:"html"===r,onClick:this.switchEditorHtmlMode,title:this.props.translate("Edit the raw HTML code")},"HTML"))),Z.createElement("hr",{className:"editor__header-divider"}),Z.createElement(le,{ref:this.storeEditor,mode:r,tabIndex:2,isNew:this.state.isNew,onSetContent:this.debouncedSaveRawContent,onInit:this.onEditorInitialized,onChange:this.onEditorContentChange,onKeyUp:this.debouncedSaveRawContent,onFocus:this.onEditorFocus,onTextEditorChange:this.onEditorContentChange})),Z.createElement(ue,null)),Z.createElement(U.default,{toggleSidebar:this.toggleSidebar,savedPost:this.state.savedPost,post:this.state.post,isNew:this.state.isNew,onPublish:this.onPublish,onTrashingPost:this.onTrashingPost,site:i,type:this.props.type,setPostDate:this.setPostDate,onSave:this.onSave}),this.props.isSitePreviewable?Z.createElement(ve,{showPreview:this.state.showPreview,onClose:this.onPreviewClose,isSaving:this.state.isSaving||this.state.isAutosaving,isLoading:this.state.isLoading,previewUrl:this.state.previewUrl,externalUrl:this.state.previewUrl}):null),t?Z.createElement(he,{onClose:this.onClose,onRestore:this.onSaveTrashed}):null,this.state.showVerifyEmailDialog?Z.createElement(me,{user:this.props.user,onClose:this.closeVerifyEmailDialog}):null,a?Z.createElement(fe,{post:this.state.post,onClose:this.onClose}):null,n&&this.state.showAutosaveDialog?Z.createElement(he,{onRestore:this.restoreAutosave,onClose:this.closeAutosaveDialog,isAutosave:!0}):null)},restoreAutosave:function(){var e,t=this.state.post.meta.data.autosave;this.setState({showAutosaveDialog:!1,isLoadingAutosave:!0}),e={title:t.title,excerpt:t.excerpt,content:t.content},te.edit(e)},closeAutosaveDialog:function(){this.setState({showAutosaveDialog:!1})},closeVerifyEmailDialog:function(){this.setState({showVerifyEmailDialog:!1})},onEditedPostChange:function(){var e,t,n,i=this,r=this.state.isLoading&&!ie.isLoading(),o=ie.getLoadingError();o?this.setState({loadingError:o}):ie.isNew()&&!this.state.isNew||ie.isLoading()?this.setState(this.getInitialState(),function(){return i.editor&&i.editor.setEditorContent("")}):this.state.isNew&&this.state.hasContent&&!this.state.isDirty?this.setState(this.getInitialState(),function(){return i.editor&&i.editor.setEditorContent(i.state.post.content)}):(e=this.getPostEditState(),t=e.post,n=!!t&&this.props.sites.getSite(t.site_ID),r&&n&&"page"===this.props.type!==ge.isPage(t)&&ee.redirect(ge.getEditURL(t,n)),this.setState(e,function(){this.editor&&(r||this.state.isLoadingAutosave)&&this.editor.setEditorContent(this.state.post.content,{initial:!0}),this.state.isLoadingAutosave&&this.setState({isLoadingAutosave:!1})}))},isSaveBlocked:function(){return this.state.isSaveBlocked||!this.state.isEditorInitialized},onEditorInitialized:function(){this.setState({isEditorInitialized:!0})},onEditorContentChange:function(){this.debouncedSaveRawContent(),this.debouncedAutosave()},onEditorFocus:function(){J.findDOMNode(this.editor).click()},saveRawContent:function(){te.editRawContent(this.editor.getContent({format:"raw"}))},autosave:function(){var e;if(this.state.isSaving!==!0&&!this.isSaveBlocked()){this.saveRawContent();var t=(0,o.default)({},this.props.edits,{content:this.editor.getContent()});te.edit(t),ie.isDirty()&&ie.hasContent()&&this.state.post&&(ge.isPublished(this.state.savedPost)||ge.isPublished(this.state.post)?e=function(){}:(this.setState({isSaving:!0}),e=function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess()}.bind(this)),te.autosave(e))}},onClose:function(){ee.back(this.getAllPostsUrl())},getAllPostsUrl:function(){var e=this.props,t=e.type,n=e.sites,i=n.getSelectedSite(),r=void 0;switch(t){case"page":r="/pages";break;case"post":r="/posts";break;default:r="/types/"+t}return"post"!==t||!i||i.jetpack||i.single_user_site||(r+="/my"),i&&(r=ne.addSiteFragment(r,i.slug)),r},onMoreInfoAboutEmailVerify:function(){this.setState({showVerifyEmailDialog:!0})},onTrashingPost:function(e){var t=ge.isPage(this.state.post);e?this.setState({notice:{status:"is-error",message:"trashFailure"}}):(ye.recordStat(t?"page_trashed":"post_trashed"),ye.recordEvent(t?"Clicked Trash Page Button":"Clicked Trash Post Button"),this.props.markSaved(),this.onClose())},onSaveTrashed:function(e,t){this.onSave(e,t)},onSave:function(e,t){var n=(0,o.default)({},this.props.edits);e&&(n.status=e),!ge.isPublished(this.state.savedPost)&&(!e&&ge.isPublished(this.state.post)||ge.isPublished(n))||(n.content=this.editor.getContent(),te.saveEdited(n,function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess(),"function"==typeof t&&t(e)}.bind(this)),this.setState({isSaving:!0}))},onPreview:function(e){var t,n="draft";return!this.props.isSitePreviewable||e.metaKey||e.ctrlKey?(this._previewWindow&&!this._previewWindow.closed||(this._previewWindow=window.open("about:blank","WordPress.com Post Preview")),this.state.savedPost&&this.state.savedPost.status&&(n=this.state.savedPost.status),t=function(){this._previewWindow?(this._previewWindow.location=this.state.previewUrl,this._previewWindow.focus()):this._previewWindow=window.open(this.state.previewUrl,"WordPress.com Post Preview")}.bind(this),void("publish"===n?(te.edit({content:this.editor.getContent()}),te.autosave(t)):this.onSave(null,t))):this.iframePreview()},iframePreview:function(){this.state.isDirty||this.props.dirty?(this.autosave(),setTimeout(function(){this.setState({showPreview:!0})}.bind(this),150)):this.setState({showPreview:!0})},onPreviewClose:function(){this.setState({showPreview:!1})},onSaveDraftFailure:function(e){this.onSaveFailure(e,"saveFailure")},onSaveDraftSuccess:function(){var e=this.state.post;ge.isPublished(e)?this.onSaveSuccess("updated","view",e.URL):this.onSaveSuccess()},onPublish:function(){var e=(0,o.default)({},this.props.edits,{status:"publish"});ge.isPrivate(this.state.post)?e.status="private":ge.isFutureDated(this.state.post)&&(e.status="future"),e.content=this.editor.getContent(),te.saveEdited(e,function(e){e&&"NO_CHANGE"!==e.message?this.onPublishFailure(e):this.onPublishSuccess()}.bind(this)),this.setState({isSaving:!0,isPublishing:!0})},onPublishFailure:function(e){this.onSaveFailure(e,"publishFailure")},onPublishSuccess:function(){var e=this.state.savedPost,t=void 0;t=ge.isPrivate(e)?"publishedPrivately":ge.isFutureDated(e)?"scheduled":"published",this.onSaveSuccess(t,"published"===t?"view":"preview",e.URL)},onSaveFailure:function(e,t){this.setState({isSaving:!1,isPublishing:!1,notice:{status:"is-error",error:e,message:t}}),window.scrollTo(0,0)},setPostDate:function(e){var t=e?e.format():null;te.edit({date:t}),this.checkForDateChange(t)},checkForDateChange:function(e){var t=this.state.savedPost;if(t){var n=this.moment(e),i=this.moment(t.date),r=!!n.diff(i);"post"===t.type&&ge.isPublished(t)&&r?this.warnPublishDateChange():this.warnPublishDateChange({clearWarning:!0})}},warnPublishDateChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearWarning,n=void 0!==t&&t;return n?void("warnPublishDateChange"===(0,s.default)(this.state,"notice.message")&&this.hideNotice()):void this.setState({notice:{status:"is-warning",message:"warnPublishDateChange"}})},onSaveSuccess:function(e,t,n){var i=ie.get();"draft"===i.status?this.props.setEditorLastDraft(i.site_ID,i.ID):this.props.resetEditorLastDraft(),this.props.savePostSuccess(i.site_ID,this.props.postId,i,{}),this.props.receivePost(i);var r={isSaving:!1,isPublishing:!1};e?(r.notice={status:"is-success",message:e,action:t,link:n},window.scrollTo(0,0)):r.notice=null,this.setState(r)},getEditorMode:function(){var e="tinymce";return this.props.editorModePreference&&(e=this.props.editorModePreference,this.recordedDefaultEditorMode||(be.mc.bumpStat("calypso_default_editor_mode",e),this.recordedDefaultEditorMode=!0)),e},switchEditorMode:function(e){var t=this.editor.getContent();"html"===e&&this.editor.setEditorContent(t),this.props.setEditorModePreference(e),this._switchEditorTimeout=setTimeout(function(){te.edit({content:t}),"html"===e?te.editRawContent(t):this.saveRawContent()}.bind(this),0)}});t.default=(0,p.connect)(function(e){var t=(0,v.getSelectedSiteId)(e),n=(0,b.getEditorPostId)(e),i=(0,C.getCurrentUserId)(e);return{siteId:t,postId:n,editorModePreference:(0,A.getPreference)(e,"editor-mode"),editorSidebarPreference:(0,A.getPreference)(e,"editor-sidebar")||"open",editPath:(0,b.getEditorPath)(e,t,n),edits:(0,x.getPostEdits)(e,t,n),dirty:(0,x.isEditedPostDirty)(e,t,n),hasContent:(0,$.default)(e,t,n),layoutFocus:(0,F.getCurrentLayoutFocus)(e),hasBrokenPublicizeConnection:(0,w.default)(e,t,i),isSitePreviewable:(0,Q.isSitePreviewable)(e,t)}},function(e){return(0,f.bindActionCreators)({setEditorLastDraft:y.setEditorLastDraft,resetEditorLastDraft:y.resetEditorLastDraft,receivePost:_.receivePost,savePostSuccess:_.savePostSuccess,setEditorModePreference:D.savePreference.bind(null,"editor-mode"),setEditorSidebar:D.savePreference.bind(null,"editor-sidebar"),setLayoutFocus:B.setLayoutFocus},e)},null,{pure:!1})((0,H.protectForm)((0,h.localize)(_e)))},4939722232992143:function(e,t){(function(){!function(e,t){"use strict";function n(e,t){for(var n,i=[],o=0;o<e.length;++o){if(n=a[e[o]]||r(e[o]),!n)throw"module definition dependecy not found: "+e[o];i.push(n)}t.apply(null,i)}function i(e,i,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(i,function(){a[e]=r.apply(null,arguments)})}function r(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}function o(n){var i,r,o,s,l;for(i=0;i<n.length;i++){r=e,o=n[i],s=o.split(/[.\/]/);for(var u=0;u<s.length-1;++u)r[s[u]]===t&&(r[s[u]]={}),r=r[s[u]];r[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(i=0;i<n.length;i++)delete l[n[i]];e.privateModules=l}}var a={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function i(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function r(r){function o(e){var t=e.name,n=e;if("br"===t)return void(l+="\n");if(u[t]&&(l+=" "),d[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do o(e);while(e=e.next);c[t]&&n.next&&(l+="\n","p"==t&&(l+="\n"))}var a=new n,s=new t({},a),l="",u=a.getShortEndedElements(),d=e.makeMap("script noscript style textarea video audio iframe object"," "),c=a.getBlockElements();return r=i(r,[/<!\[[^\]]+\]>/g]),o(s.parse(r)),l}function o(e){function t(e,t,n){return t||n?" ":" "}return e=i(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function a(e){var t=0;return function(){return e+t++}}return{filter:i,innerText:r,trimHtml:o,createIdGenerator:a}}),i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/util/Delay"],function(e,t,n,i,r){return function(o){function a(e){var t,n=o.dom;if(t=o.fire("BeforePastePreProcess",{content:e}),t=o.fire("PastePreProcess",t),e=t.content,!t.isDefaultPrevented()){if(o.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var i=n.add(o.getBody(),"div",{style:"display:none"},e);t=o.fire("PastePostProcess",{node:i}),n.remove(i),e=t.node.innerHTML}t.isDefaultPrevented()||o.insertContent(e,{merge:o.settings.paste_merge_formats!==!1,data:{paste:!0}})}}function s(e){e=o.dom.encode(e).replace(/\r\n/g,"\n");var t,n=o.dom.getParent(o.selection.getStart(),o.dom.isBlock),r=o.settings.forced_root_block;r&&(t=o.dom.createHTML(r,o.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!r?e=i.filter(e,[[/\n/g,"<br>"]]):(e=i.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),e.indexOf("<p>")!=-1&&(e=t+e)),a(e)}function l(){function t(e){var t,n,r,o=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==o.nodeType){for(r=o.childNodes[x.startOffset];r&&3==r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"==r.tagName&&(n=i.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(n,r),e=i.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),i.remove(n)),t.length?t[0]:void 0}}var n,i=o.dom,r=o.getBody(),a=o.dom.getViewPort(o.getWin()),s=a.y,l=20;if(x=o.selection.getRng(),o.inline&&(n=o.selection.getScrollContainer(),n&&n.scrollTop>0&&(s=n.scrollTop)),x.getClientRects){var u=t(x);if(u)l=s+(u.top-i.getPos(r).y);else{l=s;var d=x.startContainer;d&&(3==d.nodeType&&d.parentNode!=r&&(d=d.parentNode),1==d.nodeType&&(l=i.getPos(d,n||r).y))}}_=i.add(o.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},S),(e.ie||e.gecko)&&i.setStyle(_,"left","rtl"==i.getStyle(r,"direction",!0)?65535:-65535),i.bind(_,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),_.focus(),o.selection.select(_,!0)}function u(){if(_){for(var e;e=o.dom.get("mcepastebin");)o.dom.remove(e),o.dom.unbind(e);x&&o.selection.setRng(x)}_=x=null}function d(){var e,t,n,i,r="";for(e=o.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)n=e[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),i=n.innerHTML,r!=S&&(r+=i);return r}function c(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&n.indexOf(P)==-1&&(t["text/plain"]=n)}if(e.types)for(var i=0;i<e.types.length;i++){var r=e.types[i];t[r]=e.getData(r)}}return t}function p(e){return c(e.clipboardData||o.getDoc().dataTransfer)}function f(e){return v(e,"text/html")||v(e,"text/plain")}function h(e,t){function n(e){var t;return t=e.indexOf(","),t!==-1?e.substr(t+1):null}function i(i){function r(e,i){t&&(o.selection.setRng(t),t=null);var r=o.editorUpload.blobCache,s=r.create(k(),i,n(e.result));r.add(s),a('<img src="'+s.blobUri()+'">')}var s,l,u,d=!1;if(i)for(s=0;s<i.length;s++)if(l=i[s],/^image\/(jpeg|png|gif|bmp)$/.test(l.type)){var c=l.getAsFile?l.getAsFile():l;u=new FileReader,u.onload=r.bind(null,u,c),u.readAsDataURL(c),e.preventDefault(),d=!0}return d}var r=e.clipboardData||e.dataTransfer;if(o.settings.paste_data_images&&r)return i(r.items)||i(r.files)}function m(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&t&&t.items&&0===t.items.length}function g(e){return t.getCaretRangeFromPoint(e.clientX,e.clientY,o.getDoc())}function v(e,t){return t in e&&e[t].length>0}function y(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function b(){function t(e,t,n){var r;return v(e,"text/html")?r=e["text/html"]:(r=d(),r==S&&(n=!0)),r=i.trimHtml(r),_&&_.firstChild&&"mcepastebin"===_.firstChild.id&&(n=!0),u(),r.length||(n=!0),n&&(r=v(e,"text/plain")&&r.indexOf("</p>")==-1?e["text/plain"]:i.innerText(r)),r==S?void(t||o.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?s(r):a(r))}function n(e){return 0===e["text/plain"].indexOf("file://")}o.on("keydown",function(t){function n(e){y(e)&&!e.isDefaultPrevented()&&u()}if(y(t)&&!t.isDefaultPrevented()){if(C=t.shiftKey&&86==t.keyCode,C&&e.webkit&&navigator.userAgent.indexOf("Version/")!=-1)return;if(t.stopImmediatePropagation(),w=(new Date).getTime(),e.ie&&C)return t.preventDefault(),void o.fire("paste",{ieFake:!0});u(),l(),o.once("keyup",n),o.once("paste",function(){o.off("keyup",n)})}});var b=function(){return x||o.selection.getRng()};o.on("paste",function(n){var i=(new Date).getTime(),a=p(n),s=(new Date).getTime()-i,c=(new Date).getTime()-w-s<1e3,g="text"==E.pasteFormat||C;return C=!1,n.isDefaultPrevented()||m(n)?void u():!f(a)&&h(n,b())?void u():(c||n.preventDefault(),!e.ie||c&&!n.ieFake||(l(),o.dom.bind(_,"paste",function(e){e.stopPropagation()}),o.getDoc().execCommand("Paste",!1,null),a["text/html"]=d()),void(v(a,"text/html")?(n.preventDefault(),t(a,c,g)):r.setEditorTimeout(o,function(){t(a,c,g)},0)))}),o.on("dragstart dragend",function(e){T="dragstart"==e.type}),o.on("drop",function(e){var t,l;if(l=g(e),!e.isDefaultPrevented()&&!T&&(t=c(e.dataTransfer),(f(t)&&!n(t)||!h(e,l))&&l&&o.settings.paste_filter_drop!==!1)){var u=t["mce-internal"]||t["text/html"]||t["text/plain"];u&&(e.preventDefault(),r.setEditorTimeout(o,function(){o.undoManager.transact(function(){t["mce-internal"]&&o.execCommand("Delete"),o.selection.setRng(l),u=i.trimHtml(u),t["text/html"]?a(u):s(u)})}))}}),o.on("dragover dragend",function(e){o.settings.paste_data_images&&e.preventDefault()})}var _,x,C,E=this,w=0,T=!1,S="%MCEPASTEBIN%",P="data:text/mce-internal,",k=i.createIdGenerator("mceclip");E.pasteHtml=a,E.pasteText=s,o.on("preInit",function(){b(),o.parser.addNodeFilter("img",function(t,n,i){function r(e){return e.data&&e.data.paste===!0}function a(t){t.attr("data-mce-object")||d===e.transparentSrc||t.remove()}function s(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!o.settings.paste_data_images&&r(i))for(var u=t.length;u--;){var d=t[u].attributes.map.src;d&&(s(d)?a(t[u]):!o.settings.allow_html_data_urls&&l(d)&&a(t[u]))}})})}}),i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,i,r,o){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function s(t){var n,i;return i=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(i,function(e){if(e.test(t))return n=!0,!1}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function u(u){var d=u.settings;u.on("BeforePastePreProcess",function(c){function p(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do n+=t(e);while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!n(e,t))return!1;while(e=e.next);return!0}function i(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do i(e);while(e=e.next)}function o(e,t,o){var s=e._listLevel||d;s!=d&&(s<d?a&&(a=a.parent.parent):(u=a,a=null)),a&&a.name==t?a.append(e):(u=u||a,a=new r(t,1),o>1&&a.attr("start",""+o),e.wrap(a)),e.name="li",s>d&&u&&u.lastChild.append(a),d=s,i(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var a,u,d=1,c=[],p=e.firstChild;"undefined"!=typeof p&&null!==p;)if(c.push(p),p=p.walk(),null!==p)for(;"undefined"!=typeof p&&p.parent!==e;)p=p.walk();for(var f=0;f<c.length;f++)if(e=c[f],"p"==e.name&&e.firstChild){var h=t(e);if(l(h)){o(e,"ul");continue}if(s(h)){var m=/([0-9]+)\./.exec(h),g=1;m&&(g=parseInt(m[1],10)),o(e,"ol",g);continue}if(e._listLevel){o(e,"ul",1);continue}a=null}else u=a,a=null}function f(t,n){var i,o={},a=u.dom.parseStyle(n);return e.each(a,function(e,r){switch(r){case"mso-list":i=/\w+ \w+([0-9]+)/i.exec(n),i&&(t._listLevel=parseInt(i[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(o[r]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===r.indexOf("mso-comment")?void t.remove():void(0!==r.indexOf("mso-")&&("all"==h||m&&m[r])&&(o[r]=e))}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],t.wrap(new r("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],t.wrap(new r("i",1))),o=u.dom.serializeStyle(o,t.name),o?o:null}var h,m,g=c.content;if(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),g=g.replace(/<br class="?Apple-interchange-newline"?>/gi,""),h=d.paste_retain_style_properties,h&&(m=e.makeMap(h.split(/[, ]/))),d.paste_enable_default_filters!==!1&&a(c.content)){c.wordContent=!0,g=o.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var v=d.paste_word_valid_elements;v||(v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new n({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("style",f(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),b.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t,n,i,r=e.length;r--;)if(t=e[r],n=t.attr("href"),i=t.attr("name"),n&&n.indexOf("#_msocom_")!=-1)t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1],n&&(n="#"+n)),n||i){if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){t.unwrap();continue}t.attr({href:n,name:i})}else t.unwrap()});var _=b.parse(g);d.paste_convert_word_fake_lists!==!1&&p(_),c.content=new i({validate:d.validate},y).serialize(_)}})}return u.isWordContent=a,u}),i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,i){return function(r){function o(e){r.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){if(!n.isWordContent(e))return e;var o=[];t.each(r.schema.getBlockElements(),function(e,t){o.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+o.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=i.filter(e,[[a,"$1"]]),e=i.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function s(e){if(n.isWordContent(e))return e;var t=r.settings.paste_webkit_styles;if(r.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var i=r.dom,o=r.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,r,a){var s=i.parseStyle(r,"span"),l={};if("none"===t)return n+a;for(var u=0;u<t.length;u++){var d=s[t[u]],c=i.getStyle(o,t[u],!0);/color/.test(t[u])&&(d=i.toHex(d),c=i.toHex(c)),c!=d&&(l[t[u]]=d)}return l=i.serializeStyle(l,"span"),l?n+' style="'+l+'"'+a:n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,i){return t+' style="'+n+'"'+i})}e.webkit&&o(s),e.ie&&o(a)}}),i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,i){var r;e.add("paste",function(e){function o(){return r||e.settings.paste_plaintext_inform===!1}function a(){if("text"==s.pasteFormat)this.active(!1),s.pasteFormat="html",e.fire("PastePlainTextToggle",{state:!1});else if(s.pasteFormat="text",this.active(!0),!o()){var t=e.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");e.notificationManager.open({text:t,type:"info"}),r=!0,e.fire("PastePlainTextToggle",{state:!0})}e.focus()}var s,l=this,u=e.settings;l.clipboard=s=new t(e),l.quirks=new i(e),l.wordFilter=new n(e),e.settings.paste_as_text&&(l.clipboard.pasteFormat="text"),u.paste_preprocess&&e.on("PastePreProcess",function(e){u.paste_preprocess.call(l,l,e)}),u.paste_postprocess&&e.on("PastePostProcess",function(e){u.paste_postprocess.call(l,l,e)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&l.clipboard.pasteHtml(t.content),t.text&&l.clipboard.pasteText(t.text)}),e.settings.paste_block_drop&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),e.settings.paste_data_images||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:a,active:"text"==l.clipboard.pasteFormat}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:s.pasteFormat,onclick:a})})}),o(["tinymce/pasteplugin/Utils"])}(this)}).call(window)},4956439864790051:function(e,t){(function(){tinymce.PluginManager.add("textcolor",function(e){function t(t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var i;(i=e.style["forecolor"==t?"color":"background-color"])&&(n=i)}),n}function n(t){var n,i,r=[];for(i=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=e.settings.textcolor_map||i,i=e.settings[t+"_map"]||i,n=0;n<i.length;n+=2)r.push({text:i[n+1],color:"#"+i[n]});return r}function i(){function t(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+h+"-"+m++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}var i,r,o,a,s,d,c,p,f=this,h=f._id,m=0;for(p=f.settings.origin,i=n(p),i.push({text:tinymce.translate("No color"),color:"transparent"}),o='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=i.length-1,d=0;d<u[p];d++){for(o+="<tr>",s=0;s<l[p];s++)c=d*l[p]+s,c>a?o+="<td></td>":(r=i[c],o+=t(r.color,r.text));o+="</tr>"}if(e.settings.color_picker_callback){for(o+='<tr><td colspan="'+l[p]+'" class="mce-custom-color-btn"><div id="'+h+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+h+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",o+="<tr>",s=0;s<l[p];s++)o+=t("","Custom color");o+="</tr>"}return o+="</tbody></table>"}function r(t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged();
})}function o(t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}function a(n){function i(e){c.hidePanel(),c.color(e),r(c.settings.format,e)}function a(){c.hidePanel(),c.resetColor(),o(c.settings.format)}function s(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var u,d,c=this.parent();d=c.settings.origin,tinymce.DOM.getParent(n.target,".mce-custom-color-btn")&&(c.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var t,n,r,o=c.panel.getEl().getElementsByTagName("table")[0];for(t=tinymce.map(o.rows[o.rows.length-1].childNodes,function(e){return e.firstChild}),r=0;r<t.length&&(n=t[r],n.getAttribute("data-mce-color"));r++);if(r==l[d])for(r=0;r<l[d]-1;r++)s(t[r],t[r+1].getAttribute("data-mce-color"));s(n,e),i(e)},t(c.settings.format))),u=n.target.getAttribute("data-mce-color"),u?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"==u?a():i(u)):null!==u&&c.hidePanel()}function s(){var e=this;e._color?r(e.settings.format,e._color):o(e.settings.format)}var l,u;u={forecolor:e.settings.forecolor_rows||e.settings.textcolor_rows||5,backcolor:e.settings.backcolor_rows||e.settings.textcolor_rows||5},l={forecolor:e.settings.forecolor_cols||e.settings.textcolor_cols||8,backcolor:e.settings.backcolor_cols||e.settings.textcolor_cols||8},e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:i,onclick:a},onclick:s}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:i,onclick:a},onclick:s})})}).call(window)},5008048254971775:function(e,t,n){"use strict";var i=n(4675954658966525)("calypso:url-search"),r=n(0x90ba166cd016c),o=n(0xf8581dc705558);e.exports={getInitialState:function(){return{searchOpen:!1}},componentWillReceiveProps:function(e){e.search||this.setState({searchOpen:!1})},doSearch:function(e){var t;return this.setState({searchOpen:!1!==e}),this.onSearch?void this.onSearch(e):(t=o(window.location.href,e),i("search posts for:",e),void(this.props.search&&e?(i("replacing URL: "+t),r.replace(t)):(i("setting URL: "+t),r(t))))},getSearchOpen:function(){return this.state.searchOpen!==!1||this.props.search}}},5014143618718430:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return v.hasOwnProperty(e.type)?v[e.type].apply(this,arguments):null};var r=n(5896763357248615),o=i(r),a=n(7535811836182325),s=i(a),l=n(7223672945384532),u=i(l),d=n(0xd8a00252dc682),c=i(d),p=function(e,t){return o.default.createElement(s.default,{key:"contact-form-field-"+t},o.default.createElement(u.default,e),o.default.createElement("input",{type:"text"}))},f=function(e,t){return o.default.createElement(s.default,{key:"contact-form-field-"+t},o.default.createElement(u.default,e),o.default.createElement("textarea",null))},h=function(e,t){return o.default.createElement(s.default,{key:"contact-form-field-"+t},o.default.createElement("label",null,o.default.createElement("input",{type:"checkbox"}),e.label,o.default.createElement(c.default,{required:e.required})))},m=function(e,t){return o.default.createElement(s.default,{key:"contact-form-field-"+t},o.default.createElement(u.default,e),o.default.createElement("select",null,[].concat(e.options.split(",")).map(function(e,t){return o.default.createElement("option",{key:"contact-form-select-option-"+t},e)})))},g=function(e,t){return o.default.createElement(s.default,{key:"contact-form-field-"+t},o.default.createElement(u.default,e),[].concat(e.options.split(",")).map(function(e,t){return o.default.createElement("label",{key:"contact-form-radio-"+t},o.default.createElement("input",{type:"radio"}),o.default.createElement("span",null,e))}))},v={name:p,email:p,url:p,text:p,textarea:f,checkbox:h,select:m,radio:g};e.exports=t.default},5040701568233094:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return(0,k.default)(t,function(t){return te.default.isItemBeingUploaded(t)&&(!te.default.isTransientPreviewable(t)||"image"!==te.default.getMimePrefix(t)||de.ModalViews.GALLERY===e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModal=void 0;var o=n(6203271391094927),a=i(o),s=n(5630966280090368),l=i(s),u=n(0xccd53b671ebb6),d=i(u),c=n(6465156853722425),p=i(c),f=n(5143893728007863),h=i(f),m=n(5880884711457125),g=i(m),v=n(8173823076638946),y=i(v),b=n(5369032381290393),_=i(b),x=n(0xeb8f73c122973),C=i(x),E=n(0x75ac779472ba8),w=i(E),T=n(0x8817212fc310f),S=i(T),P=n(6442230718320275),k=i(P),I=n(5477852257145688),N=i(I),M=n(6072566794544024),R=i(M),D=n(0x3f19c8db6e3b5),A=i(D),O=n(0x45d24eaab7654),L=i(O),B=n(6897165321438721),F=i(B),H=n(619801137403500),z=i(H),U=n(5896763357248615),V=i(U),j=n(7572476330282672),W=n(6280957995252369),q=n(0xeda8327ee8a41),G=i(q),$=n(623310115397031),K=i($),Y=n(5084380759969092),X=n(4670161186515471),Q=i(X),J=n(7613110173109069),Z=i(J),ee=n(7380496197234269),te=i(ee),ne=n(7127988529575974),ie=i(ne),re=n(0xdb2b9985047d7),oe=i(re),ae=n(0x9880b97edca88),se=n(0x8f1527a7f80c8),le=n(7437731760987395),ue=n(5644333497174414),de=n(7152730280015627),ce=n(8634650774322227),pe=n(7330683811373103),fe=i(pe),he=n(0x92235db56b508),me=i(he),ge=n(4725747483787960),ve=t.EditorMediaModal=function(e){function t(e){var n;(0,h.default)(this,t);var i=(0,y.default)(this,(n=t.__proto__||(0,d.default)(t)).call.apply(n,[this].concat((0,p.default)(e))));return i.confirmSelection=function(){var e=i.props,t=e.view,n=e.mediaLibrarySelectedItems;if(!r(t,n)){var o=n.length?{type:de.ModalViews.GALLERY===t?"gallery":"media",items:n,settings:i.state.gallerySettings}:void 0;i.props.onClose(o)}},i.setDetailSelectedIndex=function(e){i.setState({detailSelectedIndex:e})},i.confirmDeleteMedia=function(e){var t=i.props,n=t.site,r=t.mediaLibrarySelectedItems;if(n&&e){var o=r;de.ModalViews.DETAIL===i.props.view&&(o=o[i.getDetailSelectedIndex()],i.setNextAvailableDetailView()),Z.default.delete(n.ID,o),K.default.mc.bumpStat("editor_media_actions","delete_media"),i.props.deleteMedia(n.ID,(0,A.default)(o,"ID"))}},i.deleteMedia=function(){var e=void 0;e=de.ModalViews.DETAIL===i.props.view?1:i.props.mediaLibrarySelectedItems.length;var t=i.props.translate("Are you sure you want to permanently delete this item?","Are you sure you want to permanently delete these items?",{count:e});(0,oe.default)(t,i.confirmDeleteMedia)},i.onAddMedia=function(){(0,Y.recordStat)("media_explorer_upload"),(0,Y.recordEvent)("Upload Media")},i.onAddAndEditImage=function(){Z.default.setLibrarySelectedItems(i.props.site.ID,[]),i.props.setView(de.ModalViews.IMAGE_EDITOR)},i.restoreOriginalMedia=function(e,t){e&&t&&Z.default.update(e,{ID:t.ID,media_url:t.guid},!0)},i.onImageEditorDone=function(e,t,n){if(e)return void i.onImageEditorCancel(n);var r=n.fileName,o=n.site,a=n.ID,s=n.resetAllImageEditorState,l=te.default.getMimeType(r),u={ID:a,media:{fileName:r,fileContents:t,mimeType:l}};Z.default.update(o.ID,u,!0),s(),i.props.setView(de.ModalViews.DETAIL)},i.onImageEditorCancel=function(e){var t=i.props.mediaLibrarySelectedItems,n=t[i.getDetailSelectedIndex()];if(!n)return void i.props.setView(de.ModalViews.LIST);i.props.setView(de.ModalViews.DETAIL);var r=e.resetAllImageEditorState;r()},i.onFilterChange=function(e){e!==i.state.filter&&K.default.mc.bumpStat("editor_media_actions","filter_"+(e||"all")),i.setState({filter:e})},i.onScaleChange=function(){i.statsTracking.scale||(K.default.mc.bumpStat("editor_media_actions","scale"),i.statsTracking.scale=!0)},i.onSearch=function(e){i.setState({search:e||void 0}),i.statsTracking.search||(K.default.mc.bumpStat("editor_media_actions","search"),i.statsTracking.search=!0)},i.onClose=function(){i.props.onClose()},i.editItem=function(e){var t=i.props,n=t.site,r=t.mediaLibrarySelectedItems,o=t.single;if(n){var a=r;a.some(function(t){return t.ID===e.ID})||(a=o?[e]:a.concat(e),Z.default.setLibrarySelectedItems(n.ID,a)),i.setDetailSelectedIndex((0,z.default)(a,{ID:e.ID})),K.default.mc.bumpStat("editor_media_actions","edit_button_contextual"),K.default.ga.recordEvent("Media","Clicked Contextual Edit Button"),i.props.setView(de.ModalViews.DETAIL)}},i.updateSettings=function(e){i.setState({gallerySettings:e})},i.state=i.getDefaultState(e),i}return(0,_.default)(t,e),(0,g.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.site&&this.props.visible&&!e.visible&&Z.default.setLibrarySelectedItems(e.site.ID,[]),this.props.visible!==e.visible&&(e.visible?this.setState(this.getDefaultState(e)):this.props.resetView())}},{key:"componentDidMount",value:function(){this.statsTracking={}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.view,n=e.mediaLibrarySelectedItems,i=e.site;(0,w.default)(n)||t!==de.ModalViews.LIST||Z.default.setLibrarySelectedItems(i.ID,[])}},{key:"componentWillUnmount",value:function(){this.props.resetView(),Z.default.setLibrarySelectedItems(this.props.site.ID,[])}},{key:"getDefaultState",value:function(e){return{filter:"",detailSelectedIndex:0,gallerySettings:e.initialGallerySettings}}},{key:"setNextAvailableDetailView",value:function(){1===this.props.mediaLibrarySelectedItems.length?this.props.setView(de.ModalViews.LIST):this.getDetailSelectedIndex()===this.props.mediaLibrarySelectedItems.length-1&&this.setDetailSelectedIndex(Math.max(this.getDetailSelectedIndex()-1,0))}},{key:"getDetailSelectedIndex",value:function(){var e=this.props.mediaLibrarySelectedItems,t=this.state.detailSelectedIndex;return t>=e.length?0:t}},{key:"getFirstEnabledFilter",value:function(){if(this.props.enabledFilters)return(0,F.default)(this.props.enabledFilters)}},{key:"getModalButtons",value:function(){if(de.ModalViews.IMAGE_EDITOR!==this.props.view){var e=this.props.mediaLibrarySelectedItems,t=r(this.props.view,e),n=[{action:"cancel",label:this.props.translate("Cancel")}];return de.ModalViews.GALLERY!==this.props.view&&e.length>1&&!(0,k.default)(e,function(e){return"image"!==te.default.getMimePrefix(e)})?n.push({action:"confirm",label:this.props.translate("Continue"),isPrimary:!0,disabled:t||!this.props.site,onClick:(0,N.default)(this.props.setView,de.ModalViews.GALLERY)}):n.push({action:"confirm",label:this.props.labels.confirm||this.props.translate("Insert"),isPrimary:!0,disabled:t||0===e.length,onClick:this.confirmSelection}),n}}},{key:"shouldClose",value:function(){return de.ModalViews.IMAGE_EDITOR!==this.props.view}},{key:"renderContent",value:function(){var e=void 0;switch(this.props.view){case de.ModalViews.DETAIL:e=V.default.createElement(me.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,selectedIndex:this.getDetailSelectedIndex(),onRestoreItem:this.restoreOriginalMedia,onSelectedIndexChange:this.setDetailSelectedIndex});break;case de.ModalViews.GALLERY:e=V.default.createElement(Q.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,settings:this.state.gallerySettings,onUpdateSettings:this.updateSettings});break;case de.ModalViews.IMAGE_EDITOR:var t=this.props,n=t.site,i=t.imageEditorProps,r=t.mediaLibrarySelectedItems,o=this.getDetailSelectedIndex(),a=r?r[o]:null;e=V.default.createElement(fe.default,(0,l.default)({siteId:n&&n.ID,media:a,onDone:this.onImageEditorDone,onCancel:this.onImageEditorCancel},i));break;default:e=V.default.createElement(G.default,{site:this.props.site,filter:this.state.filter||this.props.defaultFilter||this.getFirstEnabledFilter(),enabledFilters:this.props.enabledFilters,search:this.state.search,onAddMedia:this.onAddMedia,onAddAndEditImage:this.onAddAndEditImage,onFilterChange:this.onFilterChange,onScaleChange:this.onScaleChange,onSearch:this.onSearch,onEditItem:this.editItem,fullScreenDropZone:!1,single:this.props.single,onDeleteItem:this.deleteMedia,onViewDetails:this.props.onViewDetails,mediaLibrarySelectedItems:this.props.mediaLibrarySelectedItems,scrollable:!0})}return e}},{key:"render",value:function(){return V.default.createElement(ie.default,{isVisible:this.props.visible,buttons:this.getModalButtons(),onClose:this.onClose,additionalClassNames:"editor-media-modal",shouldCloseOnOverlayClick:this.shouldClose()},this.renderContent())}}]),t}(U.Component);ve.propTypes={visible:V.default.PropTypes.bool,mediaLibrarySelectedItems:V.default.PropTypes.arrayOf(V.default.PropTypes.object),onClose:V.default.PropTypes.func,site:V.default.PropTypes.object,siteId:V.default.PropTypes.number,labels:V.default.PropTypes.object,single:V.default.PropTypes.bool,defaultFilter:V.default.PropTypes.string,enabledFilters:V.default.PropTypes.arrayOf(V.default.PropTypes.string),view:V.default.PropTypes.oneOf((0,S.default)(de.ModalViews)),setView:V.default.PropTypes.func,resetView:V.default.PropTypes.func},ve.defaultProps={visible:!1,mediaLibrarySelectedItems:(0,a.default)([]),onClose:L.default,labels:(0,a.default)({}),setView:L.default,resetView:L.default,translate:C.default,view:de.ModalViews.LIST,imageEditorProps:{},deleteMedia:function(){}},t.default=(0,W.connect)(function(e,t){var n=t.site,i=t.siteId;return{view:(0,ae.getMediaModalView)(e),site:n||(0,se.getSite)(e,i)}},{setView:ue.setEditorMediaModalView,resetView:le.resetMediaModalView,deleteMedia:ce.deleteMedia,onViewDetails:(0,R.default)((0,ge.withAnalytics)((0,ge.bumpStat)("editor_media_actions","edit_button_dialog")),(0,ge.withAnalytics)((0,ge.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,N.default)(ue.setEditorMediaModalView,de.ModalViews.DETAIL))})((0,j.localize)(ve))},5064262455832020:function(e,t,n){"use strict";var i,r=n(0x8833a0705156c);e.exports=function(e){if((!i||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return i}},5065230085825904:function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var a in i)o.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(i=[],r=function(){return n}.apply(t,i),!(void 0!==r&&(e.exports=r)))}()},5084380759969092:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=void 0,i=T.getSelectedSite();v.default.mc.bumpStat("editor_usage",e),i&&(n=i.jetpack?"jetpack":"wpcom",v.default.mc.bumpStat("editor_usage_"+n,e),t&&v.default.mc.bumpStat("editor_cpt_usage_"+n,t+"_"+e))}function o(e){v.default.mc.bumpStat("editor_actions",e)}function a(e,t,n){v.default.ga.recordEvent("Editor",e,t,n)}function s(){var e=b.default.get(),t=b.default.getSavedPost();if(e&&t){var n=t.status,i=e.status,s="calypso_editor_"+e.type+"_",l=!1,u=!1,d=!1;e.ID||x.default.isPublished(e)?"draft"===i?s+="savedraft":n===i?(d="edit",s+="update"):"publish"===i||"private"===i?(s+="publish",d="new"):"pending"===i?s+="pending":"future"===i&&(s+="schedule",l="status-schedule",u="Scheduled Post"):s+="savedraft",d&&r(d,e.type),l&&o(l),u&&a(u),w("recordSaveEvent %s currentStatus=%s nextStatus=%s",s,n,i),v.default.tracks.recordEvent(s,{post_id:e.ID,post_type:e.type,visibility:x.default.getVisibility(e),current_status:n,next_status:i})}}function l(e){P("editor-button","calypso_"+e),v.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),w("TinyMCE button click",e,"mc=",S)}function u(e){P("html-editor-button","calypso_"+e),v.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),w("TinyMCE HTML button click",e,"mc=",S)}Object.defineProperty(t,"__esModule",{value:!0}),t.recordStat=o,t.recordEvent=a,t.recordSaveEvent=s,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=u;var d=n(4675954658966525),c=i(d),p=n(0x45d24eaab7654),f=i(p),h=n(4883949902648912),m=i(h),g=n(623310115397031),v=i(g),y=n(5367243434992214),b=i(y),_=n(0x5dd72de17825d),x=i(_),C=n(7418474439241154),E=i(C),w=(0,c.default)("calypso:posts:stats"),T=new E.default,S=Math.random()<=.01||"development"===(0,m.default)("env"),P=S?v.default.mc.bumpStat:f.default},5105495079892641:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(5890255058533989),v=i(g),y=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.activate=function(){i.props.onChange(i.props.value)},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.selected;return m.default.createElement(v.default,{selected:n,onClick:this.activate,disabled:t},this.props.children)}}]),t}(h.Component);t.default=y,e.exports=t.default},5141390167647390:function(e,t){"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=n},5160034419142391:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6203271391094927),o=i(r),a=n(5896763357248615),s=i(a),l=n(6280957995252369),u=n(8040677854470317),d=i(u),c=n(0x45d24eaab7654),p=i(c),f=n(6897165321438721),h=i(f),m=n(0x8817212fc310f),g=i(m),v=n(578807769082385),y=i(v),b=n(0xd5195cb3051cd),_=i(b),x=n(623310115397031),C=i(x),E=n(0xc0a5f55c718bb),w=i(E),T=n(5708247199348607),S=i(T),P=n(709335331861514),k=i(P),I=n(7784287972617637),N=i(I),M=n(0xb79f0d8848861),R=i(M),D=n(7613110173109069),A=i(D),O=n(6803892143900866),L=n(0x8f1527a7f80c8),B=n(4925618939972770),F=i(B),H=n(0x856a21fcb64fd),z=i(H),U=s.default.createClass({displayName:"MediaLibraryContent",propTypes:{site:s.default.PropTypes.object,mediaValidationErrors:s.default.PropTypes.object,filter:s.default.PropTypes.string,filterRequiresUpgrade:s.default.PropTypes.bool,search:s.default.PropTypes.string,containerWidth:s.default.PropTypes.number,single:s.default.PropTypes.bool,scrollable:s.default.PropTypes.bool,onAddMedia:s.default.PropTypes.func,onMediaScaleChange:s.default.PropTypes.func,onEditItem:s.default.PropTypes.func},getDefaultProps:function(){return{mediaValidationErrors:(0,o.default)({}),onAddMedia:p.default}},renderErrors:function(){var e,t,n=this;return e=(0,g.default)(this.props.mediaValidationErrors).map(h.default),t=(0,y.default)((0,_.default)(e),function(e,t){var i=void 0,r=void 0,o={count:e.length,args:e.length};n.props.site&&(r=A.default.clearValidationErrorsByType.bind(null,n.props.site.ID,t));var a="is-error",l=void 0,u=void 0;switch(t){case O.ValidationErrors.FILE_TYPE_NOT_IN_PLAN:a="is-warning",l="plan-media-storage-error-video",u="video-upload",i=n.translate("%d file could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.","%d files could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.",o);break;case O.ValidationErrors.FILE_TYPE_UNSUPPORTED:i=n.translate("%d file could not be uploaded because the file type is not supported.","%d files could not be uploaded because their file types are unsupported.",o);break;case O.ValidationErrors.UPLOAD_VIA_URL_404:i=n.translate("%d file could not be uploaded because no image exists at the specified URL.","%d files could not be uploaded because no images exist at the specified URLs",o);break;case O.ValidationErrors.EXCEEDS_MAX_UPLOAD_SIZE:i=n.translate("%d file could not be uploaded because it exceeds the maximum upload size.","%d files could not be uploaded because they exceed the maximum upload size.",o);break;case O.ValidationErrors.NOT_ENOUGH_SPACE:l="plan-media-storage-error",u="extra-storage",i=n.translate("%d file could not be uploaded because there is not enough space left.","%d files could not be uploaded because there is not enough space left.",o);break;case O.ValidationErrors.EXCEEDS_PLAN_STORAGE_LIMIT:l="plan-media-storage-error",u="extra-storage",i=n.translate("%d file could not be uploaded because you have reached your plan storage limit.","%d files could not be uploaded because you have reached your plan storage limit.",o);break;default:i=n.translate("%d file could not be uploaded because an error occurred while uploading.","%d files could not be uploaded because errors occurred while uploading.",o)}return s.default.createElement(S.default,{status:a,text:i,onDismissClick:r},n.renderNoticeAction(l,u))}),(0,d.default)(t)},renderNoticeAction:function(e,t){if(!e)return null;var n="calypso_upgrade_nudge_impression",i={cta_name:e,cta_feature:t};return s.default.createElement(k.default,{external:!0,href:t?"/plans/compare/"+this.props.siteSlug+"?feature="+t:"/plans/"+this.props.siteSlug,onClick:this.recordPlansNavigation.bind(this,"calypso_upgrade_nudge_cta_click",i)},this.translate("Upgrade Plan"),s.default.createElement(w.default,{eventName:n,eventProperties:i}))},recordPlansNavigation:function(e,t){C.default.ga.recordEvent("Media","Clicked Upload Error Action"),C.default.tracks.recordEvent(e,t)},renderMediaList:function(){return this.props.site?s.default.createElement(N.default,{siteId:this.props.site.ID,filter:this.props.filter,search:this.props.search},s.default.createElement(R.default,{siteId:this.props.site.ID},s.default.createElement(z.default,{key:"list-"+[this.props.site.ID,this.props.search,this.props.filter].join(),site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.props.filterRequiresUpgrade,search:this.props.search,containerWidth:this.props.containerWidth,photon:!this.props.site.is_private,single:this.props.single,scrollable:this.props.scrollable,onEditItem:this.props.onEditItem}))):s.default.createElement(z.default,{key:"list-loading"})},render:function(){return s.default.createElement("div",{className:"media-library__content"},!this.props.filterRequiresUpgrade&&s.default.createElement(F.default,{site:this.props.site,filter:this.props.filter,onMediaScaleChange:this.props.onMediaScaleChange,onAddMedia:this.props.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDeleteItem:this.props.onDeleteItem,sticky:!this.props.scrollable}),this.renderErrors(),this.renderMediaList())}});t.default=(0,l.connect)(function(e,t){return{siteSlug:t.site?(0,L.getSiteSlug)(e,t.site.ID):""}},null,null,{pure:!1})(U),e.exports=t.default},5172337875599245:function(e,t,n){"use strict";var i,r=n(0x98b3dfa6a747e),o=n(5896763357248615),a=n(8907951692841672),s=n(0x8ae3881d6e8c2),l=n(5106151372138902),u=n(7380496197234269),d=n(5527868178721527);i={get:function(e,t,n){var r;return t?(r=u.getMimePrefix(t),r&&"function"==typeof i.mimeTypes[r]?i.mimeTypes[r](e,t,n):i.link(t)):""},link:function(e){var t=o.createElement("a",{href:e.URL,title:e.title},e.title);return r.renderToStaticMarkup(t)},caption:function e(t,n){var r,a,u,e,c;return"string"!=typeof n&&(n=i.get(t,n)),r=l.parse(n),r&&r.content?(a=r.content.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),a&&(u=a[1].trim(),e=a[2].trim()),c=r.attrs.named.width,c||(c=d.deserialize(u).width),o.createElement("dl",{className:s("wp-caption",r.attrs.named.align,r.attrs.named.classes),style:{width:c}},o.createElement("dt",{className:"wp-caption-dt",dangerouslySetInnerHTML:{__html:u}}),o.createElement("dd",{className:"wp-caption-dd"},e))):null},mimeTypes:{image:function(e,t,n){n=a({size:"full",align:"none",forceResize:!1},n);var i=void 0,d=void 0;if("full"===n.size)i=t.width,d=t.height;else{var c=u.getThumbnailSizeDimensions(n.size,e),p=Math.min(c.width/t.width||1/0,c.height/t.height||1/0);i=Math.round(t.width*p),d=Math.round(t.height*p)}var f=void 0;f=n.forceResize||e&&!e.jetpack&&i&&i!==t.width?{maxWidth:i}:{size:n.size};var h=o.createElement("img",{src:u.url(t,f),alt:t.alt||t.title,width:isFinite(i)?i:null,height:isFinite(d)?d:null,className:s("align"+n.align,"size-"+n.size,"wp-image-"+t.ID)}),m=r.renderToStaticMarkup(h);return t.caption&&i&&(m=l.stringify({tag:"caption",attrs:{id:"attachment_"+t.ID,width:i},content:[m,t.caption].join(" ")})),m},audio:function(e,t){return l.stringify({tag:"audio",attrs:{src:t.URL}})},video:function(e,t){return u.isVideoPressItem(t)?l.stringify({tag:"wpvideo",attrs:[t.videopress_guid],type:"single"}):l.stringify({tag:"video",attrs:{src:t.URL,height:t.height,width:t.width}})}}},e.exports=i},5190340364196702:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return(0,s.default)(e.users.suggestions.requesting,[t],!1)}function o(e,t){return(0,s.default)(e.users.suggestions.items,[t],[])}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8640881565075096),s=i(a);t.isRequestingUserSuggestions=r,t.getUserSuggestions=o},5266524313857039:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorHtmlToolbar=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0xd0219df97eb97),m=i(h),g=n(0x83e42e33e67df),v=i(g),y=n(0x3f19c8db6e3b5),b=i(y),_=n(8640881565075096),x=i(_),C=n(5896763357248615),E=i(C),w=n(6280957995252369),T=n(7572476330282672),S=n(0x8ae3881d6e8c2),P=i(S),k=n(0xa505046780b0c),I=i(k),N=n(0x976699e5e0db4),M=n(0xf973c7cf3a0bf),R=n(7613110173109069),D=i(R),A=n(975622464187034),O=i(A),L=n(7380496197234269),B=i(L),F=n(6575959285183690),H=i(F),z=n(6104353596224629),U=i(z),V=n(7123518912576379),j=n(5172337875599245),W=i(j),q=n(0xe6bd8709d6a3c),G=n(6404962144281478),$=n(7682332938484091),K=i($),Y=n(5606098404520682),X=i(Y),Q=n(7186610166862683),J=i(Q),Z=n(0x515d1e113a7c1),ee=i(Z),te=n(0xbe8099e1748ed),ne=i(te),ie=n(0x57d0987682136),re=i(ie),oe=39,ae=t.EditorHtmlToolbar=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.state={contactFormDialogTab:"fields",isPinned:!1,isScrollable:!1,isScrolledFull:!1,openTags:[],selectedText:"",showContactFormDialog:!1,showImageDialog:!1,showInsertContentMenu:!1,showLinkDialog:!1,showMediaModal:!1},i.bindButtonsRef=function(e){i.buttons=e},i.bindInsertContentButtonsRef=function(e){i.insertContentButtons=e},i.onWindowResize=function(){i.disablePinOnSmallScreens(),i.toggleToolbarScrollableOnResize()},i.pinToolbarOnScroll=function(){if(!(0,V.isWithinBreakpoint)("<660px")){var e=i.props.content.offsetTop,t=i.state.isPinned;t&&window.pageYOffset<e-oe?i.setState({isPinned:!1}):!t&&window.pageYOffset>e-oe&&i.setState({isPinned:!0})}},i.disablePinOnSmallScreens=function(){i.state.isPinned&&(0,V.isWithinBreakpoint)("<660px")&&i.setState({isPinned:!1})},i.toggleToolbarScrollableOnResize=function(){var e=i.buttons.scrollWidth>i.buttons.clientWidth;e!==i.state.isScrollable&&i.setState({isScrollable:e})},i.hideToolbarFadeOnFullScroll=function(e){var t=e.target,n=t.scrollLeft,r=t.scrollWidth,o=t.clientWidth,a=n>=r-o-10;a!==i.state.isScrolledFull&&i.setState({isScrolledFull:a})},i.clickOutsideInsertContentMenu=function(e){i.state.showInsertContentMenu&&!i.insertContentButtons.contains(e.target)&&i.setState({showInsertContentMenu:!1})},i.updateEditorContent=function(e,t,n){return N.Env.gecko?i.updateEditorContentFirefox(e,t,n):11===N.Env.ie?i.updateEditorContentIE11(e,t,n):i.insertEditorContent(e,t,n)},i.attributesToString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.default)(e,function(e,t,n){return t?e+(" "+n+'="'+t+'"'):e},"")},i.openHtmlTag=function(e){var t=e.name,n=e.attributes,r=void 0===n?{}:n,o=e.options,a=void 0===o?{}:o;return(a.paragraph?"\n":"")+(a.indent?"\t":"")+("<"+t+i.attributesToString(r)+">")+(a.paragraph?"\n":"")},i.closeHtmlTag=function(e){var t=e.name,n=e.options,i=void 0===n?{}:n;return"</"+t+">"+(i.newLineAfter?"\n":"")+(i.paragraph?"\n\n":"")},i.onClickBold=function(){i.insertHtmlTag({name:"strong"})},i.onClickItalic=function(){i.insertHtmlTag({name:"em"})},i.onClickLink=function(e,t){t?i.insertHtmlTagWithText({name:"a",attributes:e,options:{text:t}}):(i.insertHtmlTagOpenClose({name:"a",attributes:e}),i.setCursorPosition(i.props.content.selectionEnd,-4))},i.onClickQuote=function(){i.insertHtmlTag({name:"blockquote",options:{paragraph:!0}})},i.onClickDelete=function(){var e=i.props.moment().format();i.insertHtmlTag({name:"del",attributes:{datetime:e}})},i.onClickInsert=function(){var e=i.props.moment().format();i.insertHtmlTag({name:"ins",attributes:{datetime:e}})},i.onClickImage=function(e){i.insertHtmlTagSelfClosed({name:"img",attributes:e})},i.onClickUnorderedList=function(){i.insertHtmlTag({name:"ul",options:{paragraph:!0}})},i.onClickOrderedList=function(){i.insertHtmlTag({name:"ol",options:{paragraph:!0}})},i.onClickListItem=function(){i.insertHtmlTag({name:"li",options:{indent:!0,newLineAfter:!0}})},i.onClickCode=function(){i.insertHtmlTag({name:"code"})},i.onClickMore=function(){i.insertCustomContent("<!--more-->",{paragraph:!0})},i.onClickCloseTags=function(){var e=(0,v.default)(i.state.openTags,function(e,t){return i.closeHtmlTag({name:t})+e},"");i.insertCustomContent(e),i.setState({openTags:[]})},i.onInsertMedia=function(e){i.insertCustomContent(e)},i.onInsertContactForm=function(){i.insertCustomContent((0,M.serialize)(i.props.contactForm),{paragraph:!0}),i.closeContactFormDialog()},i.openImageDialog=function(){i.setState({showImageDialog:!0})},i.closeImageDialog=function(){i.setState({showImageDialog:!1})},i.openLinkDialog=function(){var e=i.splitEditorContent(),t=e.inner;i.setState({selectedText:t,showLinkDialog:!0})},i.closeLinkDialog=function(){i.setState({showLinkDialog:!1})},i.toggleInsertContentMenu=function(){i.setState({showInsertContentMenu:!i.state.showInsertContentMenu})},i.openContactFormDialog=function(){i.setState({contactFormDialogTab:"fields",showContactFormDialog:!0,showInsertContentMenu:!1})},i.toggleContactFormDialogTab=function(){i.setState({contactFormDialogTab:"fields"===i.state.contactFormDialogTab?"settings":"fields"})},i.closeContactFormDialog=function(){i.setState({showContactFormDialog:!1})},i.openMediaModal=function(){i.setState({showInsertContentMenu:!1,showMediaModal:!0})},i.closeMediaModal=function(){i.setState({showMediaModal:!1})},i.onFilesDrop=function(){var e=i.props.site,t=O.default.getAll(e.ID),n=1===t.length&&"image"===B.default.getMimePrefix(t[0]);n&&!H.default.hasErrors(e.ID)?(t[0].transient&&U.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),i.onInsertMedia(W.default.get(e,t[0])),D.default.setLibrarySelectedItems(e.ID,[])):i.openMediaModal()},i.isTagOpen=function(e){return-1!==i.state.openTags.indexOf(e)},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.pinToolbarOnScroll=(0,m.default)(this.pinToolbarOnScroll,50),this.hideToolbarFadeOnFullScroll=(0,m.default)(this.hideToolbarFadeOnFullScroll,200),this.onWindowResize=(0,m.default)(this.onWindowResize,400),window.addEventListener("scroll",this.pinToolbarOnScroll),window.addEventListener("resize",this.onWindowResize),this.buttons.addEventListener("scroll",this.hideToolbarFadeOnFullScroll),document.addEventListener("click",this.clickOutsideInsertContentMenu),this.toggleToolbarScrollableOnResize()}},{key:"componentWillUnmount",value:function(){this.pinToolbarOnScroll.cancel(),this.onWindowResize.cancel(),this.hideToolbarFadeOnFullScroll.cancel(),
window.removeEventListener("scroll",this.pinToolbarOnScroll),window.removeEventListener("resize",this.onWindowResize),this.buttons.removeEventListener("scroll",this.hideToolbarFadeOnFullScroll),document.removeEventListener("click",this.clickOutsideInsertContentMenu)}},{key:"splitEditorContent",value:function(){var e=this.props.content,t=e.selectionEnd,n=e.selectionStart,i=e.value;return{before:i.substring(0,n),inner:i.substring(n,t),after:i.substring(t,i.length)}}},{key:"setCursorPosition",value:function(e,t){this.props.content.selectionEnd=this.props.content.selectionStart=e+t}},{key:"insertEditorContent",value:function(e,t,n){var i=this.props,r=i.content,o=i.onToolbarChangeContent;r.focus(),document.execCommand("insertText",!1,t),o(e+t+n)}},{key:"updateEditorContentFirefox",value:function(e,t,n){var i=e+t+n,r=this.props,o=r.content,a=r.content,s=a.selectionEnd,l=a.value,u=r.onToolbarChangeContent;this.props.content.value=i,o.focus(),document.execCommand("insertText",!1,t),u(i),this.setCursorPosition(s,i.length-l.length),this.props.content.focus()}},{key:"updateEditorContentIE11",value:function(e,t,n){var i=e+t+n,r=this.props,o=r.content,a=o.selectionEnd,s=o.value,l=r.onToolbarChangeContent;this.props.content.value=i,l(i),this.setCursorPosition(a,i.length-s.length)}},{key:"insertHtmlTagOpen",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),i=n.before,r=n.after;this.updateEditorContent(i,this.openHtmlTag(e),r),this.setState({openTags:t.concat(e.name)})}},{key:"insertHtmlTagClose",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),i=n.before,r=n.after;this.updateEditorContent(i,this.closeHtmlTag(e),r),this.setState({openTags:t.filter(function(t){return t!==e.name})})}},{key:"insertHtmlTagOpenClose",value:function(e){var t=this.splitEditorContent(),n=t.before,i=t.inner,r=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+i+this.closeHtmlTag(e),r)}},{key:"insertHtmlTagSelfClosed",value:function(e){var t=this.splitEditorContent(),n=t.before,i=t.inner,r=t.after,o="<"+e.name+this.attributesToString(e.attributes)+" />",a=e.options&&e.options.paragraph?"\n"+o+"\n\n":o;this.updateEditorContent(n,i+a,r)}},{key:"insertHtmlTagWithText",value:function(e){var t=this.splitEditorContent(),n=t.before,i=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+e.options.text+this.closeHtmlTag(e),i)}},{key:"insertCustomContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.splitEditorContent(),i=n.before,r=n.inner,o=n.after,a=t.paragraph?"\n":"";this.updateEditorContent(i,r+a+e+a+a,o)}},{key:"insertHtmlTag",value:function(e){var t=this.props.content,n=t.selectionEnd,i=t.selectionStart;n===i?this.isTagOpen(e.name)?this.insertHtmlTagClose(e):this.insertHtmlTagOpen(e):this.insertHtmlTagOpenClose(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.site,i=t.translate,r=(0,P.default)("editor-html-toolbar",{"is-pinned":this.state.isPinned,"is-scrollable":this.state.isScrollable,"is-scrolled-full":this.state.isScrolledFull}),o=(0,P.default)("editor-html-toolbar__insert-content-dropdown",{"is-visible":this.state.showInsertContentMenu}),a={strong:{label:"b",onClick:this.onClickBold},em:{label:"i",onClick:this.onClickItalic},a:{label:"link",onClick:this.openLinkDialog},blockquote:{label:"b-quote",onClick:this.onClickQuote},del:{onClick:this.onClickDelete},ins:{onClick:this.onClickInsert},img:{onClick:this.openImageDialog},ul:{onClick:this.onClickUnorderedList},ol:{onClick:this.onClickOrderedList},li:{onClick:this.onClickListItem},code:{onClick:this.onClickCode},more:{onClick:this.onClickMore},"close-tags":{disabled:!this.state.openTags.length,label:i("close tags"),onClick:this.onClickCloseTags}};return E.default.createElement("div",{className:r},E.default.createElement("div",{className:"editor-html-toolbar__wrapper"},E.default.createElement("div",{className:"editor-html-toolbar__wrapper-buttons"},E.default.createElement("div",{className:"editor-html-toolbar__buttons",ref:this.bindButtonsRef},E.default.createElement("div",{className:"editor-html-toolbar__button-insert-content",ref:this.bindInsertContentButtonsRef},E.default.createElement(J.default,{borderless:!0,className:"editor-html-toolbar__button-insert-media",compact:!0,onClick:this.openMediaModal},E.default.createElement(I.default,{icon:"add-outline"})),E.default.createElement(J.default,{borderless:!0,className:"editor-html-toolbar__button-insert-content-dropdown",compact:!0,onClick:this.toggleInsertContentMenu},E.default.createElement(I.default,{icon:this.state.showInsertContentMenu?"chevron-up":"chevron-down"}))),(0,b.default)(a,function(t,n){var i=t.disabled,r=t.label,o=t.onClick;return E.default.createElement(J.default,{borderless:!0,className:"editor-html-toolbar__button-"+n+" "+(e.isTagOpen(n)?"is-tag-open":""),compact:!0,disabled:i,key:n,onClick:o},r||n)})),E.default.createElement("div",{className:o},E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openMediaModal},E.default.createElement(I.default,{icon:"add-image"}),E.default.createElement("span",null,i("Add Media"))),E.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:this.openContactFormDialog},E.default.createElement(I.default,{icon:"mention"}),E.default.createElement("span",null,i("Add Contact Form")))))),E.default.createElement(K.default,{onClose:this.closeImageDialog,onInsert:this.onClickImage,shouldDisplay:this.state.showImageDialog}),E.default.createElement(X.default,{onClose:this.closeLinkDialog,onInsert:this.onClickLink,selectedText:this.state.selectedText,shouldDisplay:this.state.showLinkDialog}),E.default.createElement(ee.default,{activeTab:this.state.contactFormDialogTab,isEdit:!1,onChangeTabs:this.toggleContactFormDialogTab,onClose:this.closeContactFormDialog,onFieldAdd:this.props.fieldAdd,onFieldRemove:this.props.fieldRemove,onFieldUpdate:this.props.fieldUpdate,onInsert:this.onInsertContactForm,onSettingsUpdate:this.props.settingsUpdate,showDialog:this.state.showContactFormDialog}),E.default.createElement(ne.default,{onClose:this.closeMediaModal,onInsertMedia:this.onInsertMedia,visible:this.state.showMediaModal}),E.default.createElement(re.default,{onAddMedia:this.onFilesDrop,site:n}))}}]),t}(C.Component);ae.propTypes={contactForm:C.PropTypes.object,content:C.PropTypes.object,fieldAdd:C.PropTypes.func,fieldRemove:C.PropTypes.func,fieldUpdate:C.PropTypes.func,moment:C.PropTypes.func,onToolbarChangeContent:C.PropTypes.func,settingsUpdate:C.PropTypes.func,translate:C.PropTypes.func};var se=function(e){return{contactForm:(0,x.default)(e,"ui.editor.contactForm",{}),site:(0,q.getSelectedSite)(e)}},le={fieldAdd:G.fieldAdd,fieldRemove:G.fieldRemove,fieldUpdate:G.fieldUpdate,settingsUpdate:G.settingsUpdate};t.default=(0,w.connect)(se,le)((0,T.localize)(ae))},5369935525269188:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=n(8326181498771179),b=i(y),_=n(7123518912576379),x=i(_),C=function(){},E=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){if(!this.props.showOnMobile&&x.default.isMobile())return null;var e=(0,v.default)("popover","tooltip","is-"+this.props.status,"is-"+this.props.position,this.props.className);return m.default.createElement(b.default,{autoPosition:this.props.autoPosition,className:e,rootClassName:this.props.rootClassName,context:this.props.context,id:this.props.id,isVisible:this.props.isVisible,onClose:C,position:this.props.position,showDelay:this.props.showDelay},this.props.children)}}]),t}(h.Component);E.propTypes={autoPosition:h.PropTypes.bool,className:h.PropTypes.string,id:h.PropTypes.string,isVisible:h.PropTypes.bool,position:h.PropTypes.string,rootClassName:h.PropTypes.string,status:h.PropTypes.string,showDelay:h.PropTypes.number,showOnMobile:h.PropTypes.bool},E.defaultProps={showDelay:100,position:"top",showOnMobile:!1},t.default=E,e.exports=t.default},5387704736685213:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCellRangeRenderer=t.Grid=t.default=void 0;var r=n(0x39460bc37bba3),o=i(r),a=n(7387885866108935),s=i(a);t.default=o.default,t.Grid=o.default,t.defaultCellRangeRenderer=s.default},5408478231187706:function(e,t,n){"use strict";function i(e){return this instanceof i?void(this.key=e||"id"):new i(e)}var r=n(379676959299837);i.prototype.treeify=function(e){var t=[],n={};return e.forEach(function(t,i){n[e[i][this.key]]=t},this),e.forEach(function(e){var i;e.parent>0&&n[e.parent]?(i=n[e.parent],i.items=i.items||[],i.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},i.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,n){e.items&&i.prototype.untreeify(e.items,t),e.order=n+1,t.push(e)}),t},i.prototype.sortItems=function(e){var t={};t.items=e,r.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},i.prototype.removeOrderProperty=function(e){var t={};t.items=e,r.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},e.exports=i},5415223332675282:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.List=t.default=void 0;var r=n(5831767140253308),o=i(r);t.default=o.default,t.List=o.default},5444487591733898:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(6280957995252369),v=n(7572476330282672),y=n(4691924745409762),b=i(y),_=n(5862851293117563),x=i(_),C=n(5084380759969092),E=n(0xe6bd8709d6a3c),w=n(5523398591803755),T=n(6007716273106560),S=n(7996551768540594),P=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.editMenuOrder=e.editMenuOrder.bind(e),e.statTracked=!1,e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"editMenuOrder",value:function(e){var t=this.props,n=t.menuOrder,i=t.siteId,r=t.postId,o=parseInt(e.target.value,10)||0;o!==n&&(this.statTracked||(this.statTracked=!0,(0,C.recordStat)("advanced_menu_order_changed"),(0,C.recordEvent)("Changed page menu order")),this.props.editPost(i,r,{menu_order:o}))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.menuOrder;return m.default.createElement(b.default,{className:"editor-page-order"},m.default.createElement("label",null,m.default.createElement("span",{className:"editor-page-order__label-text"},t("Order",{context:"Editor: Field label for menu order."})),m.default.createElement(x.default,{type:"number",value:n,pattern:"[0-9]*",onChange:this.editMenuOrder,onBlur:this.editMenuOrder,className:"editor-page-order__input"})))}}]),t}(h.Component);P.propTypes={siteId:h.PropTypes.number,postId:h.PropTypes.number,menuOrder:h.PropTypes.number},P.defaultProps={menuOrder:0},t.default=(0,g.connect)(function(e){var t=(0,E.getSelectedSiteId)(e),n=(0,w.getEditorPostId)(e),i=(0,T.getEditedPostValue)(e,t,n,"menu_order");return{siteId:t,postId:n,menuOrder:i}},{editPost:S.editPost})((0,v.localize)(P)),e.exports=t.default},5445079694139091:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.toggleSidebar;return a.default.createElement("div",{className:"editor-sidebar__header"},a.default.createElement(f.default,{isSettings:!0}),a.default.createElement(c.default,{compact:!0,borderless:!0,className:"editor-sidebar__back",onClick:n,title:t("Close sidebar"),"aria-label":t("Close sidebar")},a.default.createElement(u.default,{icon:"cross"})))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5896763357248615),a=i(o),s=n(7572476330282672),l=n(0xa505046780b0c),u=i(l),d=n(7186610166862683),c=i(d),p=n(0x77b31439ff115),f=i(p);r.propTypes={translate:o.PropTypes.func,toggleSidebar:o.PropTypes.func},t.default=(0,s.localize)(r),e.exports=t.default},5509695933445186:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x45d24eaab7654),v=i(g),y=n(0x8ae3881d6e8c2),b=i(y),_=n(0xa505046780b0c),x=i(_),C=n(7572476330282672),E=n(623310115397031),w=i(E),T=n(5862851293117563),S=i(T),P=n(7613110173109069),k=i(P),I=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.state={value:"",isError:!1},i.upload=function(e){e.preventDefault();var t=!e.target.checkValidity();i.setState({isError:t}),!t&&i.props.site&&(k.default.clearValidationErrors(i.props.site.ID),k.default.add(i.props.site.ID,i.state.value),i.setState({value:"",isError:!1}),i.props.onAddMedia(),i.props.onClose(),w.default.mc.bumpStat("editor_upload_via","url"))},i.onChange=function(e){i.setState({isError:!1,value:e.target.value})},i.onKeyDown=function(e){return"Escape"===e.key?i.props.onClose(e):void("Enter"===e.key&&i.upload(e))},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,b.default)("media-library__upload-url",this.props.className),t=this.props,n=t.onClose,i=t.translate;return m.default.createElement("form",{className:e,onSubmit:this.upload,noValidate:!0},m.default.createElement(S.default,{type:"url",value:this.state.value,placeholder:"https://",onChange:this.onChange,onKeyDown:this.onKeyDown,isError:this.state.isError,autoFocus:!0,required:!0}),m.default.createElement("div",{className:"media-library__upload-url-button-group"},m.default.createElement("button",{type:"submit",className:"button is-primary"},i("Upload",{context:"verb"})),m.default.createElement("button",{type:"button",className:"media-library__upload-url-cancel",onClick:n},m.default.createElement("span",{className:"screen-reader-text"},i("Cancel")),m.default.createElement(x.default,{icon:"cross"}))))}}]),t}(h.Component);I.propTypes={className:h.PropTypes.string,site:h.PropTypes.object,onAddMedia:h.PropTypes.func,onClose:h.PropTypes.func},I.defaultProps={onAddMedia:v.default,onClose:v.default},t.default=(0,C.localize)(I),e.exports=t.default},5521214638251397:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(0x8ae3881d6e8c2),o=n(0x45d24eaab7654),a=n(6881822108913591),s=n(5628363501489590),l=n(0xa505046780b0c),u=i.createClass({displayName:"FoldableCard",propTypes:{actionButton:i.PropTypes.element,actionButtonExpanded:i.PropTypes.element,cardKey:i.PropTypes.string,compact:i.PropTypes.bool,disabled:i.PropTypes.bool,expandedSummary:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.element]),expanded:i.PropTypes.bool,icon:i.PropTypes.string,onClick:i.PropTypes.func,onClose:i.PropTypes.func,onOpen:i.PropTypes.func,screenReaderText:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.bool]),summary:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.element])},getInitialState:function(){return{expanded:this.props.expanded}},getDefaultProps:function(){return{onOpen:o,onClose:o,cardKey:"",icon:"chevron-down",isExpanded:!1,screenReaderText:!1}},onClick:function(){this.props.children&&this.setState({expanded:!this.state.expanded}),this.props.onClick&&this.props.onClick(),this.state.expanded?this.props.onClose(this.props.cardKey):this.props.onOpen(this.props.cardKey)},getClickAction:function(){if(!this.props.disabled)return this.onClick},getActionButton:function(){return this.state.expanded?this.props.actionButtonExpanded||this.props.actionButton:this.props.actionButton},renderActionButton:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return i.createElement("div",{className:"foldable-card__action",onClick:e},this.getActionButton());if(this.props.children){var t=24,n=this.props.screenReaderText||this.translate("More");return i.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},i.createElement("span",{className:"screen-reader-text"},n),i.createElement(l,{icon:this.props.icon,size:t}))}},renderContent:function(){return i.createElement("div",{className:"foldable-card__content"},this.props.children)},renderHeader:function(){var e=this.props.summary?i.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?i.createElement("span",{className:"foldable-card__summary_expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,o=r("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return i.createElement("div",{className:o,onClick:n},i.createElement("span",{className:"foldable-card__main"},this.props.header," "),i.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))},render:function(){var e=this.props.compact?s:a,t=r("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return i.createElement(e,{className:t},this.renderHeader(),this.state.expanded&&this.renderContent())}});e.exports=u},5527868178721527:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,a.default)(e);return l.default[n.toLowerCase()].deserialize(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var o=n(0xb73f756b9ac2e),a=i(o),s=n(0xb5cc28d413619),l=i(s)},5534979887946057:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=i(a),l=n(0xbfad9041fa583),u=i(l),d=n(8769928768342618),c=i(d);t.default=s.default.createClass({displayName:"ContactFormDialogFieldList",propTypes:{fields:a.PropTypes.array.isRequired,onFieldAdd:a.PropTypes.func.isRequired,onFieldRemove:a.PropTypes.func.isRequired,onFieldUpdate:a.PropTypes.func.isRequired},render:function(){var e=this;return this.props.fields.length>0?s.default.createElement("div",{className:"editor-contact-form-modal-fields"},this.props.fields.map(function(t,n){return s.default.createElement(c.default,(0,o.default)({key:n},t,{onRemove:function(){return e.props.onFieldRemove(n)},onUpdate:function(t){return e.props.onFieldUpdate(n,t)}}))})):s.default.createElement(u.default,{title:null,line:this.translate("An empty form is no fun! Go ahead and add some fields!"),action:this.translate("Add New Field"),actionCallback:this.props.onFieldAdd,isCompact:!0})}}),e.exports=t.default},5564679258395031:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.siteId,n=e.content,i=e.width;if(!t||!i)return null;var r=(0,f.stringify)((0,a.default)({attrs:{named:{w:i}}},(0,f.parse)(n)));return l.default.createElement(m.default,{siteId:t,width:i},r)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6736781861837147),a=i(o),s=n(5896763357248615),l=i(s),u=n(6280957995252369),d=n(0x60bab91c49f7e),c=i(d),p=n(0xe6bd8709d6a3c),f=n(5106151372138902),h=n(5744674924212010),m=i(h);r.propTypes={siteId:s.PropTypes.number,content:s.PropTypes.string,width:s.PropTypes.number},t.default=(0,u.connect)(function(e){return{siteId:(0,p.getSelectedSiteId)(e)}})((0,c.default)(r)),e.exports=t.default},5567973762736909:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(7572476330282672),_=n(7186610166862683),x=i(_),C=n(7629348406412959),E=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,n=e.onCancel,i=e.src,r=e.onDone,o=e.onReset,a=e.translate;return v.default.createElement("div",{className:"image-editor__buttons"},n&&v.default.createElement(x.default,{className:"image-editor__buttons-button",onClick:n},a("Cancel")),v.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!t,onClick:o},a("Reset")),v.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!i,primary:!0,onClick:r},a(" Done ")))}}]),t}(g.Component);E.propTypes={src:g.PropTypes.string,hasChanges:g.PropTypes.bool,resetImageEditorState:g.PropTypes.func,onDone:g.PropTypes.func,onCancel:g.PropTypes.func,onReset:g.PropTypes.func},E.defaultProps={src:"",hasChanges:!1,resetImageEditorState:m.default,onDone:m.default,onCancel:m.default,onReset:m.default},t.default=(0,y.connect)(function(e){var t=(0,C.getImageEditorFileInfo)(e),n=t.src,i=(0,C.imageEditorHasChanges)(e);return{src:n,hasChanges:i}})((0,b.localize)(E)),e.exports=t.default},5570506215714564:function(e,t,n){"use strict";function i(e){function t(){var t=A(".wpview-marker");return!!t.length&&(t.each(function(t,n){var i=e.dom.getAttrib(n,"data-wpview-text"),r=e.dom.getAttrib(n,"data-wpview-type");e.dom.replace(e.dom.createFragment('<div class="wpview-wrap" data-wpview-text="'+i+'" data-wpview-type="'+r+'"><p class="wpview-selection-before"> </p><div class="wpview-body" contenteditable="false"></div><p class="wpview-selection-after"> </p></div>'),n)}),!0)}function n(){e.nodeChanged()}function i(){t()&&A(".wpview-wrap").each(function(t,i){var o,s=A(i);void 0===s.attr("data-wpview-rendered")&&(o=s.attr("data-wpview-type"),(0,r.renderWithReduxStore)(l.createElement(d.components[o],{content:p(i),siteId:c.getSelectedSite()?c.getSelectedSite().ID:null,onResize:a(n,500)}),s.find(".wpview-body")[0],e.getParam("redux_store")),s.attr("data-wpview-rendered",""))})}function p(e){return decodeURIComponent(A(e).attr("data-wpview-text")||"")}function f(e){return h(e,"wpview-wrap")}function h(e,t){for(;e&&e.parentNode;){if(e.className&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1)return e;e=e.parentNode}return!1}function m(e){e.stopPropagation()}function g(t,n){var i=t?"before":"after",r=t?0:1;_(),e.selection.setCursorLocation(e.dom.select(".wpview-selection-"+i,n)[0],r),e.nodeChanged()}function v(t,n,i){var r=e.dom,o=r.create("p");O.ie&&O.ie<11||(o.innerHTML='<br data-mce-bogus="1">'),n?t.parentNode.insertBefore(o,t):r.insertAfter(o,t),_(),n&&i===L.ENTER?g(n,t):e.selection.setCursorLocation(o,0),e.nodeChanged()}function y(t){e.undoManager.transact(function(){v(t),s.unmountComponentAtNode(A(t).find(".wpview-body")[0]),e.dom.remove(t),e.focus()})}function b(t){var n,i=e.dom;t&&(t!==S&&(N||e.getBody().focus(),_(),S=t,i.setAttrib(t,"data-mce-selected",1),n=i.create("div",{class:"wpview-clipboard",contenteditable:"true"},p(t)),e.dom.select(".wpview-body",t)[0].appendChild(n),i.bind(n,"beforedeactivate focusin focusout",m),i.bind(S,"beforedeactivate focusin focusout",m),z?e.selection.select(n):e.selection.select(n,!0)),e.nodeChanged(),e.fire("wpview-selected",t))}function _(){var t,n=e.dom;S&&(t=e.dom.select(".wpview-clipboard",S)[0],n.unbind(t),n.remove(t),n.unbind(S,"beforedeactivate focusin focusout click mouseup",m),n.setAttrib(S,"data-mce-selected",null)),S=null}function x(e,t){return"<p>"+window.decodeURIComponent(t)+"</p>"}function C(e){return e.replace(/<div[^>]+data-wpview-text="([^"]+)"[^>]*>(?:[\s\S]+?wpview-selection-after[^>]+>[^<>]*<\/p>\s*|\.)<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x)}function E(){var t,n;e.isHidden()||(t=e.getContent({format:"raw"}),n=d.setMarkers(t),t!==n&&e.setContent(n,{format:"raw",isSettingMarkers:!0}))}function w(e){A("div.wpview-wrap, p.wpview-marker",e).each(function(e,t){t.innerHTML="."})}function T(e){return e<=47&&e!==L.SPACEBAR&&e!==L.ENTER&&e!==L.DELETE&&e!==L.BACKSPACE&&(e<37||e>40)||e>=224||e>=144&&e<=150||e>=91&&e<=93||e>=112&&e<=135}var S,P,k,I,N,M,R,D,A=e.$,O=o.Env,L=o.util.VK,B=o.dom.TreeWalker,F=!1,H=!0,z=/iPad|iPod|iPhone/.test(navigator.userAgent);e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=C(e.level.content))}),e.on("BeforeSetContent",function(t){var n;if(t.selection||A(".wpview-wrap .wpview-body").each(function(e,t){s.unmountComponentAtNode(t)}),t.content){if(!t.load&&(S&&y(S),n=e.selection.getNode(),n&&n!==e.getBody()&&/^\s*https?:\/\/\S+\s*$/i.test(t.content))){if(n=e.dom.getParent(n,"p"),!n||!/^[\s\uFEFF\u00A0]*$/.test(A(n).text()||""))return;n.innerHTML=""}t.isSettingMarkers||(t.content=d.setMarkers(t.content))}}),e.on("pastePreProcess",function(e){var t=e.content;if(t){t=o.trim(t.replace(/<[^>]+>/g,""));var n=/(https?:\/\/[^<]*)(\.jpg|\.jpeg|\.gif|\.png)\??.*$/i.exec(t);n?e.content='<img src="'+n[1]+n[2]+'" style="max-width:100%;" />':/^https?:\/\/\S+$/i.test(t)&&(e.content=t)}}),e.on("SetContent",function(){i()}),e.on("click",function(t){var n,i,r,a=t.clientX,s=t.clientY,l=e.getBody(),u=l.getBoundingClientRect(),d=l.firstChild,c=l.lastChild;d&&c&&(n=d.getBoundingClientRect(),i=c.getBoundingClientRect(),s<n.top&&(r=f(d))?(g(!0,r),t.preventDefault()):s>i.bottom&&(r=f(c))?(g(!1,r),t.preventDefault()):(a<u.left||a>u.right)&&o.each(e.dom.select(".wpview-wrap"),function(e){var n=e.getBoundingClientRect();return!(s<n.top)&&(s>=n.top&&s<=n.bottom?(a<u.left?(g(!0,e),t.preventDefault()):a>u.right&&(g(!1,e),t.preventDefault()),!1):void 0)}))}),e.on("init",function(){var t=!1,n=e.selection,i=window.MutationObserver||window.WebKitMutationObserver;e.on("BeforeSetContent",function(){var t,i,r=f(n.getNode());r&&(!r.nextSibling||f(r.nextSibling)?(i=e.getDoc().createTextNode(""),e.dom.insertAfter(i,r)):(t=new B(r.nextSibling,r.nextSibling),i=t.next()),n.select(i),n.collapse(!0))}),e.dom.bind(e.getDoc(),"touchmove",function(){t=!0}),e.on("mousedown mouseup click touchend",function(e){var n=f(e.target);return H=!1,n?(e.stopImmediatePropagation(),e.preventDefault(),"touchend"===e.type&&t?t=!1:b(n),!1):("touchend"!==e.type&&"mousedown"!==e.type||_(),void("touchend"===e.type&&t&&(t=!1)))},!0),i&&new i(function(){e.fire("wp-body-class-change")}).observe(e.getBody(),{attributes:!0,attributeFilter:["class"]})}),e.on("preinit show",function(){d.emitters.forEach(function(e){e.addListener("change",E)}),E()}),e.on("hide remove",function(){d.emitters.forEach(function(e){e.removeListener("change",E)})}),e.on("PreProcess",function(e){w(e.node)},!0),e.on("hide",function(){_(),w()}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=C(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=e.content.replace(/<div [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x))}),e.on("keydown",function(t){var n,i,r,o,a,s,l,u=t.keyCode,d=e.dom,c=e.selection;if(S){if((t.metaKey||t.ctrlKey)&&u!==L.BACKSPACE&&86!==u||u>=112&&u<=123)return void((t.metaKey||t.ctrlKey)&&88===u&&(F=S));if(i=f(c.getNode()),i!==S)return void _();u===L.LEFT?(g(!0,i),t.preventDefault()):u===L.UP?(i.previousSibling?f(i.previousSibling)?g(!0,i.previousSibling):(_(),c.select(i.previousSibling,!0),c.collapse()):g(!0,i),t.preventDefault()):u===L.RIGHT?(g(!1,i),t.preventDefault()):u===L.DOWN?(i.nextSibling?f(i.nextSibling)?g(!1,i.nextSibling):(_(),c.setCursorLocation(i.nextSibling,0)):g(!1,i),t.preventDefault()):T(u)||(y(S),u!==L.ENTER&&u!==L.DELETE&&u!==L.BACKSPACE||t.preventDefault())}else{if(t.metaKey||t.ctrlKey||u>=112&&u<=123)return;if(n=c.getNode(),k=n,i=f(n),c.isCollapsed()||(a=c.getRng(),(i=f(a.endContainer))?(s=a.cloneRange(),c.select(i.previousSibling,!0),c.collapse(),l=c.getRng(),s.setEnd(l.endContainer,l.endOffset),c.setRng(s)):(i=f(a.startContainer))&&(s=a.cloneRange(),s.setStart(i.nextSibling,0),c.setRng(s))),!i)return void(t.keyCode===L.BACKSPACE&&(e.dom.isEmpty(n)?(i=f(n.previousSibling))&&(g(!1,i),e.dom.remove(n),t.preventDefault()):(a=c.getRng())&&0===a.startOffset&&0===a.endOffset&&(i=f(n.previousSibling))&&(g(!1,i),t.preventDefault())));if(!(r=d.hasClass(i,"wpview-selection-before"))&&!(o=d.hasClass(i,"wpview-selection-after")))return;if(T(u))return;o&&u===L.UP||r&&u===L.BACKSPACE?(i.previousSibling?f(i.previousSibling)?g(!1,i.previousSibling):d.isEmpty(i.previousSibling)&&u===L.BACKSPACE?d.remove(i.previousSibling):(c.select(i.previousSibling,!0),c.collapse()):g(!0,i),t.preventDefault()):!o||u!==L.DOWN&&u!==L.RIGHT?!r||u!==L.UP&&u!==L.LEFT?r&&u===L.DOWN?(i.nextSibling?f(i.nextSibling)?g(!0,i.nextSibling):c.setCursorLocation(i.nextSibling,0):g(!1,i),t.preventDefault()):o&&u===L.LEFT||r&&u===L.RIGHT?(b(i),t.preventDefault()):o&&u===L.BACKSPACE?(y(i),t.preventDefault()):o?v(i):r&&v(i,!0,u):(i.previousSibling&&(f(i.previousSibling)?g(u===L.UP,i.previousSibling):(c.select(i.previousSibling,!0),c.collapse())),t.preventDefault()):(i.nextSibling&&(f(i.nextSibling)?g(u===L.RIGHT,i.nextSibling):c.setCursorLocation(i.nextSibling,0)),t.preventDefault()),u===L.ENTER&&t.preventDefault()}}),e.on("keyup",function(){F&&(y(F),F=!1)}),e.on("focus",function(){var t;N=!0,e.dom.addClass(e.getBody(),"has-focus"),H&&(t=f(e.getBody().firstChild))&&g(!0,t),H=!1}),e.on("blur",function(){N=!1,e.dom.removeClass(e.getBody(),"has-focus")}),e.on("NodeChange",function(t){var n=e.dom,i=e.dom.select(".wpview-wrap"),r=t.element.className,a=f(t.element),s=k;if(k=!1,clearInterval(P),o.each(i,function(e){e.className&&(e.className=e.className.replace(/ ?\bwpview-(?:selection-before|selection-after|cursor-hide)\b/g,""))}),N&&a)if("wpview-selection-before"!==r&&"wpview-selection-after"!==r||!e.selection.isCollapsed())h(t.element,"wpview-clipboard")||I||(_(),I++,g(!0,a));else{if(I=0,_(),s===a.previousSibling)return void g(!0,a);if(s===a.nextSibling)return void g(!1,a);n.addClass(a,r),P=setInterval(function(){n.hasClass(a,"wpview-cursor-hide")?n.removeClass(a,"wpview-cursor-hide"):n.addClass(a,"wpview-cursor-hide")},500)}}),e.on("BeforeExecCommand",function(){var t,n=e.selection.getNode();n&&((R="wpview-selection-before"===n.className)||"wpview-selection-after"===n.className)&&(t=f(n))&&(v(t,R),M=t)}),e.on("ExecCommand",function(){var t,n;S&&(t=S,_(),b(t)),M&&(n=M[R?"previousSibling":"nextSibling"],n&&"P"===n.nodeName&&e.dom.isEmpty(n)&&(e.dom.remove(n),g(R,M)),M=!1)}),e.on("ResolveName",function(t){e.dom.hasClass(t.target,"wpview-wrap")?(t.name=e.dom.getAttrib(t.target,"data-wpview-type")||"wpview",t.stopPropagation()):f(t.target)&&(t.preventDefault(),t.stopPropagation())}),e.addButton("wp_view_edit",{tooltip:u.translate("Edit",{context:"verb"}),icon:"dashicon dashicons-edit",onPostRender:function(){e.on("wptoolbar",function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),this.visible(d.isEditable(t)))}.bind(this))},onClick:function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),d.edit(t,e,p(S)))}}),e.addButton("wp_view_remove",{tooltip:u.translate("Remove"),icon:"dashicon dashicons-no",onClick:function(){S&&y(S)}}),e.once("preinit",function(){D=e.wp._createToolbar(["wp_view_edit","wp_view_remove"])}),e.on("wptoolbar",function(e){S&&(e.element=S,e.toolbar=D)})}var r=n(8025093951496706),o=n(0x976699e5e0db4),a=n(7452954268806788),s=n(5921998412115101),l=n(5896763357248615),u=n(7572476330282672),d=n(6951510676846444),c=n(7418474439241154)();
e.exports=function(){o.PluginManager.add("wpcom/view",i)}},5571783631035247:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(83765757817552),v=i(g),y=n(5896763357248615),b=i(y),_=n(7572476330282672),x=n(6280957995252369),C=n(0xa505046780b0c),E=i(C),w=n(8478951557498169),T=i(w),S=n(8326181498771179),P=i(S),k=n(5369935525269188),I=i(k),N=n(5736415905129993),M=i(N),R=n(0xe6bd8709d6a3c),D=n(5523398591803755),A=n(6007716273106560),O=function(e){function t(){(0,u.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments));return e.showPopover=e.showPopover.bind(e),e.showTooltip=e.showTooltip.bind(e),e.onCopy=e.onCopy.bind(e),e.hideTooltip=e.hideTooltip.bind(e),e.closePopover=e.closePopover.bind(e),e.state={showPopover:!1,popoverVisible:!1,showCopyConfirmation:!1,tooltip:!1},e}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.showPopover!==t.showPopover&&this.setState({popoverVisible:this.state.showPopover})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.dismissCopyConfirmation)}},{key:"showPopover",value:function(){this.setState({showPopover:!this.state.showPopover,tooltip:!1})}},{key:"showTooltip",value:function(){this.state.showPopover||this.setState({tooltip:!0})}},{key:"onCopy",value:function(){var e=this;this.setState({showCopyConfirmation:!0}),clearTimeout(this.dismissCopyConfirmation),this.dismissCopyConfirmation=setTimeout(function(){e.setState({showCopyConfirmation:!1})},4e3)}},{key:"hideTooltip",value:function(){this.setState({tooltip:!1})}},{key:"closePopover",value:function(){this.setState({showPopover:!1})}},{key:"renderCopyButton",value:function(){if(this.state.popoverVisible){var e=this.props,t=e.path,n=e.slug,i=e.translate,r=void 0;return r=this.state.showCopyConfirmation?i("Copied!"):i("Copy",{context:"verb"}),b.default.createElement(M.default,{text:t+n,onCopy:this.onCopy,compact:!0},r)}}},{key:"render",value:function(){var e=this.props.translate,t=void 0;return t=e(this.props.isEditable?"Edit post URL":"View post URL"),b.default.createElement("div",{className:"editor-permalink",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},b.default.createElement(E.default,{className:"editor-permalink__toggle",icon:"link",onClick:this.showPopover,ref:"popoverButton"}),b.default.createElement(P.default,{isVisible:this.state.showPopover,onClose:this.closePopover,position:"bottom right",context:this.refs&&this.refs.popoverButton,className:"editor-permalink__popover"},b.default.createElement(T.default,(0,o.default)({},(0,v.default)(this.props,"path","isEditable"),{onEscEnter:this.closePopover,instanceName:"post-popover"})),this.renderCopyButton()),b.default.createElement(I.default,{context:this.refs&&this.refs.popoverButton,isVisible:this.state.tooltip,position:"bottom"},t))}}]),t}(y.Component);O.propTypes={path:y.PropTypes.string,isEditable:y.PropTypes.bool,translate:y.PropTypes.func,slug:y.PropTypes.string},t.default=(0,x.connect)(function(e){var t=(0,R.getSelectedSiteId)(e),n=(0,D.getEditorPostId)(e);return{slug:(0,A.getEditedPostSlug)(e,t,n)}})((0,_.localize)(O)),e.exports=t.default},5606098404520682:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddLinkDialog=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(6280957995252369),v=n(7572476330282672),y=n(0xe6bd8709d6a3c),b=n(7127988529575974),_=i(b),x=n(0xbff38eca5e16d),C=i(x),E=n(0x4505d8ebb162c),w=i(E),T=n(0x965a288d34003),S=i(T),P=n(5862851293117563),k=i(P),I=n(6675946561311414),N=i(I),M=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,R=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,D=/^(?:[a-z]+:|#|\?|\.|\/)/,A=t.AddLinkDialog=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.state={linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}},i.bindLinkUrlRef=function(e){i.linkUrl=e},i.setLinkUrl=function(e){var t=i.state.selectedPost;i.setState({linkUrl:e.target.value,selectedPost:t.url===e.target.value?t:{id:null,url:null}})},i.setLinkText=function(e){i.setState({linkText:e.target.value})},i.setLinkNewTab=function(e){i.setState({linkNewTab:e.target.checked})},i.onSelectPost=function(e){i.setState({linkUrl:e.URL,selectedPost:{id:e.ID,url:e.URL}})},i.onCloseDialog=function(){i.setState({linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}}),i.props.onClose()},i.onInsertLink=function(){var e=i.state,t=e.linkNewTab,n=e.linkText;i.props.onInsert({href:i.correctUrl(),target:t?"_blank":""},n),i.onCloseDialog()},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({linkUrl:this.inferUrl(e.selectedText),linkText:e.selectedText})}},{key:"correctUrl",value:function(){var e=this.state.linkUrl.trim();return M.test(e)?"mailto:"+e:D.test(e)?e:"http://"+e}},{key:"inferUrl",value:function(e){return M.test(e)?"mailto:"+e:R.test(e)?e.replace(/&amp;|&#0?38;/gi,"&"):""}},{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.siteId,i=e.translate,r=this.state,o=r.linkNewTab,a=r.linkText,s=r.linkUrl,l=r.selectedPost,u=[{action:"cancel",label:i("Cancel")},{action:"add-link",isPrimary:!0,label:i("Add Link"),onClick:this.onInsertLink}];return m.default.createElement(_.default,{autoFocus:!1,isVisible:t,buttons:u,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},m.default.createElement(w.default,null,m.default.createElement(S.default,{htmlFor:"link_url"},i("URL")),m.default.createElement(k.default,{name:"link_url",onChange:this.setLinkUrl,ref:this.bindLinkUrlRef,value:s})),m.default.createElement(w.default,null,m.default.createElement(S.default,{htmlFor:"link_text"},i("Link Text")),m.default.createElement(k.default,{name:"link_text",onChange:this.setLinkText,value:a})),m.default.createElement(w.default,null,m.default.createElement(S.default,null,m.default.createElement(C.default,{checked:o,name:"link_new_tab",onChange:this.setLinkNewTab}),m.default.createElement("span",null,i("Open link in a new window/tab")))),m.default.createElement(w.default,null,m.default.createElement(S.default,null,m.default.createElement("span",null,i("Link to existing content"))),m.default.createElement(N.default,{emptyMessage:i("No posts found"),onChange:this.onSelectPost,order:"DESC",orderBy:"date",selected:l.id,showTypeLabels:!0,siteId:n,type:"any"})))}}]),t}(h.Component);A.propTypes={onClose:h.PropTypes.func,onInsert:h.PropTypes.func,selectedText:h.PropTypes.string,shouldDisplay:h.PropTypes.bool,siteId:h.PropTypes.number,translate:h.PropTypes.func},t.default=(0,g.connect)(function(e){return{siteId:(0,y.getSelectedSiteId)(e)}})((0,v.localize)(A))},5628363501489590:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8907951692841672),o=i(r),a=n(5896763357248615),s=i(a),l=n(0x8ae3881d6e8c2),u=i(l),d=n(6881822108913591),c=i(d);t.default=s.default.createClass({displayName:"CompactCard",render:function(){var e=(0,o.default)({},this.props,{className:(0,u.default)(this.props.className,"is-compact")});return s.default.createElement(c.default,e,this.props.children)}}),e.exports=t.default},5644333497174414:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return{type:c.EDITOR_START,siteId:e,postId:t,postType:n}}function o(e,t){return{type:c.EDITOR_STOP,siteId:e,postId:t}}function a(e){return{type:c.EDITOR_PASTE_EVENT,source:e}}function s(e){var t=(0,f.setMediaModalView)(e),n=m[e];return n?(0,h.withAnalytics)((0,h.bumpStat)("editor_media_actions",n),t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.MODAL_VIEW_STATS=void 0;var l,u=n(0xc729f06ce7488),d=i(u);t.startEditingPost=r,t.stopEditingPost=o,t.pasteEvent=a,t.setEditorMediaModalView=s;var c=n(0xd047e5c4c63f8),p=n(7152730280015627),f=n(7437731760987395),h=n(4725747483787960),m=t.MODAL_VIEW_STATS=(l={},(0,d.default)(l,p.ModalViews.LIST,"view_list"),(0,d.default)(l,p.ModalViews.DETAIL,"view_detail"),(0,d.default)(l,p.ModalViews.GALLERY,"view_gallery"),(0,d.default)(l,p.ModalViews.IMAGE_EDITOR,"view_edit"),(0,d.default)(l,p.ModalViews.VIDEO_EDITOR,"view_edit"),l)},5696930751057585:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0;if(document.implementation&&document.implementation.createHTMLDocument)t=document.implementation.createHTMLDocument("").body;else if("undefined"!=typeof DOMParser)try{return(new DOMParser).parseFromString(e,"text/html").body.firstChild}catch(e){}return t=t||document.createElement("div"),t.innerHTML=e,t.firstChild},e.exports=t.default},5703081709495860:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return isFinite(window.devicePixelRatio)?Math.round(m*window.devicePixelRatio):window.matchMedia&&window.matchMedia(h).matches?Math.round(2*m):m}function o(e,t,n,i,r,o,a){return""+t+o+i+a}function a(e,t,n,i){if(-1!==e.indexOf("data-wpmedia-src"))return e;var r=(0,u.deserialize)(e);if(r.media.transient||!r.media.ID)return e;var o=(0,c.default)(r.media.URL,Math.min(r.media.width||1/0,g));return""+t+o+'" data-wpmedia-src="'+r.media.URL+i}function s(e){return e.replace(f,o)}function l(e){return e.replace(p,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxWidth=r,t.resetImages=s,t.setImages=l,t.default=function(e){e.on("BeforeSetContent BeforeSetWpcomMedia",function(e){e.content&&"html"!==e.mode&&(e.content=l(e.content))}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=s(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=s(e.content))}),e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=s(e.level.content))})};var u=n(5527868178721527),d=n(8439846384365976),c=i(d),p=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?\/?>)/gi,f=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?)(\sdata-wpmedia-src="([^"]*?)")([^>]*?\/?>)/gi,h="( -webkit-min-device-pixel-ratio: 1.5 ), ( min--moz-device-pixel-ratio: 1.5 ), ( min-resolution: 1.5dppx )",m=680,g=r()},5704975097909473:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(474432612430512),s=n(0x6a500e58bc5b7),l=i(s),u=n(0x7f57b3c05d9db),d=i(u),c=n(7841574351959661),p=i(c);t.default=o.default.createClass({displayName:"EditorMediaModalGalleryEditItem",propTypes:{site:r.PropTypes.object,item:r.PropTypes.object,showRemoveButton:r.PropTypes.bool},getDefaultProps:function(){return{showRemoveButton:!0}},renderCaption:function(){var e=this.props,t=e.site,n=e.item;if((0,a.userCan)("upload_files",t))return o.default.createElement(d.default,{siteId:t.ID,item:n})},render:function(){var e=this.props,t=e.site,n=e.item,i=e.showRemoveButton;return o.default.createElement("div",{className:"editor-media-modal-gallery__edit-item"},o.default.createElement(l.default,{media:n,scale:1,photon:!1}),this.renderCaption(),i&&o.default.createElement(p.default,{siteId:t.ID,itemId:n.ID}))}}),e.exports=t.default},5736137603839510:function(e,t,n){"use strict";var i=n(5921998412115101),r=n(5896763357248615),o=n(0xa8ea23472235c),a=n(0x3f19c8db6e3b5),s=n(0x8ae3881d6e8c2),l=n(7542443254063963),u=1,d=r.createClass({displayName:"SegmentedControl",propTypes:{initialSelected:r.PropTypes.string,compact:r.PropTypes.bool,className:r.PropTypes.string,style:r.PropTypes.object,onSelect:r.PropTypes.func,options:r.PropTypes.arrayOf(r.PropTypes.shape({value:r.PropTypes.string.isRequired,label:r.PropTypes.string.isRequired,path:r.PropTypes.string}))},getDefaultProps:function(){return{compact:!1}},getInitialState:function(){var e;return this.props.options&&(e=this.props.initialSelected||this.props.options[0].value),{selected:e,keyboardNavigation:!1}},componentWillMount:function(){this.id=u,u++},componentWillUnmount:function(){window.removeEventListener("keydown",this.navigateItem)},render:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),r.createElement("ul",{className:s(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())},getSegmentedItems:function(){var e=0;return this.props.children?r.Children.map(this.props.children,function(t,n){var i=r.cloneElement(t,{ref:t.type===l?"item-"+e:null,key:"item-"+n,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===l&&e++,i},this):this.props.options.map(function(e,t){return r.createElement(l,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t},e.label)},this)},selectItem:function(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value,keyboardNavigation:!1}))},setKeyboardNavigation:function(e){this.setState({keyboardNavigation:e})},navigateItem:function(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),this.focusSibling("previous");break;case 39:e.preventDefault(),this.focusSibling("next")}},navigateItemByTabKey:function(e){var t=e.shiftKey?"previous":"next",n=this.focusSibling(t);n!==!1&&e.preventDefault()},focusSibling:function(e){var t,n,r;return n=this.props.options?o(a(this.props.options,"value"),Boolean):o(this.props.children,function(e){return e.type===l}),"number"!=typeof this.focused&&(this.focused=this.getCurrentFocusedIndex()),t="previous"===e?-1:1,r=this.focused+t,!(r>=n.length||r<0)&&(i.findDOMNode(this.refs["item-"+r].refs.itemLink).focus(),this.focused=r,r)},getCurrentFocusedIndex:function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),n=t.indexOf(e);return n>-1?n:0}});e.exports=d},5736415905129993:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(5921998412115101),u=n(5896763357248615),d=n(0x7ba9d7577dd1e),c=n(5059747709250767),p=n(0x45d24eaab7654),f=n(0x8ae3881d6e8c2),h=n(7186610166862683);e.exports=u.createClass({displayName:"ClipboardButton",propTypes:{className:u.PropTypes.string,text:u.PropTypes.string,onCopy:u.PropTypes.func},getDefaultProps:function(){return{onCopy:p}},componentDidMount:function(){var e=this,t=l.findDOMNode(this.refs.button);this.clipboard=new d(t,{text:function(){return e.props.text}}),this.clipboard.on("success",this.props.onCopy),this.clipboard.on("error",this.displayPrompt)},componentWillUnmount:function(){this.clipboard.destroy(),delete this.clipboard},displayPrompt:function(){window.prompt(this.translate("Highlight and copy the following text to your clipboard:"),this.props.text)},render:function(){var e=f("clipboard-button",this.props.className);return u.createElement(h,(0,o.default)({ref:"button"},c(this.props,(0,s.default)(this.constructor.propTypes)),{className:e}))}})},5744674924212010:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5630966280090368),a=r(o),s=n(5896763357248615),l=r(s),u=n(5059747709250767),d=r(u),c=n(0x8ae3881d6e8c2),p=r(c),f=n(4831732755810365),h=r(f),m=n(0x3d21fc1a1c382),g=i(m),v=n(38706215631535),y=r(v),b=n(7791318849796467),_=r(b);t.default=l.default.createClass({displayName:"Shortcode",propTypes:{siteId:s.PropTypes.number.isRequired,children:s.PropTypes.string.isRequired,filterRenderResult:s.PropTypes.func,className:s.PropTypes.string},componentDidMount:function(){this.fetchRendered(),this.listener=h.default.addListener(this.fetchRendered)},componentDidUpdate:function(){this.fetchRendered()},componentWillUnmount:function(){this.clearFetchTimeout(),this.listener&&this.listener.remove()},fetchRendered:function(){var e=this,t=this.props,n=t.siteId,i=t.children;h.default.get(n,i)||(this.clearFetchTimeout(),this.fetchTimeout=setTimeout(function(){e.clearFetchTimeout(),g.fetch(n,i)},0))},clearFetchTimeout:function(){clearTimeout(this.fetchTimeout),this.fetchTimeout=null},render:function(){var e=this.props,t=e.siteId,n=e.className,i=e.filterRenderResult,r=e.children,o=(0,p.default)("shortcode",n);return l.default.createElement(y.default,{siteId:t,shortcode:r,filterRenderResult:i},l.default.createElement(_.default,(0,a.default)({},(0,d.default)(this.props,"siteId","filterRenderResult"),{className:o})))}}),e.exports=t.default},5750894671760145:function(e,t,n){e.exports={default:n(0xea07a7ab78058),__esModule:!0}},5792510602518522:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=n(6881822108913591),b=i(y),_=n(0xbfc1d78d01b05),x=i(_),C=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,n=e.backHref,i=e.actionText,r=e.actionIcon,o=e.actionHref,a=e.actionOnClick,s=(0,v.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return m.default.createElement(b.default,{className:s},m.default.createElement(x.default,{text:t,href:n,onClick:this.props.onClick}),m.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),m.default.createElement(x.default,{text:i||t,href:o||n,onClick:a,icon:r,spacer:!a}))}}]),t}(h.Component);t.default=C,C.displayName="HeaderCake",C.propTypes={onClick:h.PropTypes.func,onTitleClick:h.PropTypes.func,backText:h.PropTypes.string,backHref:h.PropTypes.string,actionText:h.PropTypes.string,actionHref:h.PropTypes.string,actionIcon:h.PropTypes.string,actionOnClick:h.PropTypes.func},C.defaultProps={isCompact:!1},e.exports=t.default},5831767140253308:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(5387704736685213),c=i(d),p=n(5896763357248615),f=i(p),h=n(5065230085825904),m=i(h),g=n(423990962422576),v=i(g),y=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._cellRenderer=i._cellRenderer.bind(i),i._onScroll=i._onScroll.bind(i),i._onSectionRendered=i._onSectionRendered.bind(i),i}return s(t,e),u(t,[{key:"forceUpdateGrid",value:function(){this.Grid.forceUpdate()}},{key:"measureAllRows",value:function(){this.Grid.measureAllCells()}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.recomputeGridSize({rowIndex:e}),this.forceUpdateGrid()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.noRowsRenderer,r=t.scrollToIndex,o=t.width,a=(0,m.default)("ReactVirtualized__List",n);return f.default.createElement(c.default,l({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:a,columnWidth:o,columnCount:1,noContentRenderer:i,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:function(t){e.Grid=t},scrollToRow:r}))}},{key:"shouldComponentUpdate",value:function(e,t){return(0,v.default)(this,e,t)}},{key:"_cellRenderer",value:function(e){var t=e.rowIndex,n=e.style,i=r(e,["rowIndex","style"]),o=this.props.rowRenderer;return n.width="100%",o(l({index:t,style:n},i))}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,i=e.scrollTop,r=this.props.onScroll;r({clientHeight:t,scrollHeight:n,scrollTop:i})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,i=e.rowStartIndex,r=e.rowStopIndex,o=this.props.onRowsRendered;o({overscanStartIndex:t,overscanStopIndex:n,startIndex:i,stopIndex:r})}}]),t}(p.Component);y.defaultProps={estimatedRowSize:30,noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanRowCount:10,scrollToAlignment:"auto",style:{}},t.default=y},5878662102936072:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a);t.default=o.default.createClass({displayName:"TermTreeSelectorNoResults",mixins:[s.default],propTypes:{createLink:r.PropTypes.string},render:function(){var e=this.props.createLink,t=void 0;return e&&(t=this.translate("You may want to {{a}}create a new item{{/a}}.",{context:"Term Selector: term search/listing results",comment:"This is used when no terms match the given search, or if there are no terms at all.",components:{a:o.default.createElement("a",{className:"create-link",href:e,target:"_blank",rel:"noopener noreferrer"})}})),o.default.createElement("span",{className:"is-empty-content"},this.translate("No results. Please try a different search.")," ",t)}}),e.exports=t.default},5882696379081785:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var r=n(6993542345871032),o=i(r),a=n(4516592919049641),s=i(a),l=n(0x45d24eaab7654),u=i(l),d=n(6718701541658404),c=i(d),p=n(0xeb8f73c122973),f=i(p),h=n(5921998412115101),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(0x8ae3881d6e8c2),_=i(b),x=n(0xa505046780b0c),C=i(x),E=n(7572476330282672),w=n(7516220088436156),T=i(w),S=n(0xb139136b8340a),P=t.DropZone=v.default.createClass({displayName:"DropZone",propTypes:{className:g.PropTypes.string,fullScreen:g.PropTypes.bool,icon:g.PropTypes.node,onDrop:g.PropTypes.func,onVerifyValidTransfer:g.PropTypes.func,onFilesDrop:g.PropTypes.func,textLabel:g.PropTypes.string,translate:g.PropTypes.func,showDropZone:g.PropTypes.func.isRequired,hideDropZone:g.PropTypes.func.isRequired},getInitialState:function(){return{isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1}},getDefaultProps:function(){return{className:null,onDrop:u.default,onVerifyValidTransfer:function(){return!0},onFilesDrop:u.default,fullScreen:!1,icon:v.default.createElement(C.default,{icon:"cloud-upload",size:48}),translate:f.default}},componentDidMount:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)},componentDidUpdate:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()},componentWillUnmount:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()},resetDragState:function(){(this.state.isDraggingOverDocument||this.state.isDraggingOverElement)&&(this.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),this.toggleDropZoneReduxState(!1))},toggleMutationObserver:function(){this.disconnectMutationObserver(),this.state.isDraggingOverDocument&&(this.observer=new window.MutationObserver(this.detectNodeRemoval),this.observer.observe(document.body,{childList:!0,subtree:!0}))},disconnectMutationObserver:function(){this.observer&&(this.observer.disconnect(),delete this.observer)},detectNodeRemoval:function(e){var t=this;e.forEach(function(e){e.removedNodes.length&&(t.dragEnterNodes=(0,s.default)(t.dragEnterNodes,(0,o.default)(e.removedNodes)))})},toggleDraggingOverDocument:function(e){var t=void 0,n=void 0,i=void 0;"dragenter"!==e.type||(0,c.default)(this.dragEnterNodes,e.target)?"dragleave"===e.type&&(this.dragEnterNodes=(0,s.default)(this.dragEnterNodes,e.target)):this.dragEnterNodes.push(e.target),n=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,i=this.props.onVerifyValidTransfer(n.dataTransfer),t=i&&this.dragEnterNodes.length,this.setState({isDraggingOverDocument:t,isDraggingOverElement:t&&(this.props.fullScreen||this.isWithinZoneBounds(n.clientX,n.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(this.dragEnterNodes=(0,s.default)(this.dragEnterNodes,window)),this.toggleDropZoneReduxState(!(!this.state.isDraggingOverDocument&&!this.state.isDraggingOverElement))},toggleDropZoneReduxState:function(e){this.state.lastVisibleState!==e&&(e?this.props.showDropZone():this.props.hideDropZone(),this.setState({lastVisibleState:e}))},preventDefault:function(e){e.preventDefault()},isWithinZoneBounds:function(e,t){var n=void 0;return!!this.refs.zone&&(n=this.refs.zone.getBoundingClientRect(),n.bottom!==n.top&&n.left!==n.right&&(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom))},onDrop:function(e){e.dataTransfer&&e.dataTransfer.files.length,this.resetDragState(),(this.props.fullScreen||m.default.findDOMNode(this.refs.zone).contains(e.target))&&(this.props.onDrop(e),this.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&this.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation(),e.preventDefault()))},renderContent:function(){var e=this.props.textLabel?this.props.textLabel:this.props.translate("Drop files to upload");return v.default.createElement("div",{className:"drop-zone__content"},this.props.children?this.props.children:v.default.createElement("div",null,v.default.createElement("span",{className:"drop-zone__content-icon"},this.props.icon),v.default.createElement("span",{className:"drop-zone__content-text"},e)))},render:function(){var e=(0,_.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=v.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?v.default.createElement(T.default,null,t):t}}),k={showDropZone:S.showDropZone,hideDropZone:S.hideDropZone};t.default=(0,y.connect)(null,k)((0,E.localize)(P))},5884295564020614:function(e,t,n){var i=n(0xa3269e624c488),r=n(4989702543196567),o=n(8544050212076568),a=n(0x4b7af46a42260),s=1,l=32,u=i(function(e,t,n){var i=s;if(n.length){var d=a(n,o(u));i|=l}return r(e,i,t,n,d)});u.placeholder={},e.exports=u},5890255058533989:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0x4c328c9015af2),o=i(r),a=n(0x993f89fc903d0),s=n(5896763357248615),l=n(19189154744278),u=n(0x8ae3881d6e8c2),d=s.createClass({displayName:"NavItem",mixins:[l],propTypes:{itemType:s.PropTypes.string,path:s.PropTypes.string,selected:s.PropTypes.bool,tabIndex:s.PropTypes.number,onClick:s.PropTypes.func,isExternalLink:s.PropTypes.bool,disabled:s.PropTypes.bool,count:s.PropTypes.number,className:s.PropTypes.string,preloadSectionName:s.PropTypes.string},_preloaded:!1,preload:function(){!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,(0,a.preload)(this.props.preloadSectionName))},render:function(){var e,t,n,i=this.props.itemType?this.props.itemType:"tab",r={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};return r["section-nav-"+i]=!0,e=u(this.props.className,r),this.props.isExternalLink&&(t="_blank"),this.props.disabled||(n=this.props.onClick),s.createElement("li",{className:e},s.createElement("a",{href:this.props.path,target:t,className:"section-nav-"+i+"__link",onClick:n,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},s.createElement("span",{className:"section-nav-"+i+"__text"},this.props.children,"number"==typeof this.props.count&&s.createElement(o.default,{count:this.props.count}))))}});e.exports=d},5894987188525595:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=document.createElement("div"),n=!1;e.on("init focus",function(){var i=e.getParam("redux_store"),r=(0,f.getSelectedSite)(i.getState());n||!r||r.single_user_site||(t.setAttribute("class","mentions__container"),e.getContainer().appendChild(t),(0,h.renderWithReduxStore)(d.default.createElement(p.default,{editor:e,node:t}),t,i),n=!0),n&&r&&r.single_user_site&&(l.default.unmountComponentAtNode(t),n=!1)}),e.on("keydown",function(e){document.querySelector(".mentions__suggestions")&&e.keyCode===m&&e.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0x976699e5e0db4),a=i(o),s=n(5921998412115101),l=i(s),u=n(5896763357248615),d=i(u),c=n(4773810351376775),p=i(c),f=n(0xe6bd8709d6a3c),h=n(8025093951496706),m=a.default.util.VK.ENTER;t.default=function(){a.default.PluginManager.add("wpcom/mentions",r)},e.exports=t.default},5972971398089741:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryFilterBar=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0xeb8f73c122973),m=i(h),g=n(0x3f19c8db6e3b5),v=i(g),y=n(0x45d24eaab7654),b=i(y),_=n(6718701541658404),x=i(_),C=n(5896763357248615),E=i(C),w=n(7572476330282672),T=n(0xbceb83e51862c),S=i(T),P=n(0x6925a2279f1f8),k=i(P),I=n(0x75aac138cedeb),N=i(I),M=n(0xc0a5f55c718bb),R=i(M),D=n(0xafda1ffa4bb63),A=i(D),O=n(5105495079892641),L=i(O),B=t.MediaLibraryFilterBar=function(e){
function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.changeFilter=function(e){i.props.onFilterChange(e)},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getSearchPlaceholderText",value:function(){var e=this.props,t=e.filter,n=e.translate;switch(t){case"images":return n("Search images…");case"audio":return n("Search audio files…");case"videos":return n("Search videos…");case"documents":return n("Search documents…");default:return n("Search all media…")}}},{key:"getFilterLabel",value:function(e){var t=this.props.translate;switch(e){case"images":return t("Images",{comment:"Filter label for media list"});case"audio":return t("Audio",{comment:"Filter label for media list"});case"videos":return t("Videos",{comment:"Filter label for media list"});case"documents":return t("Documents",{comment:"Filter label for media list"});default:return t("All",{comment:"Filter label for media list"})}}},{key:"isFilterDisabled",value:function(e){var t=this.props.enabledFilters;return t&&(!e.length||!(0,x.default)(t,e))}},{key:"renderTabItems",value:function(){var e=this,t=["","images","documents","videos","audio"];return(0,v.default)(t,function(t){return E.default.createElement(L.default,{key:"filter-tab-"+t,value:t,selected:e.props.filter===t,onChange:e.changeFilter,disabled:e.isFilterDisabled(t)},e.getFilterLabel(t))})}},{key:"renderSearchSection",value:function(){return this.props.filterRequiresUpgrade?null:E.default.createElement(N.default,{analyticsGroup:"Media",pinned:!0,fitsContainer:!0,onSearch:this.props.onSearch,initialValue:this.props.search,placeholder:this.getSearchPlaceholderText(),delaySearch:!0})}},{key:"renderPlanStorage",value:function(){var e="calypso_upgrade_nudge_impression",t={cta_name:"plan-media-storage"};return E.default.createElement(A.default,{siteId:this.props.site.ID},E.default.createElement(R.default,{eventName:e,eventProperties:t}))}},{key:"render",value:function(){return E.default.createElement("div",{className:"media-library__filter-bar"},E.default.createElement(S.default,{selectedText:this.getFilterLabel(this.props.filter),hasSearch:!0},E.default.createElement(k.default,null,this.renderTabItems()),this.renderSearchSection()),this.renderPlanStorage())}}]),t}(C.Component);B.propTypes={basePath:E.default.PropTypes.string,enabledFilters:E.default.PropTypes.arrayOf(E.default.PropTypes.string),filter:E.default.PropTypes.string,filterRequiresUpgrade:E.default.PropTypes.bool,search:E.default.PropTypes.string,site:E.default.PropTypes.object,onFilterChange:E.default.PropTypes.func,onSearch:E.default.PropTypes.func,translate:E.default.PropTypes.func},B.defaultProps={filter:"",basePath:"/media",onFilterChange:b.default,onSearch:b.default,translate:m.default},t.default=(0,w.localize)(B)},6051631321006113:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6465156853722425),o=i(r),a=n(872100829608442),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(0x45d24eaab7654),b=i(y),_=n(0xf0f4288728240),x=i(_),C=n(5896763357248615),E=i(C),w=n(6280957995252369),T=n(0x8ae3881d6e8c2),S=i(T),P=n(8735826191793942),k=i(P),I=n(7629348406412959),N=n(8277184115649475),M=n(8693344302354816),R=n(44438367388668),D=n(0x4c51447983589),A=i(D),O=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state=n.getDefaultState(e),n.onTopLeftDrag=n.onTopLeftDrag.bind(n),n.onTopRightDrag=n.onTopRightDrag.bind(n),n.onBottomLeftDrag=n.onBottomLeftDrag.bind(n),n.onBottomRightDrag=n.onBottomRightDrag.bind(n),n.applyCrop=n.applyCrop.bind(n),n.onBorderDrag=n.onBorderDrag.bind(n),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.bounds,i=t.aspectRatio,r=t.crop;if(!(0,x.default)(n,e.bounds)){var o=e.bounds.rightBound-e.bounds.leftBound,a=e.bounds.bottomBound-e.bounds.topBound,s=e.bounds.topBound+e.crop.topRatio*a,l=e.bounds.leftBound+e.crop.leftRatio*o,u=s+e.crop.heightRatio*a,d=l+e.crop.widthRatio*o,c={top:s,left:l,bottom:u,right:d};this.setState(c),this.updateCrop(c)}i!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,x.default)(e.crop,R.defaultCrop)||(0,x.default)(r,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,n){t=t||this.props;var i=t.aspectRatio;if(i===N.AspectRatios.FREE)return void this.setState(e,n);var r=t.degrees%180!==0,o=(0,s.default)({},this.state,e),a=o.right-o.left,l=o.bottom-o.top,u=void 0,d=void 0,c=a,p=l;switch(i){case N.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,n);var f=this.props.originalAspectRatio,h=f.width,m=f.height;u=r?m:h,d=r?h:m;break;case N.AspectRatios.ASPECT_1X1:u=1,d=1;break;case N.AspectRatios.ASPECT_16X9:u=r?9:16,d=r?16:9;break;case N.AspectRatios.ASPECT_4X3:u=r?3:4,d=r?4:3;break;case N.AspectRatios.ASPECT_3X2:u=r?2:3,d=r?3:2}var g=Math.min(a/u,l/d);c=u*g,p=d*g,e.hasOwnProperty("top")?e.top=o.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=o.top+p),e.hasOwnProperty("left")?e.left=o.right-c:e.hasOwnProperty("right")&&(e.right=o.left+c),this.setState(e,n)}},{key:"onTopLeftDrag",value:function(e,t){var n=this.state,i=n.right,r=n.bottom,o=this.props.minCropSize,a=t,s=e;i-s<=o.width&&(s=i-o.width),r-a<=o.height&&(a=r-o.height),this.updateCrop({top:a,left:s})}},{key:"onTopRightDrag",value:function(e,t){var n=this.state,i=n.left,r=n.bottom,o=this.props.minCropSize,a=t,s=e;s-i<=o.width&&(s=i+o.width),r-a<=o.height&&(a=r-o.height),this.updateCrop({top:a,right:s})}},{key:"onBottomRightDrag",value:function(e,t){var n=this.state,i=n.left,r=n.top,o=this.props.minCropSize,a=t,s=e;s-i<=o.width&&(s=i+o.width),a-r<=o.height&&(a=r+o.height),this.updateCrop({bottom:a,right:s})}},{key:"onBottomLeftDrag",value:function(e,t){var n=this.state,i=n.right,r=n.top,o=this.props.minCropSize,a=t,s=e;i-s<=o.width&&(s=i-o.width),a-r<=o.height&&(a=r+o.height),this.updateCrop({bottom:a,left:s})}},{key:"onBorderDrag",value:function(e,t){var n=this.state,i=n.top,r=n.left,o=n.right,a=n.bottom,s=o-r,l=a-i;this.setState({top:t,left:e,bottom:t+l,right:e+s})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,n=e.left,i=e.right,r=e.bottom,o=this.props.bounds,a=o.topBound,s=o.leftBound,l=o.rightBound,u=o.bottomBound,d=t-a,c=n-s,p=i-n,f=r-t,h=l-s,m=u-a,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var v=this.props.originalAspectRatio,y=v.width,b=v.height,_=g?b:y,x=g?y:b,C=x/_;m=h*C}return[d/m,c/h,p/h,f/m]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,o.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,o.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,n=e.left,i=e.right,r=e.bottom,o=i-n,a=r-t,s="image-editor__crop-handle",l=this.props.bounds,u=l.topBound,d=l.leftBound,c=l.rightBound,p=l.bottomBound;return E.default.createElement("div",null,E.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:n+"px",width:o+"px",height:Math.max(0,t-u)+"px"}}),E.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:d+"px",width:Math.max(0,n-d)+"px",height:Math.max(0,p-u)+"px"}}),E.default.createElement("div",{className:"image-editor__crop-background",style:{top:r+"px",left:n+"px",width:o+"px",height:Math.max(0,p-r)+"px"}}),E.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:i+"px",width:Math.max(0,c-i)+"px",height:Math.max(0,p-u)+"px"}}),E.default.createElement(k.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:n,y:t,width:o,height:a,bounds:{top:u,left:d,bottom:p,right:c},className:"image-editor__crop"}),E.default.createElement(k.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:n,y:t,controlled:!0,bounds:{bottom:r,right:i,top:u,left:d},ref:"topLeft",className:(0,S.default)(s,s+"-nwse")}),E.default.createElement(k.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:i,controlled:!0,bounds:{bottom:r,left:n,top:u,right:c},ref:"topRight",className:(0,S.default)(s,s+"-nesw")}),E.default.createElement(k.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:r,x:i,controlled:!0,bounds:{top:t,left:n,bottom:p,right:c},ref:"bottomRight",className:(0,S.default)(s,s+"-nwse")}),E.default.createElement(k.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:r,x:n,controlled:!0,bounds:{top:t,right:i,bottom:p,left:d},ref:"bottomLeft",className:(0,S.default)(s,s+"-nesw")}))}}]),t}(C.Component);O.propTypes={degrees:C.PropTypes.number,bounds:C.PropTypes.shape({topBound:C.PropTypes.number,leftBound:C.PropTypes.number,bottomBound:C.PropTypes.number,rightBound:C.PropTypes.number}),crop:C.PropTypes.shape({topRatio:C.PropTypes.number,leftRatio:C.PropTypes.number,widthRatio:C.PropTypes.number,heightRatio:C.PropTypes.number}),aspectRatio:C.PropTypes.string,imageEditorCrop:C.PropTypes.func,imageEditorComputedCrop:C.PropTypes.func,minCropSize:C.PropTypes.shape({width:C.PropTypes.number,height:C.PropTypes.number}),imageEditorHasChanges:C.PropTypes.bool},O.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:b.default,imageEditorComputedCrop:b.default,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,w.connect)(function(e){var t=(0,I.getImageEditorCropBounds)(e),n=(0,I.getImageEditorCrop)(e),i=(0,I.getImageEditorAspectRatio)(e),r=(0,I.getImageEditorTransform)(e),o=r.degrees;return{bounds:t,crop:n,aspectRatio:i,degrees:o,originalAspectRatio:(0,A.default)(e),imageEditorHasChanges:(0,I.imageEditorHasChanges)(e)}},{imageEditorCrop:M.imageEditorCrop,imageEditorComputedCrop:M.imageEditorComputedCrop})(O),e.exports=t.default},6076045856065739:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){h("init");var t=e.getParam("redux_store"),n=function(e){return"application/x-vnd.google-docs-image-clip+wrapped"===e||"application/x-vnd.google-docs-document-slice-clip+wrapped"===e},i=function(e){return e.some(n)?f.SOURCE_GOOGLE_DOCS:f.SOURCE_UNKNOWN},r=function(e,n){h("track paste event");var r=(0,a.default)(n),o=i(r);t.dispatch((0,c.withAnalytics)((0,c.recordTracksEvent)("calypso_editor_content_paste",{mode:e,types:r.join(", "),source:o}),(0,p.pasteEvent)(o)))},o=function(e){return e.clipboardData&&r("visual-editor",e.clipboardData.types)},s=function(e){return e.clipboardData&&r("html-editor",e.clipboardData.types)};e.on("paste",o);var l=e.getParam("textarea");l&&l.addEventListener("paste",s),e.on("remove",function(){e.off("paste",o),l.removeEventListener("paste",s)})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6993542345871032),a=i(o),s=n(4675954658966525),l=i(s),u=n(0x976699e5e0db4),d=i(u),c=n(4725747483787960),p=n(5644333497174414),f=n(0xfb3a82add066),h=(0,l.default)("calypso:tinymce-plugins:wpcom-track-paste");t.default=function(){d.default.PluginManager.add("wpcom/trackpaste",r)},e.exports=t.default},6080475287248452:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(0xa505046780b0c),u=i(l);t.default=o.default.createClass({displayName:"FormInputValidation",propTypes:{isError:o.default.PropTypes.bool,isWarning:o.default.PropTypes.bool,text:o.default.PropTypes.string,icon:o.default.PropTypes.string},getDefaultProps:function(){return{isError:!1}},render:function(){var e=(0,s.default)({"form-input-validation":!0,"is-warning":this.props.isWarning,"is-error":this.props.isError}),t=this.props.isError||this.props.isWarning?"notice-outline":"checkmark";return o.default.createElement("div",{className:e},o.default.createElement("span",null,o.default.createElement(u.default,{size:24,icon:this.props.icon?this.props.icon:t})," ",this.props.text))}}),e.exports=t.default},6104353596224629:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i,r=C.get();("string"==typeof e||Array.isArray(e))&&(e=(0,d.default)([].concat(e).map(function(e){return[e,t]}))),i=(r.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var r={key:t,operation:n};"delete"!==n&&(r.value=e[t]),i.push(r)}),k.handleViewAction({type:"EDIT_POST",post:{metadata:i}})}function o(e){return e=(0,h.default)(e),e=(0,v.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}var a,s=n(477028190620861),l=i(s),u=n(5973119050011126),d=i(u),c=n(6269536571656272),p=i(c),f=n(8446265970839099),h=i(f),m=n(8907951692841672),g=i(m),v=n(6703009972949751),y=n(4675954658966525)("calypso:posts"),b=n(0xd1ca77937cbcf),_=n(8478035041892969),x=n(0xe5816b799bd0f),C=n(5367243434992214),E=n(0x69c14441898c8),w=n(0x7325fdfe77d0d),T=n(7418474439241154)(),S=n(0x5dd72de17825d),P=n(0xbc30bb6c305c5),k=n(8769427305820155),I=n(5084380759969092);a={startEditingNew:function(e,t){var n;t=t||{},n={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},k.handleViewAction(n)},startEditingExisting:function(e,t){var n,i=C.get();e&&(i&&i.site_ID===e&&i.ID===t||(k.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),n=_.site(e).post(t),n.get({context:"edit",meta:"autosave"},function(e,t){k.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){k.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,n=C.get(),i=C.getSavedPost(),r=_.undocumented().site(n.site_ID);if(e=e||function(){},!C.isDirty())return e(new Error("NOT_DIRTY"));if(b.set("wpcom-autosave:"+n.site_ID+":"+n.ID,n),S.isPublished(i)||S.isPublished(n)){if(t=T.getSite(n.site_ID),!n.ID||!t||t.jetpack&&P(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));k.handleViewAction({type:"POST_AUTOSAVE",post:n}),r.postAutosave(n.ID,{content:n.content,title:n.title,excerpt:n.excerpt},function(t,n){k.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:n}),e(t,n)})}else a.saveEdited(null,e,{recordSaveEvent:!1})},blockSave:function(e){k.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){k.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){k.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){k.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){k.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){r(e,t,"update")},deleteMetadata:function(e){r(e,null,"delete")},saveEdited:function(e,t,n){var i,r,a,s,u,d,c;return k.handleViewAction({type:"EDIT_POST",post:e}),i=C.get(),C.hasContent()?C.isSaveBlocked()?void(0,p.default)(t,new Error("SAVE_BLOCKED"),i):(s=C.getChangedAttributes(),(0,l.default)(s).length?(s=o(s),u=C.getRawContent(),d=w.get("editor-mode"),c=!i.ID,k.handleViewAction({type:"EDIT_POST_SAVE"}),r=_.site(i.site_ID).post(i.ID),a={context:"edit",apiVersion:"1.2"},n&&n.recordSaveEvent===!1||I.recordSaveEvent(),(s&&"future"===s.status&&S.isFutureDated(i)||s&&"publish"===s.status&&S.isBackDated(i))&&(s=(0,g.default)({},s,{status:"publish",date:i.date})),void r[c?"add":"update"](a,s,function(e,n){var i,r;r=w.get("editor-mode"),e||(i=x.get(n.global_ID)),k.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:d===r?u:null,isNew:c,original:i,post:n}),t(e,n)})):void(0,p.default)(t,new Error("NO_CHANGE"),i)):void(0,p.default)(t,new Error("NO_CONTENT"),i)},update:function(e,t,n){var i=_.site(e.site_ID).post(e.ID);i.update(t,a.receiveUpdate.bind(null,n))},trash:function(e,t){var n=_.site(e.site_ID).post(e.ID);n.delete(a.receiveUpdate.bind(null,t))},restore:function(e,t){var n=_.site(e.site_ID).post(e.ID);n.restore(a.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";k.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e,t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";i=E(r),i.isLastPage()||i.isFetchingNextPage()||(k.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:r}),t=i.getID(),e=i.getNextPageParams(),n=i.getSiteID(),n?_.site(n).postsList(e,a.receivePage.bind(null,t,r)):_.me().postsList(e,a.receivePage.bind(null,t,r)))},receivePage:function(e,t,n,i){k.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:n,data:i})},fetchUpdated:function(){var e,t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";i=E(r),i.isFetchingNextPage()||(k.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:r}),e=i.getID(),t=i.getUpdatesParams(),n=i.getSiteID(),n?(y("Fetching posts that have been updated for %s since %s %o",n,t.modified_after,t),_.site(n).postsList(t,a.receiveUpdated.bind(null,e,r))):(y("Fetching posts that have been updated since %s %o",t.modified_after,t),_.me().postsList(t,a.receiveUpdated.bind(null,e,r))))},receiveUpdated:function(e,t,n,i){k.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:n,data:i})},receiveUpdate:function(e,t,n){var i;t||(i=x.get(n.global_ID)),k.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:i,post:n}),e(t,n)},fetchCounts:function(e,t){k.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),_.undocumented().site(e).postCounts(t,function(t,n){k.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:n,siteId:e})})}},e.exports=a},6118332582749466:function(e,t,n){"use strict";function i(e){function t(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,r.renderWithReduxStore)(a.createElement(u,{visible:i,editor:e,onClose:function(){return t(!1)}}),n,e.getParam("redux_store")),i||e.focus()}var n,i;e.on("init",function(){n=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){o.unmountComponentAtNode(n),n.parentNode.removeChild(n),n=null}),e.addCommand("WP_Link",function(){return t()}),e.addShortcut("access+a","","WP_Link"),e.addShortcut("meta+k","","WP_Link"),e.addButton("link",{icon:"link",tooltip:l("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink"}),e.addMenuItem("link",{icon:"link",text:l("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.on("pastepreprocess",function(t){var n=t.content;e.selection.isCollapsed()||(n=n.replace(/<[^>]+>/g,""),n=s.trim(n),/^(?:https?:)?\/\/\S+$/i.test(n)&&(e.execCommand("mceInsertLink",!1,{href:e.dom.decode(n)}),t.preventDefault()))}),s.ui.WPLinkPreview=s.ui.Control.extend({url:"#",renderHtml:function(){return'<div id="'+this._id+'" class="wp-link-preview"><a href="'+this.url+'" target="_blank" rel="noopener noreferrer" tabindex="-1">'+this.url+"</a></div>"},setURL:function(e){var t,n;this.url!==e&&(this.url=e,e=window.decodeURIComponent(e),e=e.replace(/^(?:https?:)?\/\/(?:www\.)?/,""),(t=e.indexOf("?"))!==-1&&(e=e.slice(0,t)),(t=e.indexOf("#"))!==-1&&(e=e.slice(0,t)),e=e.replace(/(?:index)?\.html$/,""),"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e.length>40&&(t=e.indexOf("/"))!==-1&&(n=e.lastIndexOf("/"))!==-1&&n!==t&&(t+e.length-n<40&&(n=-(40-(t+1))),e=e.slice(0,t+1)+"…"+e.slice(n)),s.$(this.getEl().firstChild).attr("href",this.url).text(e))}}),e.addButton("wp_link_preview",{type:"WPLinkPreview",onPostRender:function(){var t=this;e.on("wptoolbar",function(n){var r,o,a=e.dom.getParent(n.element,"a");a&&(r=e.$(a),o=r.attr("href"),o&&!r.find("img").length&&(t.setURL(o),n.element=a,n.toolbar=i))})}}),e.addButton("wp_link_edit",{tooltip:"Edit ",icon:"dashicon dashicons-edit",cmd:"WP_Link"}),e.addButton("wp_link_remove",{tooltip:"Remove",icon:"dashicon dashicons-no",cmd:"unlink"}),e.on("preinit",function(){e.wp&&e.wp._createToolbar&&(i=e.wp._createToolbar(["wp_link_preview","wp_link_edit","wp_link_remove"],!0))})}var r=n(8025093951496706),o=n(5921998412115101),a=n(5896763357248615),s=n(0x976699e5e0db4),l=n(7572476330282672).translate,u=n(47575489396475);e.exports=function(){s.PluginManager.add("wplink",i)}},6121810848606904:function(e,t){"use strict";function n(e){return e.replace(/<p>([^<>]+)<\/p>/gi,function(e,t){return"&nbsp;"!==t&&/\S/.test(t)?e:"<p><br /></p>"})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeEmptySpacesInParagraphs=n},6156558842434638:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(8173823076638946),u=i(l),d=n(5880884711457125),c=i(d),p=n(5369032381290393),f=i(p),h=n(5921998412115101),m=i(h),g=n(5896763357248615),v=i(g),y=n(5106151372138902),b=i(y),_=n(0x5a3fcba3e9b9c),x=i(_),C=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={wrapper:null},n}return(0,f.default)(t,e),(0,c.default)(t,null,[{key:"match",value:function(e){var t=b.default.next("gallery",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"edit",value:function(e,t){e.execCommand("wpcomEditGallery",t)}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:m.default.findDOMNode(this.refs.view)}),window.MutationObserver&&(this.observer=new MutationObserver(this.props.onResize),this.observer.observe(m.default.findDOMNode(this.refs.view),{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"renderShortcode",value:function(){if(this.state.wrapper)return v.default.createElement(x.default,{siteId:this.props.siteId,width:this.state.wrapper.clientWidth},this.props.content)}},{key:"render",value:function(){return v.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-gallery"},this.renderShortcode())}}]),t}(g.Component);C.propTypes={siteId:g.PropTypes.number,content:g.PropTypes.string,onResize:g.PropTypes.func},C.defaultProps={onResize:function(){}},t.default=C,e.exports=t.default},6163540437949244:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(7380496197234269),o=n(0x73518efed105e);e.exports=i.createClass({displayName:"MediaLibraryListItemImage",propTypes:{media:i.PropTypes.object,scale:i.PropTypes.number,maxImageWidth:i.PropTypes.number,photon:i.PropTypes.bool},getDefaultProps:function(){return{maxImageWidth:450,photon:!0}},getInitialState:function(){return{}},getImageDimensions:function(){var e,t;return e=this.props.media.width?this.props.media.width:this.state.imageWidth,t=this.props.media.height?this.props.media.height:this.state.imageHeight,{width:e,height:t}},getImageStyle:function(){var e=this.getImageDimensions();return{maxHeight:e.height>e.width?"none":"100%",maxWidth:e.height<e.width?"none":"100%"}},setUnknownImageDimensions:function(e){this.props.media.width||this.setState({imageWidth:e.target.clientWidth}),this.props.media.height||this.setState({imageHeight:e.target.clientHeight})},render:function(){var e=r.url(this.props.media,{photon:this.props.photon,maxWidth:this.props.maxImageWidth});return e?i.createElement("img",{src:e,onLoad:this.setUnknownImageDimensions,alt:this.props.media.alt||this.props.media.title,style:this.getImageStyle(),className:"media-library__list-item-centered",draggable:"false"}):i.createElement(o,{scale:this.props.scale,media:this.props.media,icon:"image"})}})},6183147428912508:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(5896763357248615),v=i(g),y=n(0x8ae3881d6e8c2),b=i(y),_=n(0xb560658d4deef),x=i(_),C=n(8729102622276094),E=i(C),w=n(7380496197234269),T=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.onImagePreloaderLoad=n.onImagePreloaderLoad.bind(n),n.state={loading:!1},n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){return this.props.item.URL===e.item.URL?null:void this.setState({loading:!0})}},{key:"onImagePreloaderLoad",value:function(){this.setState({loading:!1}),this.props.onLoad()}},{key:"render",value:function(){var e=(0,w.url)(this.props.item,{photon:this.props.site&&!this.props.site.is_private}),t=(0,w.isItemBeingUploaded)(this.props.item),n=this.state.loading,i=/^blob/.test(e),r=(0,b.default)(this.props.className,"is-image",{"is-uploading":t},{"is-loading":n},{"is-blob":i}),o=(0,b.default)(this.props.className,"is-image","is-fake",{"is-uploading":t},{"is-loading":n},{"is-blob":i});return v.default.createElement("div",null,v.default.createElement("img",{src:e,width:this.props.item.width,height:this.props.item.height,alt:this.props.item.alt||this.props.item.title,className:o}),v.default.createElement(x.default,{src:e,width:this.props.item.width,height:this.props.item.height,onLoad:this.onImagePreloaderLoad,placeholder:v.default.createElement("span",null),alt:this.props.item.alt||this.props.item.title,className:r}),(t||n)&&v.default.createElement(E.default,null))}}]),t}(g.Component);T.propTypes={className:g.PropTypes.string,item:g.PropTypes.object.isRequired,site:g.PropTypes.object},T.defaultProps={onLoad:m.default},t.default=T,e.exports=t.default},6203190986888399:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r);t.default=o.default.createClass({displayName:"PostSelectorNoResults",propTypes:{createLink:r.PropTypes.string},render:function(){var e=void 0,t=void 0;return t=this.translate("No results. Please try a different search."),this.props.createLink&&(e=this.translate("You may want to {{a}}create a new page{{/a}}.",{context:"Menus: item search/listing results",comment:"This is used when no posts or pages match the given search.",components:{a:o.default.createElement("a",{className:"create-link",href:this.props.createLink,target:"_blank",rel:"noopener noreferrer"})}})),o.default.createElement("span",{className:"is-empty-content"},t," ",e)}}),e.exports=t.default},6239491752064318:function(e,t){"use strict";var n={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=n},6246250103023401:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.postType,i=e.hierarchical,r=void 0;return r=t("page"===n?"Page Attributes":"Attributes"),l.default.createElement(C.default,{title:r},i&&l.default.createElement(g.default,null),l.default.createElement(y.default,null),l.default.createElement(_.default,null))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8640881565075096),a=i(o),s=n(5896763357248615),l=i(s),u=n(6280957995252369),d=n(7572476330282672),c=n(0xe6bd8709d6a3c),p=n(6007716273106560),f=n(5523398591803755),h=n(7284660551555503),m=n(4758804133786506),g=i(m),v=n(6330776614737592),y=i(v),b=n(5444487591733898),_=i(b),x=n(4902908805660961),C=i(x);t.default=(0,u.connect)(function(e){var t=(0,c.getSelectedSiteId)(e),n=(0,f.getEditorPostId)(e),i=(0,p.getEditedPostValue)(e,t,n,"type"),r="page"===i||(0,a.default)((0,h.getPostType)(e,t,i),"hierarchical");return{postType:i,hierarchical:r}})((0,d.localize)(r)),e.exports=t.default},6294916017396735:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(0xa505046780b0c),u=i(l);t.default=o.default.createClass({displayName:"EditorRevisions",mixins:[s.default],propTypes:{adminUrl:o.default.PropTypes.string,revisions:o.default.PropTypes.array},getDefaultProps:function(){return{revisions:[]}},render:function(){if(!this.props.revisions||!this.props.revisions.length)return null;var e=this.props.revisions[0],t=this.props.adminUrl+"revision.php?revision="+e;return o.default.createElement("a",{className:"editor-revisions",href:t,target:"_blank",rel:"noopener noreferrer","aria-label":this.translate("Open list of revisions")},o.default.createElement(u.default,{icon:"history",size:18}),this.translate("%(revisions)d revision","%(revisions)d revisions",{count:this.props.revisions.length,args:{revisions:this.props.revisions.length}}))}}),e.exports=t.default},6330776614737592:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x3f19c8db6e3b5),m=i(h),g=n(825174316646981),v=i(g),y=n(5020179656051692),b=i(y),_=n(5896763357248615),x=i(_),C=n(6280957995252369),E=n(7572476330282672),w=n(0x3f5142fd3481d),T=i(w),S=n(4691924745409762),P=i(S),k=n(8619793617189177),I=i(k),N=n(7904991244547051),M=i(N),R=n(8958839223830722),D=i(R),A=n(0xe6bd8709d6a3c),O=n(5523398591803755),L=n(6007716273106560),B=n(8090799827495550),F=n(0x8f1527a7f80c8),H=n(7996551768540594),z=n(0x93c1fbcbc1a22),U=i(z),V=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.selectTemplate=e.selectTemplate.bind(e),e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"selectTemplate",value:function(e){var t=this.props,n=t.siteId,i=t.postId;this.props.editPost(n,i,{page_template:e})}},{key:"getSelectedTemplateText",value:function(){var e=this.props,t=e.templates,n=e.template,i=e.translate,r=void 0;return n&&(r=(0,b.default)(t,{file:n})),r?r.label:i("Default Template")}},{key:"getTemplates",value:function(){var e=this.props,t=e.translate,n=e.templates;return[{label:t("Default Template"),file:""}].concat(n||[])}},{key:"render",value:function(){var e=this,t=this.props,n=t.postType,i=t.template,r=t.siteId,o=t.translate,a=t.postId,s=t.pageForPostsId;if("page"!==n||a===s)return null;var l=this.getTemplates();return x.default.createElement("div",null,r&&x.default.createElement(T.default,{siteId:r}),(0,v.default)(l)>1&&x.default.createElement(P.default,null,x.default.createElement(D.default,{labelText:o("Page Template")},x.default.createElement(U.default,{className:"editor-page-templates__help-link"}),x.default.createElement(I.default,{selectedText:this.getSelectedTemplateText()},(0,m.default)(l,function(t){var n=t.file,r=t.label;return x.default.createElement(M.default,{key:n,selected:n===i,onClick:function(){return e.selectTemplate(n)}},r)})))))}}]),t}(_.Component);V.propTypes={siteId:_.PropTypes.number,postId:_.PropTypes.number,postType:_.PropTypes.string,template:_.PropTypes.string,templates:_.PropTypes.array,editPost:_.PropTypes.func,pageForPostsId:_.PropTypes.number},t.default=(0,C.connect)(function(e){var t=(0,A.getSelectedSiteId)(e),n=(0,O.getEditorPostId)(e),i=(0,L.getEditedPostValue)(e,t,n,"type"),r=(0,L.getEditedPostValue)(e,t,n,"page_template"),o=(0,B.getPageTemplates)(e,t),a=(0,F.getSiteOption)(e,t,"page_for_posts");return{siteId:t,postId:n,
postType:i,template:r,templates:o,pageForPostsId:a}},{editPost:H.editPost})((0,E.localize)(V)),e.exports=t.default},6346297615794200:function(e,t,n){"use strict";function i(e,t){var n=u.get(e);r("comparing positions:",e,n,t),a(n,t)||(r("storing values:",e,t),l[e]=t,u.emit("change"))}var r=n(4675954658966525)("calypso:infinite-list:positions-store"),o=n(8769427305820155),a=n(0xf0f4288728240),s=n(0xf2ce944f0fc89),l={},u={get:function(e){return r("positions-store:get(): ",e,l),l[e]}};s(u),u.dispatchToken=o.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":i(t.url,t.positions)}}),e.exports=u},6385002307104056:function(e,t,n){var i,r,o;!function(n,a){r=[t,e],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);f=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),p="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(p)&&(p=0),r()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,f=t,c&&(e.style.overflowY=t),i()}function i(){var t=window.pageYOffset,n=document.body.scrollTop,i=e.style.height;e.style.height="auto";var r=e.scrollHeight+p;return 0===e.scrollHeight?void(e.style.height=i):(e.style.height=r+"px",h=e.clientWidth,document.documentElement.scrollTop=t,void(document.body.scrollTop=n))}function r(){var t=e.style.height;i();var r=window.getComputedStyle(e,null);if(r.height!==e.style.height?"visible"!==f&&n("visible"):"hidden"!==f&&n("hidden"),t!==e.style.height){var o=a("autosize:resized");e.dispatchEvent(o)}}var s=void 0===arguments[1]?{}:arguments[1],l=s.setOverflowX,u=void 0===l||l,d=s.setOverflowY,c=void 0===d||d;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var p=null,f=null,h=e.clientWidth,m=function(){e.clientWidth!==h&&r()},g=function(t){window.removeEventListener("resize",m,!1),e.removeEventListener("input",r,!1),e.removeEventListener("keyup",r,!1),e.removeEventListener("autosize:destroy",g,!1),e.removeEventListener("autosize:update",r,!1),o.delete(e),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",g,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",r,!1),window.addEventListener("resize",m,!1),e.addEventListener("input",r,!1),e.addEventListener("autosize:update",r,!1),o.add(e),u&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=a("autosize:destroy");e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=a("autosize:update");e.dispatchEvent(t)}}var o="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),a=function(e){return new Event(e)};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=s})},6396954842557337:function(e,t,n){var i={EventEmitter:n(8798189748511524),EmitterSubscription:n(0x933a6af4ef14d)};e.exports=i},6404962144281478:function(e,t,n){"use strict";function i(){return{type:u.EDITOR_CONTACT_FORM_CLEAR}}function r(e){return{type:u.EDITOR_CONTACT_FORM_LOAD,contactForm:e}}function o(){return{type:u.EDITOR_CONTACT_FORM_FIELD_ADD}}function a(e){return{type:u.EDITOR_CONTACT_FORM_FIELD_REMOVE,index:e}}function s(e,t){return{type:u.EDITOR_CONTACT_FORM_FIELD_UPDATE,index:e,field:t}}function l(e){return{type:u.EDITOR_CONTACT_FORM_SETTINGS_UPDATE,settings:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.formClear=i,t.formLoad=r,t.fieldAdd=o,t.fieldRemove=a,t.fieldUpdate=s,t.settingsUpdate=l;var u=n(0xd047e5c4c63f8)},6450322511845945:function(e,t,n){e.exports.Container=n(4670304791128587),e.exports.MapStore=n(0xa25b20d0f839b),e.exports.Mixin=n(8897178771623869),e.exports.ReduceStore=n(0xeaacda33b2ed2),e.exports.Store=n(7304172455339035)},6452312633811387:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xf973c7cf3a0bf),s=n(5106151372138902),l=i(s),u=n(5014143618718430),d=i(u);t.default=o.default.createClass({displayName:"contact-form",statics:{match:function e(t){var e=l.default.next("contact-form",t);if(e)return{index:e.index,content:e.content,options:{shortcode:e.shortcode}}},serialize:function(e){return encodeURIComponent(e)},edit:function(e,t){e.execCommand("wpcomContactForm",t)}},render:function(){var e=(0,a.deserialize)(this.props.content),t=e.fields;return o.default.createElement("div",{className:"wpview-content wpview-type-contact-form"},[].concat(t).map(d.default),o.default.createElement("button",{disabled:!0},this.translate("Submit")))}}),e.exports=t.default},6518748662772448:function(e,t){function n(e,t){for(;e&&e.nodeType!==i;){if(e.matches(t))return e;e=e.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=n},6519958819961068:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Formats={DOM:"DOM",STRING:"STRING",SHORTCODE:"SHORTCODE",OBJECT:"OBJECT",API:"API",UNKNOWN:"UNKNOWN"},t.MediaTypes={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",UNKNOWN:"UNKNOWN"}},6571652720816065:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(5059747709250767),l=n(0x8ae3881d6e8c2);e.exports=a.createClass({displayName:"FormRange",propTypes:{onChange:a.PropTypes.func},getDefaultProps:function(){return{onChange:function(){}}},componentDidMount:function(){this.shouldNormalizeChange()&&this.refs.range.addEventListener("change",this.onChange)},componentWillUnmount:function(){this.refs.range.removeEventListener("change",this.onChange)},shouldNormalizeChange:function(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")},onChange:function(e){this.props.onChange(e)},render:function(){var e=l(this.props.className,"form-range");return a.createElement("input",(0,o.default)({ref:"range",type:"range",className:e},s(this.props,"className")))}})},6670453630470329:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(711528138733345),o=n(7127988529575974),a=n(0x7470881db6733),s=i.createClass({displayName:"HelpModal",propTypes:{onClose:i.PropTypes.func,macosx:i.PropTypes.bool,showDialog:i.PropTypes.bool},defaultShortcuts:function(){return[{c:this.translate("Copy"),x:this.translate("Cut")},{v:this.translate("Paste"),a:this.translate("Select all")},{z:this.translate("Undo"),y:this.translate("Redo")},{b:this.translate("Bold"),i:this.translate("Italic")},{u:this.translate("Underline"),k:this.translate("Insert/edit link")}]},additionalShortcuts:function(){return[{1:this.translate("Heading 1"),2:this.translate("Heading 2")},{3:this.translate("Heading 3"),4:this.translate("Heading 4")},{5:this.translate("Heading 5"),6:this.translate("Heading 6")},{l:this.translate("Align left"),c:this.translate("Align center")},{r:this.translate("Align right"),j:this.translate("Justify")},{d:this.translate("Strikethrough"),q:this.translate("Blockquote")},{u:this.translate("Bullet list"),o:this.translate("Numbered list")},{a:this.translate("Insert/edit link"),s:this.translate("Remove link")},{m:this.translate("Insert/edit image"),t:this.translate("Insert Read More tag")},{h:this.translate("Keyboard Shortcuts"),x:this.translate("Code")},{p:this.translate("Insert Page Break tag")}]},renderRow:function(e,t){var n=[];return r(e,function(e,t){n.push(i.createElement("th",{className:"wpcom-help__key",key:t},i.createElement("kbd",null,t))),n.push(i.createElement("td",{className:"wpcom-help__action",key:e},e))}),i.createElement("tr",{key:t},n)},getButtons:function(){return[i.createElement(a,{key:"close",isPrimary:!1,onClick:this.props.onClose},this.translate("Close"))]},getKeyLabel:function(){return this.translate("Key",{context:"Computer key used in keyboard shortcut"})},getActionLabel:function(){return this.translate("Action",{context:"Action taken when pressing keyboard shortcut"})},getTableHead:function(){return i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{className:"wpcom-help__key"},this.getKeyLabel()),i.createElement("th",{className:"wpcom-help__action"},this.getActionLabel()),i.createElement("th",{className:"wpcom-help__key"},this.getKeyLabel()),i.createElement("th",{className:"wpcom-help__action"},this.getActionLabel())))},render:function(){var e=this.props.macosx?this.translate("Default shortcuts, Command + key:",{context:"Mac shortcuts"}):this.translate("Default shortcuts, Ctrl + key:",{context:"Windows shortcuts"}),t=this.props.macosx?this.translate("Additional shortcuts, Control + Option + key:",{context:"Mac shortcuts"}):this.translate("Additional shortcuts, Shift + Alt + key:",{context:"Windows shortcuts"});return i.createElement(o,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-help__dialog",onClose:this.props.onClose},i.createElement("h2",{className:"wpcom-help__heading"},this.translate("Keyboard Shortcuts")),i.createElement("p",null,e),i.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),i.createElement("tbody",null,this.defaultShortcuts().map(this.renderRow,this))),i.createElement("p",null,t),i.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),i.createElement("tbody",null,this.additionalShortcuts().map(this.renderRow,this))))}});e.exports=s},6675946561311414:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5228543994800352),o=i(r),a=n(0x83e42e33e67df),s=i(a),l=n(5896763357248615),u=i(l),d=n(19189154744278),c=i(d),p=n(0x8e53f8540ee4b),f=i(p);t.default=u.default.createClass({displayName:"PostSelector",mixins:[c.default],propTypes:{type:l.PropTypes.string,siteId:l.PropTypes.number.isRequired,status:l.PropTypes.string,multiple:l.PropTypes.bool,onChange:l.PropTypes.func,selected:l.PropTypes.number,excludeTree:l.PropTypes.number,emptyMessage:l.PropTypes.string,createLink:l.PropTypes.string,orderBy:l.PropTypes.oneOf(["title","date","modified","comment_count","ID"]),order:l.PropTypes.oneOf(["ASC","DESC"]),showTypeLabels:l.PropTypes.bool},getDefaultProps:function(){return{type:"post",status:"publish,private",multiple:!1,orderBy:"title",order:"ASC"}},getInitialState:function(){return{search:""}},onSearch:function(e){e!==this.state.search&&this.setState({search:e})},getQuery:function(){var e=this.props,t=e.type,n=e.status,i=e.excludeTree,r=e.orderBy,a=e.order,l=this.state.search;return(0,s.default)({type:t,status:n,excludeTree:i,orderBy:r,order:a,search:l},function(e,t,n){return null===t||void 0===t?e:(e[(0,o.default)(n)]=t,e)},{})},render:function(){var e=this.props,t=e.siteId,n=e.multiple,i=e.onChange,r=e.emptyMessage,o=e.createLink,a=e.selected,s=e.showTypeLabels;return u.default.createElement(f.default,{siteId:t,query:this.getQuery(),onSearch:this.onSearch,multiple:n,onChange:i,emptyMessage:r,createLink:o,selected:a,showTypeLabels:s})}}),e.exports=t.default},6694397819955462:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(872100829608442),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(6450322511845945),b=n(8769427305820155),_=i(b),x=/\(\?P?<([\w$]+)>/g,C=/^([^\w\s\\])(.*)([^\w\s\\])([gim])?$/,E=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){return this.getState()[e]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"FETCH_EMBEDS":e=(0,s.default)({},e,(0,o.default)({},t.siteId,{status:"LOADING"}));break;case"RECEIVE_EMBEDS":if(t.error)e=(0,s.default)({},e,(0,o.default)({},t.siteId,{status:"ERROR"}));else{var n=t.embeds.map(function(e){e=e.replace(x,"(");var t=e.match(C);if(t&&t[1]===t[3])return new RegExp(t[2],t[4]);try{return new RegExp(e)}catch(e){return!1}}).filter(Boolean);e=(0,s.default)({},e,(0,o.default)({},t.siteId,{status:"LOADED",embeds:n}))}}return e}}]),t}(y.ReduceStore);t.default=new E(_.default),e.exports=t.default},6736806188585883:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(8838421736604965),l=n(0x73518efed105e),u=n(0xa505046780b0c);e.exports=a.createClass({displayName:"MediaLibraryListItemVideo",propTypes:{media:a.PropTypes.object,maxImageWidth:a.PropTypes.number},getDefaultProps:function(){return{maxImageWidth:450}},getHighestQualityThumbnail:function(){if(this.props.media.thumbnails)return this.props.media.thumbnails.fmt_hd||this.props.media.thumbnails.fmt_dvd||this.props.media.thumbnails.fmt_std},render:function(){var e,t=this.getHighestQualityThumbnail();return t?(e=s(t,{width:this.props.maxImageWidth}),a.createElement("div",{className:"media-library__list-item-video",style:{backgroundImage:"url("+e+")"}},a.createElement("span",{className:"media-library__list-item-icon media-library__list-item-centered"},a.createElement(u,{icon:"video-camera"})))):a.createElement(l,(0,o.default)({},this.props,{icon:"video-camera"}))}})},6753482749867647:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(0x8ae3881d6e8c2);e.exports=i.createClass({displayName:"EditorMediaModalFieldset",propTypes:{legend:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.element]).isRequired},render:function(){return i.createElement("fieldset",{className:r("editor-media-modal__fieldset",this.props.className)},i.createElement("legend",{className:"editor-media-modal__fieldset-legend"},this.props.legend),this.props.children)}})},6818283491640046:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0xccd53b671ebb6),a=r(o),s=n(5143893728007863),l=r(s),u=n(5880884711457125),d=r(u),c=n(8173823076638946),p=r(c),f=n(5369032381290393),h=r(f),m=n(5896763357248615),g=r(m),v=n(6280957995252369),y=n(5921998412115101),b=r(y),_=n(0x8ae3881d6e8c2),x=r(_),C=n(7572476330282672),E=n(0x5dd72de17825d),w=r(E),T=n(5571783631035247),S=r(T),P=n(8959178503420160),k=r(P),I=n(0x7085cb51ec618),N=r(I),M=n(7123518912576379),R=n(5084380759969092),D=i(R),A=n(0xe6bd8709d6a3c),O=n(8189365882243939),L=r(O),B=n(5523398591803755),F=n(6007716273106560),H=n(7996551768540594),z=/[\r\n]+/g,U=function(e){function t(){var e,n,i,r;(0,l.default)(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=i=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),i.onChange=function(e){var t=i.props,n=t.siteId,r=t.editedPostId,o=e.target.value.replace(z," ");i.props.editPost(n,r,{title:o}),i.props.onChange(o)},i.resizeAfterNewlineInput=function(e){var t=e.target.value;z.test(t)&&(e.target.value=t.replace(z," "),i.refs.titleInput.resize())},i.recordChangeStats=function(){var e=w.default.isPage(i.props.post);D.recordStat(e?"page_title_changed":"post_title_changed"),D.recordEvent(e?"Changed Page Title":"Changed Post Title")},i.onBlur=function(e){i.onChange(e)},r=n,(0,p.default)(i,r)}return(0,h.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(e){if(!(0,M.isMobile)()){var t=this.props,n=t.isNew,i=t.siteId;if(n&&!e.isNew||n&&e.siteId!==i){var r=b.default.findDOMNode(this.refs.titleInput);r.focus()}}}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.isPermalinkEditable,i=e.isNew,r=e.tabIndex,o=e.translate,a=(0,x.default)("editor-title",{"is-loading":!t});return g.default.createElement("div",{className:a},t&&t.ID&&!w.default.isPage(t)&&g.default.createElement(S.default,{path:n?w.default.getPermalinkBasePath(t):t.URL,isEditable:n}),g.default.createElement(k.default,{onNewValue:this.recordChangeStats},g.default.createElement(N.default,{tabIndex:r,className:"editor-title__input",placeholder:o("Title"),onChange:this.onChange,onInput:this.resizeAfterNewlineInput,onBlur:this.onBlur,autoFocus:i&&!(0,M.isMobile)(),value:t&&t.title?t.title:"","aria-label":o("Edit title"),ref:"titleInput",rows:"1"})))}}]),t}(m.Component);U.propTypes={editPost:m.PropTypes.func,isNew:m.PropTypes.bool,onChange:m.PropTypes.func,post:m.PropTypes.object,site:m.PropTypes.object,siteId:m.PropTypes.number,tabIndex:m.PropTypes.number,translate:m.PropTypes.func},U.defaultProps={isNew:!0,onChange:function(){}},t.default=(0,v.connect)(function(e){var t=(0,A.getSelectedSiteId)(e),n=(0,L.default)(e,t),i=(0,B.getEditorPostId)(e),r=(0,F.getEditedPost)(e,t,i),o=(0,B.isEditorNewPost)(e);return{editedPostId:i,isPermalinkEditable:n,isNew:o,post:r,siteId:t}},{editPost:H.editPost})((0,C.localize)(U)),e.exports=t.default},6859969075607055:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(0x73518efed105e);e.exports=i.createClass({displayName:"MediaLibraryListItemDocument",render:function(){return i.createElement(r,this.props)}})},6874930428474342:function(e,t,n){"use strict";function i(e){e.forEach(r)}function r(e){var t=s(c.get(e.global_ID),"content_images","canonical_image","featured_image","images","global_ID");d.normalizeAsync(t,function(e,t){var n=o.get(t.global_ID);a(t,n)||(p[t.global_ID]=t,o.emit("change"))})}var o,a=n(0xf0f4288728240),s=n(83765757817552),l=n(0xf2ce944f0fc89),u=n(8769427305820155),d=n(0x5dd72de17825d),c=n(0xe5816b799bd0f),p={};o={get:function(e){return p[e]},getAll:function(){return p}},l(o),o.dispatchToken=u.register(function(e){var t=e.action;switch(u.waitFor([c.dispatchToken]),t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":!t.error&&t.data.posts&&i(t.data.posts);break;case"RECEIVE_UPDATED_POST":t.error||r(t.post)}}),e.exports=o},6905521583238013:function(e,t){(function(){tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})})}).call(window)},6908623646137371:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(0xe1187785d15e7),v=n(8577545892344610),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.requestSettings(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.siteId;e.siteId&&t!==e.siteId&&this.requestSettings(e)}},{key:"requestSettings",value:function(e){var t=e.requestingSiteSettings,n=e.siteId;!t&&n&&e.requestSiteSettings(n)}},{key:"render",value:function(){return null}}]),t}(h.Component);y.propTypes={siteId:h.PropTypes.number,requestingSiteSettings:h.PropTypes.bool,requestSiteSettings:h.PropTypes.func},t.default=(0,m.connect)(function(e,t){var n=t.siteId;return{requestingSiteSettings:(0,g.isRequestingSiteSettings)(e,n)}},{requestSiteSettings:v.requestSiteSettings})(y),e.exports=t.default},6920980932387437:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=n(6280957995252369),g=n(0x64c31c0caeb4b),v=i(g),y=n(0xe02daa8244860),b=n(0xf4d0801157df9),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.taxonomy===e.taxonomy&&(0,v.default)(this.props.query,e.query)||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestSiteTerms(e.siteId,e.taxonomy,e.query)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(h.Component);_.propTypes={siteId:h.PropTypes.number,taxonomy:h.PropTypes.string.isRequired,query:h.PropTypes.object,requesting:h.PropTypes.bool.isRequired,requestSiteTerms:h.PropTypes.func.isRequired},_.defaultProps={query:{}},t.default=(0,m.connect)(function(e,t){return{requesting:(0,b.isRequestingTermsForQuery)(e,t.siteId,t.taxonomy,t.query)}},{requestSiteTerms:y.requestSiteTerms})(_),e.exports=t.default},6940362979991673:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767);e.exports=a.createClass({displayName:"FormTextarea",render:function(){return a.createElement("textarea",(0,o.default)({},l(this.props,"className"),{className:s(this.props.className,"form-textarea")}),this.props.children)}})},6940793315437877:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.PAGE_TEMPLATES_RECEIVE,siteId:e,templates:t}}function o(e){return function(t){return t({type:l.PAGE_TEMPLATES_REQUEST,siteId:e}),s.default.site(e).pageTemplates().then(function(n){var i=n.templates;t(r(e,i)),t({type:l.PAGE_TEMPLATES_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.PAGE_TEMPLATES_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePageTemplates=r,t.requestPageTemplates=o;var a=n(8478035041892969),s=i(a),l=n(0xd047e5c4c63f8)},6951510676846444:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(842421528365869),a=r(o),s=n(711528138733345),l=r(s),u=n(0x3f19c8db6e3b5),d=r(u),c=n(578807769082385),p=r(c),f=n(0x8817212fc310f),h=r(f),m=n(6156558842434638),g=r(m),v=n(0x808cb7ddb86b1),y=r(v),b=n(6452312633811387),_=r(b),x=n(0xc4a28bf84c2aa),C=i(x),E={gallery:g.default,embed:new y.default,contactForm:_.default,video:C},w=(0,p.default)(E,function(e){return"function"==typeof e.getComponent?e.getComponent():e}),T=(0,h.default)(E).filter(function(e){return e instanceof a.default});t.default={setMarkers:function(e){var t,n=[{content:e}];return(0,l.default)(E,function(e,i){t=n.slice(),n=[],(0,l.default)(t,function(t){var r,o=t.content;if(t.processed)return void n.push(t);for(;o&&(r=e.match(o));)r.index&&n.push({content:o.substring(0,r.index)}),n.push({content:'<p class="wpview-marker" data-wpview-text="'+e.serialize(r.content,r.options)+'" data-wpview-type="'+i+'">.</p>',processed:!0}),o=o.slice(r.index+r.content.length);o&&n.push({content:o})})}),e=(0,d.default)(n,"content").join(""),e.replace(/<p>\s*<p data-wpview-marker=/g,"<p data-wpview-marker=").replace(/<\/p>\s*<\/p>/g,"</p>")},isEditable:function(e){return!(!E[e]||!E[e].edit)},edit:function(e,t,n){this.isEditable(e)&&E[e].edit(t,n)},components:w,emitters:T},e.exports=t.default},6969452716050595:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(872100829608442),o=i(r),a=n(5896763357248615),s=i(a),l=n(0x45d24eaab7654),u=i(l),d=n(623310115397031),c=i(d),p=n(70219791644428),f=i(p),h=n(6104353596224629),m=i(h),g=n(0x57d0987682136),v=i(g),y=n(7613110173109069),b=i(y),_=n(7380496197234269),x=i(_),C=n(975622464187034),E=i(C),w=n(6575959285183690),T=i(w),S=n(5172337875599245),P=i(S);t.default=s.default.createClass({displayName:"TinyMCEDropZone",mixins:[(0,f.default)("sites")],propTypes:{editor:a.PropTypes.object,sites:a.PropTypes.object,onInsertMedia:a.PropTypes.func,onRenderModal:a.PropTypes.func},getInitialState:function(){return{isDragging:!1}},getDefaultProps:function(){return{onInsertMedia:u.default,onRenderModal:u.default}},componentDidMount:function(){var e=this.props.editor;e.dom.bind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.addEventListener("dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},componentWillUnmount:function(){var e=this.props.editor;e.dom.unbind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.removeEventListener("dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},redirectEditorDragEvent:function(e){window.dispatchEvent(new CustomEvent(e.type,{detail:e})),this.setState({isDragging:!0})},fakeDragEnterIfNecessary:function(e){this.state.isDragging||this.redirectEditorDragEvent((0,o.default)({},e,{type:"dragenter"}))},stopDragging:function(){this.setState({isDragging:!1})},insertMedia:function(){var e=this.props,t=e.sites,n=e.onInsertMedia,i=e.onRenderModal,r=t.getSelectedSite();if(r){var o=E.default.getAll(r.ID),a=1===o.length&&"image"===x.default.getMimePrefix(o[0]);a&&!T.default.hasErrors(r.ID)?(o[0].transient&&m.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),n(P.default.get(r,o[0])),b.default.setLibrarySelectedItems(r.ID,[])):i({visible:!0}),c.default.mc.bumpStat("editor_upload_via","editor_drop")}},render:function(){var e=this.props.sites,t=e.getSelectedSite();return t?s.default.createElement(v.default,{site:t,fullScreen:!1,trackStats:!1,onAddMedia:this.insertMedia}):null}}),e.exports=t.default},7041668635516638:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(5059747709250767),l=n(0x8ae3881d6e8c2),u=n(6772289601052933),d=n(6571652720816065);e.exports=a.createClass({displayName:"Range",propTypes:{minContent:a.PropTypes.oneOfType([a.PropTypes.element,a.PropTypes.string]),maxContent:a.PropTypes.oneOfType([a.PropTypes.element,a.PropTypes.string]),min:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),max:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),value:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),showValueLabel:a.PropTypes.bool},getInitialState:function(){return{id:u("range")}},getDefaultProps:function(){return{min:0,max:10,value:0,showValueLabel:!1}},getMinContentElement:function(){if(this.props.minContent)return a.createElement("span",{className:"range__content is-min"},this.props.minContent)},getMaxContentElement:function(){if(this.props.maxContent)return a.createElement("span",{className:"range__content is-max"},this.props.maxContent)},getValueLabelElement:function(){var e,t;if(this.props.showValueLabel)return e=100*(this.props.value-this.props.min)/(this.props.max-this.props.min),t=Math.floor(13*((50-e)/50)),a.createElement("span",{className:"range__label",style:{left:(e||0)+"%",marginLeft:t}},a.createElement("output",{className:"range__label-inner",htmlFor:this.state.id,value:this.props.value},this.props.value))},render:function(){var e=l(this.props.className,"range",{"has-min-content":!!this.props.minContent,"has-max-content":!!this.props.maxContent});return a.createElement("div",{className:e},this.getMinContentElement(),a.createElement(d,(0,o.default)({id:this.state.id,className:"range__input"},s(this.props,"minContent","maxContent","showValueLabel","className"))),this.getMaxContentElement(),this.getValueLabelElement())}})},7087130997920842:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xa505046780b0c),s=i(a);t.default=o.default.createClass({displayName:"PostSelectorSearch",propTypes:{searchTerm:r.PropTypes.string,onSearch:r.PropTypes.func.isRequired},render:function(){return o.default.createElement("div",{className:"post-selector__search"},o.default.createElement(s.default,{icon:"search",size:18}),o.default.createElement("input",{type:"search",placeholder:this.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}),e.exports=t.default},7102502412386958:function(e,t,n){"use strict";function i(e){return{mediaValidationErrors:o.getAllErrors(e)}}var r=n(5896763357248615),o=n(6575959285183690),a=n(921923039590806);e.exports=r.createClass({displayName:"MediaValidationData",propTypes:{siteId:r.PropTypes.number.isRequired},getInitialState:function(){return i(this.props.siteId)},componentDidMount:function(){o.on("change",this.updateState)},componentWillUnmount:function(){o.off("change",this.updateState)},componentWillReceiveProps:function(e){this.props.siteId!==e.siteId&&this.setState(i(e.siteId))},updateState:function(){this.setState(i(this.props.siteId))},render:function(){return a(this,this.state)}})},7125958772513228:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(7127988529575974),s=i(a),l=n(0x7470881db6733),u=i(l);t.default=o.default.createClass({displayName:"Alert",propTypes:{isVisible:o.default.PropTypes.bool.isRequired,onClose:o.default.PropTypes.func.isRequired,message:o.default.PropTypes.string.isRequired},splitMessage:function(){var e=this.props.message.split("\n\n");return e.map(function(e,t){return o.default.createElement("p",{key:"alert-"+t},e)})},getButtons:function(){return[o.default.createElement(u.default,{isPrimary:!1,"aria-label":this.translate("Dismiss alert message"),onClick:this.props.onClose},this.translate("OK"))]},render:function(){return o.default.createElement(s.default,{isVisible:this.props.isVisible,additionalClassNames:"editor-alert-modal",onClose:this.props.onClose,buttons:this.getButtons()},this.splitMessage())}}),e.exports=t.default},7152730280015627:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModalViews={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},7223672945384532:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xd8a00252dc682),s=i(a);t.default=o.default.createClass({displayName:"preview-legend",render:function(){return o.default.createElement("legend",null,this.props.label,o.default.createElement(s.default,this.props))}}),e.exports=t.default;
},7271335357304085:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return!!(0,s.default)(["post_format","mentions","xposts"],t)||"post"===e&&(0,s.default)(["category","post_tag"],t)}function o(e){var t=e.translate,n=e.siteId,i=e.postType,o=e.isSupported,a=e.taxonomies,s=e.terms;return o?v.default.createElement("div",{className:"editor-drawer__taxonomies"},n&&i&&v.default.createElement(C.default,{siteId:n,postType:i}),(0,m.default)(a,function(e,n){var o=n.name,a=n.label,l=n.hierarchical;if(r(i,o))return e;var d=(0,u.default)(s,o),p=(0,f.default)(d),h=void 0;return h=p>2?t("%d selected","%d selected",{count:p,args:[p]}):(0,c.default)(d,function(e){return(0,_.decodeEntities)(e.name||e)}).join(", "),e.concat(v.default.createElement(I.default,{key:o,title:a,subtitle:h},l?v.default.createElement(D.default,{compact:!0,taxonomyName:o}):v.default.createElement(M.default,{taxonomyName:o})))},[])):null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6718701541658404),s=i(a),l=n(8640881565075096),u=i(l),d=n(0x3f19c8db6e3b5),c=i(d),p=n(825174316646981),f=i(p),h=n(0x83e42e33e67df),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(7572476330282672),_=n(6729227089147156),x=n(0xc1e8e66f15266),C=i(x),E=n(0xe6bd8709d6a3c),w=n(5523398591803755),T=n(6007716273106560),S=n(0x3e6242fdbac66),P=n(0x8f1527a7f80c8),k=n(4902908805660961),I=i(k),N=n(937798169217017),M=i(N),R=n(0xd3942cae2556e),D=i(R);o.propTypes={translate:g.PropTypes.func,siteId:g.PropTypes.number,postType:g.PropTypes.string,isSupported:g.PropTypes.bool,terms:g.PropTypes.oneOfType([g.PropTypes.object,g.PropTypes.array]),taxonomies:g.PropTypes.array},t.default=(0,y.connect)(function(e){var t=(0,E.getSelectedSiteId)(e),n=(0,w.getEditorPostId)(e),i=(0,T.getEditedPostValue)(e,t,n,"type"),r=!1!==(0,P.isJetpackMinimumVersion)(e,t,"4.1.0");return{siteId:t,postType:i,isSupported:r,terms:(0,T.getEditedPostValue)(e,t,n,"terms"),taxonomies:(0,S.getPostTypeTaxonomies)(e,t,i)}})((0,b.localize)(o)),e.exports=t.default},7304172455339035:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(6396954842557337),o=r.EventEmitter,a=n(0xac06b1ed1d098),s=function(){function e(t){var n=this;i(this,e),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=t,this.__emitter=new o,this._dispatchToken=t.register(function(e){n.__invokeOnDispatch(e)})}return e.prototype.addListener=function(e){return this.__emitter.addListener(this.__changeEvent,e)},e.prototype.getDispatcher=function(){return this.__dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()?void 0:a(!1),this.__changed},e.prototype.__emitChange=function(){this.__dispatcher.isDispatching()?void 0:a(!1),this.__changed=!0},e.prototype.__invokeOnDispatch=function(e){this.__changed=!1,this.__onDispatch(e),this.__changed&&this.__emitter.emit(this.__changeEvent)},e.prototype.__onDispatch=function(e){a(!1)},e}();e.exports=s},7304560458482196:function(e,t,n){"use strict";var i=n(5896763357248615),r=i.createClass({displayName:"noResults",getDefaultProps:function(){return{text:"No results",image:!1}},render:function(){return i.createElement("div",{className:"no-results"},this.props.image?i.createElement("img",{className:"no-results__img",src:this.props.image}):null,i.createElement("span",null,this.props.text))}});e.exports=r},7330683811373103:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5477852257145688),s=i(a),l=n(0xf0f4288728240),u=i(l),d=n(0x45d24eaab7654),c=i(d),p=n(5896763357248615),f=i(p),h=n(6280957995252369),m=n(78648220391165),g=n(0x8c0d10a3fcef3),v=i(g),y=n(7572476330282672),b=n(0x8ae3881d6e8c2),_=i(b),x=n(5708247199348607),C=i(x),E=n(0x5326596c1965c),w=i(E),T=n(0xa0300e218a145),S=i(T),P=n(5567973762736909),k=i(P),I=n(7380496197234269),N=i(I),M=n(0xebf150a8452ca),R=i(M),D=n(8693344302354816),A=n(7629348406412959),O=n(0xe6bd8709d6a3c),L=n(0x8f1527a7f80c8),B=n(0xbd8ce093a3eb6),F=i(B),H=n(8277184115649475),z=n(347097780136713),U=f.default.createClass({displayName:"ImageEditor",mixins:[(0,R.default)("onCancel")],propTypes:{media:p.PropTypes.object,siteId:p.PropTypes.number,onDone:p.PropTypes.func,onCancel:p.PropTypes.func,onReset:p.PropTypes.func,className:p.PropTypes.string,defaultAspectRatio:p.PropTypes.oneOf(H.AspectRatiosValues),allowedAspectRatios:p.PropTypes.arrayOf(p.PropTypes.oneOf(H.AspectRatiosValues)),site:p.PropTypes.object,fileName:p.PropTypes.string,setImageEditorFileInfo:p.PropTypes.func,setImageEditorDefaultAspectRatio:p.PropTypes.func,translate:p.PropTypes.func,isImageLoaded:p.PropTypes.bool},getDefaultProps:function(){return{media:null,onDone:c.default,onCancel:null,onReset:c.default,isImageLoaded:!1,defaultAspectRatio:H.AspectRatios.FREE,allowedAspectRatios:H.AspectRatiosValues,setImageEditorDefaultAspectRatio:c.default}},getInitialState:function(){return{canvasError:null}},componentWillReceiveProps:function(e){var t=this.props.media;e.media&&!(0,u.default)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())},componentDidMount:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()},setDefaultAspectRatio:function(){var e=this.props,t=e.defaultAspectRatio,n=e.allowedAspectRatios;this.props.setImageEditorDefaultAspectRatio((0,z.getDefaultAspectRatio)(t,n))},updateFileInfo:function(e){var t=this.props.site,n=void 0,i="default",r="image/png",o="default";e&&(n=e.src||N.default.url(e,{photon:t&&!t.is_private}),i=e.file||v.default.basename(n),r=N.default.getMimeType(e)||r,o=e.title||o),this.props.resetImageEditorState(),this.props.setImageEditorFileInfo(n,i,r,o)},onDone:function e(){var t=this,n=this.props,i=n.isImageLoaded,e=n.onDone;if(!i)return void e(new Error("Image not loaded yet."),null,this.getImageEditorProps());var r=this.refs.editCanvas.getWrappedInstance();r.toBlob(function(n){e(null,n,t.getImageEditorProps())})},onCancel:function(){this.props.onCancel(this.getImageEditorProps())},onReset:function(){this.props.resetImageEditorState(),this.props.onReset(this.getImageEditorProps())},getImageEditorProps:function(){var e=this.props,t=e.src,n=e.fileName,i=e.media,r=e.mimeType,o=e.title,a=e.site,s={src:t,fileName:n,mimeType:r,title:o,site:a,resetAllImageEditorState:this.props.resetAllImageEditorState};return i&&i.ID&&(s.ID=i.ID),s},onLoadCanvasError:function(){var e=this.props.translate;this.setState({canvasError:e("We are unable to edit this image.")})},renderError:function(){return f.default.createElement(C.default,{status:"is-error",showDismiss:!0,text:this.state.canvasError,isCompact:!1,onDismissClick:this.props.onImageEditorCancel})},render:function(){var e=this.props,t=e.className,n=e.siteId,i=e.allowedAspectRatios,r=(0,_.default)("image-editor",t);return f.default.createElement("div",{className:r},this.state.canvasError&&this.renderError(),f.default.createElement(F.default,{siteId:n}),f.default.createElement("figure",null,f.default.createElement("div",{className:"image-editor__content"},f.default.createElement(w.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),f.default.createElement(S.default,{allowedAspectRatios:i}),f.default.createElement(k.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset}))))}});t.default=(0,h.connect)(function(e,t){var n=t.siteId;return n||(n=(0,O.getSelectedSiteId)(e)),(0,o.default)({},(0,A.getImageEditorFileInfo)(e),{site:(0,L.getSite)(e,n),isImageLoaded:(0,A.isImageEditorImageLoaded)(e)})},function(e,t){var n=(0,z.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),i={aspectRatio:n};return(0,m.bindActionCreators)({setImageEditorFileInfo:D.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:D.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,s.default)(D.resetImageEditorState,i),resetAllImageEditorState:(0,s.default)(D.resetAllImageEditorState,i)},e)})((0,y.localize)(U)),e.exports=t.default},7346600848553968:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.onKeyDown=e.onKeyDown.bind(e),e.onClick=e.onClick.bind(e),e.onLabelClick=e.onLabelClick.bind(e),e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.id=this.constructor.idNum++}},{key:"onKeyDown",value:function(e){this.props.disabled||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.props.onChange()),this.props.onKeyDown(e))}},{key:"onClick",value:function(){this.props.disabled||this.props.onChange()}},{key:"onLabelClick",value:function(e){if(!this.props.disabled){var t=e.target.nodeName.toLowerCase();"a"!==t&&"input"!==t&&"select"!==t&&(e.preventDefault(),this.props.onChange())}}},{key:"render",value:function(){var e=this.props.id||"toggle-"+this.id,t=(0,v.default)("form-toggle__wrapper",{"is-disabled":this.props.disabled}),n=(0,v.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return m.default.createElement("span",{className:t},m.default.createElement("input",{className:n,type:"checkbox",checked:this.props.checked,readOnly:!0,disabled:this.props.disabled}),m.default.createElement("label",{className:"form-toggle__label",htmlFor:e},m.default.createElement("span",{className:"form-toggle__switch",id:e,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),m.default.createElement("span",{className:"form-toggle__label-content",onClick:this.onLabelClick},this.props.children)))}}]),t}(h.PureComponent);y.propTypes={onChange:h.PropTypes.func,onKeyDown:h.PropTypes.func,checked:h.PropTypes.bool,disabled:h.PropTypes.bool,id:h.PropTypes.string,className:h.PropTypes.string,toggling:h.PropTypes.bool,"aria-label":h.PropTypes.string,children:h.PropTypes.node},y.defaultProps={checked:!1,disabled:!1,onKeyDown:function(){},onChange:function(){}},y.idNum=0,t.default=y,e.exports=t.default},7348519744449462:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6203271391094927),o=i(r),a=n(5896763357248615),s=i(a),l=n(5708247199348607),u=i(l),d=n(5736137603839510),c=i(d),p=n(7542443254063963),f=i(p),h=n(0x8ceb0518c8930),m=i(h),g=n(0xb024e910044c3),v=i(g),y=n(0x51dbbe34db920),b=i(y);t.default=s.default.createClass({displayName:"EditorMediaModalGalleryPreview",propTypes:{site:a.PropTypes.object,settings:a.PropTypes.object,onUpdateSetting:a.PropTypes.func,invalidItemDropped:a.PropTypes.bool,onDismissInvalidItemDropped:a.PropTypes.func},getInitialState:function(){return{isEditing:!1}},getDefaultProps:function(){return{settings:(0,o.default)({}),onUpdateSetting:function(){},invalidItemDropped:!1,onDismissInvalidItemDropped:function(){}}},renderPreviewModeToggle:function(){var e=this;return s.default.createElement(c.default,{className:"editor-media-modal-gallery__preview-toggle",compact:!0},s.default.createElement(f.default,{selected:!this.state.isEditing,onClick:function(){return e.setState({isEditing:!1})}},this.translate("Preview")),s.default.createElement(f.default,{selected:this.state.isEditing,onClick:function(){return e.setState({isEditing:!0})}},this.translate("Edit")))},renderPreview:function(){var e=this.props,t=e.site,n=e.settings,i=e.onUpdateSetting;if(t&&n.items)return this.state.isEditing?s.default.createElement(m.default,{site:t,settings:n,onUpdateSetting:i}):"individual"===n.type?s.default.createElement(b.default,{items:n.items}):s.default.createElement(v.default,{siteId:t.ID,settings:n})},render:function(){return s.default.createElement("div",{className:"editor-media-modal-gallery__preview"},this.props.invalidItemDropped&&s.default.createElement(u.default,{status:"is-warning",onDismissClick:this.props.onDismissInvalidItemDropped,isCompact:!0},this.translate("Galleries can only include images. All other uploads will be added to your media library.")),s.default.createElement("div",{className:"editor-media-modal-gallery__preview-wrapper"},this.renderPreview()),this.renderPreviewModeToggle())}}),e.exports=t.default},7377732992038500:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5477852257145688),m=i(h),g=n(7452954268806788),v=i(g),y=n(5896763357248615),b=i(y),_=n(6280957995252369),x=n(7572476330282672),C=n(0xa505046780b0c),E=i(C),w=n(7041668635516638),T=i(w),S=n(5736137603839510),P=i(S),k=n(7542443254063963),I=i(k),N=n(5380278257315674),M=n(4517819237535069),R=[.077,.115,.157,.24,.323],D=100,A=.32,O=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.onScaleChange=e.onScaleChange.bind(e),e.savePreference=e.savePreference.bind(e),e.debouncedSavePreference=(0,v.default)(e.savePreference,1e3),e.setScaleToMobileGrid=e.setScale.bind(e,A),e.setScaleToMobileFull=e.setScale.bind(e,1),e.state={},e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){this.debouncedSavePreference.cancel()}},{key:"savePreference",value:function(e){this.props.saveMediaScalePreference(e)}},{key:"setScale",value:function(e){e!==this.props.scale&&(this.props.onChange(e),this.props.setMediaScalePreference(e),this.debouncedSavePreference(e))}},{key:"onScaleChange",value:function(e){var t=parseInt(e.target.value,10),n=t*R.length/D,i=R[Math.floor(n)];this.setState({sliderPosition:t}),this.setScale(i)}},{key:"getSliderPosition",value:function(){if(this.state.hasOwnProperty("sliderPosition"))return this.state.sliderPosition;var e=this.props.scale,t=R.indexOf(e);return-1===t?0:Math.floor(t*(D-1)/(R.length-1))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.scale;return b.default.createElement("div",{className:"media-library__scale"},b.default.createElement(P.default,{className:"media-library__scale-toggle",compact:!0},b.default.createElement(I.default,{selected:1!==n,onClick:this.setScaleToMobileGrid},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("Grid")),b.default.createElement(E.default,{icon:"grid",size:18})),b.default.createElement(I.default,{selected:1===n,onClick:this.setScaleToMobileFull},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("List")),b.default.createElement(E.default,{icon:"menu",size:18}))),b.default.createElement(T.default,{step:"1",min:"0",max:D-1,minContent:b.default.createElement(E.default,{icon:"image",size:12}),maxContent:b.default.createElement(E.default,{icon:"image",size:24}),value:this.getSliderPosition(),onChange:this.onScaleChange,className:"media-library__scale-range"}))}}]),t}(y.Component);O.propTypes={mediaScale:y.PropTypes.number,onChange:y.PropTypes.func,setMediaScalePreference:y.PropTypes.func,saveMediaScalePreference:y.PropTypes.func},O.defaultProps={onChange:function(){}},t.default=(0,_.connect)(function(e){return{scale:(0,M.getPreference)(e,"mediaScale")}},{setMediaScalePreference:(0,m.default)(N.setPreference,"mediaScale"),saveMediaScalePreference:(0,m.default)(N.savePreference,"mediaScale")})((0,x.localize)(O)),e.exports=t.default},7381996410053237:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(7572476330282672),v=n(6280957995252369),y=n(8958839223830722),b=i(y),_=n(4691924745409762),x=i(_),C=n(8478951557498169),E=i(C),w=n(0xe6bd8709d6a3c),T=n(5523398591803755),S=n(6007716273106560),P=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getPopoverLabel",value:function(){var e=this.props,t=e.translate,n=e.postType;return t("page"===n?"The slug is the URL-friendly version of the page title.":"The slug is the URL-friendly version of the post title.")}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.translate;return m.default.createElement(x.default,{className:"editor-more-options__slug"},m.default.createElement(b.default,{labelText:n("Slug"),helpText:this.getPopoverLabel()},m.default.createElement(E.default,{instanceName:t+"-sidebar",className:"editor-more-options__slug-field"})))}}]),t}(h.PureComponent);P.propTypes={postType:h.PropTypes.string,translate:h.PropTypes.func},t.default=(0,v.connect)(function(e){var t=(0,w.getSelectedSiteId)(e);return{postType:(0,S.getEditedPostValue)(e,t,(0,T.getEditorPostId)(e),"type")}})((0,g.localize)(P)),e.exports=t.default},7387885866108935:function(e,t){"use strict";function n(e){for(var t=e.cellCache,n=e.cellRenderer,i=e.columnSizeAndPositionManager,r=e.columnStartIndex,o=e.columnStopIndex,a=e.horizontalOffsetAdjustment,s=e.isScrolling,l=e.rowSizeAndPositionManager,u=e.rowStartIndex,d=e.rowStopIndex,c=(e.scrollLeft,e.scrollTop,e.styleCache),p=e.verticalOffsetAdjustment,f=e.visibleColumnIndices,h=e.visibleRowIndices,m=[],g=u;g<=d;g++)for(var v=l.getSizeAndPositionOfCell(g),y=r;y<=o;y++){var b=i.getSizeAndPositionOfCell(y),_=y>=f.start&&y<=f.stop&&g>=h.start&&g<=h.stop,x=g+"-"+y,C=void 0;c[x]?C=c[x]:(C={height:v.size,left:b.offset+a,position:"absolute",top:v.offset+p,width:b.size},c[x]=C);var E={columnIndex:y,isScrolling:s,isVisible:_,key:x,rowIndex:g,style:C},w=void 0;!s||a||p?w=n(E):(t[x]||(t[x]=n(E)),w=t[x]),null!=w&&w!==!1&&m.push(w)}return m}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},7437731760987395:function(e,t,n){"use strict";function i(e){return{type:o.MEDIA_MODAL_VIEW_SET,view:e}}function r(){return i(null)}Object.defineProperty(t,"__esModule",{value:!0}),t.setMediaModalView=i,t.resetMediaModalView=r;var o=n(0xd047e5c4c63f8)},7438657326200142:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(0x45d24eaab7654),m=i(h),g=n(8640881565075096),v=i(g),y=n(5896763357248615),b=i(y),_=n(0x8ae3881d6e8c2),x=i(_),C=n(6280957995252369),E=n(0xa505046780b0c),w=i(E),T=n(7186610166862683),S=i(T),P=n(0x6252b2f7ca0c8),k=i(P),I=n(0xe6bd8709d6a3c),N=n(0x3e6242fdbac66),M=n(0xf4d0801157df9),R=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.openDialog=function(e){e.preventDefault(),n.setState({showDialog:!0})},n.closeDialog=function(){n.setState({showDialog:!1})},n.state={showDialog:!1},n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.labels,n=e.onSuccess,i=e.postType,r=e.terms,o=e.taxonomy,a=r?r.length:0,s=(0,x.default)("editor-term-selector__add-term",{"is-compact":a<8});return b.default.createElement("div",{className:s},b.default.createElement(S.default,{borderless:!0,compact:!0,onClick:this.openDialog},b.default.createElement(w.default,{icon:"folder"})," ",t.add_new_item),b.default.createElement(k.default,{showDialog:this.state.showDialog,onClose:this.closeDialog,postType:i,taxonomy:o,onSuccess:n}))}}]),t}(y.Component);R.propTypes={labels:y.PropTypes.object,onSuccess:y.PropTypes.func,postType:y.PropTypes.string,taxonomy:y.PropTypes.string,terms:y.PropTypes.array},R.defaultProps={onSuccess:m.default},t.default=(0,C.connect)(function(e,t){var n=t.taxonomy,i=t.postType,r=(0,I.getSelectedSiteId)(e),o=(0,N.getPostTypeTaxonomy)(e,r,i,n),a=(0,v.default)(o,"labels",{});return{terms:(0,M.getTerms)(e,r,n),labels:a}})(R),e.exports=t.default},7455782401390732:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=n(5059747709250767);e.exports=a.createClass({displayName:"FormSectionHeading",render:function(){return a.createElement("h3",(0,o.default)({},l(this.props,"className"),{className:s(this.props.className,"form-section-heading")}),this.props.children)}})},7463691543202778:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=function(e){var t=e.avatarUrl,n=e.fullName,i=e.query,r=e.username,a=function(e,t){var n={username:"(^"+i+")(\\w*)\\s*",fullName:"(^.*?)(\\b"+i+")(.*)"},r=new RegExp(n[t],"ig").exec(e);return r?r.map(function(e,t){return 0===t?"":i.toLowerCase()===e.toLowerCase()?o.default.createElement("mark",{className:"mentions__highlight",key:t},e):e}):[e]},s=a(r,"username"),l=a(n,"fullName");return s.unshift("@"),o.default.createElement("div",null,o.default.createElement("img",{className:"mentions__avatar",src:t}),o.default.createElement("span",{className:"mentions__username"},s),o.default.createElement("small",{className:"mentions__fullname"},l))};a.propTypes={avatarUrl:r.PropTypes.string,fullName:r.PropTypes.string,query:r.PropTypes.string,username:r.PropTypes.string},a.defaultProps={avatarUrl:"",fullName:"",query:"",username:""},t.default=a,e.exports=t.default},7500633124798471:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(5367243434992214),u=i(l),d=n(6183759582808303),c=i(d),p=n(0x7577664156f44),f=i(p),h=(0,c.default)();t.default=o.default.createClass({displayName:"EditorWordCount",mixins:[s.default],getInitialState:function(){return{rawContent:""}},componentWillMount:function(){u.default.on("rawContentChange",this.onRawContentChange)},componentDidMount:function(){this.onRawContentChange()},componentWillUnmount:function(){u.default.removeListener("rawContentChange",this.onRawContentChange)},onRawContentChange:function(){this.setState({rawContent:u.default.getRawContent()})},render:function(){var e=h.get(),t=e&&e.localeSlug||"en";switch(t){case"ja":case"th":case"zh-cn":case"zh-hk":case"zh-sg":case"zh-tw":return null;case"ko":return null}var n=f.default.countWords(this.state.rawContent);return o.default.createElement("div",{className:"editor-word-count"},this.translate("%d word","%d words",{count:n,args:[n]}))}}),e.exports=t.default},7509692711936611:function(e,t){(function(){tinymce.PluginManager.add("lists",function(e){function t(t){return e.$.contains(e.getBody(),t)}function n(e){return e&&"BR"==e.nodeName}function i(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&t(e)}function r(e){return e.parentNode.firstChild==e}function o(e){return e.parentNode.lastChild==e}function a(t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function s(t){return t===e.getBody()}var l=this;e.on("init",function(){function u(e,t){var n=S.isEmpty(e);return!(t&&S.select("span[data-mce-type=bookmark]").length>0)&&n}function d(e){function t(t){var i,r,o;r=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],1==r.nodeType&&(i=S.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),t?r.insertBefore(i,r.childNodes[o]):S.insertAfter(i,r.childNodes[o])):r.appendChild(i),r=i,o=0),n[t?"startContainer":"endContainer"]=r,n[t?"startOffset":"endOffset"]=o}var n={};return t(!0),e.collapsed||t(),n}function c(e){function t(t){function n(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}var i,r,o;i=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],i&&(1==i.nodeType&&(r=n(i),i=i.parentNode,S.remove(o)),e[t?"startContainer":"endContainer"]=i,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=S.createRng();n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),P.setRng(n)}function p(t,n){var i,r,o,a=S.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&(r=S.create(n),r.tagName===e.settings.forced_root_block&&S.setAttribs(r,e.settings.forced_root_block_attrs),a.appendChild(r)),t)for(;i=t.firstChild;){var l=i.nodeName;o||"SPAN"==l&&"bookmark"==i.getAttribute("data-mce-type")||(o=!0),s[l]?(a.appendChild(i),r=null):n?(r||(r=S.create(n),a.appendChild(r)),r.appendChild(i)):a.appendChild(i)}return e.settings.forced_root_block?o||tinymce.Env.ie&&!(tinymce.Env.ie>10)||r.appendChild(S.create("br",{"data-mce-bogus":"1"})):a.appendChild(S.create("br")),a}function f(){return tinymce.grep(P.getSelectedBlocks(),function(e){return/^(LI|DT|DD)$/.test(e.nodeName)})}function h(e,t,n){function i(e){tinymce.each(a,function(n){e.parentNode.insertBefore(n,t.parentNode)}),S.remove(e)}var r,o,a,s;for(a=S.select('span[data-mce-type="bookmark"]',e),n=n||p(t),r=S.createRng(),r.setStartAfter(t),r.setEndAfter(e),o=r.extractContents(),s=o.firstChild;s;s=s.firstChild)if("LI"==s.nodeName&&S.isEmpty(s)){S.remove(s);break}S.isEmpty(o)||S.insertAfter(o,e),S.insertAfter(n,e),u(t.parentNode)&&i(t.parentNode),S.remove(t),u(e)&&S.remove(e)}function m(e){var t,n;if(t=e.nextSibling,t&&i(t)&&t.nodeName==e.nodeName){for(;n=t.firstChild;)e.appendChild(n);S.remove(t)}if(t=e.previousSibling,t&&i(t)&&t.nodeName==e.nodeName){for(;n=t.firstChild;)e.insertBefore(n,e.firstChild);S.remove(t)}}function g(e){tinymce.each(tinymce.grep(S.select("ol,ul",e)),function(e){var t,n=e.parentNode;"LI"==n.nodeName&&n.firstChild==e&&(t=n.previousSibling,t&&"LI"==t.nodeName&&(t.appendChild(e),u(n)&&S.remove(n))),i(n)&&(t=n.previousSibling,t&&"LI"==t.nodeName&&t.appendChild(e))})}function v(e){function t(e){u(e)&&S.remove(e)}var n,a=e.parentNode,l=a.parentNode;return!!s(a)||("DD"==e.nodeName?(S.rename(e,"DT"),!0):r(e)&&o(e)?("LI"==l.nodeName?(S.insertAfter(e,l),t(l),S.remove(a)):i(l)?S.remove(a,!0):(l.insertBefore(p(e),a),S.remove(a)),!0):r(e)?("LI"==l.nodeName?(S.insertAfter(e,l),e.appendChild(a),t(l)):i(l)?l.insertBefore(e,a):(l.insertBefore(p(e),a),S.remove(e)),!0):o(e)?("LI"==l.nodeName?S.insertAfter(e,l):i(l)?S.insertAfter(e,a):(S.insertAfter(p(e),a),S.remove(e)),!0):("LI"==l.nodeName?(a=l,n=p(e,"LI")):n=i(l)?p(e,"LI"):p(e),h(a,e,n),g(a.parentNode),!0))}function y(e){function t(t,n){var r;if(i(t)){for(;r=e.lastChild.firstChild;)n.appendChild(r);S.remove(t)}}var n,r;return"DT"==e.nodeName?(S.rename(e,"DD"),!0):(n=e.previousSibling,n&&i(n)?(n.appendChild(e),!0):n&&"LI"==n.nodeName&&i(n.lastChild)?(n.lastChild.appendChild(e),t(e.lastChild,n.lastChild),!0):(n=e.nextSibling,n&&i(n)?(n.insertBefore(e,n.firstChild),!0):(n=e.previousSibling,!(!n||"LI"!=n.nodeName)&&(r=S.create(e.parentNode.nodeName),n.appendChild(r),r.appendChild(e),t(e.lastChild,r),!0))))}function b(){var t=f();if(t.length){for(var n=d(P.getRng(!0)),i=0;i<t.length&&(y(t[i])||0!==i);i++);return c(n),e.nodeChanged(),!0}}function _(){var t=f();if(t.length){var n,i,r=d(P.getRng(!0)),o=e.getBody();for(n=t.length;n--;)for(var a=t[n].parentNode;a&&a!=o;){for(i=t.length;i--;)if(t[i]===a){t.splice(n,1);break}a=a.parentNode}for(n=0;n<t.length&&(v(t[n])||0!==n);n++);return c(r),e.nodeChanged(),!0}}function x(t){function r(){function t(e){var t,n;for(t=s[e?"startContainer":"endContainer"],n=s[e?"startOffset":"endOffset"],1==t.nodeType&&(t=t.childNodes[Math.min(n,t.childNodes.length-1)]||t);t.parentNode!=o;){if(a(t))return t;if(/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var i,r=[],o=e.getBody(),l=t(!0),u=t(),d=[],c=l;c&&(d.push(c),c!=u);c=c.nextSibling);return tinymce.each(d,function(e){if(a(e))return r.push(e),void(i=null);if(S.isBlock(e)||n(e))return n(e)&&S.remove(e),void(i=null);var t=e.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(e)&&(a(t)||!t&&e.parentNode==o)?void(i=null):(i||(i=S.create("p"),e.parentNode.insertBefore(i,e),r.push(i)),void i.appendChild(e))}),r}var o,s=P.getRng(!0),l="LI";"false"!==S.getContentEditable(P.getNode())&&(t=t.toUpperCase(),"DL"==t&&(l="DT"),o=d(s),tinymce.each(r(),function(e){var n,r;r=e.previousSibling,r&&i(r)&&r.nodeName==t?(n=r,e=S.rename(e,l),r.appendChild(e)):(n=S.create(t),e.parentNode.insertBefore(n,e),n.appendChild(e),e=S.rename(e,l)),m(n)}),c(o))}function C(){var t=d(P.getRng(!0)),n=e.getBody();tinymce.each(f(),function(e){var t,r;if(!s(e.parentNode)){if(u(e))return void v(e);for(t=e;t&&t!=n;t=t.parentNode)i(t)&&(r=t);h(r,e)}}),c(t)}function E(e){var t=S.getParent(P.getStart(),"OL,UL,DL");if(!s(t))if(t)if(t.nodeName==e)C(e);else{var n=d(P.getRng(!0));m(S.rename(t,e)),c(n)}else x(e)}function w(t){return function(){var n=S.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName==t}}function T(e){return!!n(e)&&!(!S.isBlock(e.nextSibling)||n(e.previousSibling))}var S=e.dom,P=e.selection;l.backspaceDelete=function(r){function o(t,n){var i,r,o=t.startContainer,a=t.startOffset;if(3==o.nodeType&&(n?a<o.data.length:a>0))return o;for(i=e.schema.getNonEmptyElements(),1==o.nodeType&&(o=tinymce.dom.RangeUtils.getNode(o,a)),r=new tinymce.dom.TreeWalker(o,e.getBody()),n&&T(o)&&r.next();o=r[n?"next":"prev2"]();){if("LI"==o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(3==o.nodeType&&o.data.length>0)return o}}function a(e,r){var o,a,l=e.parentNode;if(t(e)&&t(r)){if(i(r.lastChild)&&(a=r.lastChild),l==r.lastChild&&n(l.previousSibling)&&S.remove(l.previousSibling),o=r.lastChild,o&&n(o)&&e.hasChildNodes()&&S.remove(o),u(r,!0)&&S.$(r).empty(),!u(e,!0))for(;o=e.firstChild;)r.appendChild(o);a&&r.appendChild(a),S.remove(e),u(l)&&!s(l)&&S.remove(l)}}if(P.isCollapsed()){var l,p,f,h=S.getParent(P.getStart(),"LI");if(h){if(l=h.parentNode,s(l)&&S.isEmpty(l))return!0;if(p=P.getRng(!0),f=S.getParent(o(p,r),"LI"),f&&f!=h){var m=d(p);return r?a(f,h):a(h,f),c(m),!0}if(!f&&!r&&C(l.nodeName))return!0}}},e.on("BeforeExecCommand",function(t){var n,i=t.command.toLowerCase();if("indent"==i?b()&&(n=!0):"outdent"==i&&_()&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(){E("UL")}),e.addCommand("InsertOrderedList",function(){E("OL")}),e.addCommand("InsertDefinitionList",function(){E("DL")}),e.addQueryStateHandler("InsertUnorderedList",w("UL")),e.addQueryStateHandler("InsertOrderedList",w("OL")),e.addQueryStateHandler("InsertDefinitionList",w("DL")),e.on("keydown",function(t){9!=t.keyCode||tinymce.util.VK.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?_():b())})}),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;e.on("nodechange",function(){for(var n=e.selection.getSelectedBlocks(),i=!1,o=0,a=n.length;!i&&o<a;o++){var s=n[o].nodeName;i="LI"==s&&r(n[o])||"UL"==s||"OL"==s||"DD"==s}t.disabled(i)})}}),e.on("keydown",function(e){e.keyCode==tinymce.util.VK.BACKSPACE?l.backspaceDelete()&&e.preventDefault():e.keyCode==tinymce.util.VK.DELETE&&l.backspaceDelete(!0)&&e.preventDefault()})})}).call(window)},7526047878087096:function(e,t,n){var i=n(0xcf59db90cd843);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},7535811836182325:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(5896763357248615),s=i(a),l=n(5059747709250767),u=i(l);t.default=s.default.createClass({displayName:"ContactFormViewPreviewFieldset",render:function(){return s.default.createElement("fieldset",(0,o.default)({},(0,u.default)(this.props,"className"),{className:"wpview-type-contact-form-field"}),this.props.children)}}),e.exports=t.default},7542443254063963:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0xc729f06ce7488),o=i(r),a=n(5896763357248615),s=n(0x8ae3881d6e8c2),l=a.createClass({displayName:"SegmentedControlItem",propTypes:{children:a.PropTypes.node.isRequired,path:a.PropTypes.string,selected:a.PropTypes.bool,title:a.PropTypes.string,onClick:a.PropTypes.func},getDefaultProps:function(){return{selected:!1}},render:function(){var e=s({"segmented-control__item":!0,"is-selected":this.props.selected}),t=s("segmented-control__link",(0,o.default)({},"item-index-"+this.props.index,null!=this.props.index));return a.createElement("li",{className:e},a.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,role:"radio",tabIndex:0,"aria-selected":this.props.selected},a.createElement("span",{className:"segmented-control__text"},this.props.children)))}});e.exports=l},7543726903783169:function(e,t,n){var i=n(626017834495687),r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},o=i(r);e.exports=o},7552314505839195:function(e,t){"use strict";function n(e,t){return e.sites.mediaStorage.items[t]}function i(e,t){return!!e.sites.mediaStorage.fetchingItems[t]}function r(e,t){var n=e.sites.mediaStorage.items[t];return n?n.max_storage_bytes!==-1&&n.storage_used_bytes>=n.max_storage_bytes:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaStorage=n,t.isRequestingMediaStorage=i,t.isOverMediaLimit=r},7566439433639150:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,i=e.typeSlug,r=e.type,o=e.className,a=(0,c.default)("editor-status-label__placeholder",o),s=void 0;return s="post"===i?t("Loading Post…"):"page"===i?t("Loading Page…"):r?t("Loading %(postType)s…",{args:{postType:(0,v.decodeEntities)(r.labels.singular_name)}}):t("Loading…"),l.default.createElement("button",{className:a},"post"!==i&&"page"!==i&&n&&l.default.createElement(b.default,{siteId:n}),l.default.createElement("strong",null,s))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(872100829608442),a=i(o),s=n(5896763357248615),l=i(s),u=n(6280957995252369),d=n(0x8ae3881d6e8c2),c=i(d),p=n(7572476330282672),f=n(6007716273106560),h=n(7284660551555503),m=n(5523398591803755),g=n(0xe6bd8709d6a3c),v=n(6729227089147156),y=n(0xc98cd4e82fe0b),b=i(y);r.propTypes={translate:s.PropTypes.func,siteId:s.PropTypes.number,typeSlug:s.PropTypes.string,type:s.PropTypes.object,className:s.PropTypes.string},t.default=(0,u.connect)(function(e){var t=(0,g.getSelectedSiteId)(e),n={siteId:t},i=(0,f.getEditedPost)(e,t,(0,m.getEditorPostId)(e));return i?(0,a.default)(n,{typeSlug:i.type,type:(0,h.getPostType)(e,t,i.type)}):n})((0,p.localize)(r)),e.exports=t.default},7628562603262516:function(e,t,n){"use strict";function i(e,t){return t.type=o.MediaTypes.IMAGE,t.media.URL=e.getAttribute("src"),t.media.alt=e.getAttribute("alt"),t.media.transient=0===(t.media.URL||"").indexOf("blob:"),["width","height"].forEach(function(n){var i="natural"+n[0].toUpperCase()+n.slice(1),r=e.getAttribute(n)||e[i]||e[n];r&&isFinite(r)&&(t.media[n]=parseInt(r,10))}),a.test(e.className)&&(t.appearance.size=e.className.match(a)[1]),l.test(e.className)&&(t.appearance.align=e.className.match(l)[1]),s.test(e.className)&&(t.media.ID=e.className.match(s)[1],isFinite(t.media.ID)&&(t.media.ID=parseInt(t.media.ID,10))),t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.nodeName){case"IMG":t=i(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var o=n(6519958819961068),a=/\bsize-(\w+)\b/,s=/\bwp-image-((media-)?\d+)\b/,l=/\balign(left|center|right|none)\b/},7629348406412959:function(e,t){"use strict";function n(e){return e.ui.editor.imageEditor.transform}function i(e){return e.ui.editor.imageEditor.fileInfo}function r(e){return e.ui.editor.imageEditor.hasChanges}function o(e){return!e.ui.editor.imageEditor.imageIsLoading}function a(e){return e.ui.editor.imageEditor.cropBounds}function s(e){return e.ui.editor.imageEditor.crop}function l(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=n,t.getImageEditorFileInfo=i,t.imageEditorHasChanges=r,t.isImageEditorImageLoaded=o,t.getImageEditorCropBounds=a,t.getImageEditorCrop=s,t.getImageEditorAspectRatio=l},7679108601361337:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=n(4675954658966525),b=i(y),_=n(314808424178629),x=(0,b.default)("calypso:post-editor:videopress"),C="https://wordpress.com/wp-content/plugins/video/assets/js/next/videopress.js",E=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.setVideoInstance=function(e){return i.video=e},i.onScriptLoaded=function(e){if(e)return void x("Script"+e.src+" failed to load.");var t=i.props,n=t.isPlaying,r=t.item;"undefined"!=typeof window&&window.videopress&&(i.player=window.videopress(r.videopress_guid,i.video,{autoPlay:n,height:r.height,width:r.width}))},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.loadInitializeScript()}},{key:"componentWillUnmount",value:function(){(0,_.removeScriptCallback)(C,this.onScriptLoaded),this.destroy()}},{key:"componentDidUpdate",value:function(e){this.props.item.videopress_guid!==e.item.videopress_guid&&(this.destroy(),this.loadInitializeScript())}},{key:"shouldComponentUpdate",value:function(e){return this.props.item.videopress_guid!==e.item.videopress_guid}},{key:"loadInitializeScript",value:function(){(0,_.loadScript)(C,this.onScriptLoaded)}},{key:"destroy",value:function(){if(this.player)for(this.player.destroy();this.video.firstChild;)this.video.removeChild(this.video.firstChild)}},{key:"render",value:function(){var e=(0,v.default)(this.props.className,"is-video");return m.default.createElement("div",{className:e,ref:this.setVideoInstance})}}]),t}(h.Component);E.propTypes={className:h.PropTypes.string,isPlaying:h.PropTypes.bool,item:h.PropTypes.object.isRequired},E.defaultProps={isPlaying:!1},t.default=E,e.exports=t.default},7682332938484091:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddImageDialog=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(7572476330282672),v=n(7127988529575974),y=i(v),b=n(0x4505d8ebb162c),_=i(b),x=n(0x965a288d34003),C=i(x),E=n(5862851293117563),w=i(E),T=t.AddImageDialog=function(e){function t(){var e,n,i,r;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=i=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),i.state={imageAlt:"",imageTitle:"",imageUrl:""},i.setImageAlt=function(e){i.setState({imageAlt:e.target.value})},i.setImageTitle=function(e){i.setState({imageTitle:e.target.value})},i.setImageUrl=function(e){i.setState({imageUrl:e.target.value})},i.onCloseDialog=function(){i.setState({imageAlt:"",imageTitle:"",imageUrl:""}),i.props.onClose()},i.onInsertImage=function(){var e=i.state,t=e.imageAlt,n=e.imageTitle,r=e.imageUrl;i.props.onInsert({alt:t,src:r,title:n}),i.onCloseDialog()},r=n,(0,c.default)(i,r)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.translate,i=this.state,r=i.imageAlt,o=i.imageTitle,a=i.imageUrl,s=[{action:"cancel",label:n("Cancel")},{action:"add-image",isPrimary:!0,label:n("Add Image"),onClick:this.onInsertImage}];return m.default.createElement(y.default,{autoFocus:!1,isVisible:t,buttons:s,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},m.default.createElement(_.default,null,m.default.createElement(C.default,{htmlFor:"image_url"},n("URL")),m.default.createElement(w.default,{name:"image_url",onChange:this.setImageUrl,value:a})),m.default.createElement(_.default,null,m.default.createElement(C.default,{htmlFor:"image_title"},n("Title")),m.default.createElement(w.default,{name:"image_title",onChange:this.setImageTitle,value:o})),m.default.createElement(_.default,null,m.default.createElement(C.default,{htmlFor:"image_alt"},n("Alt Text")),m.default.createElement(w.default,{name:"image_alt",onChange:this.setImageAlt,value:r})))}}]),t}(h.Component);T.propTypes={onClose:h.PropTypes.func,onInsert:h.PropTypes.func,shouldDisplay:h.PropTypes.bool,translate:h.PropTypes.func},t.default=(0,g.localize)(T)},7717053111238044:function(e,t,n){"use strict";function i(e){var t,n=o.DOM,i=o.each;e.on("focus",function(){window.wpActiveEditor=e.id}),e.on("BeforeSetContent",function(e){var t;e.content&&(e.content.indexOf("<!--more")!==-1&&(t=a("Read more…"),e.content=e.content.replace(/<!--more(.*?)-->/g,function(e,n){return'<img src="'+o.Env.transparentSrc+'" data-wp-more="more" data-wp-more-text="'+n+'" class="wp-more-tag mce-wp-more" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />'})),e.content.indexOf("<!--nextpage-->")!==-1&&(t=a("Page break"),e.content=e.content.replace(/<!--nextpage-->/g,'<img src="'+o.Env.transparentSrc+'" data-wp-more="nextpage" class="wp-more-tag mce-wp-nextpage" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />')),e.load&&"raw"!==e.format&&(e.content=s.wpautop(e.content)))}),e.on("PostProcess",function(e){e.get&&(e.content=e.content.replace(/<img[^>]+>/g,function(e){var t,n="";return e.indexOf('data-wp-more="more"')!==-1?((t=e.match(/data-wp-more-text="([^"]+)"/))&&(n=t[1]),e="<!--more"+n+"-->"):e.indexOf('data-wp-more="nextpage"')!==-1&&(e="<!--nextpage-->"),e}))}),e.on("ResolveName",function(t){var n;"IMG"===t.target.nodeName&&(n=e.dom.getAttrib(t.target,"data-wp-more"))&&(t.name=n)}),e.addCommand("WP_More",function(t){var n,i,r,s="wp-more-tag",l=e.dom,u=e.selection.getNode();return t=t||"more",s+=" mce-wp-"+t,r=a("more"===t?"Read more…":"Next page"),i='<img src="'+o.Env.transparentSrc+'" title="'+r+'" class="'+s+'" data-wp-more="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />',"BODY"===u.nodeName||"P"===u.nodeName&&"BODY"===u.parentNode.nodeName?void e.insertContent(i):(n=l.getParent(u,function(e){return!(!e.parentNode||"BODY"!==e.parentNode.nodeName)},e.getBody()),void(n&&("P"===n.nodeName?n.appendChild(l.create("p",null,i).firstChild):l.insertAfter(l.create("p",null,i),n),e.nodeChanged())))}),e.addCommand("WP_Code",function(){e.formatter.toggle("code")}),e.addCommand("WP_Page",function(){e.execCommand("WP_More","nextpage")}),e.addButton("wp_more",{tooltip:a("Insert Read More tag"),onclick:function(){e.execCommand("WP_More","more")}}),e.addButton("wp_page",{tooltip:a("Page break"),onclick:function(){e.execCommand("WP_More","nextpage")}}),e.addButton("wp_help",{tooltip:a("Keyboard Shortcuts"),cmd:"WP_Help"}),e.addButton("wp_charmap",{icon:"charmap",tooltip:a("Special Characters"),cmd:"Wpcom_CharMap"}),e.addButton("wp_code",{tooltip:a("Code"),cmd:"WP_Code",stateSelector:"code"}),e.addMenuItem("wp_more",{text:a("Insert Read More tag"),icon:"wp_more",context:"insert",onclick:function(){e.execCommand("WP_More","more")}}),e.addMenuItem("wp_page",{text:a("Page break"),icon:"wp_page",context:"insert",onclick:function(){e.execCommand("WP_More","nextpage")}}),e.on("BeforeExecCommand",function(n){!o.Env.webkit||"InsertUnorderedList"!==n.command&&"InsertOrderedList"!==n.command||(t||(t=e.dom.create("style",{type:"text/css"},"#tinymce,#tinymce span,#tinymce li,#tinymce li>span,#tinymce p,#tinymce p>span{font:medium sans-serif;color:#000;line-height:normal;}")),e.getDoc().head.appendChild(t))}),e.on("ExecCommand",function(n){o.Env.webkit&&t&&("InsertUnorderedList"===n.command||"InsertOrderedList"===n.command)&&e.dom.remove(t)}),e.on("init",function(){var t=o.Env,n=["mceContentBody"],r=e.getDoc(),a=e.dom;o.Env.iOS&&a.addClass(r.documentElement,"ios"),"rtl"===e.getParam("directionality")&&(n.push("rtl"),a.setAttrib(r.documentElement,"dir","rtl")),t.ie?9===parseInt(t.ie,10)?n.push("ie9"):8===parseInt(t.ie,10)?n.push("ie8"):t.ie<8&&n.push("ie7"):t.webkit&&n.push("webkit"),n.push("wp-editor"),i(n,function(e){e&&a.addClass(r.body,e)}),e.on("BeforeSetContent",function(e){e.content&&(e.content=e.content.replace(/<p>\s*<(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)( [^>]*)?>/gi,"<$1$2>").replace(/<\/(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)>\s*<\/p>/gi,"</$1>"))}),e.getParam("wp_paste_filters",!0)&&(e.on("PastePreProcess",function(e){e.content=e.content.replace(/<br class="?Apple-interchange-newline"?>/gi,""),o.Env.webkit||(e.content=e.content.replace(/(<[^>]+) style="[^"]*"([^>]*>)/gi,"$1$2"),e.content=e.content.replace(/(<[^>]+) data-mce-style=([^>]+>)/gi,"$1 style=$2"))}),e.on("PastePostProcess",function(e){i(a.select("p",e.node),function(e){a.isEmpty(e)&&a.remove(e)})}))}),e.on("SaveContent",function(t){return!e.inline&&e.isHidden()?void(t.content=t.element.value):(t.content=t.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),void(t.content=s.removep(t.content)))}),e.on("BeforeSetContent",function(e){e.content&&(e.content=(0,r.removeEmptySpacesInParagraphs)(e.content))}),e.on("preInit",function(){e.schema.addValidElements("@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|draggable|dropzone|hidden|spellcheck|translate],i,b"),o.Env.iOS&&(e.settings.height=300),i({c:"JustifyCenter",r:"JustifyRight",l:"JustifyLeft",j:"JustifyFull",q:"mceBlockQuote",u:"InsertUnorderedList",o:"InsertOrderedList",s:"unlink",m:"WP_Medialib",t:"WP_More",d:"Strikethrough",h:"WP_Help",p:"WP_Page",x:"WP_Code"},function(t,n){e.shortcuts.add("access+"+n,"",t)})}),e.on("preinit",function(){function t(t,r){function o(){if(!s)return this;var e,t,i=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=window.innerWidth,a=window.innerHeight,l=g?g.getBoundingClientRect():{top:0,right:o,bottom:a,left:0,width:o,height:a},p=this.getEl(),f=p.offsetWidth,h=p.offsetHeight,v=s.getBoundingClientRect(),y=(v.left+v.right)/2,b=5,_=8,x=h+_+b,C=m?m.getBoundingClientRect().bottom:0,E=u?u.getBoundingClientRect().bottom:0,w=d?a-d.getBoundingClientRect().top:0,T=c?a-c.getBoundingClientRect().top:0,S=Math.max(0,C,E,l.top),P=Math.max(0,w,T,a-l.bottom),k=v.top+l.top-S,I=a-l.top-v.bottom-P,N=a-S-P,M="";return k>=N||I>=N?this.hide():(this.bottom?I>=x?(M=" mce-arrow-up",e=v.bottom+l.top+r):k>=x&&(M=" mce-arrow-down",e=v.top+l.top+r-h-_):k>=x?(M=" mce-arrow-down",e=v.top+l.top+r-h-_):I>=x&&N/2>v.bottom+l.top-S&&(M=" mce-arrow-up",e=v.bottom+l.top+r),"undefined"==typeof e&&(e=r+S+b),t=y-f/2+l.left+i,v.left<0||v.right>l.width?t=l.left+i+(l.width-f)/2:f>=o?(M+=" mce-arrow-full",t=0):t<0&&v.left+f>o||t+f>o&&v.right-f<0?t=(o-f)/2:t<l.left+i?(M+=" mce-arrow-left",t=v.left+l.left+i):t+f>l.width+l.left+i&&(M+=" mce-arrow-right",t=v.right-f+l.left+i),p.className=p.className.replace(/ ?mce-arrow-[\w]+/g,"")+M,n.setStyles(p,{left:t,top:e}),this)}var a,l,h=[];return i(t,function(t){function n(){var n=e.selection;"bullist"===i&&n.selectorChanged("ul > li",function(e,n){for(var i,r=n.parents.length;r--&&(i=n.parents[r].nodeName,"OL"!==i&&"UL"!==i););t.active(e&&"UL"===i)}),"numlist"===i&&n.selectorChanged("ol > li",function(e,n){for(var i,r=n.parents.length;r--&&(i=n.parents[r].nodeName,"OL"!==i&&"UL"!==i););t.active(e&&"OL"===i)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var i;"|"===t?l=null:p.has(t)?(t={type:t},f.toolbar_items_size&&(t.size=f.toolbar_items_size),h.push(t),l=null):(l||(l={type:"buttongroup",items:[]},h.push(l)),e.buttons[t]&&(i=t,t=e.buttons[i],"function"==typeof t&&(t=t()),t.type=t.type||"button",f.toolbar_items_size&&(t.size=f.toolbar_items_size),t=p.create(t),l.items.push(t),e.initialized?n():e.on("init",n)))}),a=p.create({type:"panel",layout:"stack",classes:"toolbar-grp inline-toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:h}]}),a.bottom=r,a.on("show",function(){this.reposition()}),a.on("keydown",function(t){27===t.keyCode&&(this.hide(),e.focus())}),e.on("remove",function(){a.remove()}),a.reposition=o,a.hide().renderTo(document.body),a}function r(e){a&&(a.hide(),"hide"===e.type||"blur"===e.type?a=!1:"resizewindow"!==e.type&&"scrollwindow"!==e.type||(clearTimeout(l),l=setTimeout(function(){a&&"function"==typeof a.show&&a.show()},250)))}var a,s,l,u,d,c,p=o.ui.Factory,f=e.settings,h=e.getContainer(),m=document.getElementById("wpadminbar"),g=document.getElementById(e.id+"_ifr");h&&(u=o.$(".mce-toolbar-grp",h)[0],d=o.$(".mce-statusbar",h)[0]),"content"===e.id&&(c=document.getElementById("post-status-info")),e.shortcuts.add("alt+119","",function(){var e;a&&(e=a.find("toolbar")[0],e&&e.focus(!0))}),e.on("nodechange",function(t){var n=e.selection.isCollapsed(),i={element:t.element,parents:t.parents,collapsed:n};e.fire("wptoolbar",i),s=i.selection||i.element,a&&a.hide(),i.toolbar?(a=i.toolbar,a.show()):a=!1}),e.on("focus",function(){a&&a.show()}),n.bind(window,"resize scroll",r),e.on("remove",function(){n.unbind(window,"resize scroll",r)}),e.on("blur hide",r),e.wp=e.wp||{},e.wp._createToolbar=t},!0)}var r=n(6121810848606904),o=n(0x976699e5e0db4),a=n(7572476330282672).translate,s=n(6729227089147156);e.exports=function(){o.PluginManager.add("wpcom",i)}},7749691109491001:function(e,t,n){"use strict";function i(e,t){var n;try{return h.injection.injectBatchingStrategy(p),n=f.getPooled(t),v++,n.perform(function(){var i=g(e,!0),r=c.mountComponent(i,n,null,l(),m,0);return t||(r=d.addChecksumToMarkup(r)),r},null)}finally{v--,f.release(n),v||h.injection.injectBatchingStrategy(u)}}function r(e){return s.isValidElement(e)?void 0:a("46"),i(e,!1)}function o(e){return s.isValidElement(e)?void 0:a("47"),i(e,!0)}var a=n(6480275245108353),s=n(6285320399463177),l=n(995260993298716),u=n(7772482523984096),d=(n(0x68d82b55ebbd6),n(4718054671072247)),c=n(8164605798304297),p=n(6239491752064318),f=n(0xff99153f81cef),h=n(6550123557474926),m=n(7277489034984245),g=n(4972045777986408),v=(n(6088762386890041),0);e.exports={renderToString:r,renderToStaticMarkup:o}},7773182142709690:function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return r(e,t,n);if(s.nodeList(e))return o(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=n(8291803606487515),l=n(7866506511967244);e.exports=i},7784287972617637:function(e,t,n){"use strict";function i(e){return{media:l.getAll(e),mediaHasNextPage:l.hasNextPage(e),mediaFetchingNextPage:l.isFetchingNextPage(e)}}var r=n(5896763357248615),o=n(8907951692841672),a=n(0xf0f4288728240),s=n(7613110173109069),l=n(8398171032663375),u=n(921923039590806),d=n(7987478386539869);e.exports=r.createClass({displayName:"MediaListData",propTypes:{siteId:r.PropTypes.number.isRequired,filter:r.PropTypes.string,search:r.PropTypes.string},getInitialState:function(){return i(this.props.siteId)},componentWillMount:function(){s.setQuery(this.props.siteId,this.getQuery()),l.on("change",this.updateStateData),this.updateStateData()},componentWillUnmount:function(){l.off("change",this.updateStateData)},componentWillReceiveProps:function(e){var t=this.getQuery(e);this.props.siteId===e.siteId&&a(t,this.getQuery())||(s.setQuery(e.siteId,t),this.setState(i(e.siteId)))},getQuery:function(e){var t={};return e=e||this.props,e.search&&(t.search=e.search),e.filter&&(t.mime_type=d.getMimeBaseTypeFromFilter(e.filter)),t},fetchData:function(){s.fetchNextPage(this.props.siteId)},updateStateData:function(){this.setState(i(this.props.siteId))},render:function(){return u(this,o({},this.state,{mediaOnFetchNextPage:this.fetchData}))}})},7788420767477302:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=document.getElementById(this.id+"_ifr");t&&t.setAttribute("tabIndex",e)}}function o(e){var t=e&&e.settings;if(t&&"tabindex"in t){var n=Math.min(32767,Number(t.tabindex));(0,s.default)(n)&&e.on("init",r(n))}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0xda50ef451a3ee),s=i(a);t.default=function(){u.default.PluginManager.add("wpcom/tabindex",o)};var l=n(0x976699e5e0db4),u=i(l);e.exports=t.default},7791318849796467:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(0x94d4b19af1d06),s=i(a),l=n(5896763357248615),u=i(l),d=n(5059747709250767),c=i(d),p=n(0xf0f4288728240),f=i(p),h=n(0x8ae3881d6e8c2),m=i(h),g=n(0x47248ea013aac),v=i(g),y=n(0x8d16af37d6a7f),b=i(y);t.default=u.default.createClass({displayName:"ShortcodeFrame",propTypes:{body:l.PropTypes.string,scripts:l.PropTypes.object,style:l.PropTypes.object,onLoad:l.PropTypes.func,className:l.PropTypes.string},getDefaultProps:function(){return{onLoad:function(){}}},getInitialState:function(){return{html:""}},componentDidMount:function(){this.updateHtmlState(this.props)},componentWillReceiveProps:function(e){(0,f.default)(this.props,e)||this.updateHtmlState(e)},shouldComponentUpdate:function(e,t){return t.html!==this.state.html},updateHtmlState:function(e){this.setState({html:(0,v.default)(e)})},onFrameLoad:function(e){e.target.contentWindow.postMessage((0,s.default)({content:this.state.html}),"*"),this.props.onLoad(e)},render:function(){var e=(0,m.default)("shortcode-frame",this.props.className);if(!this.state.html)return null;var t=Math.random();return u.default.createElement(b.default,(0,o.default)({key:t},(0,c.default)(this.props,"body","scripts","styles"),{src:"https://wpcomwidgets.com/render/",onLoad:this.onFrameLoad,frameBorder:"0",sandbox:"allow-scripts",className:e}))}}),e.exports=t.default},7841572780754165:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalGalleryFields=void 0;var r=n(477028190620861),o=i(r),a=n(6203271391094927),s=i(a),l=n(5896763357248615),u=i(l),d=n(8907951692841672),c=i(d),p=n(0x45d24eaab7654),f=i(p),h=n(6718701541658404),m=i(h),g=n(0xf2d812b076e51),v=i(g),y=n(5973119050011126),b=i(y),_=n(7572476330282672),x=n(6753482749867647),C=i(x),E=n(8619793617189177),w=i(E),T=n(7904991244547051),S=i(T),P=n(0xbff38eca5e16d),k=i(P),I=n(6803892143900866),N=n(474432612430512),M=t.EditorMediaModalGalleryFields=u.default.createClass({displayName:"EditorMediaModalGalleryFields",propTypes:{site:l.PropTypes.object,settings:l.PropTypes.object,onUpdateSetting:l.PropTypes.func,numberOfItems:l.PropTypes.number},getDefaultProps:function(){return{settings:(0,s.default)({}),onUpdateSetting:f.default,numberOfItems:0}},getTypeOptions:function(){var e=this.props.site,t={individual:this.props.translate("Individual Images"),default:this.props.translate("Thumbnail Grid")};return!e||e.jetpack&&!(0,N.isModuleActive)(e,"tiled-gallery")||(0,c.default)(t,{rectangular:this.props.translate("Tiled Mosaic"),square:this.props.translate("Square Tiles"),circle:this.props.translate("Circles"),columns:this.props.translate("Tiled Columns")}),!e||e.jetpack&&!(0,N.isModuleActive)(e,"shortcodes")||(0,c.default)(t,{slideshow:this.props.translate("Slideshow")}),t},getLinkOptions:function(){return"individual"===this.props.settings.type?{}:{"":this.props.translate("Attachment Page"),file:this.props.translate("Media File"),none:this.props.translate("None")}},getSizeOptions:function(){return(0,m.default)(I.GallerySizeableTypes,this.props.settings.type)?{thumbnail:this.props.translate("Thumbnail"),medium:this.props.translate("Medium"),large:this.props.translate("Large"),full:this.props.translate("Full Size")}:{}},getColumnOptions:function(){var e=Math.min(this.props.numberOfItems,9);return(0,b.default)((0,v.default)(e,function(e){return[e+1,(e+1).toString()]}))},updateRandomOrder:function(e){this.props.onUpdateSetting("orderBy",e.target.checked?"rand":null)},renderDropdown:function(e,t,n){var i=this.props,r=i.settings,a=i.onUpdateSetting;if((0,o.default)(t).length)return u.default.createElement(C.default,{legend:e,className:"for-setting-"+n},u.default.createElement(w.default,{selectedText:t[r[n]]},(0,o.default)(t).map(function(e){var i=t[e];return u.default.createElement(S.default,{key:"value-"+e,selected:e===r[n],onClick:function(){return a(n,isFinite(parseInt(e))?+e:e)}},i)})))},renderColumnsOption:function(){if((0,m.default)(I.GalleryColumnedTypes,this.props.settings.type))return this.renderDropdown(this.props.translate("Columns"),this.getColumnOptions(),"columns")},renderRandomOption:function(){var e=this.props.settings;if("individual"!==e.type)return u.default.createElement(C.default,{legend:this.props.translate("Random Order")},u.default.createElement(k.default,{onChange:this.updateRandomOrder,checked:"rand"===e.orderBy}))},render:function(){var e=this.getTypeOptions(),t=this.getLinkOptions(),n=this.getSizeOptions();return u.default.createElement("div",{className:"editor-media-modal-gallery__fields"},this.renderDropdown(this.props.translate("Layout"),e,"type"),this.renderColumnsOption(),this.renderRandomOption(),this.renderDropdown(this.props.translate("Link To"),t,"link"),this.renderDropdown(this.props.translate("Size"),n,"size"))}});t.default=(0,_.localize)(M)},7841574351959661:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(0xe102ee62a0e6b),u=i(l),d=n(0xa505046780b0c),c=i(d),p=n(7613110173109069),f=i(p),h=n(975622464187034),m=i(h);t.default=o.default.createClass({displayName:"EditorMediaModalGalleryRemoveButton",mixins:[s.default],propTypes:{siteId:r.PropTypes.number,itemId:r.PropTypes.number},remove:function(){var e=this.props,t=e.siteId,n=e.itemId;if(t&&n){var i=m.default.getAll(t),r=(0,u.default)(i,function(e){return e.ID===n});f.default.setLibrarySelectedItems(t,r)}},render:function(){return o.default.createElement("button",{onClick:this.remove,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__remove"},o.default.createElement("span",{className:"screen-reader-text"},this.translate("Remove")),o.default.createElement(c.default,{icon:"cross"}))}}),e.exports=t.default},7866506511967244:function(e,t,n){function i(e,t,n,i,o){var a=r.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}function r(e,t,n,i){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&i.call(e,n)}}var o=n(6518748662772448);e.exports=i},7871831694427923:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.post,i=e.showAll,r=e.showIcon,o=void 0===r||r;if(!n)return null;var s=n.sticky,l=n.status,d=void 0,c=void 0,f=void 0;if(s?(d=t("Sticky"),c="is-sticky",f="bookmark-outline"):"pending"===l?(d=t("Pending Review"),c="is-pending",f="aside"):"future"===l?(d=t("Scheduled"),c="is-scheduled",f="calendar"):"trash"===l?(d=t("Trashed"),c="is-trash",f="trash"):i&&"draft"===l?(d=t("Draft"),c="is-draft",f="aside"):i&&"publish"===l&&(d=t("Published"),c="is-published",f="aside"),!d)return null;var h=(0,u.default)("post-status",c);return a.default.createElement("span",{className:h},o&&a.default.createElement(p.default,{icon:f,size:18,className:"post-status__icon"}),a.default.createElement("span",{className:"post-status__text"},d))}Object.defineProperty(t,"__esModule",{value:!0}),t.PostStatus=r;var o=n(5896763357248615),a=i(o),s=n(6280957995252369),l=n(0x8ae3881d6e8c2),u=i(l),d=n(7572476330282672),c=n(0xa505046780b0c),p=i(c),f=n(6007716273106560);r.displayName="PostStatus",r.propTypes={globalId:o.PropTypes.string,translate:o.PropTypes.func,post:o.PropTypes.object,showAll:o.PropTypes.bool,showIcon:o.PropTypes.bool},t.default=(0,s.connect)(function(e,t){var n=t.globalId;return{post:(0,f.getNormalizedPost)(e,n)}})((0,d.localize)(r))},7900206084733222:function(e,t){"use strict";function n(){var e;e="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var t="undefined"!=typeof document&&document.attachEvent;if(!t){var n=function(){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)};return function(e){return t(e)}}(),i=function(){var t=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.clearTimeout;return function(e){return t(e)}}(),r=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,i=t.lastElementChild,r=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},o=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},a=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;r(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=n(function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}},s=!1,l="animation",u="",d="animationstart",c="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="",h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(s=!0),s===!1)for(var m=0;m<c.length;m++)if(void 0!==h.style[c[m]+"AnimationName"]){f=c[m],l=f+"Animation",u="-"+f.toLowerCase()+"-",d=p[m],s=!0;break}var g="resizeanim",v="@"+u+"keyframes "+g+" { from { opacity: 0; } to { opacity: 0; } } ",y=u+"animation: 1ms "+g+"; "}var b=function(){if(!document.getElementById("detectElementResize")){var e=(v?v:"")+".resize-triggers { "+(y?y:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="detectElementResize",n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),
t.appendChild(n)}},_=function(n,i){if(t)n.attachEvent("onresize",i);else{if(!n.__resizeTriggers__){var o=e.getComputedStyle(n);o&&"static"==o.position&&(n.style.position="relative"),b(),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',n.appendChild(n.__resizeTriggers__),r(n),n.addEventListener("scroll",a,!0),d&&(n.__resizeTriggers__.__animationListener__=function(e){e.animationName==g&&r(n)},n.__resizeTriggers__.addEventListener(d,n.__resizeTriggers__.__animationListener__))}n.__resizeListeners__.push(i)}},x=function(e,n){t?e.detachEvent("onresize",n):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))};return{addResizeListener:_,removeResizeListener:x}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},7904991244547051:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0x8ae3881d6e8c2),v=i(g),y=n(0x4c328c9015af2),b=i(y),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,v.default)(this.props.className,{"select-dropdown__item":!0,"is-selected":this.props.selected,"is-disabled":this.props.disabled});return m.default.createElement("li",{className:"select-dropdown__option"},m.default.createElement("a",{ref:"itemLink",href:this.props.path,className:e,onClick:this.props.disabled?null:this.props.onClick,"data-bold-text":this.props.value||this.props.children,role:"menuitem",tabIndex:this.props.isDropdownOpen?0:"","aria-selected":this.props.selected},m.default.createElement("span",{className:"select-dropdown__item-text"},this.props.children),"number"==typeof this.props.count&&m.default.createElement("span",{"data-text":this.props.count,className:"select-dropdown__item-count"},m.default.createElement(b.default,{count:this.props.count}))))}}]),t}(h.Component);_.propTypes={children:m.default.PropTypes.string.isRequired,path:m.default.PropTypes.string,isDropdownOpen:m.default.PropTypes.bool,selected:m.default.PropTypes.bool,onClick:m.default.PropTypes.func,count:m.default.PropTypes.number},_.defaultProps={isDropdownOpen:!1,selected:!1},t.default=_,e.exports=t.default},7935112474300560:function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var s=null==n?0:o(n);return s<0&&(s=a(i+s,0)),r(e,t,s)}var r=n(31241621236410),o=n(0x6c14ebe59c6ec),a=Math.max;e.exports=i},7960540032031651:function(e,t){(function(){tinymce.PluginManager.add("media",function(e,t){function n(e){return e=e.toLowerCase(),e.indexOf(".mp3")!=-1?"audio/mpeg":e.indexOf(".wav")!=-1?"audio/wav":e.indexOf(".mp4")!=-1?"video/mp4":e.indexOf(".webm")!=-1?"video/webm":e.indexOf(".ogg")!=-1?"video/ogg":e.indexOf(".swf")!=-1?"application/x-shockwave-flash":""}function i(t){var n=e.settings.media_scripts;if(n)for(var i=0;i<n.length;i++)if(t.indexOf(n[i].filter)!==-1)return n[i]}function r(){function t(e){var t,n,o,a;t=i.find("#width")[0],n=i.find("#height")[0],o=t.value(),a=n.value(),i.find("#constrain")[0].checked()&&r&&u&&o&&a&&(e.control==t?(a=Math.round(o/r*a),isNaN(a)||n.value(a)):(o=Math.round(a/u*o),isNaN(o)||t.value(o))),r=o,u=a}function n(){d=s(this.value()),this.parent().parent().fromJSON(d)}var i,r,u,d,c=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(e){tinymce.each(e.meta,function(e,t){i.find("#"+t).value(e)})}}];e.settings.media_alt_source!==!1&&c.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&c.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1&&c.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),d=l(e.selection.getNode()),r=d.width,u=d.height;var p={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:o(),multiline:!0,label:"Source"};p[m]=n,i=e.windowManager.open({title:"Insert/edit video",data:d,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){d=s(this.next().find("#embed").value()),this.fromJSON(d)},items:c},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(a(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},p]}],onSubmit:function(){var t,n,i,r;for(t=e.dom.select("img[data-mce-object]"),e.insertContent(a(this.toJSON())),n=e.dom.select("img[data-mce-object]"),i=0;i<t.length;i++)for(r=n.length-1;r>=0;r--)t[i]==n[r]&&n.splice(r,1);e.selection.select(n[0]),e.nodeChanged()}})}function o(){var t=e.selection.getNode();if(t.getAttribute("data-mce-object"))return e.selection.getContent()}function a(r){var o="";if(!r.source1&&(tinymce.extend(r,s(r.embed)),!r.source1))return"";if(r.source2||(r.source2=""),r.poster||(r.poster=""),r.source1=e.convertURL(r.source1,"source"),r.source2=e.convertURL(r.source2,"source"),r.source1mime=n(r.source1),r.source2mime=n(r.source2),r.poster=e.convertURL(r.poster,"poster"),r.flashPlayerUrl=e.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(h,function(e){var t,n,i;if(t=e.regex.exec(r.source1)){for(i=e.url,n=0;t[n];n++)i=i.replace("$"+n,function(){return t[n]});r.source1=i,r.type=e.type,r.allowFullscreen=e.allowFullscreen,r.width=r.width||e.w,r.height=r.height||e.h}}),r.embed)o=d(r.embed,r,!0);else{var a=i(r.source1);if(a&&(r.type="script",r.width=a.width,r.height=a.height),r.width=r.width||300,r.height=r.height||150,tinymce.each(r,function(t,n){r[n]=e.dom.encode(t)}),"iframe"==r.type){var l=r.allowFullscreen?' allowFullscreen="1"':"";o+='<iframe src="'+r.source1+'" width="'+r.width+'" height="'+r.height+'"'+l+"></iframe>"}else"application/x-shockwave-flash"==r.source1mime?(o+='<object data="'+r.source1+'" width="'+r.width+'" height="'+r.height+'" type="application/x-shockwave-flash">',r.poster&&(o+='<img src="'+r.poster+'" width="'+r.width+'" height="'+r.height+'" />'),o+="</object>"):r.source1mime.indexOf("audio")!=-1?e.settings.audio_template_callback?o=e.settings.audio_template_callback(r):o+='<audio controls="controls" src="'+r.source1+'">'+(r.source2?'\n<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</audio>":"script"==r.type?o+='<script src="'+r.source1+'"></script>':o=e.settings.video_template_callback?e.settings.video_template_callback(r):'<video width="'+r.width+'" height="'+r.height+'"'+(r.poster?' poster="'+r.poster+'"':"")+' controls="controls">\n<source src="'+r.source1+'"'+(r.source1mime?' type="'+r.source1mime+'"':"")+" />\n"+(r.source2?'<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</video>"}return o}function s(e){var t={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,n){if(t.source1||"param"!=e||(t.source1=n.map.movie),"iframe"!=e&&"object"!=e&&"embed"!=e&&"video"!=e&&"audio"!=e||(t.type||(t.type=e),t=tinymce.extend(n.map,t)),"script"==e){var r=i(n.map.src);if(!r)return;t={type:"script",source1:n.map.src,width:r.width,height:r.height}}"source"==e&&(t.source1?t.source2||(t.source2=n.map.src):t.source1=n.map.src),"img"!=e||t.poster||(t.poster=n.map.src)}}).parse(e),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function l(t){return t.getAttribute("data-mce-object")?s(e.serializer.serialize(t,{selection:!0})):{}}function u(t){if(e.settings.media_filter_html===!1)return t;var n,i=new tinymce.html.Writer;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(t,r,o){if(n=!0,"script"!=t&&"noscript"!=t){for(var a=0;a<r.length;a++){if(0===r[a].name.indexOf("on"))return;"style"==r[a].name&&(r[a].value=e.dom.serializeStyle(e.dom.parseStyle(r[a].value),t))}i.start(t,r,o),n=!1}},end:function(e){n||i.end(e)}},new tinymce.html.Schema({})).parse(t),i.getContent()}function d(e,t,n){function i(e,t){var n,i,r,o;for(n in t)if(r=""+t[n],e.map[n])for(i=e.length;i--;)o=e[i],o.name==n&&(r?(e.map[n]=r,o.value=r):(delete e.map[n],e.splice(i,1)));else r&&(e.push({name:n,value:r}),e.map[n]=r)}var r,o=new tinymce.html.Writer,a=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,s,l){switch(e){case"video":case"object":case"embed":case"img":case"iframe":i(s,{width:t.width,height:t.height})}if(n)switch(e){case"video":i(s,{poster:t.poster,src:""}),t.source2&&i(s,{src:""});break;case"iframe":i(s,{src:t.source1});break;case"source":if(a++,a<=2&&(i(s,{src:t["source"+a],type:t["source"+a+"mime"]}),!t["source"+a]))return;break;case"img":if(!t.poster)return;r=!0}o.start(e,s,l)},end:function(e){if("video"==e&&n)for(var s=1;s<=2;s++)if(t["source"+s]){var l=[];l.map={},a<s&&(i(l,{src:t["source"+s],type:t["source"+s+"mime"]}),o.start("source",l,!0))}if(t.poster&&"object"==e&&n&&!r){var u=[];u.map={},i(u,{src:t.poster,width:t.width,height:t.height}),o.start("img",u,!0)}o.end(e)}},new tinymce.html.Schema({})).parse(e),o.getContent()}function c(t,n){var i,r,o,a,s;for(o=t.attributes,a=o.length;a--;)i=o[a].name,r=o[a].value,"width"!==i&&"height"!==i&&"style"!==i&&("data"!=i&&"src"!=i||(r=e.convertURL(r,i)),n.attr("data-mce-p-"+i,r));s=t.firstChild&&t.firstChild.value,s&&(n.attr("data-mce-html",escape(s)),n.firstChild=null)}function p(e){var t,n=e.name;return t=new tinymce.html.Node("img",1),t.shortEnded=!0,c(e,t),t.attr({width:e.attr("width")||"300",height:e.attr("height")||("audio"==n?"30":"150"),style:e.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),t}function f(e){var t,n,i,r=e.name;return t=new tinymce.html.Node("span",1),t.attr({contentEditable:"false",style:e.attr("style"),"data-mce-object":r,class:"mce-preview-object mce-object-"+r}),c(e,t),n=new tinymce.html.Node(r,1),n.attr({src:e.attr("src"),allowfullscreen:e.attr("allowfullscreen"),width:e.attr("width")||"300",height:e.attr("height")||("audio"==r?"30":"150"),frameborder:"0"}),i=new tinymce.html.Node("span",1),i.attr("class","mce-shim"),t.append(n),t.append(i),t}var h=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],m=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";e.on("ResolveName",function(e){var t;1==e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t){for(var n,r,o,a=t.length;a--;)n=t[a],n.parent&&(n.parent.attr("data-mce-object")||("script"!=n.name||(o=i(n.attr("src"))))&&(o&&(o.width&&n.attr("width",o.width.toString()),o.height&&n.attr("height",o.height.toString())),r="iframe"==n.name&&e.settings.media_live_embeds!==!1&&tinymce.Env.ceFalse?f(n):p(n),n.replace(r)))}),e.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,i,r,o,a,s,l,d,c=e.length;c--;)if(n=e[c],n.parent){for(l=n.attr(t),i=new tinymce.html.Node(l,1),"audio"!=l&&"script"!=l&&(d=n.attr("class"),d&&d.indexOf("mce-preview-object")!==-1?i.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):i.attr({width:n.attr("width"),height:n.attr("height")})),i.attr({style:n.attr("style")}),o=n.attributes,r=o.length;r--;){var p=o[r].name;0===p.indexOf("data-mce-p-")&&i.attr(p.substr(11),o[r].value)}"script"==l&&i.attr("type","text/javascript"),a=n.attr("data-mce-html"),a&&(s=new tinymce.html.Node("#text",3),s.raw=!0,s.value=u(unescape(a)),i.append(s)),n.replace(i)}})}),e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!=t&&"script"!=t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(d(t,{width:e.width,height:e.height})))))}),e.addButton("media",{tooltip:"Insert/edit video",onclick:r,stateSelector:["img[data-mce-object]","span[data-mce-object]"]}),e.addMenuItem("media",{icon:"media",text:"Insert/edit video",onclick:r,context:"insert",prependToContext:!0}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var i=e.$(n);0===i.find("span.mce-shim",n).length&&i.append('<span class="mce-shim"></span>')})}),e.addCommand("mceMedia",r),this.showDialog=r})}).call(window)},7987478386539869:function(e,t){"use strict";e.exports={getMimeBaseTypeFromFilter:function(e){var t;switch(e){case"images":t="image/";break;case"audio":t="audio/";break;case"videos":t="video/";break;case"documents":t="application/";break;default:t=""}return t}}},8090799827495550:function(e,t){"use strict";function n(e,t){return!!e.pageTemplates.requesting[t]}function i(e,t){return e.pageTemplates.items[t]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingPageTemplates=n,t.getPageTemplates=i},8130069503713202:function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=i.bind(t),a=0;a<n.length;a++)if(!o(n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=n},8151746900443748:function(e,t,n){"use strict";var i=n(5896763357248615),r=n(7304560458482196);e.exports=i.createClass({displayName:"MediaLibraryListNoResults",propTypes:{filter:i.PropTypes.string,search:i.PropTypes.string},getDefaultProps:function(){return{search:""}},getLabel:function(){var e;switch(this.props.filter){case"images":e=this.translate("No images match your search for {{searchTerm/}}.",{components:{searchTerm:i.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"videos":e=this.translate("No videos match your search for {{searchTerm/}}.",{components:{searchTerm:i.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"audio":e=this.translate("No audio files match your search for {{searchTerm/}}.",{components:{searchTerm:i.createElement("em",null,this.props.search)},context:"Media no search results"});break;case"documents":e=this.translate("No documents match your search for {{searchTerm/}}.",{components:{searchTerm:i.createElement("em",null,this.props.search)},context:"Media no search results"});break;default:e=this.translate("No media files match your search for {{searchTerm/}}.",{components:{searchTerm:i.createElement("em",null,this.props.search)},context:"Media no search results"})}return e},render:function(){return i.createElement(r,{text:this.getLabel(),image:"/calypso/images/pages/illustration-pages.svg"})}})},8172390258800330:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x8ae3881d6e8c2),s=i(a),l=n(7380496197234269),u=i(l);e.exports=o.default.createClass({displayName:"EditorMediaModalDetailPreviewAudio",propTypes:{className:o.default.PropTypes.string,item:o.default.PropTypes.object.isRequired},render:function(){var e=(0,s.default)(this.props.className,"is-audio");return o.default.createElement("audio",{src:u.default.url(this.props.item),controls:!0,className:e})}})},8188869101160678:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(0xa505046780b0c),v=i(g),y=n(8478951557498169),b=i(y),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return m.default.createElement(b.default,{path:this.props.path,instanceName:"page-permalink"},m.default.createElement(v.default,{icon:"link"}))}}]),t}(h.PureComponent);_.propTypes={path:h.PropTypes.string},t.default=_,e.exports=t.default},8291803606487515:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},8323279533345669:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xc729f06ce7488),o=i(r),a=n(872100829608442),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(6450322511845945),b=n(8769427305820155),_=i(b),x=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){var t=this.getState()[e];return t?t:{}}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"STOP_EDITING_POST":e={};break;case"FETCH_EMBED":e=(0,s.default)({},e,(0,o.default)({},t.url,{status:"LOADING"}));break;case"RECEIVE_EMBED":t.error?e=(0,s.default)({},e,(0,o.default)({},t.url,{status:"ERROR"})):t.data&&(e=(0,s.default)({},e,(0,o.default)({},t.url,{status:"LOADED",body:t.data.result,scripts:t.data.scripts,styles:t.data.styles})))}return e}}]),t}(y.ReduceStore);t.default=new x(_.default),e.exports=t.default},8342076983749853:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_SCROLL_SIZE=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0xec85148153f7e),l=i(s),u=t.DEFAULT_MAX_SCROLL_SIZE=15e5,d=function(){function e(t){var n=t.maxScrollSize,i=void 0===n?u:n,a=r(t,["maxScrollSize"]);o(this,e),this._cellSizeAndPositionManager=new l.default(a),this._maxScrollSize=i}return a(e,[{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(o*(r-i))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,i=e.containerSize,r=e.currentOffset,o=e.targetIndex,a=e.totalSize;r=this._safeOffsetToOffset({containerSize:i,offset:r});var s=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:i,currentOffset:r,targetIndex:o,totalSize:a});return this._offsetToSafeOffset({containerSize:i,offset:s})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,i=e.totalSize;return i<=t?0:n/(i-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(i===r)return n;var o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:i});return Math.round(o*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(i===r)return n;var o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(o*(i-t))}}]),e}();t.default=d},8364025865570495:function(e,t){"use strict";function n(e){var t=e.cellCount,n=e.cellSize,i=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,o=e.nextCellsCount,a=e.nextCellSize,s=e.nextScrollToIndex,l=e.scrollToIndex,u=e.updateScrollOffsetForScrollToIndex;t===o&&("number"!=typeof n&&"number"!=typeof a||n===a)||(i(r),l>=0&&l===s&&u())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},8379756226737232:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPublishButton=t.getPublishButtonStatus=void 0;var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(5084380759969092),v=n(0x5dd72de17825d),y=i(v),b=n(474432612430512),_=i(b),x=n(7186610166862683),C=i(x),E=n(7572476330282672),w=t.getPublishButtonStatus=function(e,t,n){return y.default.isPublished(n)&&!y.default.isBackDatedPublished(n)&&!y.default.isFutureDated(t)||n&&"future"===n.status&&y.default.isFutureDated(t)?"update":y.default.isFutureDated(t)?"schedule":_.default.userCan("publish_posts",e)?"publish":n&&"pending"===n.status?"update":"requestReview"},T=t.EditorPublishButton=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"trackClick",value:function(){var e={update:"Clicked Update Post Button",schedule:"Clicked Schedule Post Button",requestReview:"Clicked Request-Review Post Button",publish:"Clicked Publish Post Button"},t={update:"Clicked Update Page Button",schedule:"Clicked Schedule Page Button",requestReview:"Clicked Request-Review Page Button",publish:"Clicked Publish Page Button"},n=w(this.props.site,this.props.post,this.props.savedPost),i=y.default.isPage(this.props.post)?t[n]:e[n];(0,g.recordEvent)(i),(0,g.recordEvent)("Clicked Primary Button")}},{key:"getButtonLabel",value:function(){switch(w(this.props.site,this.props.post,this.props.savedPost)){case"update":return this.props.translate("Update");case"schedule":return this.props.translate("Schedule");case"publish":return this.props.translate("Publish");case"requestReview":return this.props.translate("Submit for Review")}}},{key:"onClick",value:function(){return this.trackClick(),y.default.isPublished(this.props.savedPost)&&!y.default.isBackDatedPublished(this.props.savedPost)?this.props.onSave():_.default.userCan("publish_posts",this.props.site)?this.props.onPublish():this.props.onSave("pending")}},{key:"isEnabled",value:function(){return!this.props.isPublishing&&!this.props.isSaveBlocked&&this.props.hasContent&&!this.props.needsVerification}},{key:"render",value:function(){return m.default.createElement(C.default,{className:"editor-publish-button",primary:!0,compact:!0,busy:this.props.busy,onClick:this.onClick,disabled:!this.isEnabled(),tabIndex:this.props.tabIndex},this.getButtonLabel())}}]),t}(h.Component);T.propTypes={site:h.PropTypes.object,post:h.PropTypes.object,savedPost:h.PropTypes.object,onSave:h.PropTypes.func,onPublish:h.PropTypes.func,tabIndex:h.PropTypes.number,isPublishing:h.PropTypes.bool,isSaveBlocked:h.PropTypes.bool,hasContent:h.PropTypes.bool,needsVerification:h.PropTypes.bool,busy:h.PropTypes.bool},t.default=(0,E.localize)(T)},8381554966536394:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=d.default.parse(e);return n?(0,c.deserialize)(n,t):t}function o(e,t){var n=(0,f.default)(e);return n instanceof window.Element?(0,c.deserialize)(n,t):t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};return[r,o].reduce(function(n,i){return(0,l.default)(n,i(e,t))},{})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(872100829608442),l=i(s);t.deserialize=a;var u=n(5106151372138902),d=i(u),c=n(5527868178721527),p=n(5696930751057585),f=i(p)},8420101076893836:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(0xbceb83e51862c),s=i(a),l=n(0x6925a2279f1f8),u=i(l),d=n(5890255058533989),c=i(d);t.default=o.default.createClass({displayName:"ContactFormDialogNavigation",propTypes:{fieldCount:r.PropTypes.number.isRequired,activeTab:r.PropTypes.oneOf(["fields","settings"]).isRequired,onChangeTabs:r.PropTypes.func.isRequired},render:function(){var e=this,t=["fields","settings"];return o.default.createElement(s.default,{selectedText:"Form Fields"},o.default.createElement(u.default,null,t.map(function(t){return o.default.createElement(c.default,{key:"contact-form-"+t,selected:e.props.activeTab===t,count:"fields"===t?e.props.fieldCount:null,onClick:function(){return e.props.onChangeTabs(t)}},"fields"===t?e.translate("Form Fields"):e.translate("Settings"))})))}}),e.exports=t.default},8465445476206728:function(e,t,n){"use strict";function i(e,t){var n=u(e);p.queryPosts(t,e),0===n.getPage()&&p.fetchNextPage(e)}function r(e){var t={type:e.type||"post",siteID:e.siteID,status:e.status,author:e.author,search:e.search,exclude_tree:e.excludeTree,orderBy:e.orderBy,order:e.order,number:e.number,before:e.before,after:e.after};e.withCounts&&(t.meta="counts"),c.isDispatching()?setTimeout(function(){i(e.postListStoreId,t)},0):i(e.postListStoreId,t)}function o(e){var t=u(e);return{listId:t.getID(),posts:t.getAll(),postImages:d.getAll(),page:t.getPage(),lastPage:t.isLastPage(),loading:t.isFetchingNextPage(),hasRecentError:t.hasRecentError()}}function a(e,t){return e.type!==t.type||e.status!==t.status||e.author!==t.author||e.search!==t.search||e.excludeTree!==t.excludeTree||e.withCounts!==t.withCounts||e.orderBy!==t.orderBy||e.order!==t.order||e.number!==t.number||e.before!==t.before||e.after!==t.after||e.siteID!==t.siteID||e.postListStoreId!==t.postListStoreId}var s,l=n(5896763357248615),u=n(0x69c14441898c8),d=n(6874930428474342),c=n(8769427305820155),p=n(6104353596224629),f=n(0x46afa8498d5a8);s=l.createClass({displayName:"PostListFetcher",propTypes:{children:l.PropTypes.element.isRequired,type:l.PropTypes.string,status:l.PropTypes.string,author:l.PropTypes.number,search:l.PropTypes.string,siteID:l.PropTypes.any,withImages:l.PropTypes.bool,withCounts:l.PropTypes.bool,excludeTree:l.PropTypes.number,orderBy:l.PropTypes.oneOf(["title","date","modified","comment_count","ID"]),order:l.PropTypes.oneOf(["ASC","DESC"]),number:l.PropTypes.number,before:l.PropTypes.string,after:l.PropTypes.string,postListStoreId:l.PropTypes.string},getDefaultProps:function(){return{orderBy:"date",order:"DESC",postListStoreId:"default"}},componentWillMount:function(){var e=u(this.props.postListStoreId);e.on("change",this.onPostsChange),this.props.withImages&&d.on("change",this.onPostsChange),r(this.props)},componentDidMount:function(){var e=u(this.props.postListStoreId);this._poller=f.add(e,p.fetchUpdated,{interval:6e4})},componentWillUnmount:function(){var e=u(this.props.postListStoreId);f.remove(this._poller),e.off("change",this.onPostsChange),this.props.withImages&&d.off("change",this.onPostsChange)},componentWillReceiveProps:function(e){var t;a(this.props,e)&&r(e),e.withImages!==this.props.withImages&&(t=e.withImages?"on":"off",d[t]("change",this.onPostsChange))},onPostsChange:function(){this.setState(o(this.props.postListStoreId))},render:function(){return l.cloneElement(this.props.children,this.state)}}),e.exports=s},8478951557498169:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5921998412115101),m=i(h),g=n(5896763357248615),v=i(g),y=n(6280957995252369),b=n(7572476330282672),_=n(0x8ae3881d6e8c2),x=i(_),C=n(8959178503420160),E=i(C),w=n(5862851293117563),T=i(w),S=n(5084380759969092),P=n(0xe6bd8709d6a3c),k=n(5523398591803755),I=n(6007716273106560),N=n(7996551768540594),M=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.state={isSlugFocused:!1},e.onSlugKeyDown=e.onSlugKeyDown.bind(e),e.onSlugChange=e.onSlugChange.bind(e),e.onBlur=e.onBlur.bind(e),e.onFocus=e.onFocus.bind(e),e.focusSlug=e.focusSlug.bind(e),e.recordChangeStats=e.recordChangeStats.bind(e),e.statTracked=!1,e}return(0,f.default)(t,e),
(0,u.default)(t,[{key:"onSlugChange",value:function(e){var t=this.props,n=t.siteId,i=t.postId;this.props.editPost(n,i,{slug:e.target.value})}},{key:"onSlugKeyDown",value:function(e){if("Enter"===e.key||"Escape"===e.key){var t=this.props,n=t.onEscEnter,i=t.isEditable;this.setState({isSlugFocused:!1},function(){n(),i&&m.default.findDOMNode(this.refs.slugField).blur()})}}},{key:"onBlur",value:function(){this.state.isSlugFocused&&this.setState({isSlugFocused:!1})}},{key:"onFocus",value:function(){this.setState({isSlugFocused:!0})}},{key:"focusSlug",value:function(){this.props.isEditable&&m.default.findDOMNode(this.refs.slugField).focus()}},{key:"recordChangeStats",value:function(){switch(this.props.instanceName){case"post-sidebar":(0,S.recordStat)("slug-edited-post-sidebar"),(0,S.recordEvent)("Slug Edited (Post Sidebar)");break;case"post-popover":(0,S.recordStat)("slug-edited-post-popover"),(0,S.recordEvent)("Slug Edited (Post Permalink Popover)");break;case"page-sidebar":(0,S.recordStat)("slug-edited-page-sidebar"),(0,S.recordEvent)("Slug Edited (Page Sidebar)");break;case"page-permalink":(0,S.recordStat)("slug-edited-page-permalink"),(0,S.recordEvent)("Slug Edited (Page Permalink)")}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.translate,i=e.slug,r=e.children,o=e.path,a=e.isEditable,s=(0,x.default)("editor-slug",t,{"is-focused":this.state.isSlugFocused});return v.default.createElement("div",{className:s,onClick:this.focusSlug},r,v.default.createElement("span",{className:"editor-slug__url-path",onClick:this.focusSlug},o),a&&v.default.createElement(E.default,{onNewValue:this.recordChangeStats},v.default.createElement(T.default,{ref:"slugField",value:i,onChange:this.onSlugChange,onKeyDown:this.onSlugKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,"aria-label":n("Enter slug")})))}}]),t}(g.Component);M.propTypes={path:g.PropTypes.string,slug:g.PropTypes.string,onEscEnter:g.PropTypes.func,className:g.PropTypes.string,isEditable:g.PropTypes.bool,instanceName:g.PropTypes.string,translate:g.PropTypes.func,siteId:g.PropTypes.number,postId:g.PropTypes.number},M.defaultProps={onEscEnter:function(){},isEditable:!0,slug:""},t.default=(0,y.connect)(function(e){var t=(0,P.getSelectedSiteId)(e),n=(0,k.getEditorPostId)(e),i=(0,I.getEditedPostSlug)(e,t,n);return{siteId:t,postId:n,slug:i}},{editPost:N.editPost})((0,b.localize)(M)),e.exports=t.default},8577545892344610:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:p.SITE_SETTINGS_RECEIVE,siteId:e,settings:t}}function o(e,t){return{type:p.SITE_SETTINGS_UPDATE,siteId:e,settings:t}}function a(e){return function(t){return t({type:p.SITE_SETTINGS_REQUEST,siteId:e}),c.default.undocumented().settings(e).then(function(n){var i=n.name,o=n.description,a=n.settings,s=(0,u.default)({},(0,f.normalizeSettings)(a),{blogname:i,blogdescription:o});t(r(e,s)),t({type:p.SITE_SETTINGS_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:p.SITE_SETTINGS_REQUEST_FAILURE,siteId:e,error:n})})}}function s(e,t){return function(n){return n({type:p.SITE_SETTINGS_SAVE,siteId:e}),c.default.undocumented().settings(e,"post",t).then(function(t){var i=t.updated;n(o(e,(0,f.normalizeSettings)(i))),n({type:p.SITE_SETTINGS_SAVE_SUCCESS,siteId:e})}).catch(function(t){n({type:p.SITE_SETTINGS_SAVE_FAILURE,siteId:e,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(5630966280090368),u=i(l);t.receiveSiteSettings=r,t.updateSiteSettings=o,t.requestSiteSettings=a,t.saveSiteSettings=s;var d=n(8478035041892969),c=i(d),p=n(0xd047e5c4c63f8),f=n(4667735711868943)},8582600978391152:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5896763357248615),o=i(r),a=n(0x8f7d57519e61b),s=i(a),l=n(5059747709250767),u=i(l),d=n(5793291233866681),c=i(d),p=o.default.createClass({displayName:"EditorPreview",_hasTouch:!1,propTypes:{showPreview:o.default.PropTypes.bool,isSaving:o.default.PropTypes.bool,isLoading:o.default.PropTypes.bool,previewUrl:o.default.PropTypes.string,onClose:o.default.PropTypes.func,postId:o.default.PropTypes.number},getInitialState:function(){return{iframeUrl:"about:blank"}},componentDidUpdate:function(e){this.didStartSaving(e,this.props)&&this.setState({iframeUrl:"about:blank"}),this.props.previewUrl&&(this.didFinishSaving(e)||this.didLoad(e)||this.didShowSavedPreviewViaTouch(e))&&this.setState({iframeUrl:this.getIframePreviewUrl()})},componentWillUnmount:function(){window.removeEventListener("keydown",this.keyDown)},didStartSaving:function(e,t){return!(!e||!t)&&(t.isSaving&&!e.isSaving)},didFinishSaving:function(e){return e.isSaving&&!this.props.isSaving},didLoad:function(e){return e&&e.isLoading&&!this.props.isLoading},didShowSavedPreviewViaTouch:function(e){return this._hasTouch&&!e.showPreview&&this.props.showPreview&&!this.props.isSaving&&!this.props.isLoading},getIframePreviewUrl:function(){var e=s.default.parse(this.props.previewUrl,!0);return e.query.preview="true",e.query.iframe="true",delete e.search,s.default.format(e)},cleanExternalUrl:function(e){if(!e)return null;var t=s.default.parse(e,!0);return t.query=(0,u.default)(t.query,"preview","iframe","frame-nonce"),delete t.search,s.default.format(t)},render:function(){return o.default.createElement(c.default,{showPreview:this.props.showPreview,defaultViewportDevice:"tablet",onClose:this.props.onClose,previewUrl:this.state.iframeUrl,externalUrl:this.cleanExternalUrl(this.props.externalUrl),loadingMessage:"Beep beep boop…"})}});e.exports=p},8603174235267600:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(872100829608442),o=i(r),a=n(0xccd53b671ebb6),s=i(a),l=n(5143893728007863),u=i(l),d=n(5880884711457125),c=i(d),p=n(8173823076638946),f=i(p),h=n(5369032381290393),m=i(h),g=n(5896763357248615),v=i(g),y=n(5921998412115101),b=i(y),_=n(6280957995252369),x=n(7572476330282672),C=n(5172337875599245),E=i(C),w=n(7186610166862683),T=i(w),S=n(7127988529575974),P=i(S),k=n(0x4505d8ebb162c),I=i(k),N=n(0x965a288d34003),M=i(N),R=n(5862851293117563),D=i(R),A=n(0xe6bd8709d6a3c),O=function(e){function t(){(0,u.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments));return e.save=e.save.bind(e),e}return(0,m.default)(t,e),(0,c.default)(t,[{key:"save",value:function(){var e=this.props.item,t=e.media,n=e.appearance,i=E.default.get(this.props.selectedSite,(0,o.default)({},t,{alt:b.default.findDOMNode(this.refs.alt).value}),n);this.props.insertMedia(i)}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.visible,i=e.item,r=e.onClose,o=[v.default.createElement(T.default,{primary:!0,onClick:this.save},t("Save"))];return v.default.createElement(P.default,{isVisible:n,buttons:o,onClose:r},v.default.createElement("form",{onSubmit:this.save},v.default.createElement(I.default,null,v.default.createElement(M.default,null,t("Alt text"),v.default.createElement(D.default,{ref:"alt",defaultValue:i.media.alt})))))}}]),t}(g.Component);O.propTypes={translate:g.PropTypes.func,visible:g.PropTypes.bool,item:g.PropTypes.object,onClose:g.PropTypes.func,insertMedia:g.PropTypes.func},O.defaultProps={onClose:function(){},insertMedia:function(){}},t.default=(0,_.connect)(function(e){return{selectedSite:(0,A.getSelectedSite)(e)}})((0,x.localize)(O)),e.exports=t.default},8619793617189177:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5921998412115101),m=i(h),g=n(5896763357248615),v=i(g),y=n(5020179656051692),b=i(y),_=n(0xa8ea23472235c),x=i(_),C=n(619801137403500),E=i(C),w=n(0x3f19c8db6e3b5),T=i(w),S=n(0x7806e19fe6b42),P=i(S),k=n(0x8ae3881d6e8c2),I=i(k),N=n(7904991244547051),M=i(N),R=n(0x4a68bd81dba8a),D=i(R),A=n(0x9b11f56529aa0),O=i(A),L=n(0x4c328c9015af2),B=i(L),F=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));n.navigateItem=n.navigateItem.bind(n),n.toggleDropdown=n.toggleDropdown.bind(n),n.handleOutsideClick=n.handleOutsideClick.bind(n);var i={isOpen:!1};return e.options.length&&(i.selected=n.getInitialSelectedItem(e)),n.state=i,n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.setState({instanceId:++t.instances})}},{key:"componentWillReceiveProps",value:function(e){this.state.isOpen&&this.closeDropdown(),"undefined"!=typeof this.state.selected&&this.props.initialSelected!==e.initialSelected&&this.setState({selected:e.initialSelected})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"componentDidUpdate",value:function(e,t){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick),this.state.isOpen!==t.isOpen&&this.props.onToggle({target:this,open:this.state.isOpen})}},{key:"getInitialSelectedItem",value:function(e){if(e=e||this.props,e.initialSelected)return e.initialSelected;if(e.options.length){var t=(0,b.default)(e.options,function(e){return!e.isLabel});return t&&t.value}}},{key:"getSelectedText",value:function(){var e=this.props,t=e.options,n=e.selectedText,i=this.state.selected;if(n)return n;var r=i?i:this.getInitialSelectedItem(this.props);return(0,P.default)((0,b.default)(t,{value:r}),"label")}},{key:"dropdownOptions",value:function(){var e=0,t=this;return this.props.children?v.default.Children.map(this.props.children,function(n,i){if(!n)return null;var r=v.default.cloneElement(n,{ref:n.type===M.default?"item-"+e:null,key:"item-"+i,isDropdownOpen:this.state.isOpen,onClick:function(e){t.refs.dropdownContainer.focus(),"function"==typeof n.props.onClick&&n.props.onClick(e)}});return n.type===M.default&&e++,r},this):this.props.options.map(function(t,n){if(!t)return v.default.createElement(D.default,{key:"dropdown-separator-"+this.state.instanceId+"-"+n});if(t.isLabel)return v.default.createElement(O.default,{key:"dropdown-label-"+this.state.instanceId+"-"+n},t.label);var i=v.default.createElement(M.default,{key:"dropdown-item-"+this.state.instanceId+"-"+t.value,ref:"item-"+e,isDropdownOpen:this.state.isOpen,selected:this.state.selected===t.value,onClick:this.onSelectItem(t),path:t.path},t.label);return e++,i},this)}},{key:"render",value:function(){var e={"select-dropdown":!0,"is-compact":this.props.compact,"is-open":this.state.isOpen};this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0});var t=(0,I.default)(e),n=this.getSelectedText();return v.default.createElement("div",{style:this.props.style,className:t},v.default.createElement("div",{ref:"dropdownContainer",className:"select-dropdown__container",valueLink:this.props.valueLink,onKeyDown:this.navigateItem,tabIndex:this.props.tabIndex||0,"aria-haspopup":"true","aria-owns":"select-submenu-"+this.state.instanceId,"aria-controls":"select-submenu-"+this.state.instanceId,"aria-expanded":this.state.isOpen,"data-tip-target":this.props.tipTarget,onClick:this.toggleDropdown},v.default.createElement("div",{id:"select-dropdown-"+this.state.instanceId,className:"select-dropdown__header"},v.default.createElement("span",{className:"select-dropdown__header-text"},n),"number"==typeof this.props.selectedCount&&v.default.createElement(B.default,{count:this.props.selectedCount})),v.default.createElement("ul",{id:"select-submenu-"+this.state.instanceId,className:"select-dropdown__options",role:"menu","aria-labelledby":"select-dropdown-"+this.state.instanceId,"aria-expanded":this.state.isOpen},this.dropdownOptions())))}},{key:"toggleDropdown",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"openDropdown",value:function(){this.setState({isOpen:!0})}},{key:"closeDropdown",value:function(){this.state.isOpen&&(delete this.focused,this.setState({isOpen:!1}))}},{key:"onSelectItem",value:function(e){return this.selectItem.bind(this,e)}},{key:"selectItem",value:function(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value}),this.refs.dropdownContainer.focus())}},{key:"navigateItem",value:function(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),this.activateItem();break;case 38:e.preventDefault(),this.focusSibling("previous"),this.openDropdown();break;case 40:e.preventDefault(),this.focusSibling("next"),this.openDropdown();break;case 27:e.preventDefault(),this.closeDropdown(),this.refs.dropdownContainer.focus()}}},{key:"navigateItemByTabKey",value:function(e){if(this.state.isOpen){e.preventDefault();var t=e.shiftKey?"previous":"next";this.focusSibling(t)}}},{key:"activateItem",value:function(){return this.state.isOpen?void document.activeElement.click():this.openDropdown()}},{key:"focusSibling",value:function(e){if(this.state.isOpen){var t=void 0,n=void 0;this.props.options.length?(t=(0,T.default)((0,x.default)(this.props.options,function(e){return e&&!e.isLabel}),"value"),n="number"==typeof this.focused?this.focused:t.indexOf(this.state.selected)):(t=(0,x.default)(this.props.children,function(e){return e.type===M.default}),n="number"==typeof this.focused?this.focused:(0,E.default)(t,function(e){return e.props.selected}));var i="previous"===e?-1:1,r=n+i;r>=t.length||r<0||(m.default.findDOMNode(this.refs["item-"+r].refs.itemLink).focus(),this.focused=r)}}},{key:"handleOutsideClick",value:function(e){m.default.findDOMNode(this.refs.dropdownContainer).contains(e.target)||this.closeDropdown()}}]),t}(g.Component);F.propTypes={selectedText:g.PropTypes.string,selectedCount:g.PropTypes.number,initialSelected:g.PropTypes.string,className:g.PropTypes.string,style:g.PropTypes.object,onSelect:g.PropTypes.func,onToggle:g.PropTypes.func,focusSibling:g.PropTypes.func,tabIndex:g.PropTypes.number,options:g.PropTypes.arrayOf(g.PropTypes.shape({value:g.PropTypes.string.isRequired,label:g.PropTypes.string.isRequired,path:g.PropTypes.string}))},F.defaultProps={options:[],onSelect:function(){},onToggle:function(){},style:{}},F.instances=0,t.default=F,e.exports=t.default},8645880637789154:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.SITE_MEDIA_STORAGE_RECEIVE,mediaStorage:e,siteId:t}}function o(e){return function(t){return t({type:l.SITE_MEDIA_STORAGE_REQUEST,siteId:e}),s.default.undocumented().site(e).mediaStorage().then(function(n){t(r(n,e)),t({type:l.SITE_MEDIA_STORAGE_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.SITE_MEDIA_STORAGE_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMediaStorage=r,t.requestMediaStorage=o;var a=n(8478035041892969),s=i(a),l=n(0xd047e5c4c63f8)},8650050539059290:function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},8663546351946179:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(95905449861643),o=i(r),a=n(6465156853722425),s=i(a),l=n(0x45d24eaab7654),u=i(l),d=n(0xeb8f73c122973),c=i(d),p=n(5896763357248615),f=i(p),h=n(6280957995252369),m=n(0x8ae3881d6e8c2),g=i(m),v=n(7572476330282672),y=n(0xa505046780b0c),b=i(y),_=n(7186610166862683),x=i(_),C=n(6881822108913591),E=i(C),w=n(0x65fcc7381e096),T=n(0xc69f362ed57b8),S=n(0xc0a5f55c718bb),P=i(S),k=n(4725747483787960),I=n(0xe6bd8709d6a3c),N=f.default.createClass({displayName:"UpgradeNudge",propTypes:{onClick:f.default.PropTypes.func,className:f.default.PropTypes.string,message:f.default.PropTypes.string,icon:f.default.PropTypes.string,event:f.default.PropTypes.string,href:f.default.PropTypes.string,jetpack:f.default.PropTypes.bool,compact:f.default.PropTypes.bool,feature:f.default.PropTypes.oneOf([!1].concat((0,s.default)((0,w.getValidFeatureKeys)()))),shouldDisplay:f.default.PropTypes.func,site:f.default.PropTypes.object},getDefaultProps:function(){return{onClick:u.default,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,feature:!1,compact:!1,shouldDisplay:null,site:null,translate:c.default}},handleClick:function(){var e=this.props,t=e.event,n=e.feature,i=e.onClick,r=e.recordTracksEvent;(t||n)&&r("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:n,cta_size:"regular"}),i()},shouldDisplay:function e(){var t=this.props,n=t.feature,i=t.jetpack,e=t.shouldDisplay,r=t.site;return e?e():!(!r||"object"!==("undefined"==typeof r?"undefined":(0,o.default)(r))||"boolean"!=typeof r.jetpack)&&((!n||!(0,w.hasFeature)(n,r.ID))&&(!(!n&&!(0,T.isFreePlan)(r.plan))&&(("no-adverts"!==n||!r.options.wordads)&&!(!i&&r.jetpack||i&&!r.jetpack))))},render:function(){var e=this.props,t=e.site,n=e.translate,i=(0,g.default)(this.props.className,"upgrade-nudge"),r=this.props.href;return this.shouldDisplay()?(!this.props.href&&t&&(r=this.props.feature?"/plans/"+t.slug+"?feature="+this.props.feature:"/plans/"+t.slug),this.props.compact?f.default.createElement(x.default,{className:i,onClick:this.handleClick,href:r},f.default.createElement(b.default,{className:"upgrade-nudge__icon",icon:this.props.icon}),f.default.createElement("div",{className:"upgrade-nudge__info"},f.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||n("Upgrade to Premium")),f.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message))):f.default.createElement(E.default,{compact:!0,className:i,onClick:this.handleClick,href:r},f.default.createElement(b.default,{className:"upgrade-nudge__icon",icon:this.props.icon,size:18}),f.default.createElement("div",{className:"upgrade-nudge__info"},f.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||n("Upgrade to Premium")),f.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)),(this.props.event||this.props.feature)&&f.default.createElement(P.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:this.props.event,cta_feature:this.props.feature,cta_size:"regular"}}))):null}});t.default=(0,h.connect)(function(e){return{site:(0,I.getSelectedSite)(e)}},{recordTracksEvent:k.recordTracksEvent})((0,v.localize)(N)),e.exports=t.default},8693344302354816:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:h.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:h.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function o(){return{type:h.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function a(){return{type:h.IMAGE_EDITOR_FLIP}}function s(e){return{type:h.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:h.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function u(e,t,n,i){return{type:h.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:n,title:i}}function d(e,t,n,i){return{type:h.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:n,rightBound:i}}function c(e,t,n,i){return{type:h.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:i}}function p(e,t,n,i){return{type:h.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:i}}function f(e,t){return{type:h.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=i,t.resetAllImageEditorState=r,t.imageEditorRotateCounterclockwise=o,t.imageEditorFlip=a,t.setImageEditorAspectRatio=s,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=u,t.setImageEditorCropBounds=d,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=f;var h=n(0xd047e5c4c63f8)},8703698825217725:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={media:(0,a.default)({transient:!1},e),appearance:{}};switch(l.default.getMimePrefix(e)){case"image":t.type=u.MediaTypes.IMAGE;break;case"audio":t.type=u.MediaTypes.AUDIO;break;case"video":t.type=u.MediaTypes.VIDEO}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var o=n(8907951692841672),a=i(o),s=n(7380496197234269),l=i(s),u=n(6519958819961068)},8704992829886403:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;switch(e){case"images":t="image";break;case"audio":t="audio";break;case"videos":t="video";break;case"documents":t="application"}return t},e.exports=t.default},8723137961575025:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0xccd53b671ebb6),o=i(r),a=n(5143893728007863),s=i(a),l=n(5880884711457125),u=i(l),d=n(8173823076638946),c=i(d),p=n(5369032381290393),f=i(p),h=n(5896763357248615),m=i(h),g=n(7572476330282672),v=n(0x8ae3881d6e8c2),y=i(v),b=n(791336751585383),_=i(b),x=n(0x55c7816ff4f31),C=i(x),E=n(492788797284063),w=80,T=60,S=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.mediaStorage,i=e.sitePlanSlug,r=e.siteSlug,o=e.translate;if(i===E.PLAN_BUSINESS)return null;if(!n||n.max_storage_bytes===-1)return null;var a=Math.min(Math.round(n.storage_used_bytes/n.max_storage_bytes*1e3)/10,100),s=(0,y.default)(t,"plan-storage__bar",{"is-alert":a>w,"is-warn":a>T&&a<=w}),l=(0,_.default)(n.max_storage_bytes);return m.default.createElement("div",{className:s},m.default.createElement(C.default,{className:"plan-storage__bar",value:a,total:100,compact:!0}),m.default.createElement("span",{className:"plan-storage__storage-label"},o("%(percent)f%% of %(max)s used",{args:{percent:a,max:l}})),m.default.createElement("a",{className:"plan-storage__storage-link",href:"/plans/"+r},o("Upgrade")),this.props.children)}}]),t}(h.Component);S.propTypes={className:h.PropTypes.string,mediaStorage:h.PropTypes.object,siteSlug:h.PropTypes.string.isRequired,sitePlanSlug:h.PropTypes.string.isRequired},S.defaultProps={siteSlug:""},t.default=(0,g.localize)(S),e.exports=t.default},8735826191793942:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5630966280090368),o=i(r),a=n(477028190620861),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(5896763357248615),b=i(y),_=n(0x45d24eaab7654),x=i(_),C=n(5059747709250767),E=i(C),w=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state={x:n.props.x,y:n.props.y},n.onTouchStartHandler=n.onTouchStartHandler.bind(n),n.onMouseDownHandler=n.onMouseDownHandler.bind(n),n.draggingHandler=n.draggingHandler.bind(n),n.draggingEndedHandler=n.draggingEndedHandler.bind(n),n.update=n.update.bind(n),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var n=t.pageX-this.relativePos.x,i=t.pageY-this.relativePos.y;this.mousePos={x:n,y:i}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,n=t.x,i=t.y;e&&(n=Math.max(e.left,Math.min(e.right-this.props.width,n)),i=Math.max(e.top,Math.min(e.bottom-this.props.height,i))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(n,i),this.props.controlled||this.setState({x:n,y:i})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,E.default)(this.props,(0,s.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),b.default.createElement("div",(0,o.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(y.Component);w.propTypes={onDrag:y.PropTypes.func,onStop:y.PropTypes.func,width:y.PropTypes.number,height:y.PropTypes.number,x:y.PropTypes.number,y:y.PropTypes.number,controlled:y.PropTypes.bool,bounds:y.PropTypes.shape({top:y.PropTypes.number,left:y.PropTypes.number,bottom:y.PropTypes.number,right:y.PropTypes.number})},w.defaultProps={onDrag:x.default,onStop:x.default,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=w,e.exports=t.default},8740607814572903:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.userCanEdit,i=e.siteSlug;if(!1!==n)return null;var r=[a.default.createElement(b.default,{key:"back",href:"/posts/"+i,primary:!0},t("Back to My Sites"))];return a.default.createElement(x.default,{isVisible:!0,buttons:r,className:"editor-forbidden"},a.default.createElement("h1",null,t("You can't edit this post type")),a.default.createElement("p",null,t("If you think you should have access to this post type, request that your site administrator grant you access.")))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5896763357248615),a=i(o),s=n(6280957995252369),l=n(8640881565075096),u=i(l),d=n(7572476330282672),c=n(0xbc79ee44c328),p=i(c),f=n(0xe6bd8709d6a3c),h=n(5523398591803755),m=n(6007716273106560),g=n(7284660551555503),v=n(0x8f1527a7f80c8),y=n(7186610166862683),b=i(y),_=n(7127988529575974),x=i(_);r.propTypes={translate:o.PropTypes.func,userCanEdit:o.PropTypes.bool,siteSlug:o.PropTypes.string},t.default=(0,s.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,m.getEditedPostValue)(e,t,(0,h.getEditorPostId)(e),"type"),i=(0,g.getPostType)(e,t,n),r=(0,u.default)(i,["capabilities","edit_posts"],null);return{userCanEdit:(0,p.default)(e,t,r),siteSlug:(0,v.getSiteSlug)(e,t)}})((0,d.localize)(r)),e.exports=t.default},8761817086250443:function(e,t){"use strict";function n(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,i=e.previousCellsCount,r=e.previousCellSize,o=e.previousScrollToAlignment,a=e.previousScrollToIndex,s=e.previousSize,l=e.scrollOffset,u=e.scrollToAlignment,d=e.scrollToIndex,c=e.size,p=e.updateScrollIndexCallback,f=n.getCellCount(),h=d>=0&&d<f,m=c!==s||!r||"number"==typeof t&&t!==r;h&&(m||u!==o||d!==a)?p(d):!h&&f>0&&(c<s||f<i)&&l>n.getTotalSize()-c&&p(f-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},8769928768342618:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(19189154744278),s=i(a),l=n(5059747709250767),u=i(l),d=n(0xcb457547016f1),c=i(d),p=n(5521214638251397),f=i(p),h=n(0x4505d8ebb162c),m=i(h),g=n(0x965a288d34003),v=i(g),y=n(5862851293117563),b=i(y),_=n(0xbff38eca5e16d),x=i(_),C=n(6080475287248452),E=i(C),w=n(0xb143e095a1b27),T=i(w),S=n(8619793617189177),P=i(S),k=n(7904991244547051),I=i(k),N=n(8991347377130760),M=i(N),R=n(944990400710650),D=i(R),A=n(0x4a851df868a06),O=i(A),L=n(836058157808856),B=i(L),F=["checkbox","select","email","name","radio","text","textarea","url"];t.default=o.default.createClass({displayName:"ContactFormDialogField",mixins:[s.default],propTypes:{label:r.PropTypes.string.isRequired,type:r.PropTypes.string.isRequired,options:r.PropTypes.string,required:r.PropTypes.bool,onUpdate:r.PropTypes.func.isRequired,onRemove:r.PropTypes.func.isRequired,isExpanded:r.PropTypes.bool},renderOptions:function(){var e=this;if("radio"===this.props.type||"select"===this.props.type){var t=this.props.options;t=t?t.split(","):[];var n=!t||0===t.length;return o.default.createElement(m.default,null,o.default.createElement(v.default,null,this.translate("Options")),o.default.createElement(M.default,{value:t,onChange:function(t){return e.props.onUpdate({options:t.join()})}}),n&&o.default.createElement(E.default,{isError:!0,text:this.translate("Options can not be empty.")}),o.default.createElement(T.default,null,"Insert an option and press enter."))}},onLabelChange:function(e){this.props.onUpdate({label:e.target.value})},handleCardOpen:function(){this.props.onUpdate({isExpanded:!0})},handleCardClose:function(){this.props.onUpdate({isExpanded:!1})},render:function(){var e=this,t=!this.props.label,n=o.default.createElement(D.default,{onRemove:this.props.onRemove});return o.default.createElement(f.default,{header:o.default.createElement(c.default,(0,u.default)(this.props,["onUpdate"])),summary:n,expandedSummary:n,expanded:this.props.isExpanded,onClose:this.handleCardClose,onOpen:this.handleCardOpen,actionButton:o.default.createElement(O.default,{expanded:!1}),actionButtonExpanded:o.default.createElement(O.default,{expanded:!0})},o.default.createElement(m.default,null,o.default.createElement(v.default,null,this.translate("Field Label")),o.default.createElement(b.default,{value:this.props.label,onChange:this.onLabelChange,isError:t}),t&&o.default.createElement(E.default,{isError:!0,text:this.translate("Field Label can not be empty.")})),o.default.createElement(m.default,null,o.default.createElement(v.default,null,this.translate("Field Type")),o.default.createElement(P.default,{selectedText:(0,B.default)(this.props.type)},F.map(function(t){return o.default.createElement(I.default,{key:"field-type-"+t,selected:e.props.type===t,onClick:function(){return e.props.onUpdate({type:t})}},(0,B.default)(t))}))),o.default.createElement(m.default,null,o.default.createElement(v.default,null,o.default.createElement(x.default,{checked:this.props.required,onChange:function(){return e.props.onUpdate({required:!e.props.required})}}),o.default.createElement("span",null,this.translate("Required")))),this.renderOptions())}}),e.exports=t.default},8776892500958844:function(e,t,n){"use strict";function i(e,t){if(e.attrs&&e.attrs.named&&(l.test(e.attrs.named.align)&&(t.appearance.align=e.attrs.named.align.match(l)[1]),s.test(e.attrs.named.id)&&(t.media.ID=parseInt(e.attrs.named.id.match(s)[1],10)),
t.media.width&&isFinite(e.attrs.named.width)&&(t.media.width=parseInt(e.attrs.named.width,10))),!e.content)return t;var n=e.content.match(a);return n&&n[2]&&(t.media.caption=n[2].trim()),n?(0,o.deserialize)(n[1],t):t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.tag){case"caption":t=i(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var o=n(5527868178721527),a=/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i,s=/attachment_(\d+)/,l=/align(\w+)/},8798189748511524:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0x933a6af4ef14d),o=n(0x8da6885e1f6e1),a=n(0x5720577baf909),s=n(6088762386890041),l=function(){function e(){i(this,e),this._subscriber=new o,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var i=this;return this.addListener(e,function(){i.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(a.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r];o&&(this._currentSubscription=o,this.__emitToSubscription.apply(this,[o].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=l},8804750917500280:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(401458722714579),s=i(a),l=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function(){var e=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=s.default(this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=s.default(this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},o(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!=typeof e||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function(){return this._target}}]),e}();t.default=l,e.exports=t.default},8865855001618329:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){e&&e.length?void 0:o(!1);var t=e[0].getDispatcher();return t}var o=n(0xac06b1ed1d098),a=function(){function e(t,n){var o=this;i(this,e),this._dispatcher=r(t);var a=t.map(function(e){return e.getDispatchToken()});this._dispatchToken=this._dispatcher.register(function(e){o._dispatcher.waitFor(a),n()})}return e.prototype.release=function(){this._dispatcher.unregister(this._dispatchToken)},e}();e.exports=a},8866223909723576:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(872100829608442),o=i(r),a=n(5630966280090368),s=i(a),l=n(0xccd53b671ebb6),u=i(l),d=n(5143893728007863),c=i(d),p=n(5880884711457125),f=i(p),h=n(8173823076638946),m=i(h),g=n(5369032381290393),v=i(g),y=n(83765757817552),b=i(y),_=n(5477852257145688),x=i(_),C=n(6072566794544024),E=i(C),w=n(8144892545705911),T=i(w),S=n(6442230718320275),P=i(S),k=n(0x45d24eaab7654),I=i(k),N=n(0x8817212fc310f),M=i(N),R=n(5896763357248615),D=i(R),A=n(6280957995252369),O=n(0x8ae3881d6e8c2),L=i(O),B=n(0xa505046780b0c),F=i(B),H=n(7572476330282672),z=n(7380496197234269),U=n(0x956a8e02ae2a5),V=n(0x8f1527a7f80c8),j=n(0x9880b97edca88),W=n(5644333497174414),q=n(7152730280015627),G=n(4725747483787960),$=n(7186610166862683),K=i($),Y=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getButtons",value:function(){var e=this.props,t=e.disabled,n=e.selectedItems,i=e.site,r=e.translate,o=e.user,a=e.view,s=e.onDelete,l=e.onViewDetails,u=[];q.ModalViews.LIST===a&&n.length&&u.push({key:"edit",text:r("Edit"),disabled:t,primary:!0,onClick:l});var d=n.length&&(0,T.default)(n,function(e){return(0,z.canUserDeleteItem)(e,o,i)});return q.ModalViews.GALLERY!==a&&d&&u.push({key:"delete",icon:"trash",className:"editor-media-modal__delete",disabled:t||(0,P.default)(n,"transient"),onClick:s}),u}},{key:"render",value:function(){return D.default.createElement("div",null,this.getButtons().map(function(e){return D.default.createElement(K.default,(0,s.default)({className:(0,L.default)("editor-media-modal__secondary-action",e.className),icon:!!e.icon,compact:!0},(0,b.default)(e,["key","disabled","onClick","primary"])),e.icon&&D.default.createElement(F.default,{icon:e.icon}),e.text&&e.text)}))}}]),t}(R.Component);Y.propTypes={user:R.PropTypes.object,site:R.PropTypes.object,selectedItems:R.PropTypes.array,view:D.default.PropTypes.oneOf((0,M.default)(q.ModalViews)),disabled:R.PropTypes.bool,onDelete:R.PropTypes.func,onViewDetails:R.PropTypes.func},Y.defaultProps={disabled:!1,onDelete:I.default},t.default=(0,A.connect)(function(e,t){return{view:(0,j.getMediaModalView)(e),user:(0,U.getCurrentUser)(e),siteSlug:t.site?(0,V.getSiteSlug)(e,t.site.ID):""}},{onViewDetails:(0,E.default)((0,G.withAnalytics)((0,G.bumpStat)("editor_media_actions","edit_button_dialog")),(0,G.withAnalytics)((0,G.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,x.default)(W.setEditorMediaModalView,q.ModalViews.DETAIL))},function(e,t,n){return(0,o.default)({},n,e,t,(0,b.default)(n,["onViewDetails","view"]))})((0,H.localize)(Y)),e.exports=t.default},8890455407118785:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){function t(e){for(var t,n=c.length;n--;)if(r=c[n],t=e.data.indexOf(r.end),t!==-1)return t}var n,i,r,o,l,u=e.selection.getRng(),d=u.startContainer,f=u.startOffset;d&&3===d.nodeType&&d.data.length&&f&&a.default.inArray(p,d.data.charAt(f-1))!==-1&&(n=t(d),i=d.data.lastIndexOf(r.end),n!==i&&i!==-1&&(i-n<=r.start.length||d.data.slice(n+r.start.length,i).indexOf(r.start.slice(0,1))===-1&&(o=e.formatter.get(r.format),o&&o[0].inline&&(e.undoManager.add(),e.undoManager.transact(function(){d.insertData(f,"​"),d=d.splitText(n),l=d.splitText(f-n),d.deleteData(0,r.start.length),d.deleteData(d.data.length-r.end.length,r.end.length),e.formatter.apply(r.format,{},d),e.selection.setCursorLocation(l,1)}),setTimeout(function(){s="space",e.once("selectionchange",function(){var e;l&&(e=l.data.indexOf("​"),e!==-1&&l.deleteData(e,e+1))})})))))}function n(t){var n,i=e.dom.getParent(t,"p");if(i){for(;(n=i.firstChild)&&3!==n.nodeType;)i=n;if(n)return n.data||(n=n.nextSibling&&3===n.nextSibling.nodeType?n.nextSibling:null),n}}function i(){var t,i,r=e.selection.getRng(),o=r.startContainer;o&&n(o)===o&&(t=o.parentNode,i=o.data,a.default.each(u,function(n){var a=i.match(n.regExp);if(a&&r.startOffset===a[0].length)return e.undoManager.add(),e.undoManager.transact(function(){o.deleteData(0,a[0].length),t.innerHTML||t.appendChild(document.createElement("br")),e.selection.setCursorLocation(t),e.execCommand(n.cmd)}),setTimeout(function(){s="space"}),!1}))}function r(){var t,i,r,l=e.selection.getRng(),u=l.startContainer,c=n(u),p=d.length;if(c){for(t=c.data;p--;)if(d[p].start){if(0===t.indexOf(d[p].start)){i=d[p];break}}else if(d[p].regExp&&d[p].regExp.test(t)){i=d[p];break}i&&(c===u&&a.default.trim(t)===i.start||e.once("keyup",function(){e.undoManager.add(),e.undoManager.transact(function(){i.format?(e.formatter.apply(i.format,{},c),c.replaceData(0,c.data.length,o(c.data.slice(i.start.length)))):i.element&&(r=c.parentNode&&c.parentNode.parentNode,r&&r.replaceChild(document.createElement(i.element),c.parentNode))}),setTimeout(function(){s="enter"})}))}}function o(e){return e?e.replace(/^\s+/,""):""}var s,l=a.default.util.VK,u=[{regExp:/^[*-]\s/,cmd:"InsertUnorderedList"},{regExp:/^1[.)]\s/,cmd:"InsertOrderedList"}],d=[{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:">",format:"blockquote"},{regExp:/^(-){3,}$/,element:"hr"}],c=[{start:"`",end:"`",format:"code"}],p=[];a.default.each(c,function(e){a.default.each((e.start+e.end).split(""),function(e){a.default.inArray(p,e)===-1&&p.push(e)})}),e.on("selectionchange",function(){s=null}),e.on("keydown",function(n){(s&&27===n.keyCode||"space"===s&&n.keyCode===l.BACKSPACE)&&(e.undoManager.undo(),n.preventDefault(),n.stopImmediatePropagation()),n.keyCode!==l.ENTER||l.modifierPressed(n)||r(),n.keyCode!==l.SPACEBAR||n.ctrlKey||n.metaKey||n.altKey?n.keyCode>47&&!(n.keyCode>=91&&n.keyCode<=93)&&setTimeout(t):setTimeout(i)},!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.default.PluginManager.add("wptextpattern",r)};var o=n(0x976699e5e0db4),a=i(o);e.exports=t.default},8897178771623869:function(e,t,n){"use strict";function i(e){return{getInitialState:function(){return r(this),this.constructor.calculateState(null)},componentDidMount:function(){var t=this,n=!1,i=function(){n=!0};this._fluxMixinSubscriptions=e.map(function(e){return e.addListener(i)});var r=function(){n&&t.setState(function(e){return t.constructor.calculateState(t.state)}),n=!1};this._fluxMixinStoreGroup=new o(e,r)},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();for(var e=this._fluxMixinSubscriptions,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var r=i;r.remove()}this._fluxMixinSubscriptions=[]}}}function r(e){e.constructor.calculateState?void 0:a(!1)}var o=n(8865855001618329),a=n(0xac06b1ed1d098);e.exports=i},8945095351553858:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(5896763357248615),u=i(l),d=n(423990962422576),c=i(d),p=n(7900206084733222),f=i(p),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={height:0,width:0},n._onResize=n._onResize.bind(n),n._setRef=n._setRef.bind(n),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(0,f.default)(),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disableHeight,i=e.disableWidth,r=this.state,o=r.height,a=r.width,s={overflow:"visible"};return n||(s.height=0),i||(s.width=0),u.default.createElement("div",{ref:this._setRef,style:s},t({height:o,width:a}))}},{key:"shouldComponentUpdate",value:function(e,t){return(0,c.default)(this,e,t)}},{key:"_onResize",value:function(){var e=this.props.onResize,t=this._parentNode.getBoundingClientRect(),n=t.height||0,i=t.width||0,r=window.getComputedStyle(this._parentNode)||{},o=parseInt(r.paddingLeft,10)||0,a=parseInt(r.paddingRight,10)||0,s=parseInt(r.paddingTop,10)||0,l=parseInt(r.paddingBottom,10)||0;this.setState({height:n-s-l,width:i-o-a}),e({height:n,width:i})}},{key:"_setRef",value:function(e){this._autoSizer=e}}]),t}(l.Component);h.defaultProps={onResize:function(){}},t.default=h},8958839223830722:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.children,n=e.labelText,i=e.helpText;return a.default.createElement("label",{className:"editor-drawer__label"},a.default.createElement("span",{className:"editor-drawer__label-text"},n,i&&a.default.createElement(l.default,{position:"top left"},i)),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(5896763357248615),a=i(o),s=n(4910067807891286),l=i(s);r.propTypes={children:o.PropTypes.node,helpText:o.PropTypes.string,labelText:o.PropTypes.string},e.exports=t.default},8959178503420160:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5896763357248615),o=i(r),a=n(8907951692841672),s=i(a),l=n(0x45d24eaab7654),u=i(l);t.default=o.default.createClass({displayName:"TrackInputChanges",propTypes:{onNewValue:o.default.PropTypes.func},getDefaultProps:function(){return{onNewValue:u.default}},componentWillMount:function(){this.inputEdited=!1},onInputChange:function(){this.inputEdited=!0},onInputBlur:function(e){this.inputEdited&&(this.props.onNewValue(e),this.inputEdited=!1)},render:function(){var e=this,t=o.default.Children.only(this.props.children),n=(0,s.default)({},t.props,{onChange:function(n){"function"==typeof t.props.onChange&&t.props.onChange.call(t,n),e.onInputChange(n)},onBlur:function(n){"function"==typeof t.props.onBlur&&t.props.onBlur.call(t,n),e.onInputBlur(n)}});return o.default.cloneElement(t,n)}}),e.exports=t.default},8979851241223840:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){return(0,d.default)(t.target,n,!0,e.container)}function n(e){if(t(e,".mce-colorbutton")&&!t(e,".mce-open"))(0,f.recordTinyMCEButtonClick)("forecolor_pick_current");else if(t(e,".mce-listbox"))(0,f.recordTinyMCEButtonClick)("format_dropdown");else if((0,d.default)(e.target,".mce-menu-item",!0)){var n=h.get(),i=n?n.localeSlug:"en";if("en"===i){var r=(0,d.default)(e.target,".mce-menu-item",!0).textContent,o=r.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_");(0,f.recordTinyMCEButtonClick)("format_dropdown_"+o)}else(0,f.recordTinyMCEButtonClick)("format_dropdown_non_english")}}(0,a.default)(e.buttons).forEach(function(n){var i=e.buttons[n],r=i.onPostRender;i.onPostRender=function(){this.on("click",function(e){var i=n.replace(/^(wp|wpcom)_/,"");"forecolor"===n&&(i=t(e,".mce-open")?"forecolor_toggle":t(e,".mce-custom-color-btn")?"forecolor_pick_custom":t(e,".mce-colorbtn-trans")?"forecolor_remove":"forecolor_pick_color"),(0,f.recordTinyMCEButtonClick)(i)}),"function"==typeof r&&r.apply(this,Array.prototype.slice.call(arguments))}}),e.on("init",function(){e.dom.bind(document.body,"click",n)}),e.on("remove",function(){e.dom.unbind(document.body,"click",n)})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(477028190620861),a=i(o);t.default=function(){l.default.PluginManager.add("wpcom/editorbuttonanalytics",r)};var s=n(0x976699e5e0db4),l=i(s),u=n(8680067948098285),d=i(u),c=n(6183759582808303),p=i(c),f=n(5084380759969092),h=(0,p.default)();e.exports=t.default},8991347377130760:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(5630966280090368),o=i(r),a=n(872100829608442),s=i(a),l=n(6203271391094927),u=i(l),d=n(95905449861643),c=i(d),p=n(0x6115cf9b8b4b5),f=n(8446265970839099),h=n(5407683625094891),m=n(4881459746320230),g=n(0x3f19c8db6e3b5),v=n(411492589843630),y=n(5896763357248615),b=n(19189154744278),_=n(0x50c391f6e28c0),x=n(0xeb8f73c122973),C=n(0x8ae3881d6e8c2),E=n(4675954658966525)("calypso:token-field"),w=n(6442230718320275),T=n(711528138733345),S=n(0xe7409a0052965),P=n(0xf5ce934723186),k=n(0xc7ac4c49328af),I=y.createClass({displayName:"TokenField",propTypes:{suggestions:y.PropTypes.array,maxSuggestions:y.PropTypes.number,displayTransform:y.PropTypes.func,saveTransform:y.PropTypes.func,onChange:y.PropTypes.func,isBorderless:y.PropTypes.bool,maxLength:y.PropTypes.number,onFocus:y.PropTypes.func,disabled:y.PropTypes.bool,tokenizeOnSpace:y.PropTypes.bool,value:function e(t){var e=t.value;return Array.isArray(e)?void T(e,function(e){if("object"===("undefined"==typeof e?"undefined":(0,c.default)(e))&&!("value"in e))return new Error("When using object for value prop, each object is expected to have a 'value' property.")}):new Error("Value prop is expected to be an array.")}},getDefaultProps:function(){return{suggestions:(0,u.default)([]),maxSuggestions:100,value:(0,u.default)([]),displayTransform:x,saveTransform:function(e){return e.trim()},onChange:function(){},isBorderless:!1,disabled:!1,tokenizeOnSpace:!1}},mixins:[b],getInitialState:function(){return{incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}},componentDidUpdate:function(){this.state.isActive&&!this.refs.input.hasFocus()&&(E("componentDidUpdate focusing input"),this.refs.input.focus())},componentWillReceiveProps:function(e){e.disabled&&this.state.isActive&&this.setState({isActive:!1,incompleteTokenValue:""})},render:function(){var e=C("token-field",{"is-active":this.state.isActive,"is-disabled":this.props.disabled}),t={ref:"main",className:e,tabIndex:"-1"};return this.props.disabled||(t=(0,s.default)({},t,{onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onFocus:this._onFocus})),y.createElement("div",t,y.createElement("div",{ref:"tokensAndInput",className:"token-field__input-container",tabIndex:"-1",onMouseDown:this._onContainerTouched,onTouchStart:this._onContainerTouched},this._renderTokensAndInput()),y.createElement(S,{match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:this._getMatchingSuggestions(),selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,isExpanded:this.state.isActive,onHover:this._onSuggestionHovered,onSelect:this._onSuggestionSelected}))},_renderTokensAndInput:function(){var e=g(this.props.value,this._renderToken);return e.splice(this._getIndexOfInput(),0,this._renderInput()),e},_renderToken:function(e){var t=this._getTokenValue(e),n=e.status?e.status:void 0;return y.createElement(P,{key:"token-"+t,value:t,status:n,tooltip:e.tooltip,displayTransform:this.props.displayTransform,onClickRemove:this._onTokenClickRemove,isBorderless:e.isBorderless||this.props.isBorderless,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:"error"!==n&&this.props.disabled})},_renderInput:function(){var e=this.props,t=e.autoCapitalize,n=e.autoComplete,i=e.maxLength,r=e.value,a={autoCapitalize:t,autoComplete:n,ref:"input",key:"input",disabled:this.props.disabled,value:this.state.incompleteTokenValue,onBlur:this._onBlur};return i&&r.length>=i||(a=(0,o.default)({},a,{onChange:this._onInputChange})),y.createElement(k,a)},_onFocus:function(e){this.setState({isActive:!0}),"function"==typeof this.props.onFocus&&this.props.onFocus(e)},_onBlur:function(e){this._inputHasValidValue()?(E("_onBlur adding current token"),this.setState({isActive:!1},this._addCurrentToken)):(E("_onBlur not adding current token"),this.setState(this.getInitialState()))},_onTokenClickRemove:function(e){this._deleteToken(e.value)},_onSuggestionHovered:function(e){var t=this._getMatchingSuggestions().indexOf(e);t>=0&&this.setState({selectedSuggestionIndex:t,selectedSuggestionScroll:!1})},_onSuggestionSelected:function(e){E("_onSuggestionSelected",e),this._addNewToken(e)},_onInputChange:function(e){var t=e.value,n=this.props.tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,i=t.split(n);i.length>1&&this._addNewTokens(i.slice(0,-1)),this.setState({incompleteTokenValue:m(i)||"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1})},_onContainerTouched:function(e){e.target===this.refs.tokensAndInput&&this.state.isActive&&e.preventDefault()},_onKeyDown:function(e){var t=!1;switch(e.keyCode){case 8:t=this._handleDeleteKey(this._deleteTokenBeforeInput);break;case 9:t=this._addCurrentToken();break;case 13:t=this._addCurrentToken();break;case 37:t=this._handleLeftArrowKey();break;case 38:t=this._handleUpArrowKey();break;case 39:t=this._handleRightArrowKey();break;case 40:t=this._handleDownArrowKey();break;case 46:t=this._handleDeleteKey(this._deleteTokenAfterInput);break;case 32:this.props.tokenizeOnSpace&&(t=this._addCurrentToken())}t&&e.preventDefault()},_onKeyPress:function(e){var t=!1;switch(e.charCode){case 44:t=this._handleCommaKey()}t&&e.preventDefault()},_handleDeleteKey:function(e){var t=!1;return this.refs.input.hasFocus()&&this._isInputEmpty()&&(e(),t=!0),t},_getMatchingSuggestions:function(){var e=this.props.suggestions,t=this.props.saveTransform(this.state.incompleteTokenValue),n=[],i=[];return 0===t.length?e=v(e,this.props.value):(t=t.toLocaleLowerCase(),_(e,function(e){var r=e.toLocaleLowerCase().indexOf(t);this.props.value.indexOf(e)===-1&&(0===r?n.push(e):r>0&&i.push(e))}.bind(this)),e=n.concat(i)),p(e,this.props.maxSuggestions)},_getSelectedSuggestion:function(){if(this.state.selectedSuggestionIndex!==-1)return this._getMatchingSuggestions()[this.state.selectedSuggestionIndex]},_addCurrentToken:function(){var e=!1,t=this._getSelectedSuggestion();return t?(this._addNewToken(t),e=!0):this._inputHasValidValue()&&(this._addNewToken(this.state.incompleteTokenValue),e=!0),e},_handleLeftArrowKey:function(){var e=!1;return this._isInputEmpty()&&(this._moveInputBeforePreviousToken(),e=!0),e},_handleRightArrowKey:function(){var e=!1;return this._isInputEmpty()&&(this._moveInputAfterNextToken(),e=!0),e},_handleUpArrowKey:function(){return this.setState({selectedSuggestionIndex:Math.max((this.state.selectedSuggestionIndex||0)-1,0),selectedSuggestionScroll:!0}),!0},_handleDownArrowKey:function(){return this.setState({selectedSuggestionIndex:Math.min(this.state.selectedSuggestionIndex+1||0,this._getMatchingSuggestions().length-1),selectedSuggestionScroll:!0}),!0},_handleCommaKey:function(){var e=!0;return this._inputHasValidValue()&&this._addNewToken(this.state.incompleteTokenValue),e},_isInputEmpty:function(){return 0===this.state.incompleteTokenValue.length},_inputHasValidValue:function(){return this.props.saveTransform(this.state.incompleteTokenValue).length>0},_deleteTokenBeforeInput:function(){var e=this._getIndexOfInput()-1;e>-1&&this._deleteToken(this.props.value[e])},_deleteTokenAfterInput:function(){var e=this._getIndexOfInput();e<this.props.value.length&&(this._deleteToken(this.props.value[e]),this._moveInputToIndex(e))},_deleteToken:function(e){var t=this,n=this.props.value.filter(function(n){return t._getTokenValue(n)!==t._getTokenValue(e)});this.props.onChange(n)},_moveInputToIndex:function(e){this.setState({inputOffsetFromEnd:this.props.value.length-Math.max(e,-1)-1})},_moveInputBeforePreviousToken:function(){this.setState({inputOffsetFromEnd:Math.min(this.state.inputOffsetFromEnd+1,this.props.value.length)})},_moveInputAfterNextToken:function(){this.setState({inputOffsetFromEnd:Math.max(this.state.inputOffsetFromEnd-1,0)})},_addNewTokens:function(e){var t=this,n=h(e.map(this.props.saveTransform).filter(Boolean).filter(function(e){return!t._valueContainsToken(e)}));if(E("_addNewTokens: tokensToAdd",n),n.length>0){var i=f(this.props.value);i.splice.apply(i,[this._getIndexOfInput(),0].concat(n)),E("_addNewTokens: onChange",i),this.props.onChange(i)}},_addNewToken:function(e){this._addNewTokens([e]),this.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}),this.state.isActive&&(E("_addNewToken focusing input"),this.refs.input.focus())},_valueContainsToken:function(e){var t=this;return w(this.props.value,function(n){return t._getTokenValue(e)===t._getTokenValue(n)})},_getTokenValue:function(e){return"object"===("undefined"==typeof e?"undefined":(0,c.default)(e))?e.value:e},_getIndexOfInput:function(){return this.props.value.length-this.state.inputOffsetFromEnd}});e.exports=I},9002016994434229:function(e,t,n){function i(e,t,n){var i=u(e)||p(e);if(t=s(t,4),null==n)if(i||c(e)){var f=e.constructor;n=i?u(e)?new f:[]:d(f)?o(l(e)):{}}else n={};return(i?r:a)(e,function(e,i,r){return t(n,e,i,r)}),n}var r=n(6653100901949564),o=n(0xdb012454e44dc),a=n(8070933214026328),s=n(953537273159943),l=n(8588778371469377),u=n(6994352954282616),d=n(0x729562806a912),c=n(6817336032113752),p=n(4692643253343335);e.exports=i}});