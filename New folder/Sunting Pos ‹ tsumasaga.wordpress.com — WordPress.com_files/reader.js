webpackJsonp([4511686545283850,0xf5d7f47f5cb74],{69378838734165:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){l.default.isEnabled("reader/search")?(0,s.default)("/read/search",d.preloadReaderBundle,d.updateLastRoute,d.sidebar,i.search):s.default.redirect("/read/search","/")};var a=o(0x90ba166cd016c),s=r(a),n=o(4883949902648912),l=r(n),i=o(0x97ecf1dc96436),d=o(8627024004433354);e.exports=t.default},350709929747314:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=o(0x45d24eaab7654),d=r(i),c=o(0xa72c09d16709f),u=r(c),f=s.default.createElement(u.default,{size:48}),p=s.default.createClass({displayName:"ListItemDescription",mixins:[l.default],getDefaultProps:function(){return{onClick:d.default}},render:function(){return s.default.createElement("span",{className:"reader-list-item__icon",onClick:this.props.onClick},this.props.children||f)}});t.default=p,e.exports=t.default},424444101704479:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=m;if(e&&e.blogs){if(0===e.blogs.length)return g.setIsLastPage(!0),void g.emit("change");var o=e.blogs.map(function(e){return(0,c.default)(e,["blog_id","follow_reco_id","reason"])});m=m.union((0,i.fromJS)(o)),m!==t&&(m.count()>=g.maxRecommendations()&&g.setIsLastPage(!0),h++,g.emit("change"))}}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var n=o(8769427305820155),l=r(n),i=o(0xe923f90582867),d=o(83765757817552),c=r(d),u=o(0xf2ce944f0fc89),f=r(u),p=o(7167063534841540),m=(0,i.OrderedSet)(),h=1,_=!1,g={_reset:function(){m=(0,i.OrderedSet)(),h=1,_=!1},maxRecommendations:function(){return 100},get:function(){return m.toJS()},getPage:function(){return h},isLastPage:function(){return _},setIsLastPage:function(e){_=!!e}};(0,f.default)(g),g.dispatchToken=l.default.register(function(e){var t=e&&e.action;switch(t.type){case p.ACTION_RECEIVE_SITE_RECOMMENDATIONS:a(t.data);break;case p.ACTION_RECEIVE_SITE_RECOMMENDATIONS_ERROR:s(t.error)}}),t.default=g,e.exports=t.default},515328459423761:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0x94d4b19af1d06),s=r(a),n=o(5896763357248615),l=r(n),i=o(19189154744278),d=r(i),c=o(4883949902648912),u=r(c),f=o(6881822108913591),p=r(f),m=l.default.createClass({displayName:"PostUnavailable",mixins:[d.default],componentWillMount:function(){this.errors={unauthorized:this.translate("This is a post on a private site that youâ€™re following, but not currently a member of. Please request membership to display these posts in Reader."),default:this.translate("An error occurred loading this post.")}},render:function(){var e=this.errors[this.props.post.errorCode||"default"]||this.errors.default;return 404===this.props.post.statusCode?null:l.default.createElement(p.default,{tagName:"article",className:"reader__card is-error"},l.default.createElement("div",{className:"reader__post-header"},l.default.createElement("h1",{className:"reader__post-title"},l.default.createElement("a",{className:"reader__post-title-link",target:"_blank",rel:"noopener noreferrer"},l.default.createElement("span",{className:"reader__placeholder-text"},"Oops!")))),l.default.createElement("div",{className:"reader__post-excerpt"},l.default.createElement("p",null,e),u.default.isEnabled("reader/full-errors")?l.default.createElement("pre",null,(0,s.default)(this.props.post,null,"  ")):null))}});t.default=m,e.exports=t.default},531696971243801:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/read/list/:user/:list",l.updateLastRoute,l.sidebar,n.listListing)};var a=o(0x90ba166cd016c),s=r(a),n=o(0xc7eca23b88dd5),l=o(8627024004433354);e.exports=t.default},773474709932065:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0xccd53b671ebb6),s=r(a),n=o(5143893728007863),l=r(n),i=o(5880884711457125),d=r(i),c=o(8173823076638946),u=r(c),f=o(5369032381290393),p=r(f),m=o(5896763357248615),h=r(m),_=o(7572476330282672),g=o(6280957995252369),b=o(7110422612655655),v=o(6881822108913591),y=r(v),E=o(5055977180578371),S=o(4725747483787960),P=function(e){function t(){var e,o,r,a;(0,l.default)(this,t);for(var n=arguments.length,i=Array(n),d=0;d<n;d++)i[d]=arguments[d];return o=r=(0,u.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(i))),r.unblock=function(){r.props.bumpStat("reader_actions","unblocked_blog"),r.props.recordGoogleEvent("reader_actions","Clicked Unblock Site"),(0,E.recordTrack)("calypso_reader_unblock_site",{blog_id:r.props.post.site_ID}),r.props.requestSiteUnblock(r.props.post.site_ID)},a=o,(0,u.default)(r,a)}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,o=e.translate;return h.default.createElement(y.default,{className:"reader-post-card is-blocked"},h.default.createElement("p",{className:"reader-post-card__blocked-description"},o("You have blocked %(site_name)s.",{args:{site_name:t.site_name}}),h.default.createElement("a",{onClick:this.unblock,className:"reader-post-card__blocked-undo"},o("Undo?"))))}}]),t}(h.default.Component);P.propTypes={post:h.default.PropTypes.object},t.default=(0,g.connect)(null,{recordGoogleEvent:S.recordGoogleEvent,bumpStat:S.bumpStat,requestSiteUnblock:b.requestSiteUnblock})((0,_.localize)(P)),e.exports=t.default},811619092419063:function(e,t,o){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(5630966280090368),n=a(s),l=o(0xccd53b671ebb6),i=a(l),d=o(5143893728007863),c=a(d),u=o(5880884711457125),f=a(u),p=o(8173823076638946),m=a(p),h=o(5369032381290393),_=a(h),g=o(6737292591287124),b=a(g),v=o(5896763357248615),y=a(v),E=o(5921998412115101),S=a(E),P=o(8680067948098285),R=a(P),x=o(7572476330282672),I=o(0x8ae3881d6e8c2),k=a(I),C=o(7064831842895117),w=a(C),T=o(4905351590087614),N=a(T),M=o(0xba3d0e479e9c),L=a(M),U=o(0xb0477dbaf9d99),A=a(U),B=o(5055977180578371),F=r(B),O=o(0x61f3a2ac07e20),D=a(O),H=o(509381197998965),q=a(H),j=o(6290799831194968),K=a(j),W=o(0xbd383d6ca28a1),V=a(W),G=function(e){function t(){var e,o,r,a;(0,c.default)(this,t);for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];return o=r=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(n))),r.handleCardClick=function(e){var t=S.default.findDOMNode(r),o=window.getSelection&&window.getSelection();return e.button>0||e.metaKey||e.controlKey||e.shiftKey||e.altKey?void((0,R.default)(e.target,".reader-combined-card__post-title-link",!0,t)&&F.recordPermalinkClick("card_title_with_modifier",r.props.post)):void((0,R.default)(e.target,".ignore-click, [rel~=external]",!0,t)||(0,R.default)(e.target,"a",!0,t)&&(0,R.default)(e.target,".reader-excerpt",!0,t)||o&&o.toString()||e.defaultPrevented||(e.preventDefault(),r.props.onClick(r.props.post)))},a=o,(0,m.default)(r,a)}return(0,_.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,o=e.streamUrl,r=e.isDiscover,a=e.isSelected,s=!t||"pending"===t._state||"minimal"===t._state;if(s)return y.default.createElement(V.default,null);var l=(0,b.default)(t,"author.name"),i=null;t.canonical_media&&"video"===t.canonical_media.mediaType?i=y.default.createElement(K.default,(0,n.default)({},t.canonical_media,{videoEmbed:t.canonical_media,allowPlaying:!1})):t.canonical_media&&(i=y.default.createElement(q.default,{imageWidth:100,imageUrl:t.canonical_media.src,href:t.URL}));var d=function(){(0,B.recordPermalinkClick)("timestamp_combined_card",t)},c=(0,k.default)({"reader-combined-card__post":!0,"is-selected":a,"has-featured-asset":!!i});return y.default.createElement("li",{className:c,onClick:this.handleCardClick},this.props.showFeaturedAsset&&y.default.createElement("div",{className:"reader-combined-card__featured-asset-wrapper"},i),y.default.createElement("div",{className:"reader-combined-card__post-details"},y.default.createElement(w.default,null,y.default.createElement("h1",{className:"reader-combined-card__post-title"},y.default.createElement("a",{className:"reader-combined-card__post-title-link",href:t.URL},t.title))),y.default.createElement(N.default,{post:t,isDiscover:r}),y.default.createElement("div",{className:"reader-combined-card__post-author-and-time ignore-click"},y.default.createElement(L.default,{href:t.URL,iconSize:14},this.props.translate("Visit")),l&&y.default.createElement(A.default,{className:"reader-combined-card__author-link",author:t.author,siteUrl:o,post:t},t.author.name),t.date&&t.URL&&y.default.createElement("span",{className:"reader-combined-card__timestamp"},l&&y.default.createElement("span",null,", "),y.default.createElement("a",{className:"reader-combined-card__timestamp-link",onClick:d,href:t.URL,target:"_blank",rel:"noopener noreferrer"},y.default.createElement(D.default,{date:t.date}))))))}}]),t}(y.default.Component);G.propTypes={post:y.default.PropTypes.object.isRequired,streamUrl:y.default.PropTypes.string,onClick:y.default.PropTypes.func,showFeaturedAsset:y.default.PropTypes.bool},G.defaultProps={showFeaturedAsset:!0},t.default=(0,x.localize)(G),e.exports=t.default},0x40ed505bc1732:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/tag/*",l.preloadReaderBundle,l.loadSubscriptions,l.initAbTests),(0,s.default)("/tag/:tag",l.updateLastRoute,l.sidebar,n.tagListing),(0,s.default)("/tags",l.loadSubscriptions,l.initAbTests,l.updateLastRoute,l.sidebar,n.recommendedTags)};var a=o(0x90ba166cd016c),s=r(a),n=o(5443845313196987),l=o(8627024004433354);e.exports=t.default},0x45e7b9b828eff:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.reader.posts.items[t]}function s(e,t,o){if(e.reader.posts.items!==c){var r=e.reader.posts.items,a=(0,d.default)(r,function(e){return e&&e.site_ID&&e.ID&&!e.is_external});u=(0,l.default)(a,function(e){return e.site_ID+"-"+e.ID}),c=r}return u[t+"-"+o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getPost=a,t.getPostBySiteAndId=s;var n=o(7370676309606651),l=r(n),i=o(0xa8ea23472235c),d=r(i),c=null,u={}},0x4ce9eddf96ff4:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=o(5143893728007863),s=r(a),n=o(5880884711457125),l=r(n),i=o(4675954658966525),d=r(i),c=(0,d.default)("calypso:infinite-list:helper"),u=function(){function e(t){(0,s.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,l.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,o){if("function"==typeof t){o&&(t=t.bind(o));for(var r=e-e%this.props.itemsPerRow,a=Math.min(r+this.props.itemsPerRow,this.props.items.length)-1,s=r;s<=a;s++)t(this.props.items[s],s)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var o=this.props.getItemRef(t),r=this.boundsForRef(o),a=void 0;a=r?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-r.top:r.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[o]=a},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var o=t.props.getItemRef(e);delete t.itemHeights[o]},this)}},{key:"getRowHeight",value:function(e){var t=this,o=0;return this.forEachInRow(e,function(e){var r=t.props.getItemRef(e),a=t.storedItemHeight(r);o=Math.max(o,a)},this),o}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,o=this.firstRenderedIndex||0,r=this.props.items.length,a=t;0===r&&(a=-1),t>=r&&(a=Math.min(o+e,r-1)),a===-1&&r>0&&0===o&&(a=e),a!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=a)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,c("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,c("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,c("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,o=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),o=this.containerBottom-this.bottomPlaceholderHeight,t=o+e,!(t>this.bottomHideLevelSoft&&o>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,c("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;c("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();e.exports=u},0x4d2178c8fb1bf:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=s.default.createClass({displayName:"ListItemDescription",mixins:[l.default],render:function(){return s.default.createElement("p",{className:"reader-list-item__description"},this.props.children)}});t.default=i,e.exports=t.default},0x4e516016520f8:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(0,h.isDiscoverBlog)(e.blogId)||(0,h.isDiscoverFeed)(e.feedId)}function s(e,t){return e&&t&&!e.isRecommendationBlock&&!t.isRecommendationBlock&&(e.blogId&&e.blogId===t.blogId||e.feedId&&e.feedId===t.feedId)}function n(e,t){return e.localMoment.isSame(t.localMoment,"day")}function l(e,t){if(!e||!t)return null;var o={isCombination:!0,localMoment:e.localMoment&&e.localMoment.isBefore(t.localMoment)?e.localMoment:t.localMoment,postIds:[].concat((0,c.default)(e.postIds||[e.postId]),(0,c.default)(t.postIds||[t.postId]))};return e.blogId&&(o.blogId=e.blogId),e.feedId&&(o.feedId=e.feedId),o}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments[2];if(!t||0===t.length)return e;if(e.length<o)return e;var r=0;return(0,m.default)(e,function(e,a){if(a&&a%o===0&&r<t.length){var s={isRecommendationBlock:!0,recommendations:t.slice(r,r+_),index:r};return r+=_,[s,e]}return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.combineCards=t.RECS_PER_BLOCK=void 0;var d=o(6465156853722425),c=r(d),u=o(4881459746320230),f=r(u),p=o(5414729054902486),m=r(p);t.isDiscoverPostKey=a,t.sameSite=s,t.sameDay=n,t.combine=l,t.injectRecommendations=i;var h=o(466675662821495),_=t.RECS_PER_BLOCK=2;t.combineCards=function(e){return e.reduce(function(e,t){var o=(0,f.default)(e);return s(o,t)&&n(o,t)&&!a(t)?e[e.length-1]=l((0,f.default)(e),t):e.push(t),e},[])}},0x55bbb5cedc8f7:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0xccd53b671ebb6),s=r(a),n=o(5143893728007863),l=r(n),i=o(5880884711457125),d=r(i),c=o(8173823076638946),u=r(c),f=o(5369032381290393),p=r(f),m=o(8640881565075096),h=r(m),_=o(5896763357248615),g=r(_),b=o(5921998412115101),v=r(b),y=o(0x8ae3881d6e8c2),E=r(y),S=o(0x8f7d57519e61b),P=r(S),R=o(7572476330282672),x=o(8680067948098285),I=r(x),k=o(6280957995252369),C=o(6881822108913591),w=r(C),T=o(0x776695bf6d3e),N=r(T),M=o(0x430fac3f1c1a7),L=o(0x810bf47f2a615),U=o(702694371083037),A=r(U),B=o(0x8f4b4b01b611c),F=r(B),O=function(e){function t(){var e,o,r,a;(0,l.default)(this,t);for(var n=arguments.length,i=Array(n),d=0;d<n;d++)i[d]=arguments[d];return o=r=(0,u.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(i))),r.handleTitleClick=function(e){e.button>0||e.metaKey||e.controlKey||e.shiftKey||e.altKey||(e.preventDefault(),r.props.handleClick(r.props.xMetadata))},r.handleCardClick=function(e){var t=v.default.findDOMNode(r);(0,I.default)(e.target,".should-scroll",!0,t)&&setTimeout(function(){window.scrollTo(0,0)},100),(0,I.default)(e.target,".ignore-click",!0,t)||(0,I.default)(e.target,"a",!0,t)&&(0,I.default)(e.target,".reader__x-post",!0,t)||e.metaKey||e.controlKey||e.shiftKey||e.altKey||e.defaultPrevented||(e.preventDefault(),r.props.handleClick(r.props.xMetadata))},r.getSiteNameFromURL=function(e){return"+"+P.default.parse(e).hostname.split(".")[0]},r.getDescription=function(e){var t=void 0,o=r.getSiteNameFromURL(r.props.xMetadata.siteURL),a=!!r.props.xMetadata.commentURL;return t=a?r.props.translate("{{author}}%(authorFirstName)s{{/author}} {{label}}left a comment on %(siteName)s, cross-posted to{{/label}} {{blogNames/}}",{args:{siteName:o,authorFirstName:e},components:{author:g.default.createElement("span",{className:"reader__x-post-author"}),label:g.default.createElement("span",{className:"reader__x-post-label"}),blogNames:r.getXPostedToContent()}}):r.props.translate("{{author}}%(authorFirstName)s{{/author}} {{label}}cross-posted from %(siteName)s to{{/label}} {{blogNames/}}",{args:{siteName:o,authorFirstName:e},components:{author:g.default.createElement("span",{className:"reader__x-post-author"}),label:g.default.createElement("span",{className:"reader__x-post-label"}),blogNames:r.getXPostedToContent()}})},r.getXPostedToContent=function(){var e=r.props.xPostedTo;return e&&0!==e.length||(e=[{siteURL:r.props.post.site_URL,siteName:r.getSiteNameFromURL(r.props.post.site_URL)}]),e.map(function(e,t,o){return g.default.createElement("span",{className:"reader__x-post-site",key:e.siteURL+"-"+t},e.siteName,t+2<o.length&&g.default.createElement("span",null,", "),t+2===o.length&&g.default.createElement("span",null," ",r.props.translate("and",{comment:"last conjunction in a list of blognames: (blog1, blog2,) blog3 _and_ blog4"})," "))})},a=o,(0,u.default)(r,a)}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.post,o=e.postKey,r=e.site,a=e.feed,s=o.blogId,n=o.feedId,l=(0,h.default)(r,"icon.img"),i=(0,h.default)(a,"image"),d=(0,E.default)({reader__card:!0,"is-x-post":!0,"is-selected":this.props.isSelected}),c=t.title;return c=c.replace(/x-post:/i,""),g.default.createElement(w.default,{tagName:"article",onClick:this.handleCardClick,className:d},g.default.createElement(N.default,{siteIcon:l,feedIcon:i,author:t.author,onClick:this.handleTitleClick,isCompact:!0}),g.default.createElement("div",{className:"reader__x-post"},t.title&&g.default.createElement("h1",{className:"reader__post-title"},g.default.createElement("a",{className:"reader__post-title-link",onClick:this.handleTitleClick,href:t.URL,target:"_blank",rel:"noopener noreferrer"},c)),this.getDescription(t.author.first_name)),n&&g.default.createElement(F.default,{feedId:+n,includeMeta:!1}),s&&g.default.createElement(A.default,{siteId:+s,includeMeta:!1}))}}]),t}(_.PureComponent);O.propTypes={post:g.default.PropTypes.object.isRequired,isSelected:g.default.PropTypes.bool.isRequired,xMetadata:g.default.PropTypes.object.isRequired,xPostedTo:g.default.PropTypes.array,handleClick:g.default.PropTypes.func.isRequired,translate:g.default.PropTypes.func.isRequired,postKey:g.default.PropTypes.object,site:g.default.PropTypes.object,feed:g.default.PropTypes.object},t.default=(0,k.connect)(function(e,t){var o=t.postKey,r=o.feedId,a=o.blogId,s=void 0,n=void 0;return r?(s=(0,L.getFeed)(e,r),n=s&&s.blog_ID?(0,M.getSite)(e,s.blog_ID):void 0):(n=(0,M.getSite)(e,a),s=n&&n.feed_ID?(0,L.getFeed)(e,n.feed_ID):void 0),{feed:s,site:n}})((0,R.localize)(O)),e.exports=t.default},0x59d7cf1b5a3a9:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=o(6881822108913591),d=r(i),c=s.default.createClass({displayName:"PostPlaceholder",mixins:[l.default],render:function(){return s.default.createElement(d.default,{tagName:"article",className:"reader__card is-placeholder"},s.default.createElement("div",{className:"reader__post-header"},s.default.createElement("h1",{className:"reader__post-title"},s.default.createElement("a",{className:"reader__post-title-link",target:"_blank",rel:"noopener noreferrer"},s.default.createElement("span",{className:"reader__placeholder-text"},"Loading interesting postsâ€¦"))),s.default.createElement("div",{className:"reader__post-byline"},s.default.createElement("span",{className:"site-icon",height:"16",width:"16"}),s.default.createElement("h4",{className:"reader__site-name"},s.default.createElement("span",{className:"reader__placeholder-text"},"Loading Sites")),s.default.createElement("time",{className:"reader__post-time"},s.default.createElement("span",{className:"reader__placeholder-text"},"10 min")))),s.default.createElement("div",{className:"reader__post-excerpt"},s.default.createElement("p",null,s.default.createElement("span",{className:"reader__placeholder-text"},"Please wait while we grab all the interesting posts, photos, videos and more to show you in Reader. It shouldnâ€™t take long."))),s.default.createElement("ul",{className:"reader__post-footer"},s.default.createElement("li",{className:"reader__post-read-time"},s.default.createElement("span",{className:"reader__placeholder-text"},"10 min read"))))}});t.default=c,e.exports=t.default},0x6e7860358052d:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0xccd53b671ebb6),s=r(a),n=o(5143893728007863),l=r(n),i=o(5880884711457125),d=r(i),c=o(8173823076638946),u=r(c),f=o(5369032381290393),p=r(f),m=o(5896763357248615),h=r(m),_=o(0x8ae3881d6e8c2),g=r(_),b=o(7572476330282672),v=o(5136668318617341),y=function(e){function t(){var e,o,r,a;(0,l.default)(this,t);for(var n=arguments.length,i=Array(n),d=0;d<n;d++)i[d]=arguments[d];return o=r=(0,u.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(i))),r.state={isFilling:!1},r.handleClick=function(){r.setState({isFilling:!0}),(0,v.handleGapClicked)(r.props.gap,r.props.store.id)},a=o,(0,u.default)(r,a)}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,g.default)({"reader-list-gap":!0,"is-filling":this.state.isFilling,"is-selected":this.props.selected}),t=this.props.translate;return h.default.createElement("div",{className:e,onClick:this.handleClick},h.default.createElement("button",{type:"button",className:"button reader-list-gap__button"},t("Load More Posts")))}}]),t}(h.default.Component);y.propTypes={gap:h.default.PropTypes.object.isRequired,store:h.default.PropTypes.object.isRequired,selected:h.default.PropTypes.bool},t.default=(0,b.localize)(y),e.exports=t.default},0x6f463dc783e82:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=o(0x8ae3881d6e8c2),d=r(i),c=o(5628363501489590),u=r(c),f=s.default.createClass({displayName:"ListItem",mixins:[l.default],render:function(){var e=(0,d.default)("reader-list-item__card",this.props.className);return s.default.createElement(u.default,{className:e},this.props.children)}});t.default=f,e.exports=t.default},0x73816910012b8:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.reader.start.hasGraduated;if(null===t){var o=(0,i.getCurrentUser)(e);t=!o.is_new_reader}return t}function s(e){return e.reader.start.isRequestingGraduation}Object.defineProperty(t,"__esModule",{value:!0}),t.hasGraduatedRecommendations=a,t.isRequestingGraduation=s;var n=o(4675954658966525),l=r(n),i=o(0x956a8e02ae2a5);(0,l.default)("calypso:reader:start")},0x73aee47803fc7:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.blog_id}function s(){if(!(0,f.isRequestInflight)(h.ACTION_RECEIVE_SITE_RECOMMENDATIONS)){var e={number:10,source:"reader_sidebar",meta:"site"},t=m.default.get();t&&t.length>0&&(t=t.map(a),e.exclude=t),u.default.undocumented().fetchSiteRecommendations(e,(0,f.requestTracker)(h.ACTION_RECEIVE_SITE_RECOMMENDATIONS,function(e,t){e?d.default.handleServerAction({type:h.ACTION_RECEIVE_SITE_RECOMMENDATIONS_ERROR,data:t,error:e}):(t&&t.blogs&&t.blogs.forEach(function(e){var t=(0,l.default)(e,"meta.data.site");t&&g.default.receiveFetch(t.ID,void 0,t)}),d.default.handleServerAction({type:h.ACTION_RECEIVE_SITE_RECOMMENDATIONS,data:t}))}))}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(8640881565075096),l=r(n);t.fetchMore=s;var i=o(8769427305820155),d=r(i),c=o(8478035041892969),u=r(c),f=o(8788218967405503),p=o(424444101704479),m=r(p),h=o(7167063534841540),_=o(5667449338450259),g=r(_)},0x7437d2719c5e9:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.followingManage=t.followingEdit=void 0;var a=o(5896763357248615),s=r(a),n=o(7572476330282672),l=r(n),i=o(4808587282202068),d=r(i),c=o(6563835376427538),u=r(c),f=o(0x7e3efd336d25d),p=o(8025093951496706),m=o(7082708682668568),h=r(m),_="Reader",g=function(e){o.e(6589121235742707,function(t){e(o(6475945397075036).__esModule?o(6475945397075036).default:o(6475945397075036))})},b=function(e){o.e(0xba1112b129ad9,function(t){e(o(0x5de4dc98fb4eb).__esModule?o(0x5de4dc98fb4eb).default:o(0x5de4dc98fb4eb))})},v={followingEdit:function(e){var t=d.default.sectionify(e.path),o=_+" > Manage Followed Sites",r="following_edit",a=e.query.s;(0,f.setPageTitle)(e,l.default.translate("Manage Followed Sites")),(0,f.trackPageLoad)(t,o,r),(0,p.renderWithReduxStore)(s.default.createElement(h.default,{require:g,key:"following-edit",initialFollowUrl:e.query.follow,search:a,context:e,userSettings:u.default}),document.getElementById("primary"),e.store)},followingManage:function(e){var t=d.default.sectionify(e.path),o=_+" > Manage Followed Sites",r="following_manage",a=e.query.q;(0,f.setPageTitle)(e,l.default.translate("Manage Followed Sites")),(0,f.trackPageLoad)(t,o,r),(0,p.renderWithReduxStore)(s.default.createElement(h.default,{require:b,key:"following-manage",initialFollowUrl:e.query.follow,query:a,context:e,userSettings:u.default}),document.getElementById("primary"),e.store)}};t.default=v;var y=v.followingEdit,E=v.followingManage;t.followingEdit=y,t.followingManage=E},0x8e89ab6985b7a:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/following/*",l.loadSubscriptions,l.initAbTests),(0,s.default)("/following/edit",l.updateLastRoute,l.sidebar,n.followingEdit),d.default.isEnabled("reader/following-manage-refresh")&&(0,s.default)("/following/manage",l.updateLastRoute,l.sidebar,n.followingManage)};var a=o(0x90ba166cd016c),s=r(a),n=o(0x7437d2719c5e9),l=o(8627024004433354),i=o(4883949902648912),d=r(i);e.exports=t.default},0x949dfcdc79aa8:function(e,t,o){"use strict";function r(e,t){var o=n.get(e);o!==t&&(s[e]=t)}var a=o(8769427305820155),s={},n={get:function(e){return s[e]}};n.dispatchToken=a.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":r(t.url,t.scrollPosition)}}),e.exports=n},0x96de46e7bf4e4:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){(0,i.recordTrackForPost)("calypso_reader_recommended_post_clicked",r,{
recommendation_source:"empty-search"}),(0,i.recordAction)("search_page_rec_post_click")}function o(){(0,i.recordTrackForPost)("calypso_reader_recommended_site_clicked",r,{recommendation_source:"empty-search"}),(0,i.recordAction)("search_page_rec_site_click")}var r=e.post,a={title:r.site_name};return n.default.createElement("div",{className:"search-stream__recommendation-list-item",key:r.global_ID},n.default.createElement(l.RelatedPostCard,{post:r,site:a,onSiteClick:o,onPostClick:t,followSource:d.EMPTY_SEARCH_RECOMMENDATIONS}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=o(5896763357248615),n=r(s),l=o(4995811581636076),i=o(5055977180578371),d=o(5428292591472269);e.exports=t.default},0x97ecf1dc96436:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var o="/read/search";e&&(o+="?"+c.default.stringify({q:e,sort:t})),i.default.replace(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.search=void 0;var s=o(5896763357248615),n=r(s),l=o(0x90ba166cd016c),i=r(l),d=o(0xb94cd99b0dce0),c=r(d),u=o(0x7c51ba9013a81),f=r(u),p=o(5055977180578371),m=o(0x7e3efd336d25d),h=o(8025093951496706),_=o(7082708682668568),g=r(_),b="Reader",v=function(e){o.e(6246368910513505,function(t){e(o(0xc9c64a1addea4).__esModule?o(0xc9c64a1addea4).default:o(0xc9c64a1addea4))})},y={search:function(e){function t(e){a(e,"relevance"!==i?i:void 0)}function o(e){a(l,"relevance"!==e?e:void 0)}var r="/read/search",s=b+" > Search",l=e.query.q,i=e.query.sort||"relevance",d="search",c=void 0;l?(c=(0,f.default)("search:"+i+":"+l),c.isQuerySuggestion="1"===e.query.isSuggestion,(0,m.ensureStoreLoading)(c,e)):(c=(0,f.default)("custom_recs_posts_with_images"),(0,m.ensureStoreLoading)(c,e)),(0,m.trackPageLoad)(r,s,d),l?(0,p.recordTrack)("calypso_reader_search_performed",{query:l,sort:i}):(0,p.recordTrack)("calypso_reader_search_loaded");var u=!l||"1"===e.query.focus;(0,h.renderWithReduxStore)(n.default.createElement(g.default,{require:v,key:"search",postsStore:c,query:l,trackScrollPage:m.trackScrollPage.bind(null,r,s,b,d),onUpdatesShown:m.trackUpdatesLoaded.bind(null,d),showBack:!1,showPrimaryFollowButtonOnCards:!0,autoFocusInput:u,onQueryChange:t,onSortChange:o}),document.getElementById("primary"),e.store)}};t.default=y;var E=y.search;t.search=E},0x98e53603349c4:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(7572476330282672),l=r(n),i=o(6405658974449263),d=r(i),c=o(5710668435257744),u=r(c),f=o(0xbfad9041fa583),p=r(f),m=o(5055977180578371),h=s.default.createClass({displayName:"FeedError",getDefaultProps:function(){return{message:l.default.translate("Sorry, we can't find that site.")}},recordAction:function(){(0,m.recordAction)("clicked_search_on_404"),(0,m.recordGaEvent)("Clicked Search on 404"),(0,m.recordTrack)("calypso_reader_search_on_feed_error_clicked")},recordSecondaryAction:function(){(0,m.recordAction)("clicked_discover_on_404"),(0,m.recordGaEvent)("Clicked Discover on 404"),(0,m.recordTrack)("calypso_reader_discover_on_feed_error_clicked")},render:function(){var e=s.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/read/search"},this.translate("Find Sites to Follow")),t=s.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.translate("Explore Discover"));return s.default.createElement(d.default,null,s.default.createElement(u.default,null,s.default.createElement("h1",null,this.props.sidebarTitle)),s.default.createElement(p.default,{action:e,secondaryAction:t,title:this.props.message,illustration:"/calypso/images/drake/drake-404.svg",illustrationWidth:500}))}});h.propTypes={sidebarTitle:s.default.PropTypes.string},t.default=h,e.exports=t.default},0x9af991d2701db:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/read/post/feed/:feed_id/:post_id",l.legacyRedirects),(0,s.default)("/read/feeds/:feed/posts/:post",l.updateLastRoute,l.unmountSidebar,n.feedPost),(0,s.default)("/read/post/id/:blog_id/:post_id",l.legacyRedirects),(0,s.default)("/read/blogs/:blog/posts/:post",l.updateLastRoute,l.unmountSidebar,n.blogPost)};var a=o(0x90ba166cd016c),s=r(a),n=o(0xe689774273af3),l=o(8627024004433354);e.exports=t.default},0xa38530fa4b8b9:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return t?t.length<=e?[]:(0,y.default)((0,b.default)(t,e),function(e){return(e.displayName||e.slug).replace(/-/g," ")}):null}function s(e){var t=x.default.getLocaleSlug().split("-")[0];return I.suggestions[t]?(0,b.default)(I.suggestions[t],e):null}function n(e,t){var o=a(e,t);return null===o?null:o.length?o:s(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(0xccd53b671ebb6),i=r(l),d=o(5143893728007863),c=r(d),u=o(5880884711457125),f=r(u),p=o(8173823076638946),m=r(p),h=o(5369032381290393),_=r(h),g=o(8165653762217014),b=r(g),v=o(0x3f19c8db6e3b5),y=r(v),E=o(6280957995252369),S=o(5896763357248615),P=r(S),R=o(6669600629909374),x=r(R),I=o(4745483946588702),k=o(0xb023c47986925),C=r(k),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(o){function r(){var o,a,s,l;(0,c.default)(this,r);for(var d=arguments.length,u=Array(d),f=0;f<d;f++)u[f]=arguments[f];return a=s=(0,m.default)(this,(o=r.__proto__||(0,i.default)(r)).call.apply(o,[this].concat(u))),s.memoizedSuggestions=null,s.getFirstSuggestions=function(e){return s.memoizedSuggestions?s.memoizedSuggestions:s.memoizedSuggestions=n(t,(0,C.default)(e))},s.EnhancedComponent=(0,E.connect)(function(e){return{suggestions:s.getFirstSuggestions(e)}})(e),l=a,(0,m.default)(s,l)}return(0,_.default)(r,o),(0,f.default)(r,[{key:"componentWillUnmount",value:function(){this.memoizedSuggestions=null}},{key:"render",value:function(){var e=this.EnhancedComponent;return P.default.createElement(e,this.props)}}]),r}(S.Component)};t.default=w,e.exports=t.default},0xafd0715572148:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0x45d24eaab7654),s=r(a),n=o(5896763357248615),l=r(n),i=o(6280957995252369),d=o(19189154744278),c=r(d),u=o(0x8ae3881d6e8c2),f=r(u),p=o(0xa505046780b0c),m=r(p),h=o(4672980129057221),_=r(h),g=o(22173321089158),b=l.default.createClass({displayName:"UpdateNotice",mixins:[c.default],propTypes:{count:l.default.PropTypes.number.isRequired,onClick:l.default.PropTypes.func,cappedUnreadCount:l.default.PropTypes.string},getDefaultProps:function(){return{onClick:s.default}},render:function(){var e=(0,f.default)({"reader-update-notice":!0,"is-active":this.props.count>0});return l.default.createElement("div",{className:e,onClick:this.handleClick},l.default.createElement(_.default,{unreadCount:this.props.count}),l.default.createElement(m.default,{icon:"arrow-up",size:18}),this.translate("%s new post","%s new posts",{args:[this.props.cappedUnreadCount],count:this.props.count}))},handleClick:function(e){e.preventDefault(),this.props.onClick()}});t.default=(0,i.connect)(function(e){return{cappedUnreadCount:(0,g.getDocumentHeadCappedUnreadCount)(e)}})(b),e.exports=t.default},0xba0ce520fef8a:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=o(477028190620861),s=r(a),n=o(4675954658966525),l=r(n),i=o(5059747709250767),d=r(i),c=o(0x90ba166cd016c),u=r(c),f=o(5896763357248615),p=r(f),m=o(5921998412115101),h=r(m),_=o(8130523061664933),g=r(_),b=o(0xe96395f1eded3),v=r(b),y=o(6346297615794200),E=r(y),S=o(0x949dfcdc79aa8),P=r(S),R=o(0x4ce9eddf96ff4),x=r(R),I=o(0xac26052d5c9f7),k=r(I),C=o(0x7a27b5b6e9228),w=r(C),T=(0,l.default)("calypso:infinite-list");e.exports=p.default.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:p.default.PropTypes.array.isRequired,fetchingNextPage:p.default.PropTypes.bool.isRequired,lastPage:p.default.PropTypes.bool.isRequired,guessedItemHeight:p.default.PropTypes.number.isRequired,itemsPerRow:p.default.PropTypes.number,fetchNextPage:p.default.PropTypes.func.isRequired,getItemRef:p.default.PropTypes.func.isRequired,renderItem:p.default.PropTypes.func.isRequired,renderLoadingPlaceholders:p.default.PropTypes.func.isRequired,renderTrailingItems:p.default.PropTypes.func,context:p.default.PropTypes.oneOfType([p.default.PropTypes.object,p.default.PropTypes.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:w.default,componentWillMount:function(){var e=u.default.current,t=void 0,o=void 0;g.default.loadedViaHistory()&&(t=E.default.get(e),o=P.default.get(e)),t&&o&&(T("overriding scrollTop:",o),t.scrollTop=o),this.scrollHelper=new x.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?T("infinite-list positions loaded from store"):(T("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),T("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),g.default.loadedViaHistory()&&this._overrideHistoryScroll(),T("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),g.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new x.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(T("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,k.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=u.default.current,o=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),v.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(o={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,T("new scroll positions",o,this.state),this.smartSetState(o),v.default.storePositions(t,o)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?h.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=h.default.findDOMNode(this),o=[],r=this.state.firstRenderedIndex,a=this.state.lastRenderedIndex,s=e&&e.offsetTop?e.offsetTop:0,n=void 0,l=void 0,i=void 0,d=void 0,c=e&&e.offsetBottom?e.offsetBottom:0;if(c=c||0,a>-1)for(i=t.children,d=1;d<i.length-1;d++)l=t.children[d].getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,(l.top<0&&Math.abs(l.top)<l.height-s||l.top>0&&l.top<n-c)&&o.push({index:r+d-1,bounds:l});return o},render:function(){var e=(0,d.default)(this.props,(0,s.default)(this.constructor.propTypes)),t="infinite-list__spacer",o=void 0,r=this.state.lastRenderedIndex,a=[];for((r===-1||r>this.props.items.length-1)&&(T("resetting lastRenderedIndex, currently at %s, %d items",r,this.props.items.length),r=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),T("reset lastRenderedIndex to %s",r)),T("rendering %d to %d",this.state.firstRenderedIndex,r),o=this.state.firstRenderedIndex;o<=r;o++)a.push(this.props.renderItem(this.props.items[o],o));return this.props.fetchingNextPage&&(a=a.concat(this.props.renderLoadingPlaceholders())),p.default.createElement("div",e,p.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),a,this.props.renderTrailingItems(),p.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(T("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),T("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}})},0xbb797c0aee2c2:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(0xbfad9041fa583),l=r(n),i=o(5055977180578371),d=o(466675662821495),c=s.default.createClass({displayName:"FollowingEmptyContent",shouldComponentUpdate:function(){return!1},recordAction:function(){(0,i.recordAction)("clicked_search_on_empty"),(0,i.recordGaEvent)("Clicked Search on EmptyContent"),(0,i.recordTrack)("calypso_reader_search_on_empty_stream_clicked")},render:function(){var e=(0,d.isDiscoverEnabled)()?s.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/read/search"},this.translate("Find Sites to Follow")):null,t=null;return s.default.createElement(l.default,{title:this.translate("Welcome to Reader"),line:this.translate("Recent posts from sites you follow will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/drake/drake-all-done.svg",illustrationWidth:500})}});t.default=c,e.exports=t.default},0xbd383d6ca28a1:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=function(){return s.default.createElement("li",{className:"reader-combined-card__post is-placeholder"},s.default.createElement("div",{className:"reader-combined-card__featured-image-wrapper"}),s.default.createElement("div",{className:"reader-combined-card__post-details"},s.default.createElement("h1",{className:"reader-combined-card__post-title"}),s.default.createElement("div",{className:"reader-excerpt is-placeholder"}),s.default.createElement("div",{className:"reader-combined-card__post-author-and-time is-placeholder"},s.default.createElement("div",{className:"reader-combined-card__visit-link-placeholder"}),s.default.createElement("div",{className:"reader-combined-card__timestamp"}))))};t.default=n,e.exports=t.default},0xc308716520cc5:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){(0,S.recordTrack)("calypso_reader_search_from_following",{query:e}),""!==(0,n.default)(e)&&(0,h.default)("/read/search?q="+encodeURIComponent(e)+"&focus=1")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(463848289870480),n=r(s),l=o(5414729054902486),i=r(l),d=o(0xd911652ed304),c=r(d),u=o(5896763357248615),f=r(u),p=o(7572476330282672),m=o(0x90ba166cd016c),h=r(m),_=o(4966728244152936),g=r(_),b=o(5628363501489590),v=r(b),y=o(0x75aac138cedeb),E=r(y),S=o(5055977180578371),P=o(0xd7d257e89be6b),R=r(P),x=o(0xa38530fa4b8b9),I=r(x),k=o(6478121672427860),C=r(k),w=o(4883949902648912),T=r(w),N=function(e){var t=e.suggestions&&(0,c.default)((0,i.default)(e.suggestions,function(e){return[f.default.createElement(R.default,{suggestion:e,source:"following"}),", "]}));return f.default.createElement(g.default,e,T.default.isEnabled("reader/following-intro")&&f.default.createElement(C.default,null),f.default.createElement(v.default,{className:"following__search"},f.default.createElement(E.default,{onSearch:a,autoFocus:!1,delaySearch:!0,delayTimeout:500,placeholder:e.translate("Search billions of WordPress.com postsâ€¦")})),f.default.createElement("p",{className:"search-stream__blank-suggestions"},t&&e.translate("Suggestions: {{suggestions /}}.",{components:{suggestions:t}}),"Â "),f.default.createElement("hr",{className:"search-stream__fixed-area-separator"}))};t.default=(0,I.default)((0,p.localize)(N)),e.exports=t.default},0xc7eca23b88dd5:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.listListing=void 0;var a=o(5896763357248615),s=r(a),n=o(0x7c51ba9013a81),l=r(n),i=o(5055977180578371),d=o(0x7e3efd336d25d),c=o(8025093951496706),u=o(7082708682668568),f=r(u),p="Reader",m=function(e){o.e(7288499779097813,function(t){e(o(7350952879643713).__esModule?o(7350952879643713).default:o(7350952879643713))})},h={listListing:function(e){var t="/read/list/:owner/:slug",o=p+" > List > "+e.params.user+" - "+e.params.list,r=(0,l.default)("list:"+e.params.user+"-"+e.params.list),a="list";(0,d.ensureStoreLoading)(r,e),(0,d.trackPageLoad)(t,o,a),(0,i.recordTrack)("calypso_reader_list_loaded",{list_owner:e.params.user,list_slug:e.params.list}),(0,c.renderWithReduxStore)(s.default.createElement(f.default,{require:m,key:"tag-"+e.params.user+"-"+e.params.list,postsStore:r,owner:encodeURIComponent(e.params.user),slug:encodeURIComponent(e.params.list),showPrimaryFollowButtonOnCards:!1,trackScrollPage:d.trackScrollPage.bind(null,t,o,p,a),onUpdatesShown:d.trackUpdatesLoaded.bind(null,a)}),document.getElementById("primary"),e.store)}};t.default=h;var _=h.listListing;t.listListing=_},0xd7d257e89be6b:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.suggestion,o=e.source,r=e.sort,a=function(){(0,i.recordTrack)("calypso_reader_search_suggestion_click",{suggestion:t,source:o})},s={isSuggestion:1,q:t,sort:r},d="/read/search?"+(0,l.stringify)(s);return n.default.createElement("a",{onClick:a,href:d},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestion=a;var s=o(5896763357248615),n=r(s),l=o(0xb94cd99b0dce0),i=o(5055977180578371);a.propTypes={suggestion:s.PropTypes.string.isRequired},t.default=a},0xe2bc055f90e0b:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.discover=void 0;var a=o(5896763357248615),s=r(a),n=o(4883949902648912),l=r(n),i=o(4808587282202068),d=r(i),c=o(0x7c51ba9013a81),u=r(c),f=o(5055977180578371),p=o(0x7e3efd336d25d),m=o(8025093951496706),h=o(7082708682668568),_=r(h),g="Reader",b=function(e){o.e(8268671599452250,function(t){e(o(5795091658390897).__esModule?o(5795091658390897).default:o(5795091658390897))})},v={discover:function(e){var t=(0,l.default)("discover_blog_id"),o=d.default.sectionify(e.path),r=g+" > Site > "+t,a=(0,u.default)("site:"+t),n=(0,u.default)("featured:"+t),i="discover";(0,p.ensureStoreLoading)(a,e),(0,p.ensureStoreLoading)(n,e),(0,p.trackPageLoad)(o,r,i),(0,f.recordTrack)("calypso_reader_discover_viewed"),(0,m.renderWithReduxStore)(s.default.createElement(_.default,{require:b,key:"site-"+t,postsStore:a,siteId:+t,title:"Discover",trackScrollPage:p.trackScrollPage.bind(null,o,r,g,i),onUpdatesShown:p.trackUpdatesLoaded.bind(null,i),suppressSiteNameLink:!0,showPrimaryFollowButtonOnCards:!1,isDiscoverStream:!0,showBack:!1,className:"is-discover-stream is-site-stream",featuredStore:n}),document.getElementById("primary"),e.store)}};t.default=v;var y=v.discover;t.discover=y},0xe689774273af3:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=f.default.translate("Post not found");(0,g.setPageTitle)(context,e),(0,y.renderWithReduxStore)(c.default.createElement(_.default,{sidebarTitle:e,message:f.default.translate("Post Not Found")}),document.getElementById("primary"),context.store)}function s(e){var t=e.params.blog,o=e.params.post,r="/read/blogs/:blog_id/posts/:post_id",s=E+" > Blog Post > "+t+" > "+o,n=void 0;e.query.ref_blog&&e.query.ref_post&&(n={blogId:e.query.ref_blog,postId:e.query.ref_post}),(0,g.trackPageLoad)(r,s,"full_post"),(0,y.renderWithReduxStore)(c.default.createElement(v.default,{require:S,blogId:t,postId:o,referral:n,onClose:function(){m.default.back(e.lastRoute||"/")},onPostNotFound:a}),document.getElementById("primary"),e.store),(0,i.default)(function(){"undefined"!=typeof window&&window.scrollTo(0,0)})}function n(e){function t(){m.default.back(e.lastRoute||"/")}var o=e.params.feed,r=e.params.post,s="/read/feeds/:feed_id/posts/:feed_item_id",n=E+" > Feed Post > "+o+" > "+r;(0,g.trackPageLoad)(s,n,"full_post"),(0,y.renderWithReduxStore)(c.default.createElement(v.default,{require:P,feedId:o,postId:r,onClose:t,onPostNotFound:a}),document.getElementById("primary"),e.store),(0,i.default)(function(){"undefined"!=typeof window&&window.scrollTo(0,0)})}Object.defineProperty(t,"__esModule",{value:!0});var l=o(6269536571656272),i=r(l);t.blogPost=s,t.feedPost=n;var d=o(5896763357248615),c=r(d),u=o(7572476330282672),f=r(u),p=o(0x90ba166cd016c),m=r(p),h=o(0x98e53603349c4),_=r(h),g=o(0x7e3efd336d25d),b=o(7082708682668568),v=r(b),y=o(8025093951496706),E="Reader",S=function(e){o.e(5244718503154175,function(t){e(o(5830473668782421).__esModule?o(5830473668782421).default:o(5830473668782421))})},P=function(e){o.e(5244718503154175,function(t){e(o(5830473668782421).__esModule?o(5830473668782421).default:o(5830473668782421))})}},0xe96395f1eded3:function(e,t,o){"use strict";var r=o(8769427305820155),a=o(0x949dfcdc79aa8),s=o(6346297615794200),n=o(0xf0f4288728240),l=o(0xd0219df97eb97),i=null,d=null,c=1e3,u={leading:!1};e.exports={storePositions:l(function(e,t){i||setTimeout(function(){var e=s.get(i.url);n(i.positions,e)||r.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:i.url,positions:i.positions}),i=null},0),i={url:e,positions:t}},c,u),storeScroll:l(function(e,t){d||setTimeout(function(){var e=a.get(d.url);d.scrollPosition!==e&&r.handleViewAction({type:"SCROLL_CHANGED",url:d.url,scrollPosition:d.scrollPosition}),d=null},0),d={url:e,scrollPosition:t}},c,u)}},0xeacd74ab07451:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(0xbfad9041fa583),l=r(n),i=o(5055977180578371),d=o(466675662821495),c=s.default.createClass({displayName:"RecommendedPostsEmptyContent",shouldComponentUpdate:function(){return!1},recordAction:function(){(0,i.recordAction)("clicked_following_on_empty_recommended_posts"),(0,i.recordGaEvent)("Clicked Following on Empty Recommended Posts Stream"),(0,i.recordTrack)("calypso_reader_following_on_empty_Posts_stream_clicked")},recordSecondaryAction:function(){(0,i.recordAction)("clicked_discover_on_empty_recommended_posts"),(0,i.recordGaEvent)("Clicked Discover on Empty Recommended Posts Stream"),(0,i.recordTrack)("calypso_reader_discover_on_empty_Posts_stream_clicked")},render:function(){var e=s.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.translate("Back to Following")),t=(0,d.isDiscoverEnabled)()?s.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.translate("Explore Discover")):null;return s.default.createElement(l.default,{title:this.translate("No Post Recommendations yet"),line:this.translate("Posts we recommend based on your WordPress.com activity will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});t.default=c,e.exports=t.default},0xedc1374c5f43e:function(e,t,o){"use strict";var r=o(623310115397031);e.exports=function(e,t,o,a){r.ga.recordEvent(o,"Loaded Next Page","page",a),r.pageView.record(e,t),r.mc.bumpStat("newdash_pageviews","scroll")}},0xff4014b5895ee:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=s.default.createClass({displayName:"ListItemActions",mixins:[l.default],render:function(){return s.default.createElement("div",{className:"reader-list-item__actions"},this.props.children)}});t.default=i,e.exports=t.default},4745483946588702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.suggestions={en:["Anime","Art","Astrology","Batman","Beach","Beautiful","Beauty","Bloom","Books","Chickens","Cocktails","Colorado","Community Pool","Craft Beer","Cute","Delicious","DIY","Dogs","Elasticsearch","Fabulous","Farm","Fashion","Fitness","Flowers","Food","Funny","Garden","Groovy","Happy Place","Health","Hiking","Homeschool","Homesteading","Iceland","Inspiration","Juno","Life","Love","Makeup","Mathematics","Michigan","Monkeys","Motivation","Mountain Biking","Overwatch","Parenting","Philosophy","Photography","Poetry","Politics","Pride","Psychology","Recipe","Red Sox","Robots","Scenic","Sharks","Sous vide","Sunday Brunch","Technology","Tibet","Toddlers","Travel Backpacks","Travel","Vegan","Woodworking","WordPress","Writing","Yoga","Zombies"],es:["amor","arte","cine","fotografia","libros","literatura","moda","musica","poesia","viajes"],fr:["amour","art","beautÃ©","beauty","fashion","lifestyle","livres","maquillage","mode","photo","photographie","recette","vegan","voyage"],de:["beauty","bÃ¼cher","diy","essen","fashion","food","foto","kinder","mode","politik","reisen","vegan"]}},4856260263583821:function(e,t,o){"use strict";var r=o(0x5035497fe4bcb);e.exports.action=r({SUBSCRIBE_TO_POST_EMAILS:null,UNSUBSCRIBE_FROM_POST_EMAILS:null,UPDATE_POST_EMAIL_DELIVERY_FREQUENCY:null,RECEIVE_SUBSCRIBE_TO_POST_EMAILS:null,RECEIVE_UPDATE_POST_EMAIL_DELIVERY_FREQUENCY:null,RECEIVE_UNSUBSCRIBE_FROM_POST_EMAILS:null}),e.exports.error=r({UNABLE_TO_SUBSCRIBE:null,UNABLE_TO_UNSUBSCRIBE:null,UNABLE_TO_UPDATE_DELIVERY_FREQUENCY:null}),e.exports.state=r({SUBSCRIBED:null,UNSUBSCRIBED:null})},4961172632213781:function(e,t,o){function r(e,t,o){return void 0===o&&(o=t,t=void 0),void 0!==o&&(o=s(o),o=o===o?o:0),void 0!==t&&(t=s(t),t=t===t?t:0),a(s(e),t,o)}var a=o(5011596709648026),s=o(5491387498876009);e.exports=r},4966728244152936:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=me.default.getTotalSubscriptions();if(e<=0)return Ie;var t=(0,S.default)(Math.floor(Math.log(e)*Math.LOG2E*5-6),xe,Ie);return t}Object.defineProperty(t,"__esModule",{value:!0});var s=o(5630966280090368),n=r(s),l=o(0xccd53b671ebb6),i=r(l),d=o(5143893728007863),c=r(d),u=o(5880884711457125),f=r(u),p=o(8173823076638946),m=r(p),h=o(5369032381290393),_=r(h),g=o(0x3f19c8db6e3b5),b=r(g),v=o(0xeb8f73c122973),y=r(v),E=o(4961172632213781),S=r(E),P=o(0xf2d812b076e51),R=r(P),x=o(0x45d24eaab7654),I=r(x),k=o(8784809385079961),C=r(k),w=o(6269536571656272),T=r(w),N=o(5921998412115101),M=r(N),L=o(5896763357248615),U=r(L),A=o(0x8ae3881d6e8c2),B=r(A),F=o(6280957995252369),O=o(6405658974449263),D=r(O),H=o(0xbb797c0aee2c2),q=r(H),j=o(0xd8228a6a21374),K=o(0xc44c51e668874),W=r(K),V=o(6793391776206611),G=r(V),Y=o(0x6a460366b3571),z=r(Y),Q=o(0xba0ce520fef8a),$=r(Q),J=o(5710668435257744),X=r(J),Z=o(0x59d7cf1b5a3a9),ee=r(Z),te=o(0xb5f3313e32616),oe=r(te),re=o(0xafd0715572148),ae=r(re),se=o(0x4754024fdc2e4),ne=r(se),le=o(0xac26052d5c9f7),ie=r(le),de=o(8388263986922861),ce=r(de),ue=o(5583132255330029),fe=r(ue),pe=o(7126650478888089),me=r(pe),he=o(5136668318617341),_e=o(0x9c3966e997019),ge=r(_e),be=o(4883949902648912),ve=r(be),ye=o(0x4a4fb51cb0541),Ee=o(5008984818218632),Se=o(0x4e516016520f8),Pe=600,Re=46,xe=4,Ie=30,ke=function(e){function t(){var e,o,r,a;(0,c.default)(this,t);for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];return o=r=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(n))),Ce.call(r),a=o,(0,m.default)(r,a)}return(0,_.default)(t,e),(0,f.default)(t,[{key:"getStateFromStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.postsStore,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.recommendationsStore,o=(0,b.default)(e.get(),this.props.transformStreamItems),r=t?t.get():null;t&&(!r||r.length<o.length*(Se.RECS_PER_BLOCK/a()))&&(t.isFetchingNextPage()||(0,T.default)(function(){return(0,j.fetchNextPage)(t.id)}));var s=this.state&&this.state.items;return this.state&&o===this.state.posts&&r===this.state.recs||(s=(0,Se.injectRecommendations)(o,r,a())),this.props.shouldCombineCards&&(s=(0,Se.combineCards)(s)),{items:s,posts:o,recs:r,updateCount:e.getUpdateCount(),selectedPostKey:e.getSelectedPostKey(),isFetchingNextPage:e.isFetchingNextPage&&e.isFetchingNextPage(),isLastPage:e.isLastPage()}}},{key:"componentDidUpdate",value:function(e,t){(0,ye.keysAreEqual)(t.selectedPostKey,this.state.selectedPostKey)||(this.scrollToSelectedPost(!0),this.isPostFullScreen()&&(0,he.showSelectedPost)({store:this.props.postsStore,replaceHistory:!0}))}},{key:"scrollToSelectedPost",value:function(e){var t=-80,o=M.default.findDOMNode(this).querySelector(".is-selected");if(o){var r=document.documentElement;o.focus();var a=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),s=o.getBoundingClientRect(),n=parseInt(a+s.top+t,10);e?(0,ie.default)({x:0,y:n,duration:200}):window.scrollTo(0,n)}}},{key:"componentDidMount",value:function(){this.props.postsStore.on("change",this.updateState),
this.props.recommendationsStore&&this.props.recommendationsStore.on("change",this.updateState),this.props.resetCardExpansions(),ne.default.on("move-selection-down",this.selectNextItem),ne.default.on("move-selection-up",this.selectPrevItem),ne.default.on("open-selection",this.handleOpenSelection),ne.default.on("like-selection",this.toggleLikeOnSelectedPost),ne.default.on("go-to-top",this.goToTop),window.addEventListener("popstate",this._popstate),"scrollRestoration"in history&&(history.scrollRestoration="manual")}},{key:"componentWillUnmount",value:function(){this.props.postsStore.off("change",this.updateState),this.props.recommendationsStore&&this.props.recommendationsStore.off("change",this.updateState),ne.default.off("move-selection-down",this.selectNextItem),ne.default.off("move-selection-up",this.selectPrevItem),ne.default.off("open-selection",this.handleOpenSelection),ne.default.off("like-selection",this.toggleLikeOnSelectedPost),ne.default.off("go-to-top",this.goToTop),window.removeEventListener("popstate",this._popstate),"scrollRestoration"in history&&(history.scrollRestoration="auto")}},{key:"componentWillReceiveProps",value:function(e){e.postsStore!==this.props.postsStore&&(this.props.postsStore.off("change",this.updateState),this.props.recommendationsStore&&this.props.recommendationsStore.off("change",this.updateState),e.postsStore.on("change",this.updateState),e.recommendationsStore&&e.recommendationsStore.on("change",this.updateState),this.props.resetCardExpansions(),this.updateState(e.postsStore,e.recommendationsStore),this._list&&this._list.reset())}},{key:"toggleLikeAction",value:function(e,t){var o=W.default.isPostLikedByCurrentUser(e,t);null!==o&&G.default[o?"unlikePost":"likePost"](e,t)}},{key:"isPostFullScreen",value:function(){return!!window.location.pathname.match(/^\/read\/(blogs|feeds)\/([0-9]+)\/posts\/([0-9]+)$/i)}},{key:"getVisibleItemIndexes",value:function(){return this._list&&this._list.getVisibleItemIndexes({offsetTop:Re})}},{key:"render",value:function(){var e=this,t=this.props.postsStore,o=t.isLastPage()&&(!this.state.posts||0===this.state.posts.length),r=void 0,a=void 0;return o||t.hasRecentError("invalid_tag")?(r=this.props.emptyContent,!r&&this.props.showDefaultEmptyContentIfMissing&&(r=U.default.createElement(q.default,null)),a=!1):(r=U.default.createElement($.default,{ref:function(t){return e._list=t},className:"reader__content",items:this.state.items,lastPage:this.state.isLastPage,fetchingNextPage:this.state.isFetchingNextPage,guessedItemHeight:Pe,fetchNextPage:this.fetchNextPage,getItemRef:this.getPostRef,renderItem:this.renderPost,renderLoadingPlaceholders:this.renderLoadingPlaceholders}),a=!0),U.default.createElement(D.default,{className:(0,B.default)("following",this.props.className)},this.props.showMobileBackToSidebar&&U.default.createElement(X.default,null,U.default.createElement("h1",null,this.props.listName)),U.default.createElement(ae.default,{count:this.state.updateCount,onClick:this.showUpdates}),this.props.children,r,a&&t.isLastPage()&&this.state.posts.length?U.default.createElement("div",{className:"infinite-scroll-end"}):null)}}]),t}(U.default.Component);ke.propTypes={postsStore:L.PropTypes.object.isRequired,recommendationsStore:L.PropTypes.object,trackScrollPage:L.PropTypes.func.isRequired,suppressSiteNameLink:L.PropTypes.bool,showPostHeader:L.PropTypes.bool,showFollowInHeader:L.PropTypes.bool,onUpdatesShown:L.PropTypes.func,emptyContent:L.PropTypes.object,className:L.PropTypes.string,showDefaultEmptyContentIfMissing:L.PropTypes.bool,showPrimaryFollowButtonOnCards:L.PropTypes.bool,showMobileBackToSidebar:L.PropTypes.bool,placeholderFactory:L.PropTypes.func,followSource:L.PropTypes.string,isDiscoverStream:L.PropTypes.bool,shouldCombineCards:L.PropTypes.bool,transformStreamItems:L.PropTypes.func},ke.defaultProps={showPostHeader:!0,suppressSiteNameLink:!1,showFollowInHeader:!1,onUpdatesShown:I.default,className:"",showDefaultEmptyContentIfMissing:!0,showPrimaryFollowButtonOnCards:!0,showMobileBackToSidebar:!0,isDiscoverStream:!1,shouldCombineCards:ve.default.isEnabled("reader/combined-cards"),transformStreamItems:y.default};var Ce=function(){var e=this;this.state=this.getStateFromStores(),this.updateState=function(t){e.setState(e.getStateFromStores(t))},this._popstate=function(){e.state.selectedPostKey&&"manual"!==history.scrollRestoration&&e.scrollToSelectedPost(!1)},this.handleOpenSelection=function(){var t=e.props.postsStore.getSelectedPostKey();(0,he.showSelectedPost)({store:e.props.postsStore,postKey:t})},this.toggleLikeOnSelectedPost=function(){var t=e.props.postsStore.getSelectedPostKey(),o=void 0;t&&!t.isGap&&(o=oe.default.get(t));var r=ce.default.getXPostMetadata(o);return r.postURL?void(e.isPostFullScreen()&&r.blogId&&r.postId&&e.toggleLikeAction(r.blogId,r.postId)):void(z.default.shouldShowLikes(o)&&e.toggleLikeAction(o.site_ID,o.ID))},this.goToTop=function(){e.state.updateCount&&e.state.updateCount>0?e.showUpdates():(0,j.selectFirstItem)(e.props.postsStore.id)},this.selectNextItem=function(){if(e.state.selectedPostKey)return void(0,j.selectNextItem)(e.props.postsStore.id);var t=e.getVisibleItemIndexes(),o=e.state,r=o.items,a=o.posts;if(t&&t.length>0){for(var s=t[0].index,n=0;n<t.length;n++){var l=t[n];if(l.bounds.top>0&&!r[l.index].isRecommendationBlock){s=l.index;break}}var i=r[s];if(i.isCombination){var d={postId:i.postIds[0]};i.feedId?d.feedId=i.feedId:d.blogId=i.blogId,(0,j.selectItem)(e.props.postsStore.id,d)}var c=(0,C.default)(a,r[s],s);(0,ye.keysAreEqual)(c,e.state.selectedPostKey)?(0,j.selectNextItem)(e.props.postsStore.id):(0,j.selectItem)(e.props.postsStore.id,c)}},this.selectPrevItem=function(){e.state.selectedPostKey&&(0,j.selectPrevItem)(e.props.postsStore.id)},this.fetchNextPage=function(t){e.props.postsStore.isLastPage()||e.props.postsStore.isFetchingNextPage()||(t.triggeredByScroll&&e.props.trackScrollPage(e.props.postsStore.getPage()+1),(0,j.fetchNextPage)(e.props.postsStore.id))},this.showUpdates=function(){e.props.onUpdatesShown(),(0,j.showUpdates)(e.props.postsStore.id),e.props.recommendationsStore&&(0,j.shufflePosts)(e.props.recommendationsStore.id),e._list&&e._list.scrollToTop()},this.renderLoadingPlaceholders=function(){var t=e.state.posts.length?2:e.props.postsStore.getPerPage();return(0,R.default)(t,function(t){return e.props.placeholderFactory?e.props.placeholderFactory({key:"feed-post-placeholder-"+t}):U.default.createElement(ee.default,{key:"feed-post-placeholder-"+t})})},this.getPostRef=function(e){return(0,ye.keyToString)(e)},this.renderPost=function(t,o){var r=e.props.recommendationsStore&&e.props.recommendationsStore.id,a=e.props.postsStore.getSelectedPostKey(),s=!(!a||a.postId!==t.postId||a.blogId!==t.blogId&&a.feedId!==t.feedId),l=e.getPostRef(t),i=function(o){return(0,he.showSelectedPost)((0,n.default)({},o,{postKey:t.isCombination?(0,ye.keyForPost)(o):t,store:e.props.postsStore}))};return U.default.createElement(fe.default,{key:l,ref:l,isSelected:s,handleClick:i,postKey:t,store:e.props.postsStore,suppressSiteNameLink:e.props.suppressSiteNameLink,showPostHeader:e.props.showPostHeader,showFollowInHeader:e.props.showFollowInHeader,showPrimaryFollowButtonOnCards:e.props.showPrimaryFollowButtonOnCards,isDiscoverStream:e.props.isDiscoverStream,showSiteName:e.props.showSiteNameOnCards,followSource:e.props.followSource,blockedSites:e.props.blockedSites,index:o,selectedPostKey:a,recStoreId:r})}};t.default=(0,F.connect)(function(e){return{blockedSites:(0,ge.default)(e)}},{resetCardExpansions:Ee.resetCardExpansions})(ke),e.exports=t.default},4995811581636076:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.post,o=e.site,r=e.onSiteClick,a=e.followSource,s=(0,T.getStreamUrl)(t.feed_ID,t.site_ID),n=o&&o.title||t.site_name,l=!(0,N.areEqualIgnoringWhitespaceAndCase)(n,t.author.name);return h.default.createElement("div",{className:"reader-related-card-v2__meta"},h.default.createElement("a",{href:s,onClick:r},h.default.createElement(k.default,{user:t.author})),h.default.createElement("div",{className:"reader-related-card-v2__byline"},l&&h.default.createElement("span",{className:"reader-related-card-v2__byline-author"},h.default.createElement("a",{href:s,onClick:r,className:"reader-related-card-v2__link"},t.author.name)),h.default.createElement("span",{className:"reader-related-card-v2__byline-site"},h.default.createElement("a",{href:s,onClick:r,className:"reader-related-card-v2__link"},n))),h.default.createElement(w.default,{siteUrl:t.site_URL,followSource:a}))}function s(){return h.default.createElement("div",{className:"reader-related-card-v2__meta is-placeholder"},h.default.createElement(k.default,{user:null}),h.default.createElement("div",{className:"reader-related-card-v2__byline"},h.default.createElement("span",{className:"reader-related-card-v2__byline-author"},"Author name"),h.default.createElement("span",{className:"reader-related-card-v2__byline-site"},"Site title")))}function n(){return h.default.createElement(x.default,{className:"reader-related-card-v2 is-placeholder"},h.default.createElement(s,null),h.default.createElement("a",{className:"reader-related-card-v2__post reader-related-card-v2__link-block"},h.default.createElement("div",{className:"reader-related-card-v2__featured-image"}),h.default.createElement("div",{className:"reader-related-card-v2__site-info"},h.default.createElement("h1",{className:"reader-related-card-v2__title"},"Title"),h.default.createElement("div",{className:"reader-related-card-v2__excerpt post-excerpt"},"Excerpt"))))}function l(e){var t=e.post,o=e.site,r=e.siteId,s=e.onPostClick,l=void 0===s?p.default:s,i=e.onSiteClick,c=void 0===i?p.default:i,f=e.followSource;if(!t||"minimal"===t._state||"pending"===t._state)return h.default.createElement(n,null);var m=t.canonical_image,_=(0,T.getPostUrl)(t),g=(0,b.default)("reader-related-card-v2",{"has-thumbnail":!!m,"has-excerpt":t.excerpt&&t.excerpt.length>1}),v=(0,u.default)(l,t),y=(0,u.default)(c,t),E=t.canonical_media,S=void 0;return S=E?"video"===E.mediaType?h.default.createElement(L.default,(0,d.default)({},E,{videoEmbed:E,className:"reader-related-card-v2__featured-image",href:_,onThumbnailClick:v,allowPlaying:!1})):h.default.createElement(A.default,{imageUrl:E.src,imageWidth:B,onClick:v,href:_,className:"reader-related-card-v2__featured-image"}):null,h.default.createElement(x.default,{className:g},r&&!o&&h.default.createElement(P.default,{siteId:r}),h.default.createElement(a,{post:t,site:o,onSiteClick:y,followSource:f}),S,h.default.createElement("a",{href:_,className:"reader-related-card-v2__post reader-related-card-v2__link-block",onClick:v},h.default.createElement("div",{className:"reader-related-card-v2__site-info"},h.default.createElement("h1",{className:"reader-related-card-v2__title"},t.title),h.default.createElement("div",{className:"reader-related-card-v2__excerpt post-excerpt"},m?t.short_excerpt:t.better_excerpt_no_html))))}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedRelatedPostCard=void 0;var i=o(5630966280090368),d=r(i),c=o(5477852257145688),u=r(c),f=o(0x45d24eaab7654),p=r(f);t.RelatedPostCard=l;var m=o(5896763357248615),h=r(m),_=o(6280957995252369),g=o(0x8ae3881d6e8c2),b=r(g),v=o(7572476330282672),y=o(0x45e7b9b828eff),E=o(0x430fac3f1c1a7),S=o(702694371083037),P=r(S),R=o(5628363501489590),x=r(R),I=o(0x68ccbe1ec01b),k=r(I),C=o(4774734777553710),w=r(C),T=o(0x5a9979b646b21),N=o(5274104755166711),M=o(6290799831194968),L=r(M),U=o(509381197998965),A=r(U),B=385,F=t.LocalizedRelatedPostCard=(0,v.localize)(l);t.default=(0,_.connect)(function(e,t){var o=t.post,r=(0,y.getPost)(e,o),a=o&&o.site_ID,s=a&&(0,E.getSite)(e,a);return{post:r,site:s,siteId:a}})(F)},5428292591472269:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={IN_STREAM_RECOMMENDATION:"in-stream-recommendation",EMPTY_SEARCH_RECOMMENDATIONS:"empty-search-rec",SEARCH_RESULTS:"search-results",READER_SUBSCRIPTIONS:"reader-subscriptions",READER_FEED_SEARCH:"reader-feed-search-result",COMBINED_CARD:"reader-combined-card"};t.default=o;var r=o.IN_STREAM_RECOMMENDATION,a=o.EMPTY_SEARCH_RECOMMENDATIONS,s=o.SEARCH_RESULTS,n=o.READER_SUBSCRIPTIONS,l=o.READER_FEED_SEARCH,i=o.COMBINED_CARD;t.IN_STREAM_RECOMMENDATION=r,t.EMPTY_SEARCH_RECOMMENDATIONS=a,t.SEARCH_RESULTS=s,t.READER_SUBSCRIPTIONS=n,t.READER_FEED_SEARCH=l,t.COMBINED_CARD=i},5443845313196987:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagListing=void 0;var a=o(5896763357248615),s=r(a),n=o(463848289870480),l=r(n),i=o(0x7c51ba9013a81),d=r(i),c=o(5055977180578371),u=o(0x7e3efd336d25d),f=o(8025093951496706),p=o(7082708682668568),m=r(p),h="Reader",_=function(e){o.e(5244267052886103,function(t){e(o(644697867262439).__esModule?o(644697867262439).default:o(644697867262439))})},g={tagListing:function(e){var t="/tag/:slug",o=h+" > Tag > "+e.params.tag,r=(0,l.default)(e.params.tag).toLowerCase().replace(/\s+/g,"-").replace(/-{2,}/g,"-"),a=encodeURIComponent(r).toLowerCase(),n=(0,d.default)("tag:"+r),i="topic";(0,u.ensureStoreLoading)(n,e),(0,u.trackPageLoad)(t,o,i),(0,c.recordTrack)("calypso_reader_tag_loaded",{tag:r}),(0,f.renderWithReduxStore)(s.default.createElement(m.default,{require:_,key:"tag-"+a,postsStore:n,tag:a,decodedTag:r,trackScrollPage:u.trackScrollPage.bind(null,t,o,h,i),onUpdatesShown:u.trackUpdatesLoaded.bind(null,i),showBack:!!e.lastRoute,showPrimaryFollowButtonOnCards:!0}),document.getElementById("primary"),e.store)}};t.default=g;var b=g.tagListing;t.tagListing=b},5583132255330029:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5630966280090368),s=r(a),n=o(0xccd53b671ebb6),l=r(n),i=o(5143893728007863),d=r(i),c=o(5880884711457125),u=r(c),f=o(8173823076638946),p=r(f),m=o(5369032381290393),h=r(m),_=o(6718701541658404),g=r(_),b=o(5059747709250767),v=r(b),y=o(6269536571656272),E=r(y),S=o(5896763357248615),P=r(S),R=o(0xb5f3313e32616),x=r(R),I=o(7021848674009999),k=r(I),C=o(0x59d7cf1b5a3a9),w=r(C),T=o(515328459423761),N=r(T),M=o(0x6e7860358052d),L=r(M),U=o(0x55bbb5cedc8f7),A=r(U),B=o(5136668318617341),F=o(6143673699798161),O=r(F),D=o(8388263986922861),H=r(D),q=o(773474709932065),j=r(q),K=o(7541518078532830),W=r(K),V=o(5428292591472269),G=o(8970383425370202),Y=r(G),z=o(8272192221951336),Q=r(z),$=o(0x96de46e7bf4e4),J=r($),X=(0,Q.default)(Y.default),Z=function(e){function t(){var e,o,r,a;(0,d.default)(this,t);for(var s=arguments.length,n=Array(s),i=0;i<s;i++)n[i]=arguments[i];return o=r=(0,p.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(n))),r.state={post:r.getPostFromStore()},r.updatePost=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=r.getPostFromStore(e);t!==r.state.post&&r.setState({post:t})},a=o,(0,p.default)(r,a)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getPostFromStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.postKey.isRecommendationBlock||e.postKey.isCombination||e.postKey.isGap)return null;var t=x.default.get(e.postKey);return t&&"minimal"!==t._state||(0,E.default)(function(){return k.default.fetchPost(e.postKey)}),t}},{key:"componentWillMount",value:function(){x.default.on("change",this.updatePost)}},{key:"componentWillUnmount",value:function(){x.default.off("change",this.updatePost)}},{key:"componentWillReceiveProps",value:function(e){this.updatePost(e)}},{key:"shouldComponentUpdate",value:function(e,t){var o=(0,v.default)(this.props,"handleClick"),r=(0,v.default)(e,"handleClick"),a=this.state.post!==t.post||!(0,B.shallowEquals)(o,r);return a}},{key:"render",value:function(){var e=this.state.post,t=this.props,o=t.postKey,r=t.selectedPostKey,a=t.recStoreId;if(o.isRecommendationBlock)return P.default.createElement(O.default,{recommendations:o.recommendations,index:o.index,storeId:a,followSource:V.IN_STREAM_RECOMMENDATION});if(o.isCombination)return P.default.createElement(X,{postKey:o,index:this.props.index,onClick:this.props.handleClick,selectedPostKey:r,followSource:V.COMBINED_CARD,showFollowButton:this.props.showPrimaryFollowButtonOnCards});if(o.isRecommendation)return P.default.createElement(J.default,{post:e,site:o});if(o.isGap)return P.default.createElement(L.default,{gap:o,store:this.props.store,selected:this.props.isSelected,handleClick:this.props.handleClick});if(!e||"minimal"===e._state||"pending"===e._state)return P.default.createElement(w.default,null);if("error"===e._state)return P.default.createElement(N.default,{post:e});if((0,g.default)(this.props.blockedSites,+o.blogId))return P.default.createElement(j.default,{post:e});if((0,D.isXPost)(e)){var n=H.default.getXPostMetadata(e),l=this.props.store.getSitesCrossPostedTo(n.commentURL||n.postURL);return P.default.createElement(A.default,(0,s.default)({},(0,v.default)(this.props,"store"),{xPostedTo:l,xMetadata:n,post:e,postKey:o}))}var i=this.props.store.getSitesCrossPostedTo(e.URL);return P.default.createElement(W.default,(0,s.default)({},(0,v.default)(this.props,"store"),{post:e,xPostedTo:i}))}}]),t}(P.default.PureComponent);Z.propTypes={postKey:S.PropTypes.object.isRequired,isDiscoverStream:S.PropTypes.bool,handleClick:S.PropTypes.func,recStoreId:S.PropTypes.string},t.default=Z,e.exports=t.default},5628363501489590:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(8907951692841672),s=r(a),n=o(5896763357248615),l=r(n),i=o(0x8ae3881d6e8c2),d=r(i),c=o(6881822108913591),u=r(c);t.default=l.default.createClass({displayName:"CompactCard",render:function(){var e=(0,s.default)({},this.props,{className:(0,d.default)(this.props.className,"is-compact")});return l.default.createElement(u.default,e,this.props.children)}}),e.exports=t.default},5656342622524108:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.recommendedPosts=t.recommendedForYou=void 0;var a=o(5896763357248615),s=r(a),n=o(7572476330282672),l=r(n),i=o(0xedc1374c5f43e),d=r(i),c=o(5577740099853543),u=o(0x7e3efd336d25d),f=o(7888364790174548),p=r(f),m=o(8125586856607725),h=r(m),_=o(4808587282202068),g=r(_),b=o(0x7c51ba9013a81),v=r(b),y=o(8025093951496706),E="Reader",S={recommendedForYou:function(e){var t="/recommendations",o=E+" > Recommended Sites For You",r="recommendations_for_you";(0,y.renderWithReduxStore)(s.default.createElement(p.default,{trackScrollPage:d.default.bind(null,t,o,E,r)}),document.getElementById("primary"),e.store),(0,u.trackPageLoad)(t,o,r),e.store.dispatch((0,c.setDocumentHeadTitle)(l.default.translate("Recommended Sites For You â€¹ Reader")))},recommendedPosts:function(e){var t=g.default.sectionify(e.path),o="",r=null,a="";switch(t){case"/recommendations/cold":o=E+" > Coldstart Posts",r=(0,v.default)("cold_posts"),a="coldstart_posts";break;case"/recommendations/cold1w":o=E+" > Coldstart+1w Posts",r=(0,v.default)("cold_posts_1w"),a="coldstart_posts_1w";break;case"/recommendations/cold2w":o=E+" > Coldstart+2w Posts",r=(0,v.default)("cold_posts_2w"),a="coldstart_posts_2w";break;case"/recommendations/cold4w":o=E+" > Coldstart+4w Posts",r=(0,v.default)("cold_posts_4w"),a="coldstart_posts_4w";break;case"/recommendations/coldtopics":o=E+" > Coldstart Diverse Posts",r=(0,v.default)("cold_posts_topics"),a="coldstart_posts_topics";break;default:o=E+" > Recommended Posts",r=(0,v.default)("custom_recs_posts_with_images"),a="custom_recs_posts_with_images"}(0,u.ensureStoreLoading)(r,e),(0,u.trackPageLoad)(t,o,a),(0,y.renderWithReduxStore)(s.default.createElement(h.default,{key:"recommendations_posts",postsStore:r,trackScrollPage:d.default.bind(null,t,o,E,a),onUpdatesShown:u.trackUpdatesLoaded.bind(null,a),showBack:(0,u.userHasHistory)(e)}),document.getElementById("primary"),e.store)}};t.default=S;var P=S.recommendedForYou,R=S.recommendedPosts;t.recommendedForYou=P,t.recommendedPosts=R},5710668435257744:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(6280957995252369),l=o(301929001539288),i=s.default.createClass({displayName:"MobileBackToSidebar",toggleSidebar:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")},render:function(){return s.default.createElement("div",{className:"mobile-back-to-sidebar",onClick:this.toggleSidebar},s.default.createElement("svg",{className:"gridicon gridicon-back-arrow mobile-back-to-sidebar__icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},s.default.createElement("g",null,s.default.createElement("path",{d:"M8.886 4L7 5.886 13.114 12 7 18.114 8.886 20l8-8"}))),s.default.createElement("span",{className:"mobile-back-to-sidebar__content"},this.props.children))}});t.default=(0,n.connect)(null,{setLayoutFocus:l.setLayoutFocus})(i),e.exports=t.default},5833370548896587:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){e.params.team="a8c",t()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.isEnabled("reader")&&((0,n.default)("/",l.preloadReaderBundle,l.loadSubscriptions,l.initAbTests,l.updateLastRoute,l.sidebar,l.following),(0,n.default)("/read/following","/"),(0,n.default)("/read","/"),(0,n.default)("/read/blogs","/"),(0,n.default)("/read/feeds","/"),(0,n.default)("/read/blog","/"),(0,n.default)("/read/post","/"),(0,n.default)("/read/feed","/"),(0,n.default)("/read/*",l.preloadReaderBundle,l.loadSubscriptions,l.initAbTests),(0,n.default)("/read/blog/feed/:feed_id",l.legacyRedirects),(0,n.default)("/read/feeds/:feed_id/posts",l.incompleteUrlRedirects),(0,n.default)("/read/feeds/:feed_id",l.updateLastRoute,l.prettyRedirects,l.sidebar,l.feedDiscovery,l.feedListing),(0,n.default)("/read/blog/id/:blog_id",l.legacyRedirects),(0,n.default)("/read/blogs/:blog_id/posts",l.incompleteUrlRedirects),(0,n.default)("/read/blogs/:blog_id",l.updateLastRoute,l.prettyRedirects,l.sidebar,l.blogListing)),(0,n.default)("/read/a8c",l.updateLastRoute,l.sidebar,a,l.readA8C)};var s=o(0x90ba166cd016c),n=r(s),l=o(8627024004433354),i=o(4883949902648912),d=r(i);e.exports=t.default},5879318654741993:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(19189154744278),l=r(n),i=o(0x45d24eaab7654),d=r(i),c=s.default.createClass({displayName:"ListItemTitle",mixins:[l.default],getDefaultProps:function(){return{onClick:d.default}},render:function(){return s.default.createElement("h2",{className:"reader-list-item__title",onClick:this.props.onClick},this.props.children)}});t.default=c,e.exports=t.default},6143673699798161:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o){(0,N.recordTrackForPost)("calypso_reader_recommended_post_dismissed",o,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_dismiss"),(0,U.dismissPost)(t,o)}function s(e,t){(0,N.recordTrackForPost)("calypso_reader_recommended_site_clicked",t,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_site_click")}function n(e,t){(0,N.recordTrackForPost)("calypso_reader_recommended_post_clicked",t,{recommendation_source:"in-stream",ui_position:e}),(0,N.recordAction)("in_stream_rec_post_click")}Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendedPosts=void 0;var l=o(0xccd53b671ebb6),i=r(l),d=o(5143893728007863),c=r(d),u=o(5880884711457125),f=r(u),p=o(8173823076638946),m=r(p),h=o(5369032381290393),_=r(h),g=o(6442230718320275),b=r(g),v=o(5477852257145688),y=r(v),E=o(0x3f19c8db6e3b5),S=r(E),P=o(5896763357248615),R=r(P),x=o(7572476330282672),I=o(0xa505046780b0c),k=r(I),C=o(4995811581636076),w=o(0xb5f3313e32616),T=r(w),N=o(5055977180578371),M=o(7186610166862683),L=r(M),U=o(0xd8228a6a21374),A=t.RecommendedPosts=function(e){function t(){var e,o,r,a;(0,c.default)(this,t);for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];return o=r=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(n))),r.state={posts:(0,S.default)(r.props.recommendations,T.default.get.bind(T.default))},r.updatePosts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=(0,S.default)(e.recommendations,T.default.get.bind(T.default));(0,b.default)(t,function(e,t){return e!==r.state.posts[t]})&&r.setState({posts:t})},a=o,(0,m.default)(r,a)}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){T.default.on("change",this.updatePosts)}},{key:"componentWillReceiveProps",value:function(e){this.updatePosts(e)}},{key:"componentWillUnmount",value:function(){T.default.off("change",this.updatePosts)}},{key:"render",value:function(){var e=this;return R.default.createElement("div",{className:"reader-stream__recommended-posts"},R.default.createElement("h1",{className:"reader-stream__recommended-posts-header"},R.default.createElement(k.default,{icon:"thumbs-up",size:18}),"Â ",this.props.translate("Recommended Posts")),R.default.createElement("ul",{className:"reader-stream__recommended-posts-list"},(0,S.default)(this.state.posts,function(t,o){var r=e.props.index+o;return R.default.createElement("li",{className:"reader-stream__recommended-posts-list-item",key:t.global_ID},R.default.createElement("div",{className:"reader-stream__recommended-post-dismiss"},R.default.createElement(L.default,{borderless:!0,title:e.props.translate("Dismiss this recommendation"),onClick:(0,y.default)(a,r,e.props.storeId,t)},R.default.createElement(k.default,{icon:"cross",size:14}))),R.default.createElement(C.RelatedPostCard,{post:t,onPostClick:(0,y.default)(n,r),onSiteClick:(0,y.default)(s,r),followSource:e.props.followSource}))})))}}]),t}(R.default.PureComponent);A.propTypes={index:P.PropTypes.number,translate:P.PropTypes.func,recommendations:P.PropTypes.array},t.default=(0,x.localize)(A)},6150185289089703:function(e,t,o){"use strict";function r(e){if(e&&e.blog_id){var t=b[e.blog_id];if(t)return a(e.blog_id,y);var o=y.merge(e);return b[e.blog_id]=o,!0}}function a(e,t){if(e&&t){var o=b[e];if(o){var r=o.merge(t);return r!==o&&(b[e]=r,!0)}}}function s(e){if(e){if(!E.getSubscription(e))return!0;var t={state:_.UNSUBSCRIBED};return a(e,t),!0}}var n=o(8769427305820155),l=o(0xe102ee62a0e6b),i=o(8784809385079961),d=o(8640881565075096),c=o(4881459746320230),u=o(0xe923f90582867),f=o(711528138733345),p=o(0xf2ce944f0fc89),m=o(4856260263583821).action,h=o(4856260263583821).error,_=o(4856260263583821).state,g=o(0xde40a858eec64).action,b={},v=[],y=u.Map({state:_.SUBSCRIBED}),E={receiveSubscribe:function(e){var t="instantly";e.delivery_frequency&&(t=e.delivery_frequency);var o={blog_id:e.blog_id,delivery_frequency:t};r(o)&&E.emit("change")},receiveUnsubscribe:function(e){s(e.blog_id)&&E.emit("change")},receiveSubscribeResponse:function(e){var t=void 0;return!e.error&&e.data&&e.data.subscribed?(E.removeErrorsForBlog(e.blog_id),e.data.subscription&&(t=e.data.subscription,t.state=_.SUBSCRIBED,a(e.data.subscription.blog_id,t),E.emit("add",t)),void E.emit("change")):(v.push({blogId:e.blog_id,errorType:h.UNABLE_TO_SUBSCRIBE,timestamp:Date.now()}),void(s(e.blog_id)&&E.emit("change")))},receiveUnsubscribeResponse:function(e){return e.error||!e.data||e.data.subscribed?(v.push({blogId:e.blog_id,errorType:h.UNABLE_TO_UNSUBSCRIBE,timestamp:Date.now()}),void(r({blog_id:e.blog_id})&&E.emit("change"))):(E.removeErrorsForBlog(e.blog_id),void E.emit("change"))},receiveUpdateDeliveryFrequency:function(e){var t={blog_id:e.blog_id,delivery_frequency:e.delivery_frequency};E.getSubscription(e.blog_id)?a(e.blog_id,t):r(t)},receiveUpdateDeliveryFrequencyResponse:function(e){if(!e.error&&e.data.success&&e.data.subscribed)return E.removeErrorsForBlog(e.blog_id),void E.emit("change");v.push({blogId:e.blog_id,errorType:h.UNABLE_TO_UPDATE_DELIVERY_FREQUENCY,timestamp:Date.now()});var t=d(e,"data.subscription.delivery_frequency");t&&a(e.blog_id,{delivery_frequency:t})&&E.emit("change")},getSubscription:function(e){var t=b[e];if(t&&t.get("state")===_.SUBSCRIBED)return t},getIsSubscribed:function(e){return!!E.getSubscription(e)},getLastError:function(){return c(v)},getLastErrorByBlog:function(e){return i(v,{blogId:e})},removeErrorsForBlog:function(e){var t=l(v,{blogId:e});return t.length!==v.length&&(v=t,!0)},dismissError:function(e){this.removeErrorsForSiteUrl(e.data.URL),E.emit("change")},clearErrors:function(){v=[]},clearSubscriptions:function(){b={}},receiveFeedSubscriptions:function(e){var t=0,o=void 0;e.data&&(!e.data||!e.data.errors&&e.data.subscriptions)&&(f(e.data.subscriptions,function(e){o=d(e,"delivery_methods.email"),o&&o.send_posts&&(r({blog_id:e.blog_ID,delivery_frequency:o.post_delivery_frequency}),t++)}),t>0&&E.emit("change"))},receiveFeedUnfollow:function(e){e.blogId&&(s(e.blogId),E.emit("change"))}};p(E),E.setMaxListeners(200),E.dispatchToken=n.register(function(e){var t=e.action;if(t)switch(t.type){case m.SUBSCRIBE_TO_POST_EMAILS:E.receiveSubscribe(t);break;case m.UNSUBSCRIBE_FROM_POST_EMAILS:E.receiveUnsubscribe(t);break;case m.RECEIVE_SUBSCRIBE_TO_POST_EMAILS:E.receiveSubscribeResponse(t);break;case m.RECEIVE_UNSUBSCRIBE_FROM_POST_EMAILS:E.receiveUnsubscribeResponse(t);break;case m.UPDATE_POST_EMAIL_DELIVERY_FREQUENCY:E.receiveUpdateDeliveryFrequency(t);break;case m.RECEIVE_UPDATE_POST_EMAIL_DELIVERY_FREQUENCY:E.receiveUpdateDeliveryFrequencyResponse(t);break;case g.RECEIVE_FEED_SUBSCRIPTIONS:E.receiveFeedSubscriptions(t);break;case g.RECEIVE_UNFOLLOW_READER_FEED:E.receiveFeedUnfollow(t)}}),e.exports=E},6346297615794200:function(e,t,o){"use strict";function r(e,t){var o=d.get(e);a("comparing positions:",e,o,t),n(o,t)||(a("storing values:",e,t),i[e]=t,d.emit("change"))}var a=o(4675954658966525)("calypso:infinite-list:positions-store"),s=o(8769427305820155),n=o(0xf0f4288728240),l=o(0xf2ce944f0fc89),i={},d={get:function(e){return a("positions-store:get(): ",e,i),i[e]}};l(d),d.dispatchToken=s.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":r(t.url,t.positions)}}),e.exports=d},6405658974449263:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0xccd53b671ebb6),s=r(a),n=o(5143893728007863),l=r(n),i=o(5880884711457125),d=r(i),c=o(8173823076638946),u=r(c),f=o(5369032381290393),p=r(f),m=o(5896763357248615),h=r(m),_=o(0x6ee56fc1c50a2),g=r(_),b=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){document.querySelector("body").classList.add("is-reader-page")}},{key:"componentWillUnmount",value:function(){document.querySelector("body").classList.remove("is-reader-page")}},{key:"render",value:function(){return h.default.createElement(g.default,this.props)}}]),t}(h.default.Component);t.default=b,e.exports=t.default},6478121672427860:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(7572476330282672),l=o(6280957995252369),i=o(0xa505046780b0c),d=r(i),c=o(0x73816910012b8),u=o(8279740666177522),f=function(e){if(e.hasGraduatedRecommendations||null===e.hasGraduatedRecommendations)return null;var t=function(){e.requestGraduate()};return s.default.createElement("header",{className:"following__intro"},s.default.createElement("div",{className:"following__intro-header"},s.default.createElement("div",{className:"following__intro-copy"},e.translate("{{strong}}Welcome!{{/strong}} Reader is a custom magazine. {{link}}Follow your favorite sites{{/link}} and their latest posts will appear here. {{span}}Read, like, and comment in a distraction-free environment.{{/span}}",{
components:{link:s.default.createElement("a",{href:"/following/edit"}),strong:s.default.createElement("strong",null),span:s.default.createElement("span",{className:"following__intro-copy-hidden"})}})),s.default.createElement("div",{className:"following__intro-close",onClick:t,title:e.translate("Close"),"aria-label":e.translate("Close")},s.default.createElement(d.default,{icon:"cross-circle",className:"following__intro-close-icon",title:e.translate("Close")}),s.default.createElement("span",{className:"following__intro-close-icon-bg"}))))};t.default=(0,l.connect)(function(e){return{hasGraduatedRecommendations:(0,c.hasGraduatedRecommendations)(e)}},{requestGraduate:u.requestGraduate})((0,n.localize)(f)),e.exports=t.default},6719762354843784:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return"feed-lookup-"+e}function s(e){var t=a(e);return(0,p.isRequestInflight)(t)?_.get(e):h.default.undocumented().discoverFeed({url:e})}function n(e){var t=_.get(e);return t?t:(t=s(e).then(function(e){if(!(0,c.default)(e.feeds)){var t=(0,i.default)(e.feeds);if(!(0,c.default)(t.feed_ID))return t.feed_ID}}),_.set(e,t),t)}var l=o(6897165321438721),i=r(l),d=o(0x75ac779472ba8),c=r(d),u=o(7104773510959818),f=r(u),p=o(8788218967405503),m=o(8478035041892969),h=r(m),_=new f.default(10);e.exports=n},7092894564781872:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5630966280090368),s=r(a),n=o(5896763357248615),l=r(n),i=o(4966728244152936),d=r(i),c=o(8394616293845765),u=r(c),f=o(4672980129057221),p=r(f),m=l.default.createClass({displayName:"LikedStream",render:function(){var e=this.translate("My Likes"),t=l.default.createElement(u.default,null);return l.default.createElement(d.default,(0,s.default)({},this.props,{listName:e,emptyContent:t,showFollowInHeader:!0}),l.default.createElement(p.default,{title:this.translate("%s â€¹ Reader",{args:e})}))}});t.default=m,e.exports=t.default},7106554556292383:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/discover",l.preloadReaderBundle,l.updateLastRoute,l.loadSubscriptions,l.initAbTests,l.sidebar,n.discover)};var a=o(0x90ba166cd016c),s=r(a),n=o(0xe2bc055f90e0b),l=o(8627024004433354);e.exports=t.default},7167063534841540:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ACTION_RECEIVE_SITE_RECOMMENDATIONS="receive_site_recommendations",t.ACTION_RECEIVE_SITE_RECOMMENDATIONS_ERROR="receive_site_recommendations_error"},7541518078532830:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5630966280090368),s=r(a),n=o(0xccd53b671ebb6),l=r(n),i=o(5143893728007863),d=r(i),c=o(5880884711457125),u=r(c),f=o(8173823076638946),p=r(f),m=o(5369032381290393),h=r(m),_=o(5059747709250767),g=r(_),b=o(8640881565075096),v=r(b),y=o(5896763357248615),E=r(y),S=o(6280957995252369),P=o(8554610040272167),R=r(P),x=o(0x430fac3f1c1a7),I=o(0x810bf47f2a615),k=o(702694371083037),C=r(k),w=o(0x8f4b4b01b611c),T=r(w),N=o(0xb5f3313e32616),M=r(N),L=o(0x7a27b5b6e9228),U=r(L),A=o(5055977180578371),B=o(466675662821495),F=o(5136668318617341),O=function(e){function t(){var e,o,r,a;(0,d.default)(this,t);for(var n=arguments.length,i=Array(n),c=0;c<n;c++)i[c]=arguments[c];return o=r=(0,p.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(i))),r.onClick=function(e){var t=void 0;(0,v.default)(r.props,"discoverPick.post")&&(t=(0,s.default)({},e,{referral:{blogId:B.discoverBlogId,postId:r.props.post.ID}})),r.props.handleClick&&r.props.handleClick({post:t||e})},r.onCommentClick=function(){(0,A.recordAction)("click_comments"),(0,A.recordGaEvent)("Clicked Post Comment Button"),(0,A.recordTrackForPost)("calypso_reader_post_comments_button_clicked",r.props.post),r.props.handleClick&&r.props.handleClick({post:r.props.post,comments:!0})},a=o,(0,p.default)(r,a)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.post,t=e.feed_ID,o=e.site_ID,r=e.is_external,a=e.is_discover,s=void 0;if(a){var n=(0,B.getSourceData)(this.props.post),l=n.blogId;s=l}return E.default.createElement(R.default,{post:this.props.post,discoverPick:this.props.discoverPick,site:this.props.site,feed:this.props.feed,onClick:this.onClick,onCommentClick:this.onCommentClick,isSelected:this.props.isSelected,showPrimaryFollowButton:this.props.showPrimaryFollowButtonOnCards,followSource:this.props.followSource,showSiteName:this.props.showSiteName,isDiscoverStream:this.props.isDiscoverStream,postKey:this.props.postKey},t&&E.default.createElement(T.default,{feedId:t,includeMeta:!1}),!r&&o&&E.default.createElement(C.default,{siteId:+o,includeMeta:!1}),s&&E.default.createElement(C.default,{siteId:s,includeMeta:!1}))}}]),t}(E.default.Component);O.displayName="ReaderPostCardAdapter";var D=(0,S.connect)(function(e,t){var o=(0,v.default)(t,"post.site_ID"),r=(0,v.default)(t,"post.is_external"),a=(0,v.default)(t,"post.feed_ID"),s=null;if((0,v.default)(t,"post.is_discover")){var n=(0,v.default)(t,"discoverPick.post");if(t.isDiscoverStream){var l=(0,B.getSourceData)(t.post),i=l.blogId,d=i?(0,x.getSite)(e,i):null;(n||d)&&(s={post:n,site:d})}else n&&(s={post:n})}return{site:r?null:(0,x.getSite)(e,o),feed:(0,I.getFeed)(e,a),discoverPick:s}})(O),H=function(e){function t(e){(0,d.default)(this,t);var o=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return o.updateState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.getStateFromStores();o.smartSetState(e)},o.state=o.getStateFromStores(e),o.smartSetState=U.default,o}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.post,o=t.is_discover&&!(0,B.isDiscoverSitePick)(t),r=null;return o&&(r={post:M.default.get((0,B.getSourceData)(t))}),{discoverPick:r}}},{key:"componentWillMount",value:function(){M.default.on("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.updateState(this.getStateFromStores(e))}},{key:"componentWillUnmount",value:function(){M.default.off("change",this.updateState)}},{key:"shouldComponentUpdate",value:function(e,t){var o=(0,g.default)(this.props,"handleClick"),r=(0,g.default)(e,"handleClick"),a=this.props!==e&&!(0,F.shallowEquals)(o,r)||(0,v.default)(this.state,"discoverPick.post")!==(0,v.default)(t,"discoverPick.post");return a}},{key:"render",value:function(){return E.default.createElement(D,(0,s.default)({},this.props,{discoverPick:this.state.discoverPick}))}}]),t}(E.default.Component);H.displayName="ReaderPostCardAdapterFluxContainer",t.default=H,e.exports=t.default},7593180263092834:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("/activities/likes",l.preloadReaderBundle,l.loadSubscriptions,l.initAbTests,l.updateLastRoute,l.sidebar,n.likes)};var a=o(0x90ba166cd016c),s=r(a),n=o(8539027853593278),l=o(8627024004433354);e.exports=t.default},7888364790174548:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(0xf2d812b076e51),l=r(n),i=o(0x8f7d57519e61b),d=r(i),c=o(0x6ee56fc1c50a2),u=r(c),f=o(5710668435257744),p=r(f),m=o(0xba0ce520fef8a),h=r(m),_=o(0x6f463dc783e82),g=r(_),b=o(350709929747314),v=r(b),y=o(5879318654741993),E=r(y),S=o(0x4d2178c8fb1bf),P=r(S),R=o(0xff4014b5895ee),x=r(R),I=o(0xa72c09d16709f),k=r(I),C=o(4774734777553710),w=r(C),T=o(424444101704479),N=r(T),M=o(0x73aee47803fc7),L=o(8219418208812689),U=r(L),A=o(5055977180578371),B=o(0x5a9979b646b21),F=o(6729227089147156),O=s.default.createClass({displayName:"RecommendedForYou",getInitialState:function(){var e=this.getRecommendations(),t=!1;return 0===e.length&&((0,M.fetchMore)(),t=!0),{recommendations:e,fetching:t,page:1}},getRecommendations:function(){var e=N.default.get();return e.map(function(e){return e.site=U.default.get(e.blog_id),e})},update:function(){this.setState({recommendations:this.getRecommendations()})},componentDidMount:function(){U.default.on("change",this.update),N.default.on("change",this.update),N.default.on("change",this.stopFetching)},componentWillUnmount:function(){U.default.off("change",this.update),N.default.off("change",this.update),N.default.off("change",this.stopFetching)},loadMore:function(e){(0,M.fetchMore)(),this.setState({fetching:!0}),e.triggeredByScroll&&this.props.trackScrollPage(N.default.getPage())},stopFetching:function(){this.setState({fetching:!1,page:this.state.page+1})},renderPlaceholders:function(){var e=[],t=this.state.recommendations.length?2:10;return(0,l.default)(t,function(t){e.push(s.default.createElement(g.default,{className:"is-placeholder",key:"recommendation-placeholder-"+t},s.default.createElement(v.default,null,s.default.createElement(k.default,{size:48})),s.default.createElement(E.default,null,"Loading"),s.default.createElement(P.default,null,"Loading the results...")))}),e},getItemRef:function(e){return"recommendation-"+e.blog_id},trackSiteClick:function(e){var t=e.currentTarget.getAttribute("href");(0,A.recordAction)("click_site_on_recommended_for_you"),(0,A.recordGaEvent)("Clicked Site on Recommended For You"),(0,A.recordTrack)("calypso_reader_recommended_site_clicked",{clicked_url:t,recommendation_source:"recommendations-page"})},renderItem:function(e){var t=e.site&&e.site.toJS(),o=this.getItemRef(e),r=t.name||t.URL&&d.default.parse(t.URL).hostname,a=(0,B.getSiteUrl)(t.ID);return s.default.createElement(g.default,{key:o,ref:o},s.default.createElement(v.default,null,s.default.createElement(k.default,{site:t,size:48})),s.default.createElement(E.default,null,s.default.createElement("a",{href:a,onClick:this.trackSiteClick},r)),s.default.createElement(P.default,null,(0,F.decodeEntities)(e.reason)),s.default.createElement(x.default,null,s.default.createElement(w.default,{siteUrl:t.URL})))},render:function(){return s.default.createElement(u.default,{className:"recommended-for-you"},s.default.createElement(p.default,null,s.default.createElement("h1",null,this.translate("Recommendations"))),s.default.createElement("h2",{className:"reader-recommended__heading"},this.translate("We think you'll like")),s.default.createElement(h.default,{items:this.state.recommendations,fetchingNextPage:this.state.fetching,lastPage:N.default.isLastPage(),guessedItemHeight:300,fetchNextPage:this.loadMore,getItemRef:this.getItemRef,renderItem:this.renderItem,renderLoadingPlaceholders:this.renderPlaceholders}))}});t.default=O,e.exports=t.default},8125586856607725:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5630966280090368),s=r(a),n=o(5896763357248615),l=r(n),i=o(4966728244152936),d=r(i),c=o(0xeacd74ab07451),u=r(c),f=o(4672980129057221),p=r(f),m=l.default.createClass({displayName:"RecommendationPostsStream",render:function(){var e=this.translate("Recommended Posts"),t=l.default.createElement(u.default,null);return l.default.createElement(d.default,(0,s.default)({},this.props,{listName:e,emptyContent:t,showFollowInHeader:!0}),l.default.createElement(p.default,{title:this.translate("%s â€¹ Reader",{args:e})}))}});t.default=m,e.exports=t.default},8165653762217014:function(e,t,o){function r(e,t,o){var r=-1,d=l(e),c=d.length,u=c-1;for(t=(o?n(e,t,o):void 0===t)?1:a(i(t),0,c);++r<t;){var f=s(r,u),p=d[f];d[f]=d[r],d[r]=p}return d.length=t,d}var a=o(5011596709648026),s=o(5071512663788994),n=o(0xa6ca2fcc138ff),l=o(0xbb64639c81e11),i=o(0x6c14ebe59c6ec);e.exports=r},8219418208812689:function(e,t,o){"use strict";function r(e){return e.state||(e.state=_.COMPLETE),e.has_featured=c(e,"meta.links.featured"),e=d(e,["meta"]),e.URL&&(e.domain=(0,l.withoutHttp)(e.URL),e.slug=e.domain.replace(/\//g,"::")),e.title=u(e.name)||e.domain,e.options&&e.options.is_mapped_domain&&!e.is_jetpack&&(e.wpcom_url=(0,l.withoutHttp)(e.options.unmapped_url)),e.options&&e.options.is_redirect&&(e.slug=(0,l.withoutHttp)(e.options.unmapped_url),e.domain=e.slug),e}function a(e){var t,o=g[e.ID];e=r(e),t=o?o.mergeDeep(e):i.fromJS(e),t!==o&&(g[e.ID]=t,n.emit("change"))}function s(e){var t=e.map(r),o=0;t.forEach(function(e){var t,r=g[e.ID];if(r){if(t=r.mergeDeep(e),t===r)return}else t=i.fromJS(e);g[e.ID]=t,o++}),o>0&&n.emit("change")}var n,l=o(5062222758155501),i=o(0xe923f90582867),d=o(5059747709250767),c=o(6737292591287124),u=o(463848289870480),f=o(8769427305820155),p=o(0xf2ce944f0fc89),m=o(4672810331458328).action,h=o(7136131977784396).action,_=o(4672810331458328).state,g={};n={get:function(e){return g[e]}},p(n),n.setMaxListeners(100),n.dispatchToken=f.register(function(e){var t=e&&e.action;if(t)switch(t.type){case m.RECEIVE_FETCH:a(t.error?{ID:t.siteId,state:_.ERROR,error:t.error}:t.data);break;case m.RECEIVE_BULK_UPDATE:s(t.data);break;case h.RECEIVE_FETCH:t.data&&t.data.meta&&t.data.meta.data&&t.data.meta.data.site&&a(t.data.meta.data.site)}}),e.exports=n},8269261609032913:function(e,t,o){"use strict";function r(e){if(e&&e.blog_id){var t=b[e.blog_id];if(t)return a(e.blog_id,y);var o=y.merge(e);return b[e.blog_id]=o,!0}}function a(e,t){if(e&&t){var o=b[e];if(!o)return!1;var r=o.merge(t);return r!==o&&(b[e]=r,!0)}}function s(e){if(e)return!!E.getSubscription(e)&&(b[e]=null,!0)}var n=o(8769427305820155),l=o(0xe102ee62a0e6b),i=o(8784809385079961),d=o(8640881565075096),c=o(4881459746320230),u=o(0xe923f90582867),f=o(711528138733345),p=o(0xf2ce944f0fc89),m=o(8751313214750149).action,h=o(8751313214750149).error,_=o(8751313214750149).state,g=o(0xde40a858eec64).action,b={},v=[],y=u.Map({state:_.SUBSCRIBED}),E={receiveSubscribe:function(e){var t={blog_id:e.blog_id};r(t)&&E.emit("change")},receiveUnsubscribe:function(e){s(e.blog_id)&&E.emit("change")},receiveSubscribeResponse:function(e){var t=void 0;return!e.error&&e.data&&e.data.subscribed?(E.removeErrorsForBlog(e.blog_id),e.data.subscription&&(t=e.data.subscription,t.state=_.SUBSCRIBED,a(e.data.subscription.blog_id,t),E.emit("add",t)),void E.emit("change")):(v.push({blogId:e.blog_id,errorType:h.UNABLE_TO_SUBSCRIBE,timestamp:Date.now()}),void(s(e.blog_id)&&E.emit("change")))},receiveUnsubscribeResponse:function(e){return e.error||!e.data||e.data.subscribed?(v.push({blogId:e.blog_id,errorType:h.UNABLE_TO_UNSUBSCRIBE,timestamp:Date.now()}),void(r({blog_id:e.blog_id})&&E.emit("change"))):(E.removeErrorsForBlog(e.blog_id),void E.emit("change"))},getSubscription:function(e){var t=b[e];if(t&&t.get("state")===_.SUBSCRIBED)return t},getIsSubscribed:function(e){return!!E.getSubscription(e)},getLastError:function(){return c(v)},getLastErrorByBlog:function(e){return i(v,{blogId:e})},removeErrorsForBlog:function(e){var t=l(v,{blogId:e});return t.length!==v.length&&(v=t,!0)},dismissError:function(e){this.removeErrorsForSiteUrl(e.data.URL),E.emit("change")},clearErrors:function(){v=[]},clearSubscriptions:function(){b={}},receiveFeedSubscriptions:function(e){var t=0,o=void 0;e.data&&(!e.data||!e.data.errors&&e.data.subscriptions)&&(f(e.data.subscriptions,function(e){o=d(e,"delivery_methods.email"),o&&o.send_comments&&(r({blog_id:e.blog_ID}),t++)}),t>0&&E.emit("change"))},receiveFeedUnfollow:function(e){e.blogId&&(s(e.blogId),E.emit("change"))}};p(E),E.setMaxListeners(200),E.dispatchToken=n.register(function(e){var t=e.action;if(t)switch(t.type){case m.SUBSCRIBE_TO_COMMENT_EMAILS:E.receiveSubscribe(t);break;case m.UNSUBSCRIBE_FROM_COMMENT_EMAILS:E.receiveUnsubscribe(t);break;case m.RECEIVE_SUBSCRIBE_TO_COMMENT_EMAILS:E.receiveSubscribeResponse(t);break;case m.RECEIVE_UNSUBSCRIBE_FROM_COMMENT_EMAILS:E.receiveUnsubscribeResponse(t);break;case g.RECEIVE_FEED_SUBSCRIPTIONS:E.receiveFeedSubscriptions(t);break;case g.RECEIVE_UNFOLLOW_READER_FEED:E.receiveFeedUnfollow(t)}}),e.exports=E},8272192221951336:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5630966280090368),s=r(a),n=o(0xccd53b671ebb6),l=r(n),i=o(5143893728007863),d=r(i),c=o(5880884711457125),u=r(c),f=o(8173823076638946),p=r(f),m=o(5369032381290393),h=r(m),_=o(0x3f19c8db6e3b5),g=r(_),b=o(5896763357248615),v=r(b),y=o(6280957995252369),E=o(0xb5f3313e32616),S=r(E),P=o(7021848674009999),R=o(0x430fac3f1c1a7),x=o(0x810bf47f2a615),I=function(e){var t=function(t){function o(){var e,t,r,a;(0,d.default)(this,o);for(var s=arguments.length,n=Array(s),i=0;i<s;i++)n[i]=arguments[i];return t=r=(0,p.default)(this,(e=o.__proto__||(0,l.default)(o)).call.apply(e,[this].concat(n))),r.getStateFromStores=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=e.postKey,o=(0,g.default)(t.postIds,function(e){var o={};t.feedId?o.feedId=t.feedId:o.blogId=t.blogId,o.postId=e;var r=S.default.get(o);return r&&"minimal"!==r._state||(0,P.fetchPost)(o),r});return{posts:o}},r.state=r.getStateFromStores(r.props),r.updateState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getStateFromStores();r.setState(e)},a=t,(0,p.default)(r,a)}return(0,h.default)(o,t),(0,u.default)(o,[{key:"componentWillMount",value:function(){S.default.on("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.updateState(this.getStateFromStores(e))}},{key:"componentWillUnmount",value:function(){S.default.off("change",this.updateState)}},{key:"render",value:function(){var t=this.state,o=t.post,r=t.posts;return o||r?v.default.createElement(e,(0,s.default)({},this.props,{post:o,posts:r})):null}}]),o}(v.default.PureComponent);return t.propTypes={postKey:b.PropTypes.object,selectedPost:b.PropTypes.string,feed:b.PropTypes.object,site:b.PropTypes.object},(0,y.connect)(function(e,t){var o=t.postKey,r=o.feedId,a=o.blogId,s=void 0,n=void 0;return r?(s=(0,x.getFeed)(e,r),n=s&&s.blog_ID?(0,R.getSite)(e,s.blog_ID):void 0):(n=(0,R.getSite)(e,a),s=n&&n.feed_ID?(0,x.getFeed)(e,n.feed_ID):void 0),{feed:s,site:n}})(t)};t.default=I,e.exports=t.default},8279740666177522:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e){return e({type:d.READER_START_GRADUATE_REQUEST}),c("Graduating user from cold start"),i.default.undocumented().graduateNewReader().then(function(t){e({type:d.READER_START_GRADUATE_REQUEST_SUCCESS,data:t}),e({type:d.READER_START_GRADUATED})},function(t){e({type:d.READER_START_GRADUATE_REQUEST_FAILURE,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestGraduate=a;var s=o(4675954658966525),n=r(s),l=o(8478035041892969),i=r(l),d=o(0xd047e5c4c63f8),c=(0,n.default)("calypso:redux:reader-start")},8394616293845765:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5896763357248615),s=r(a),n=o(0xbfad9041fa583),l=r(n),i=o(5055977180578371),d=o(466675662821495),c=s.default.createClass({displayName:"TagEmptyContent",shouldComponentUpdate:function(){return!1},recordAction:function(){(0,i.recordAction)("clicked_following_on_empty_likes"),(0,i.recordGaEvent)("Clicked Following on Empty Like Stream"),(0,i.recordTrack)("calypso_reader_following_on_empty_like_stream_clicked")},recordSecondaryAction:function(){(0,i.recordAction)("clicked_discover_on_empty_likes"),(0,i.recordGaEvent)("Clicked Discover on Empty Like Stream"),(0,i.recordTrack)("calypso_reader_discover_on_empty_like_stream_clicked")},render:function(){var e=s.default.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.translate("Back to Following")),t=(0,d.isDiscoverEnabled)()?s.default.createElement("a",{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"/discover"},this.translate("Explore Discover")):null;return s.default.createElement(l.default,{title:this.translate("No Likes Yet"),line:this.translate("Posts that you like will appear here."),action:e,secondaryAction:t,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});t.default=c,e.exports=t.default},8539027853593278:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.likes=void 0;var a=o(5896763357248615),s=r(a),n=o(4808587282202068),l=r(n),i=o(0x7c51ba9013a81),d=r(i),c=o(0x7e3efd336d25d),u=o(7092894564781872),f=r(u),p=o(8025093951496706),m="Reader",h={likes:function(e){var t=l.default.sectionify(e.path),o=m+" > My Likes",r=(0,d.default)("likes"),a="postlike";(0,c.ensureStoreLoading)(r,e),(0,c.trackPageLoad)(t,o,a),(0,p.renderWithReduxStore)(s.default.createElement(f.default,{key:"liked",postsStore:r,trackScrollPage:c.trackScrollPage.bind(null,t,o,m,a),onUpdatesShown:c.trackUpdatesLoaded.bind(null,a)}),document.getElementById("primary"),e.store)}};t.default=h;var _=h.likes;t.likes=_},8627024004433354:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return!!e.lastRoute}function s(e){(0,N.renderWithReduxStore)(d.default.createElement(P.default),document.getElementById("primary"),e.store)}Object.defineProperty(t,"__esModule",{value:!0}),t.readA8C=t.blogListing=t.feedListing=t.feedDiscovery=t.following=t.unmountSidebar=t.sidebar=t.loadSubscriptions=t.preloadReaderBundle=t.incompleteUrlRedirects=t.updateLastRoute=t.legacyRedirects=t.prettyRedirects=t.initAbTests=void 0;var n=o(5921998412115101),l=r(n),i=o(5896763357248615),d=r(i),c=o(0x90ba166cd016c),u=r(c),f=o(7572476330282672),p=r(f),m=o(0x9609defae094e),h=o(4808587282202068),_=r(h),g=o(6719762354843784),b=r(g),v=o(0x7c51ba9013a81),y=r(v),E=o(0x7e3efd336d25d),S=o(0x98e53603349c4),P=r(S),R=o(0xb0f2afc6b5023),x=r(R),I=o(0xc308716520cc5),k=r(I),C=o(0x5a9979b646b21),w=o(5055977180578371),T=o(0x993f89fc903d0),N=o(8025093951496706),M=o(7082708682668568),L=r(M),U=o(7126650478888089),A=(r(U),o(6150185289089703)),B=(r(A),o(8269261609032913)),F=(r(B),"Reader"),O=[],D=null,H=function(e){o.e(0x64294fdf46cd4,function(t){e(o(4926501756146757).__esModule?o(4926501756146757).default:o(4926501756146757))})},q=function(e){o.e(7972762804312361,function(t){e(o(0xf939e0ac80dea).__esModule?o(0xf939e0ac80dea).default:o(0xf939e0ac80dea))})},j=function(e){o.e(8268671599452250,function(t){e(o(5795091658390897).__esModule?o(5795091658390897).default:o(5795091658390897))})},K=function(e){o.e(0xae47d18c7d22f,function(t){e(o(7829506357806811).__esModule?o(7829506357806811).default:o(7829506357806811))})},W={initAbTests:function(e,t){O.forEach(function(e){return(0,m.abtest)(e)}),t()},prettyRedirects:function(e,t){var o=void 0;return e.params.blog_id?o=(0,C.getPrettySiteUrl)(e.params.blog_id):e.params.feed_id&&(o=(0,C.getPrettyFeedUrl)(e.params.feed_id)),o?u.default.redirect(o):void t()},legacyRedirects:function(e,t){var o={feedStream:/^\/read\/blog\/feed\/([0-9]+)$/i,feedFullPost:/^\/read\/post\/feed\/([0-9]+)\/([0-9]+)$/i,blogStream:/^\/read\/blog\/id\/([0-9]+)$/i,blogFullPost:/^\/read\/post\/id\/([0-9]+)\/([0-9]+)$/i};e.path.match(o.feedStream)?u.default.redirect("/read/feeds/"+e.params.feed_id):e.path.match(o.feedFullPost)?u.default.redirect("/read/feeds/"+e.params.feed_id+"/posts/"+e.params.post_id):e.path.match(o.blogStream)?u.default.redirect("/read/blogs/"+e.params.blog_id):e.path.match(o.blogFullPost)&&u.default.redirect("/read/blogs/"+e.params.blog_id+"/posts/"+e.params.post_id),t()},updateLastRoute:function(e,t){D&&(e.lastRoute=D),D=e.path,t()},incompleteUrlRedirects:function(e,t){var o=void 0;return e.path.match(/^\/read\/feeds\/([0-9]+)\/posts$/i)?o="/read/feeds/"+e.params.feed_id:e.path.match(/^\/read\/blogs\/([0-9]+)\/posts$/i)&&(o="/read/blogs/"+e.params.blog_id),o?u.default.redirect(o):void t()},preloadReaderBundle:function(e,t){(0,T.preload)("reader"),t()},loadSubscriptions:function(e,t){x.default.fetchAll(),t()},sidebar:function(e,t){(0,N.renderWithReduxStore)(d.default.createElement(L.default,{require:H,path:e.path}),document.getElementById("secondary"),e.store),t()},unmountSidebar:function(e,t){l.default.unmountComponentAtNode(document.getElementById("secondary")),t()},following:function(e){var t=_.default.sectionify(e.path),o=F+" > Following",r=(0,y.default)("following"),a="following",s=(0,y.default)("custom_recs_posts_with_images");s.perPage=4,(0,E.ensureStoreLoading)(r,e),(0,E.trackPageLoad)(t,o,a),(0,w.recordTrack)("calypso_reader_following_loaded"),(0,E.setPageTitle)(e,p.default.translate("Following")),(0,N.renderWithReduxStore)(d.default.createElement(k.default,{key:"following",listName:p.default.translate("Followed Sites"),postsStore:r,recommendationsStore:s,showPrimaryFollowButtonOnCards:!1,trackScrollPage:E.trackScrollPage.bind(null,t,o,F,a),onUpdatesShown:E.trackUpdatesLoaded.bind(null,a)}),"primary",e.store)},feedDiscovery:function(e,t){e.params.feed_id.match(/^\d+$/)?t():(0,b.default)(e.params.feed_id).then(function(e){u.default.redirect("/read/feeds/"+e)}).catch(function(){s(e)})},feedListing:function(e){var t="/read/feeds/:feed_id",o=F+" > Feed > "+e.params.feed_id,r=(0,y.default)("feed:"+e.params.feed_id),s="blog";(0,E.ensureStoreLoading)(r,e),(0,E.trackPageLoad)(t,o,s),(0,w.recordTrack)("calypso_reader_blog_preview",{feed_id:e.params.feed_id}),(0,N.renderWithReduxStore)(d.default.createElement(L.default,{require:q,key:"feed-"+e.params.feed_id,postsStore:r,feedId:+e.params.feed_id,trackScrollPage:E.trackScrollPage.bind(null,t,o,F,s),onUpdatesShown:E.trackUpdatesLoaded.bind(null,s),showPrimaryFollowButtonOnCards:!1,suppressSiteNameLink:!0,showBack:a(e)}),document.getElementById("primary"),e.store)},blogListing:function(e){var t="/read/blogs/:blog_id",o=F+" > Site > "+e.params.blog_id,r=(0,y.default)("site:"+e.params.blog_id),s="blog";(0,E.ensureStoreLoading)(r,e),(0,E.trackPageLoad)(t,o,s),(0,w.recordTrack)("calypso_reader_blog_preview",{blog_id:e.params.blog_id}),(0,N.renderWithReduxStore)(d.default.createElement(L.default,{require:j,key:"site-"+e.params.blog_id,postsStore:r,siteId:+e.params.blog_id,trackScrollPage:E.trackScrollPage.bind(null,t,o,F,s),onUpdatesShown:E.trackUpdatesLoaded.bind(null,s),showPrimaryFollowButtonOnCards:!1,suppressSiteNameLink:!0,showBack:a(e)}),document.getElementById("primary"),e.store)},readA8C:function(e){var t=_.default.sectionify(e.path),o=F+" > A8C",r=(0,y.default)("a8c"),a="a8c";(0,E.ensureStoreLoading)(r,e),(0,E.trackPageLoad)(t,o,a),(0,E.setPageTitle)(e,"Automattic"),(0,N.renderWithReduxStore)(d.default.createElement(L.default,{require:K,key:"read-a8c",className:"is-a8c",listName:"Automattic",postsStore:r,trackScrollPage:E.trackScrollPage.bind(null,t,o,F,a),showPrimaryFollowButtonOnCards:!1,onUpdatesShown:E.trackUpdatesLoaded.bind(null,a)}),document.getElementById("primary"),e.store)}},V=W.initAbTests,G=W.prettyRedirects,Y=W.legacyRedirects,z=W.updateLastRoute,Q=W.incompleteUrlRedirects,$=W.preloadReaderBundle,J=W.loadSubscriptions,X=W.sidebar,Z=W.unmountSidebar,ee=W.following,te=W.feedDiscovery,oe=W.feedListing,re=W.blogListing,ae=W.readA8C;t.initAbTests=V,t.prettyRedirects=G,t.legacyRedirects=Y,t.updateLastRoute=z,t.incompleteUrlRedirects=Q,t.preloadReaderBundle=$,t.loadSubscriptions=J,t.sidebar=X,t.unmountSidebar=Z,t.following=ee,t.feedDiscovery=te,t.feedListing=oe,t.blogListing=re,t.readA8C=ae},8637300989270526:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(711528138733345),s=r(a);t.default=function(){(0,l.default)("/recommendations/start","/"),(0,l.default)("/recommendations",d.preloadReaderBundle,d.loadSubscriptions,d.initAbTests,d.updateLastRoute,d.sidebar,i.recommendedForYou),u.default.isEnabled("reader/recommendations/posts")&&(0,s.default)(["/recommendations/posts","/recommendations/cold","/recommendations/cold1w","/recommendations/cold2w","/recommendations/cold4w","/recommendations/coldtopics"],function(e){l.default.apply(l.default,[e,d.preloadReaderBundle,d.loadSubscriptions,d.updateLastRoute,d.sidebar,i.recommendedPosts])})};var n=o(0x90ba166cd016c),l=r(n),i=o(5656342622524108),d=o(8627024004433354),c=o(4883949902648912),u=r(c);e.exports=t.default},8751313214750149:function(e,t,o){"use strict";var r=o(0x5035497fe4bcb);e.exports.action=r({SUBSCRIBE_TO_COMMENT_EMAILS:null,UNSUBSCRIBE_FROM_COMMENT_EMAILS:null,RECEIVE_SUBSCRIBE_TO_COMMENT_EMAILS:null,RECEIVE_UNSUBSCRIBE_FROM_COMMENT_EMAILS:null}),e.exports.error=r({UNABLE_TO_SUBSCRIBE:null,UNABLE_TO_UNSUBSCRIBE:null}),e.exports.state=r({SUBSCRIBED:null,UNSUBSCRIBED:null})},8970383425370202:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0xccd53b671ebb6),s=r(a),n=o(5143893728007863),l=r(n),i=o(5880884711457125),d=r(i),c=o(8173823076638946),u=r(c),f=o(5369032381290393),p=r(f),m=o(0x75ac779472ba8),h=r(m),_=o(0xa8ea23472235c),g=r(_),b=o(825174316646981),v=r(b),y=o(8640881565075096),E=r(y),S=o(5896763357248615),P=r(S),R=o(7572476330282672),x=o(6881822108913591),I=r(x),k=o(0x5a9979b646b21),C=o(0x776695bf6d3e),w=r(C),T=o(0xc017b51cecf33),N=r(T),M=o(5136668318617341),L=o(811619092419063),U=r(L),A=o(0x4a4fb51cb0541),B=o(702694371083037),F=r(B),O=o(0x8f4b4b01b611c),D=r(O),H=o(5055977180578371),q=o(4774734777553710),j=r(q),K=function(e){function t(){var e,o,r,a;(0,l.default)(this,t);for(var n=arguments.length,i=Array(n),d=0;d<n;d++)i[d]=arguments[d];return o=r=(0,u.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(i))),r.recordRenderTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=e.postKey,o=e.posts;(0,H.recordTrack)("calypso_reader_combined_card_render",{blog_id:t.blogId,feed_id:t.feedId,post_count:(0,v.default)(o)})},a=o,(0,u.default)(r,a)}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.recordRenderTrack()}},{key:"componentWillReceiveProps",value:function(e){this.props.postKey.feedId===e.postKey.feedId&&this.props.postKey.blogId===e.postKey.blogId&&(0,v.default)(this.props.posts)===(0,v.default)(e.posts)||this.recordRenderTrack(e)}},{key:"render",value:function(){var e=this.props,t=e.posts,o=e.site,r=e.feed,a=e.postKey,s=e.selectedPostKey,n=e.onClick,l=e.isDiscover,i=e.translate,d=a.feedId,c=a.blogId,u=(0,E.default)(o,"icon.img"),f=(0,E.default)(r,"image"),p=(0,k.getStreamUrl)(d,c),m=(0,M.siteNameFromSiteAndPost)(o,t[0]),_=function(e){return(0,A.keysAreEqual)((0,A.keyForPost)(e),s)},b=r&&r.URL||o&&o.URL,v=(0,g.default)(t,function(e){return!(0,h.default)(e.canonical_media)}).length;return P.default.createElement(I.default,{className:"reader-combined-card"},P.default.createElement("header",{className:"reader-combined-card__header"},P.default.createElement(w.default,{siteIcon:u,feedIcon:f,author:null,preferGravatar:!0,siteUrl:p,isCompact:!0}),P.default.createElement("div",{className:"reader-combined-card__header-details"},P.default.createElement(N.default,{className:"reader-combined-card__site-link",feedId:d,siteId:c},m),P.default.createElement("p",{className:"reader-combined-card__header-post-count"},i("%(count)d posts",{args:{count:t.length}}))),this.props.showFollowButton&&b&&P.default.createElement(j.default,{siteUrl:b,followSource:this.props.followSource})),P.default.createElement("ul",{className:"reader-combined-card__post-list"},t.map(function(e){return P.default.createElement(U.default,{key:"post-"+e.ID,post:e,streamUrl:p,onClick:n,isDiscover:l,isSelected:_(e),showFeaturedAsset:v>0})})),d&&P.default.createElement(D.default,{feedId:+d,includeMeta:!1}),c&&P.default.createElement(F.default,{siteId:+c,includeMeta:!1}))}}]),t}(P.default.Component);K.propTypes={posts:P.default.PropTypes.array.isRequired,site:P.default.PropTypes.object,feed:P.default.PropTypes.object,onClick:P.default.PropTypes.func,isDiscover:P.default.PropTypes.bool,postKey:P.default.PropTypes.object.isRequired,
selectedPostKey:P.default.PropTypes.object,showFollowButton:P.default.PropTypes.bool,followSource:P.default.PropTypes.string},K.defaultProps={isDiscover:!1,showFollowButton:!1},t.default=(0,R.localize)(K),e.exports=t.default}});