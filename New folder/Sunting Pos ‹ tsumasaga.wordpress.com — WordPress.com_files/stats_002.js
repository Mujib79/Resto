webpackJsonp([5478437016195088,0xf5d7f47f5cb74],{734359132004245:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(){return this instanceof i?void(this.data=[]):new i}var n=a(5020179656051692),o=s(n),r=a(0x5d63d2948b12f);i.prototype.add=function(t){var e=this.siteExists(t.site_id);return e||(e=new r(t),this.data.push(e)),e},i.prototype.siteExists=function(t){return(0,o.default)(this.data,{site_id:t})||!1},t.exports=i},953331440743363:function(t,e,a){function s(t){return i(t).replace(/(^|\s)(\w)/g,function(t,e,a){return e+a.toUpperCase()})}var i=a(5593585486367828);t.exports=s},0x459ffd79ff738:function(t,e){t.exports=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"]},0x5d63d2948b12f:function(t,e,a){"use strict";function s(t){return this instanceof s?(this.site_id=t.site_id,this.is_following=t.is_following,void(this.blog_domain=t.blog_domain)):new s(t)}var i=a(4675954658966525)("calypso:follow-list:site"),n=a(8478035041892969),o=a(0xf2ce944f0fc89);o(s.prototype),s.prototype.follow=function(){this.is_following||(i("following site",this.site_id),this.is_following=!0,this.emit("change"),n.site(this.site_id).follow().add(function(t){i("follow success",t)}))},s.prototype.unfollow=function(){this.is_following&&(this.is_following=!1,this.emit("change"),n.site(this.site_id).follow().del(function(t){i("unfollow success",t)}))},t.exports=s},0x6a54be9c417c9:function(t,e){t.exports=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},0x8502ce0be9ac4:function(t,e){t.exports=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},0x9c8c0ba211732:function(t,e,a){function s(t){return n(t).replace(d,function(t){return t.toLowerCase()}).replace(l,function(t){return t.toUpperCase()})}try{var i=a(0x8502ce0be9ac4)}catch(t){var i=a(0x6a54be9c417c9)}var n=a(953331440743363),o=a(0x459ffd79ff738);t.exports=s;var r=o.map(i),d=new RegExp("[^^]\\b("+r.join("|")+")\\b","ig"),l=/:\s*(\w)/g},0xaaea679d502de:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(5896763357248615),n=s(i),o=a(6881822108913591),r=s(o),d=n.default.createElement("div",{className:"main is-wide-layout"},n.default.createElement(r.default,{className:"stats-module stats-page-placeholder__header is-loading"},n.default.createElement("div",{className:"module-header"},n.default.createElement("h3",{className:"module-header-title"}))),n.default.createElement(r.default,{className:"stats-module stats-page-placeholder__content is-loading"},n.default.createElement("div",{className:"module-header"},n.default.createElement("h3",{className:"module-header-title"}))));e.default=function(){return d},t.exports=e.default},5041781986237299:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var a={period:t,startOf:e.clone().startOf(t),endOf:e.clone().endOf(t)};return"week"===t&&("0"===e.format("d")?(a.startOf.subtract(6,"d"),a.endOf.subtract(6,"d")):(a.startOf.add(1,"d"),a.endOf.add(1,"d"))),a.key=t+":"+a.endOf.format("YYYY-MM-DD"),a}function n(t,e,a){var s=t.endOf(a),i=_.default.moment.duration(s.diff(e)),n=void 0;switch(a){case"day":n=i.asDays();break;case"week":n=i.asWeeks();break;case"month":n=i.asMonths();break;case"year":n=i.asYears()}return n}function o(t){var e=[{title:_.default.translate("Insights"),path:"/stats/insights/"+t,id:"stats-insights"},{title:_.default.translate("Days"),path:"/stats/day/"+t,id:"stats-day",period:"day"},{title:_.default.translate("Weeks"),path:"/stats/week/"+t,id:"stats-week",period:"week"},{title:_.default.translate("Months"),path:"/stats/month/"+t,id:"stats-month",period:"month"},{title:_.default.translate("Years"),path:"/stats/year/"+t,id:"stats-year",period:"year"}];return e}var r=a(95905449861643),d=s(r),l=a(5630966280090368),u=s(l),f=a(83765757817552),c=s(f),p=a(5020179656051692),m=s(p),h=a(5896763357248615),g=s(h),v=a(0x90ba166cd016c),w=s(v),y=a(7572476330282672),_=s(y),x=a(7418474439241154),S=s(x),b=a(4808587282202068),E=s(b),I=a(623310115397031),O=s(I),k=a(0x9c8c0ba211732),D=s(k),M=a(5577740099853543),P=a(8025093951496706),V=a(5380278257315674),W=a(0xbe531fd7d9ba8),q=a(301929001539288),C=a(7082708682668568),F=s(C),L=a(0xaaea679d502de),N=s(L),T=(0,S.default)(),R="Stats",Y=function(t){a.e(0x7f675faaa2e90,function(e){t(a(345677247077484).__esModule?a(345677247077484).default:a(345677247077484))})},B=function(t){a.e(8173204884907332,function(e){t(a(0xf13b3d08f563a).__esModule?a(0xf13b3d08f563a).default:a(0xf13b3d08f563a))})},j=function(t){a.e(8002723789946850,function(e){t(a(0x8ec8227ec3413).__esModule?a(0x8ec8227ec3413).default:a(0x8ec8227ec3413))})},H=function(t){a.e(0xe3215f7f75f9d,function(e){t(a(5358261695907293).__esModule?a(5358261695907293).default:a(5358261695907293))})},$=function(t){a.e(0xcd730f401c94b,function(e){t(a(5727010737755611).__esModule?a(5727010737755611).default:a(5727010737755611))})},z=function(t){a.e(0x4f6775b6b0e19,function(e){t(a(0xc39f90694ccb3).__esModule?a(0xc39f90694ccb3).default:a(0xc39f90694ccb3))})};t.exports={resetFirstView:function(t){t.store.dispatch((0,V.savePreference)("firstViewHistory",[]))},redirectToDefaultSitePage:function(t,e){var a=E.default.getSiteFragment(t.path);if(a){var s=(0,W.getCurrentLayoutFocus)(t.store.getState());t.store.dispatch((0,q.setNextLayoutFocus)(s)),w.default.redirect(E.default.getStatsDefaultSitePage(a))}else e()},insights:function(t,e){var s=a(734359132004245),i=t.params.site_id,n=E.default.sectionify(t.path),o=new s;t.store.dispatch((0,M.setDocumentHeadTitle)(_.default.translate("Stats",{textOnly:!0})));var r=T.getSite(i);r||(r=T.getSite(parseInt(i,10))),i=r?r.ID||0:0,0===i&&(0===T.data.length?T.once("change",function(){(0,w.default)(t.path)}):e()),O.default.pageView.record(n,R+" > Insights");var d={followList:o};(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({require:Y,placeholder:g.default.createElement(N.default,null)},d)),document.getElementById("primary"),t.store)},overview:function(t,e){var a=function(){return[{title:_.default.translate("Days"),path:"/stats/day",altPaths:["/stats"],id:"stats-day",period:"day"},{title:_.default.translate("Weeks"),path:"/stats/week",id:"stats-week",period:"week"},{title:_.default.translate("Months"),path:"/stats/month",id:"stats-month",period:"month"},{title:_.default.translate("Years"),path:"/stats/year",id:"stats-year",period:"year"}]},s=E.default.sectionify(t.path);window.scrollTo(0,0),t.store.dispatch((0,M.setDocumentHeadTitle)(_.default.translate("Stats",{textOnly:!0})));var i=(0,m.default)(a(),function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(i){O.default.mc.bumpStat("calypso_stats_overview_period",i.period),O.default.pageView.record(s,R+" > "+(0,D.default)(i.period));var n={period:i.period,path:t.pathname};(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({placeholder:g.default.createElement(N.default,null),require:B},n)),document.getElementById("primary"),t.store)}else e()},site:function(t,e){var a=t.params.site_id,s=o(a),r=t.query,l=void 0,f=void 0,c=void 0,p=0,h=_.default.moment(),v=0,y=E.default.sectionify(t.path),x=void 0;t.store.dispatch((0,M.setDocumentHeadTitle)(_.default.translate("Stats",{textOnly:!0})));var S=T.getSite(a);S||(S=T.getSite(parseInt(a,10))),a=S?S.ID||0:0;var b=(0,m.default)(s,function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(b){0===a&&(0===T.data.length?T.once("change",function(){(0,w.default)(t.path)}):e()),S&&S.domain&&t.store.dispatch((0,M.setDocumentHeadTitle)(_.default.translate("Stats",{textOnly:!0}))),S&&"object"===(0,d.default)(S.options)&&"undefined"!=typeof S.options.gmt_offset&&(p=S.options.gmt_offset),h=_.default.moment().utcOffset(p),r.startDate&&_.default.moment(r.startDate).isValid?(l=_.default.moment(r.startDate).locale("en"),v=n(h,l,b.period)):l=i(b.period,h.clone().locale("en")).startOf,v=parseInt(v,10),v?(v>9&&(v="10plus"),v="-"+v):v="",x=y+"/:site",O.default.mc.bumpStat("calypso_stats_site_period",b.period+v),O.default.pageView.record(x,R+" > "+(0,D.default)(b.period)),c=i(b.period,l),f=r.tab||"views";var I={path:t.pathname,date:l,chartTab:f,context:t,period:c};(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({placeholder:g.default.createElement(N.default,null),require:j},I)),document.getElementById("primary"),t.store)}else e()},summary:function(t,e){var a=t.params.site_id,s=E.default.getSiteFragment(t.path),n=t.query,o=t.params.module,r=[{path:"/stats/"+o+"/"+a,altPaths:["/stats/day/"+o+"/"+a],id:"stats-day",period:"day"},{path:"/stats/week/"+o+"/"+a,id:"stats-week",period:"week"},{path:"/stats/month/"+o+"/"+a,id:"stats-month",period:"month"},{path:"/stats/year/"+o+"/"+a,id:"stats-year",period:"year"}],l=void 0,f=void 0,p=["posts","referrers","clicks","countryviews","authors","videoplays","videodetails","podcastdownloads","searchterms"],h=_.default.moment(),v=E.default.sectionify(t.path),y=T.getSite(a);y||(y=T.getSite(parseInt(a,10))),a=y?y.ID||0:0;var x=(0,m.default)(r,function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(s&&0===a)0===T.data.length?T.once("change",function(){(0,w.default)(t.path)}):window.location="/stats";else if(x&&-1!==p.indexOf(t.params.module)){"object"===(0,d.default)(y.options)&&"undefined"!=typeof y.options.gmt_offset&&(h=_.default.moment().utcOffset(y.options.gmt_offset)),l=n.startDate&&_.default.moment(n.startDate).isValid?_.default.moment(n.startDate):h.endOf(x.period),f=i(x.period,l);var S="videodetails"===t.params.module?{postId:parseInt(n.post,10)}:{},b={};n.summarize&&n.num&&(b=(0,c.default)(n,["num","summarize"]),b.period="day"),O.default.pageView.record(v,R+" > "+(0,D.default)(x.period)+" > "+(0,D.default)(t.params.module));var I=(0,u.default)({path:t.pathname,statsQueryOptions:b,date:l,context:t,period:f},S);(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({placeholder:g.default.createElement(N.default,null),require:H},I)),document.getElementById("primary"),t.store)}else e()},post:function(t){var e=t.params.site_id,a=parseInt(t.params.post_id,10),s=t.path.split("/"),i="post"===s[2]?"post":"page",n=T.getSite(e);if(n||(n=T.getSite(parseInt(e,10))),e=n?n.ID||0:0,0===e)0===T.data.length?T.once("change",function(){(0,w.default)(t.path)}):window.location="/stats";else{O.default.pageView.record("/stats/"+i+"/:post_id/:site",R+" > Single "+(0,D.default)(i));var o={path:t.path,postId:a,context:t};(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({placeholder:g.default.createElement(N.default,null),require:$},o)),document.getElementById("primary"),t.store)}},follows:function(t){var e=t.params.site_id,s=a(734359132004245),i=t.params.page_num,n=new s,o=E.default.sectionify(t.path),r=T.getSite(e);r||(r=T.getSite(parseInt(e,10))),e=r?r.ID||0:0;var d=r&&"undefined"!=typeof r.slug?r.slug:E.default.getSiteFragment(t.path);if(0===e)0===T.data.length?T.once("change",function(){(0,w.default)(t.path)}):window.location="/stats";else{i=parseInt(i,10),(!i||i<1)&&(i=1),O.default.pageView.record(o.replace("/"+i,""),R+" > Followers > Comment");var l={path:t.path,page:i,perPage:20,total:10,domain:d,sites:T,siteId:e,followList:n};(0,P.renderWithReduxStore)(g.default.createElement(F.default,(0,u.default)({placeholder:g.default.createElement(N.default,null),require:z},l)),document.getElementById("primary"),t.store)}}}},5522026545761060:function(t,e,a){"use strict";var s=a(0x90ba166cd016c),i=a(8849175740165922),n=a(5041781986237299),o=a(4883949902648912);t.exports=function(){o.isEnabled("manage/stats")&&(s("/stats",i.siteSelection,i.navigation,n.overview),s("/stats/day",i.siteSelection,i.navigation,n.overview),s("/stats/week",i.siteSelection,i.navigation,n.overview),s("/stats/month",i.siteSelection,i.navigation,n.overview),s("/stats/year",i.siteSelection,i.navigation,n.overview),s("/stats/insights/:site_id",i.siteSelection,i.navigation,n.insights),s("/stats/day/:site_id",i.siteSelection,i.navigation,n.site),s("/stats/week/:site_id",i.siteSelection,i.navigation,n.site),s("/stats/month/:site_id",i.siteSelection,i.navigation,n.site),s("/stats/year/:site_id",i.siteSelection,i.navigation,n.site),s("/stats/:module/:site_id",i.siteSelection,i.navigation,n.summary),s("/stats/day/:module/:site_id",i.siteSelection,i.navigation,n.summary),s("/stats/week/:module/:site_id",i.siteSelection,i.navigation,n.summary),s("/stats/month/:module/:site_id",i.siteSelection,i.navigation,n.summary),s("/stats/year/:module/:site_id",i.siteSelection,i.navigation,n.summary),s("/stats/post/:post_id/:site_id",i.siteSelection,i.navigation,n.post),s("/stats/page/:post_id/:site_id",i.siteSelection,i.navigation,n.post),s("/stats/follows/comment/:site_id",i.siteSelection,i.navigation,n.follows),s("/stats/follows/comment/:page_num/:site_id",i.siteSelection,i.navigation,n.follows),o.isEnabled("ui/first-view/reset-route")&&s("/stats/reset-first-view",n.resetFirstView),s("/stats/(.*)",i.siteSelection,i.navigation,n.redirectToDefaultSitePage,i.sites))}},5593585486367828:function(t,e){function a(t){return n.test(t)?t.toLowerCase():(r.test(t)&&(t=s(t)),o.test(t)&&(t=i(t)),t.toLowerCase())}function s(t){return t.replace(d,function(t,e){return e?" "+e:""})}function i(t){return t.replace(l,function(t,e,a){return e+" "+a.toLowerCase().split("").join(" ")})}t.exports=a;var n=/\s/,o=/[a-z][A-Z]/,r=/[\W_]/,d=/[\W_]+(.|$)/g,l=/(.)([A-Z]+)/g}});