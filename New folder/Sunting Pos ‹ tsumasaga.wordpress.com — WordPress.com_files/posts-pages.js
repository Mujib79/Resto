webpackJsonp([0x63ce3188fdf40,0xf5d7f47f5cb74],{0xa9d7632ec87:function(e,t,s){(function(t){"use strict";function n(e,t,s,n){if(e&&"object"==typeof e){var a=e,o=void 0===a[s];o&&null!=t&&(a[s]=t)}}function a(e,t){if(null==e)return e;var s={};return o(e,n,s),s}var o=(s(4933595015014023),s(6103163881638202));s(4966611432929690);e.exports=a}).call(t,s(0xbd9d045b69d43))},80239232754207:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5630966280090368),o=n(a),r=s(0xf0fef66852b91),i=n(r),l=s(0xccd53b671ebb6),c=n(l),u=s(5143893728007863),p=n(u),d=s(5880884711457125),f=n(d),h=s(8173823076638946),m=n(h),g=s(5369032381290393),v=n(g),_=s(0x45d24eaab7654),y=n(_),P=s(5896763357248615),b=n(P),E=s(6280957995252369),T=s(7572476330282672),C=s(0xa505046780b0c),I=n(C),x=s(4883949902648912),S=s(0x956a8e02ae2a5),k=s(0x61f3a2ac07e20),N=n(k),w=s(0x68ccbe1ec01b),D=n(w),R=s(5055977180578371),M=s(0x5a9979b646b21),O=s(6402003291963531),L=n(O),A=s(8984451519475015),U=n(A),H=s(5858173213958119),F=n(H),q=s(0xe7ead13045245),j=s(6729227089147156),z=s(0x80a9362a90928),B=n(z),V=s(0xe6b178f9df1b9),W=n(V),K=s(5522994678952159),G=n(K),Q=function(e){function t(){(0,p.default)(this,t);var e=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return e.state={showReplies:!1},(0,i.default)(t.prototype).filter(function(e){return 0===e.indexOf("handle")}).filter(function(t){return"function"==typeof e[t]}).forEach(function(t){return e[t]=e[t].bind(e)}),e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"handleToggleRepliesClick",value:function(){this.setState({showReplies:!this.state.showReplies})}},{key:"handleReply",value:function(){this.props.onReplyClick(this.props.commentId),this.setState({showReplies:!0})}},{key:"handleAuthorClick",value:function(e){(0,R.recordAction)("comment_author_click"),(0,R.recordGaEvent)("Clicked Author Name"),(0,R.recordTrack)("calypso_reader_comment_author_click",{blog_id:this.props.post.site_ID,post_id:this.props.post.ID,comment_id:this.props.commentId,author_url:e.target.href})}},{key:"renderRepliesList",value:function(){var e=this,s=this.props.commentsTree.getIn([this.props.commentId,"children"]).toJS(),n=s.length<this.props.maxChildrenToShow,a=this.state.showReplies||n;if(!s||s.length<1)return null;var r=(0,T.translate)("show %(numOfReplies)d reply","show %(numOfReplies)d replies",{count:s.length,args:{numOfReplies:s.length}}),i=(0,T.translate)("hide %(numOfReplies)d reply","hide %(numOfReplies)d replies",{count:s.length,args:{numOfReplies:s.length}}),l=null;return n||(l=this.state.showReplies?i:r),b.default.createElement("div",null,l?b.default.createElement("button",{className:"comments__view-replies-btn",onClick:this.handleToggleRepliesClick},b.default.createElement(I.default,{icon:"reply",size:18})," ",l):null,a?b.default.createElement("ol",{className:"comments__list"},s.reverse().map(function(s){return b.default.createElement(t,(0,o.default)({},e.props,{depth:e.props.depth+1,key:s,commentId:s}))})):null)}},{key:"renderCommentForm",value:function(){return this.props.activeReplyCommentID!==this.props.commentId?null:b.default.createElement(U.default,{ref:"postCommentForm",post:this.props.post,parentCommentID:this.props.commentId,commentText:this.props.commentText,onUpdateCommentText:this.props.onUpdateCommentText,onCommentSubmit:this.props.onCommentSubmit})}},{key:"render",value:function(){var e=this.props.commentsTree,t=e.getIn([this.props.commentId,"data"]).toJS(),s=e.getIn([this.props.commentId,"children"]).some(function(t){return e.getIn([t,"data","placeholderState"])===q.PLACEHOLDER_STATE.ERROR});if(t.isPlaceholder?(t.author=this.props.currentUser,t.author.name=this.props.currentUser.display_name):t.author.name=(0,j.decodeEntities)(t.author.name),t.isPlaceholder&&t.placeholderState===q.PLACEHOLDER_STATE.ERROR)return b.default.createElement(B.default,(0,o.default)({},this.props,{repliesList:this.renderRepliesList()}));if("trackback"===t.type||"pingback"===t.type)return b.default.createElement(W.default,this.props);var n=void 0;return t.author.site_ID?n=(0,M.getStreamUrl)(null,t.author.site_ID):t.author.URL&&(n=t.author.URL),b.default.createElement("li",{className:"comments__comment depth-"+this.props.depth},b.default.createElement("div",{className:"comments__comment-author"},n?b.default.createElement("a",{href:n,onClick:this.handleAuthorClick},b.default.createElement(D.default,{user:t.author})):b.default.createElement(D.default,{user:t.author}),n?b.default.createElement("a",{href:n,className:"comments__comment-username",onClick:this.handleAuthorClick},t.author.name):b.default.createElement("strong",{className:"comments__comment-username"},t.author.name),b.default.createElement("div",{className:"comments__comment-timestamp"},b.default.createElement("a",{href:t.URL},b.default.createElement(N.default,{date:t.date})))),t.status&&"unapproved"===t.status?b.default.createElement("p",{className:"comments__comment-moderation"},(0,T.translate)("Your comment is awaiting moderation.")):null,this.props.activeEditCommentId!==this.props.commentId&&b.default.createElement(L.default,{content:t.content,isPlaceholder:t.isPlaceholder}),(0,x.isEnabled)("comments/moderation-tools-in-posts")&&this.props.activeEditCommentId===this.props.commentId&&b.default.createElement(F.default,{post:this.props.post,commentId:this.props.commentId,commentText:t.content,onCommentSubmit:this.props.onEditCommentCancel}),b.default.createElement(G.default,{post:this.props.post,comment:t,showModerationTools:this.props.showModerationTools,activeEditCommentId:this.props.activeEditCommentId,activeReplyCommentID:this.props.activeReplyCommentID,commentId:this.props.commentId,editComment:this.props.onEditCommentClick,editCommentCancel:this.props.onEditCommentCancel,handleReply:this.handleReply,onReplyCancel:this.props.onReplyCancel}),s?null:this.renderCommentForm(),this.renderRepliesList())}}]),t}(b.default.Component);Q.propTypes={commentsTree:b.default.PropTypes.object.isRequired,commentId:b.default.PropTypes.oneOfType([b.default.PropTypes.string,b.default.PropTypes.number]).isRequired,onReplyClick:b.default.PropTypes.func,depth:b.default.PropTypes.number,post:b.default.PropTypes.object,maxChildrenToShow:b.default.PropTypes.number,onCommentSubmit:b.default.PropTypes.func,currentUser:b.default.PropTypes.object.isRequired},Q.defaultProps={onReplyClick:y.default,errors:[],depth:1,maxChildrenToShow:5,onCommentSubmit:y.default},t.default=(0,E.connect)(function(e){return{currentUser:(0,S.getCurrentUser)(e)}})(Q),e.exports=t.default},81197044170763:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,o.default)("/posts/:author?/:status?/:domain?",i.default.siteSelection,i.default.navigation,c.default.posts)};var a=s(0x90ba166cd016c),o=n(a),r=s(8849175740165922),i=n(r),l=s(5379274173349864),c=n(l);e.exports=t.default},95148365001489:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(new Date).getTime(),s=e.timeSaved;return t-s>w}function o(e){return l(e)?k[e].list:void(k[e]&&k[e].dirty&&(M("delete cached list %o",e),delete k[e],delete N[e]))}function r(e){var t=c(e.query);k[t]&&k[t].dirty||(k[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function i(e,t){var s=D.getSite(e.site_ID),n=[s.slug,s.ID,!1],a=[e.status,t],o=void 0,r=void 0,i=void 0,l=void 0;for(r in k)k.hasOwnProperty(r)&&(i=k[r],l=i.list,l.query.type===e.type&&-1!==n.indexOf(l.query.siteID)&&(o=l.query.status.split(","),0!==(0,P.default)(o,a).length&&(i.dirty=!0)));S.cacheIndex.clearRecordsByParamFilter(function(e){var t=n.slice(0,-1),s=["/me/posts"].concat((0,_.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),o=e.query&&e.query.status?e.query.status.split(","):[],r=(0,P.default)(o,a);return s.indexOf(e.path)!==-1&&!!r.length})}function l(e){return k[e]&&!a(k[e])&&!k[e].dirty}function c(e){var t=[],s=(0,g.default)(e).sort();return s.forEach(function(s){t.push(s+"-"+e[s])}),t.join(":")}function u(e,t,s){M("setCanonicalList %o %o (%o)",e,t,s),N[e]=N[e]||{},N[e][t]=s}function p(e,t){M("getCanonicalList %o %o",e,t);var s=N[e];if(!s||"object"!==("undefined"==typeof s?"undefined":(0,h.default)(s)))return!1;var n=(0,g.default)(s);return n[0]!==t?(delete k[e],delete N[e],!1):s[t]}function d(e,t){M("deleteCanonicalList %o %o",e,t);var s=N[e];s&&s[t]&&delete s[t]}Object.defineProperty(t,"__esModule",{value:!0});var f=s(95905449861643),h=n(f),m=s(477028190620861),g=n(m),v=s(6465156853722425),_=n(v);t.getCacheKey=c,t.setCanonicalList=u,t.getCanonicalList=p,t.deleteCanonicalList=d;var y=s(7905250771901207),P=n(y),b=s(4675954658966525),E=n(b),T=s(7418474439241154),C=n(T),I=s(8769427305820155),x=n(I),S=s(0x59542bda68774),k={},N={},w=3e5,D=(0,C.default)(),R={get:o,_reset:function(){k={}}},M=(0,E.default)("calypso:posts-list:cache");R.dispatchToken=x.default.register(function(e){var t=e.action,n=s(0x69c14441898c8)();switch(x.default.waitFor([n.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":r(n.get());break;case"RECEIVE_POSTS_PAGE":r(n.get());break;case"RECEIVE_UPDATED_POSTS":r(n.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(i(t.post,t.original?t.original.status:null),r(n.get()))}}),t.default=R},0x913e48edc37f:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0x45d24eaab7654),o=n(a),r=s(5896763357248615),i=n(r),l=s(7572476330282672),c=s(0xa505046780b0c),u=n(c),p=s(0x8ae3881d6e8c2),d=n(p),f=function(e){var t=e.translate,s=e.status,n=e.approveComment,a=e.unapproveComment,o="approved"===s,r=(0,d.default)("comments__comment-actions-approve",{"is-approved":o});return i.default.createElement("button",{className:r,onClick:o?a:n},i.default.createElement(u.default,{icon:"checkmark",size:18}),i.default.createElement("span",{className:"comments__comment-actions-like-label"},t(o?"Approved":"Approve")))};f.propTypes={translate:i.default.PropTypes.func.isRequired,approveComment:i.default.PropTypes.func,unapproveComment:i.default.PropTypes.func,status:i.default.PropTypes.string.isRequired},f.defaultProps={approveComment:o.default,unapproveComment:o.default},t.default=(0,l.localize)(f),e.exports=t.default},334320163288023:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5630966280090368),o=n(a),r=s(0xccd53b671ebb6),i=n(r),l=s(5143893728007863),c=n(l),u=s(5880884711457125),p=n(u),d=s(8173823076638946),f=n(d),h=s(5369032381290393),m=n(h),g=s(83765757817552),v=n(g),_=s(5896763357248615),y=n(_),P=s(6280957995252369),b=s(78648220391165),E=s(7572476330282672),T=s(0xdfade968cc79b),C=n(T),I=s(5055977180578371),x=s(4872454564014129),S=s(0x90af70c1dc5a2),k=function(e){function t(){(0,c.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.boundHandleLikeToggle=e.handleLikeToggle.bind(e),e}return(0,m.default)(t,e),(0,p.default)(t,[{key:"handleLikeToggle",value:function(e){e?this.props.likeComment(this.props.siteId,this.props.postId,this.props.commentId):this.props.unlikeComment(this.props.siteId,this.props.postId,this.props.commentId),(0,I.recordAction)(e?"liked_comment":"unliked_comment"),(0,I.recordGaEvent)(e?"Clicked Comment Like":"Clicked Comment Unlike"),(0,I.recordTrack)("calypso_reader_"+(e?"liked":"unliked")+"_comment",{blog_id:this.props.siteId,comment_id:this.props.commentId})}},{key:"render",value:function(){var e=(0,v.default)(this.props,["showZeroCount","tagName"]),t=this.props.commentLike.get("like_count"),s=this.props.commentLike.get("i_like"),n=(0,E.translate)("Liked");return y.default.createElement(C.default,(0,o.default)({},e,{likeCount:t,liked:s,onLikeToggle:this.boundHandleLikeToggle,likedLabel:n,iconSize:18}))}}]),t}(y.default.Component);k.propTypes={siteId:y.default.PropTypes.number.isRequired,postId:y.default.PropTypes.number.isRequired,commentId:y.default.PropTypes.number.isRequired,showZeroCount:y.default.PropTypes.bool,tagName:y.default.PropTypes.string,commentLike:y.default.PropTypes.object.isRequired,likeComment:y.default.PropTypes.func.isRequired,unlikeComment:y.default.PropTypes.func.isRequired},t.default=(0,P.connect)(function(e,t){return{commentLike:(0,S.getCommentLike)(e,t.siteId,t.postId,t.commentId)}},function(e){return(0,b.bindActionCreators)({likeComment:x.likeComment,unlikeComment:x.unlikeComment},e)})(k),e.exports=t.default},379676959299837:function(e,t,s){"use strict";function n(e,t){return o(t,function(t){return p(t.items,{id:e.id})})||t}function a(e,t,s){return t.forEach(function(t){e=t(e,s)},this),e.items&&(e.items=e.items.map(function(e){return a(e,t,s)})),e}function o(e,t){return t(e)?e:e.items?i(e.items,function(e){return o(e,t)}):void 0}function r(e,t,s){var n;if(e.items)for(n=0;n<e.items.length;n++){if(s(e.items[n]))return void(e.items[n]=t);r(e.items[n],t,s)}}function i(e,t){var s,n,a=e.length;for(s=0;s<a;s++)if(n=t(e[s]))return n}function l(e,t){return function(s){return s.id===t&&(s.items=s.items||[],s.items.push(e)),s}}function c(e,t,s){return function(n){var a,o="before"===s?0:1;return~(a=u(n.items,{id:t}))&&n.items.splice(a+o,0,e),n}}var u=s(619801137403500),p=s(6442230718320275);e.exports={traverse:function(e,t){return a(e,t,e)},parent:n,find:o,replaceItem:r,remover:function(e){return function(t){var s;return~(s=u(t.items,{id:e}))&&t.items.splice(s,1),t}},inserter:function(e,t,s){var n="child"===s?l:c;return n(e,t,s)}}},386899968484710:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5477852257145688),o=n(a),r=s(5896763357248615),i=n(r),l=s(6280957995252369),c=s(78648220391165),u=s(0x8ae3881d6e8c2),p=n(u),d=s(7572476330282672),f=s(4725747483787960),h=s(7676928569480141),m=n(h),g=s(6760265025150091),v=n(g),_=s(0x40c41015577d3),y=n(_),P=s(6984388208717668),b=n(P),E=s(0x5dd72de17825d),T=n(E),C=function(e,t){var s=t.URL,n="_blank";return T.default.userCan("edit_post",t)?(s=T.default.getEditURL(t,e),n=null):"trash"===t.status&&(s=null),{contentLinkURL:s,contentLinkTarget:n}},I=(0,o.default)(f.recordGoogleEvent,"Posts"),x=function(e,t){return(!e.jetpack||e.isModuleActive("comments"))&&t.discussion&&t.discussion.comments_open},S=function(e){return!e.jetpack||e.isModuleActive("likes")},k=function(e){return e.capabilities&&e.capabilities.view_stats&&(!e.jetpack||e.isModuleActive("stats"))},N=function(e){var t=e.className,s=e.post,n=e.site,a=e.toggleComments,o=e.trackRelativeTimeStatusOnClick,r=e.trackTotalViewsOnClick,l=C(n,s),c=l.contentLinkURL,u=l.contentLinkTarget,d="draft"===s.status;return i.default.createElement("ul",{className:(0,p.default)("post-actions",t)},i.default.createElement("li",{className:"post-actions__item post-actions__relative-time"},i.default.createElement(m.default,{post:s,link:c,target:u,onClick:o})),!d&&x(n,s)&&i.default.createElement("li",{className:"post-actions__item"},i.default.createElement(v.default,{key:"comment-button",post:s,showLabel:!1,commentCount:s.discussion.comment_count,onClick:a,tagName:"div"})),!d&&S(n)&&i.default.createElement("li",{className:"post-actions__item"},i.default.createElement(y.default,{key:"like-button",siteId:+s.site_ID,postId:+s.ID,post:s,site:n})),!d&&k(n)&&i.default.createElement("li",{className:"post-actions__item post-actions__total-views"},i.default.createElement(b.default,{post:s,clickHandler:r})))};N.propTypes={className:i.default.PropTypes.string,post:i.default.PropTypes.object.isRequired,site:i.default.PropTypes.object.isRequired,toggleComments:i.default.PropTypes.func.isRequired,trackRelativeTimeStatusOnClick:i.default.PropTypes.func,trackTotalViewsOnClick:i.default.PropTypes.func};var w=function(e){return(0,c.bindActionCreators)({trackRelativeTimeStatusOnClick:function(){return I("Clicked Post Date")},trackTotalViewsOnClick:function(){return I("Clicked View Post Stats")}},e)};t.default=(0,l.connect)(null,w)((0,d.localize)(N)),e.exports=t.default},499413011598538:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s){return{type:l.POST_COUNTS_RECEIVE,siteId:e,postType:t,counts:s}}function o(e,t){return function(s){return s({type:l.POST_COUNTS_REQUEST,postType:t,siteId:e}),i.default.undocumented().site(e).postCounts({type:t}).then(function(n){s(a(e,t,n.counts)),s({type:l.POST_COUNTS_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(n){s({type:l.POST_COUNTS_REQUEST_FAILURE,siteId:e,postType:t,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostCounts=a,t.requestPostCounts=o;var r=s(8478035041892969),i=n(r),l=s(0xd047e5c4c63f8)},591769715856004:function(e,t,s){"use strict";function n(e,t,s){return s===(0,o.getSiteFrontPage)(e,t)}function a(e,t,s){return s===(0,o.getSitePostsPage)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isFrontPage=n,t.isPostsPage=a;var o=s(0x8f1527a7f80c8)},616501357791415:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PostControls=void 0;var a=s(0x45d24eaab7654),o=n(a),r=s(6718701541658404),i=n(r),l=s(5896763357248615),c=n(l),u=s(6280957995252369),p=s(7572476330282672),d=s(0x8ae3881d6e8c2),f=n(d),h=s(0xa505046780b0c),m=n(h),g=s(4883949902648912),v=s(623310115397031),_=s(0x5dd72de17825d),y=s(0x5228ca0f10485),P=n(y),b=s(0x8f1527a7f80c8),E=function(){return v.ga.recordEvent("Posts","Clicked Edit Post")},T=function(){return v.ga.recordEvent("Posts","Clicked Copy Post")},C=function(){return v.ga.recordEvent("Posts","Clicked View Post Stats")},I=function(e){var t=e.editURL,s=e.fullWidth,n=e.onDelete,a=e.onHideMore,o=e.onPublish,r=e.onRestore,l=e.onShowMore,c=e.onToggleShare,u=e.onTrash,p=e.post,d=e.site,f=e.translate,h=e.onViewPost,m={main:[],more:[]};return(0,_.userCan)("edit_post",p)&&m.main.push({className:"edit",href:t,icon:"pencil",onClick:E,text:f("Edit")}),"publish"===p.status?(m.main.push({className:"view",href:p.URL,icon:e.isPreviewable?"visible":"external",onClick:h,text:f("View")}),m.main.push({className:"stats",href:"/stats/post/"+p.ID+"/"+d.slug,icon:"stats-alt",onClick:C,text:f("Stats")}),(0,g.isEnabled)("republicize")&&m.main.push({className:"share",disabled:!e.isPublicizeEnabled,icon:"share",onClick:c,text:f("Share")})):"trash"!==p.status?(m.main.push({className:"view",icon:e.isPreviewable?"visible":"external",onClick:h,text:f("Preview")}),(0,_.userCan)("publish_post",p)&&m.main.push({className:"publish",icon:"reader",onClick:o,text:f("Publish")})):(0,_.userCan)("delete_post",p)&&m.main.push({className:"restore",icon:"undo",onClick:r,text:f("Restore")}),(0,_.userCan)("delete_post",p)&&("trash"===p.status?m.main.push({className:"trash is-scary",icon:"trash",onClick:n,text:f("Delete Permanently")}):m.main.push({className:"trash",icon:"trash",onClick:u,text:f("Trash")})),(0,i.default)(["draft","future","pending","private","publish"],p.status)&&(0,_.userCan)("edit_post",p)&&m.main.push({className:"copy",href:"/post/"+d.slug+"?copy="+p.ID,icon:"clipboard",onClick:T,text:f("Copy")}),m.main.length>4&&s?m.more=m.main.splice(4):m.main.length>2&&!s&&(m.more=m.main.splice(2)),m.more.length&&(m.main.push({className:"more",icon:"ellipsis",onClick:l,text:f("More")}),m.more.push({className:"back",icon:"chevron-left",onClick:a,text:f("Back")})),m},x=function(e){return e.map(function(e,t){return c.default.createElement("li",{className:(0,f.default)({"post-controls__disabled":e.disabled}),key:t},c.default.createElement("a",{className:"post-controls__"+e.className,href:e.href,onClick:e.disabled?o.default:e.onClick,target:e.target?e.target:null},c.default.createElement(m.default,{icon:e.icon,size:18}),c.default.createElement("span",null,e.text)))})},S=t.PostControls=function(e){var t=I(e),s=t.main,n=t.more,a=(0,f.default)("post-controls",{"post-controls--desk-nomore":n<=2});return c.default.createElement("div",{className:a},n.length>0&&c.default.createElement("ul",{className:"posts__post-controls post-controls__pane post-controls__more-options"},x(n)),c.default.createElement("ul",{className:"posts__post-controls post-controls__pane post-controls__main-options"},x(s)))};S.propTypes={editURL:l.PropTypes.string.isRequired,fullWidth:l.PropTypes.bool,isPublicizeEnabled:l.PropTypes.bool,isPreviewable:l.PropTypes.bool,onDelete:l.PropTypes.func,onHideMore:l.PropTypes.func.isRequired,onPublish:l.PropTypes.func,onRestore:l.PropTypes.func,onShowMore:l.PropTypes.func.isRequired,onToggleShare:l.PropTypes.func,onTrash:l.PropTypes.func,onViewPost:l.PropTypes.func,post:l.PropTypes.object.isRequired,site:l.PropTypes.object,translate:l.PropTypes.func},t.default=(0,u.connect)(function(e,t){var s=t.site,n=t.post;return{isPreviewable:!1!==(0,b.isSitePreviewable)(e,s.ID),isPublicizeEnabled:(0,P.default)(e,s.ID,n.type)}})((0,p.localize)(S))},639851364124727:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(6280957995252369),v=s(7572476330282672),_=s(72591479426812),y=n(_),P=s(623310115397031),b=s(7996551768540594),E=s(0xbc79ee44c328),T=n(E),C=s(6007716273106560),I=s(0x956a8e02ae2a5),x=function(e){function t(){(0,i.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.trashPost=e.trashPost.bind(e),e}return(0,f.default)(t,e),(0,c.default)(t,[{key:"trashPost",value:function(){var e=this.props,t=e.translate,s=e.siteId,n=e.postId,a=e.status;n&&("trash"!==a?(P.mc.bumpStat("calypso_cpt_actions","trash"),this.props.trashPost(s,n)):confirm(t("Are you sure you want to permanently delete this post?"))&&(P.mc.bumpStat("calypso_cpt_actions","delete"),this.props.deletePost(s,n)))}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.status,n=e.canDelete;return n?m.default.createElement(y.default,{onClick:this.trashPost,icon:"trash"},"trash"===s?t("Delete Permanently"):t("Trash",{context:"verb"})):null}}]),t}(h.Component);x.propTypes={globalId:h.PropTypes.string,translate:h.PropTypes.func.isRequired,postId:h.PropTypes.number,siteId:h.PropTypes.number,status:h.PropTypes.string,canDelete:h.PropTypes.bool,trashPost:h.PropTypes.func,deletePost:h.PropTypes.func},t.default=(0,g.connect)(function(e,t){var s=(0,C.getPost)(e,t.globalId);if(!s)return{};var n=(0,I.getCurrentUserId)(e),a=s.author&&s.author.ID===n;return{postId:s.ID,siteId:s.site_ID,status:s.status,canDelete:(0,T.default)(e,s.site_ID,a?"delete_posts":"delete_others_posts")}},{trashPost:b.trashPost,deletePost:b.deletePost})((0,v.localize)(x)),e.exports=t.default},790221523576710:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(825174316646981),m=n(h),g=s(0x45d24eaab7654),v=n(g),_=s(5896763357248615),y=n(_),P=s(6280957995252369),b=s(0x8ae3881d6e8c2),E=n(b),T=s(0xa505046780b0c),C=n(T),I=s(492788797284063),x=s(4725747483787960),S=s(0xe6bd8709d6a3c),k=s(0x65fcc7381e096),N=s(7186610166862683),w=n(N),D=s(6881822108913591),R=n(D),M=s(0x9c9defe0ad635),O=n(M),L=s(7141578567579753),A=n(L),U=s(6352991067537738),H=n(U),F=s(0xc0a5f55c718bb),q=n(F),j=function(e){function t(){var e,s,n,a;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return s=n=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),n.handleClick=function(){var e=n.props,t=e.event,s=e.feature,a=e.onClick;t&&n.props.recordTracksEvent("calypso_banner_cta_click",{cta_name:t,cta_feature:s,cta_size:"regular"}),a()},a=s,(0,p.default)(n,a)}return(0,f.default)(t,e),(0,c.default)(t,[{key:"getHref",value:function(){var e=this.props,t=e.href,s=e.feature,n=e.siteSlug;return!t&&n?s?"/plans/"+n+"?feature="+s:"/plans/"+n:t}},{key:"getIcon",value:function(){var e=this.props,t=e.icon,s=e.plan;return s&&!t?y.default.createElement("div",{className:"banner__icon-plan"},y.default.createElement(A.default,{plan:s})):y.default.createElement("div",{className:"banner__icons"},y.default.createElement("div",{className:"banner__icon"},y.default.createElement(C.default,{icon:t||"info-outline",size:18})),y.default.createElement("div",{className:"banner__icon-circle"},y.default.createElement(C.default,{icon:t||"info-outline",size:18})))}},{key:"getContent",value:function(){var e=this.props,t=e.callToAction,s=e.description,n=e.event,a=e.feature,o=e.list,r=e.price,i=e.title,l=Array.isArray(r)?r:[r];return y.default.createElement("div",{className:"banner__content"},n&&y.default.createElement(q.default,{eventName:"calypso_banner_cta_impression",eventProperties:{cta_name:n,cta_feature:a,cta_size:"regular"}}),y.default.createElement("div",{className:"banner__info"},y.default.createElement("div",{className:"banner__title"},i),s&&y.default.createElement("div",{className:"banner__description"},s),(0,m.default)(o)>0&&y.default.createElement("ul",{className:"banner__list"},o.map(function(e,t){return y.default.createElement("li",{key:t},y.default.createElement(C.default,{icon:"checkmark",size:18}),e)}))),(t||r)&&y.default.createElement("div",{className:"banner__action"},1===(0,m.default)(l)&&y.default.createElement(H.default,{rawPrice:l[0]}),2===(0,m.default)(l)&&y.default.createElement("div",{className:"banner__prices"},y.default.createElement(H.default,{rawPrice:l[0],original:!0}),y.default.createElement(H.default,{rawPrice:l[1],discounted:!0})),t&&y.default.createElement(w.default,{compact:!0,href:this.getHref(),onClick:this.handleClick,primary:!0},t)))}},{key:"render",value:function(){var e=this.props,t=e.callToAction,s=e.className,n=e.disableHref,a=e.dismissPreferenceName,o=e.dismissTemporary,r=e.plan,i=(0,E.default)("banner",s,{"has-call-to-action":t},{"is-upgrade-personal":I.PLAN_PERSONAL===r},{"is-upgrade-premium":I.PLAN_PREMIUM===r},{"is-upgrade-business":I.PLAN_BUSINESS===r},{"is-dismissible":a});return a?y.default.createElement(O.default,{className:i,preferenceName:a,temporary:o},this.getIcon(),this.getContent()):y.default.createElement(R.default,{className:i,href:n||t?null:this.getHref(),onClick:t?v.default:this.handleClick},this.getIcon(),this.getContent())}}]),t}(_.Component);j.propTypes={callToAction:_.PropTypes.string,className:_.PropTypes.string,description:_.PropTypes.string,disableHref:_.PropTypes.bool,dismissPreferenceName:_.PropTypes.string,dismissTemporary:_.PropTypes.bool,event:_.PropTypes.string,feature:_.PropTypes.oneOf((0,k.getValidFeatureKeys)()),href:_.PropTypes.string,icon:_.PropTypes.string,list:_.PropTypes.arrayOf(_.PropTypes.string),onClick:_.PropTypes.func,plan:_.PropTypes.string,price:_.PropTypes.oneOfType([_.PropTypes.number,_.PropTypes.arrayOf(_.PropTypes.number)]),siteSlug:_.PropTypes.string,title:_.PropTypes.string.isRequired},j.defaultProps={disableHref:!1,dismissTemporary:!1,onClick:v.default};var z=function(e,t){return{siteSlug:t.disableHref?null:(0,S.getSelectedSiteSlug)(e)}};t.default=(0,P.connect)(z,{recordTracksEvent:x.recordTracksEvent})(j),e.exports=t.default},851774030711285:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.translate,s=e.singleUserSite,n=e.name;return!n||s?null:l.default.createElement("div",{className:"post-type-post-author"},l.default.createElement(d.default,{icon:"user",size:18,className:"post-type-post-author__icon"}),t("by %(name)s",{args:{name:n}}))}Object.defineProperty(t,"__esModule",{value:!0});var o=s(8640881565075096),r=n(o),i=s(5896763357248615),l=n(i),c=s(6280957995252369),u=s(7572476330282672),p=s(0xa505046780b0c),d=n(p),f=s(6007716273106560),h=s(0x8f1527a7f80c8);a.propTypes={translate:i.PropTypes.func,globalId:i.PropTypes.string,singleUserSite:i.PropTypes.bool,name:i.PropTypes.string},t.default=(0,c.connect)(function(e,t){var s=(0,f.getPost)(e,t.globalId),n=void 0;return s&&(n=(0,h.isSingleUserSite)(e,s.site_ID)),{singleUserSite:n,name:(0,r.default)(s,["author","name"])}})((0,u.localize)(a)),e.exports=t.default},953331440743363:function(e,t,s){function n(e){return a(e).replace(/(^|\s)(\w)/g,function(e,t,s){return t+s.toUpperCase()})}var a=s(5593585486367828);e.exports=n},987774209952548:function(e,t,s){"use strict";var n=s(8025093951496706),a=s(5896763357248615),o=s(7572476330282672),r=s(7418474439241154)(),i=s(4808587282202068),l=s(623310115397031),c=s(0x9c8c0ba211732),u=s(0xedc1374c5f43e),p=s(5577740099853543).setDocumentHeadTitle,d={pages:function(e){var t,d=s(0xf906dfbec8b69),f=i.getSiteFragment(e.path),h=e.params.status,m=e.query.s,g=i.sectionify(e.path),v="Pages";h=h&&h!==f?h:"",e.store.dispatch(p(o.translate("Pages",{textOnly:!0}))),t=f?g+"/:site":g,v+=h.length?" > "+c(h):" > Published",l.pageView.record(t,v),(0,n.renderWithReduxStore)(a.createElement(d,{context:e,siteID:f,status:h,sites:r,search:m,trackScrollPage:u.bind(null,t,v,"Pages")}),document.getElementById("primary"),e.store)}};e.exports=d},0x3c2cc2dd58579:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TwitterSharePreview=void 0;var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=t.TwitterSharePreview=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.articleUrl,s=e.externalDisplay,n=e.externalName,a=e.externalProfileURL,o=e.externalProfilePicture,r=e.message,i=e.imageUrl;return m.default.createElement("div",{className:"twitter-share-preview"},m.default.createElement("div",{className:"twitter-share-preview__content"},m.default.createElement("div",{className:"twitter-share-preview__profile-picture-part"},m.default.createElement("img",{className:"twitter-share-preview__profile-picture",src:o})),m.default.createElement("div",{className:"twitter-share-preview__content-part"},m.default.createElement("div",{className:"twitter-share-preview__profile-line"},m.default.createElement("a",{className:"twitter-share-preview__profile-name",href:a},n),m.default.createElement("a",{className:"twitter-share-preview__profile-handle",href:a},s)),m.default.createElement("div",{className:"twitter-share-preview__message"},r),m.default.createElement("div",{className:"twitter-share-preview__article-url-line"},m.default.createElement("a",{className:"twitter-share-preview__article-url",href:t},t)),i&&m.default.createElement("div",{className:"twitter-share-preview__image-wrapper"},m.default.createElement("img",{className:"twitter-share-preview__image",src:i})))))}}]),t}(h.PureComponent);t.default=g},0x3d448b52b7141:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){D.default.ga.recordEvent("Posts",e)}function o(e,t,s){for(var n=0;n<s.length;n++){var a=s[n];if(t[a]!==e[a])return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});var r=s(5896763357248615),i=n(r),l=s(4926561643672304),c=n(l),u=s(0x8ae3881d6e8c2),p=n(u),d=s(6280957995252369),f=s(7572476330282672),h=s(4883949902648912),m=n(h),g=s(6881822108913591),v=n(g),_=s(616501357791415),y=n(_),P=s(4851117551574050),b=n(P),E=s(0xae355779372a9),T=n(E),C=s(8704774118037149),I=n(C),x=s(0x5dd72de17825d),S=n(x),k=s(0x7df7df5329b0e),N=n(k),w=s(623310115397031),D=n(w),R=s(8741111692106981),M=s(301929001539288),O=s(0x8f1527a7f80c8),L=s(0xb92682aa82593),A=n(L),U=s(0x6c975712736af),H=n(U),F=s(386899968484710),q=n(F),j=i.default.createClass({displayName:"Post",mixins:[N.default],
getInitialState:function(){return{showMoreOptions:!1,showComments:!1,showShare:!1,commentsFilter:"all"}},shouldComponentUpdate:function(e,t){var s=["post","postImages","fullWidthPost","path"];return!!o(this.props,e,s)||t.showMoreOptions!==this.props.showMoreOptions},analyticsEvents:{viewPost:function(){a("Clicked View Post")},previewPost:function(){a("Clicked Preview Post")},editPost:function(){a("Clicked Edit Post")},commentIconClick:function(){a("Clicked Post Comment Icon/Number")},likeIconClick:function(){a("Clicked Post Likes Icon/Number")},dateClick:function(){a("Clicked Post Date")},featuredImageStandardClick:function(){a("Clicked Post Featured Image Standard")},featuredImageLargeClick:function(){a("Clicked Post Featured Image Large")},postTitleClick:function(){a("Clicked Post Title")},postExcerptClick:function(){a("Clicked Post Excerpt")},viewStats:function(){a("Clicked View Post Stats")}},publishPost:function(){this.updatePostStatus("publish"),a("Clicked Publish Post")},restorePost:function(){this.updatePostStatus("restore"),a("Clicked Restore Post")},deletePost:function(){this.updatePostStatus("delete"),a("Clicked Delete Post")},trashPost:function(){this.updatePostStatus("trash"),a("Clicked Trash Post")},componentWillMount:function(){var e=this.props.translate;this.strings={trashing:e("Trashing Post"),deleting:e("Deleting Post"),trashed:e("Moved to Trash"),undo:e("undo?"),deleted:e("Post Deleted"),updating:e("Updating Post"),error:e("Error"),updated:e("Updated"),deleteWarning:e("Delete this post permanently?"),restoring:e("Restoring"),restored:e("Restored")}},canUserEditPost:function(){var e=this.props.post;return e.capabilities&&e.capabilities.edit_post&&"trash"!==e.status},getPostClass:function(){return(0,p.default)({post:!0,"is-protected":!!this.props.post.password,"show-more-options":this.state.showMoreOptions})},getTitle:function(){if(this.props.post.title)return i.default.createElement("a",{href:this.getContentLinkURL(),className:"post__title-link post__content-link",target:this.getContentLinkTarget(),onClick:this.analyticsEvents.postTitleClick},i.default.createElement("h4",{className:"post__title"},this.props.post.title))},getPostImage:function(){return this.props.postImages?i.default.createElement(T.default,{postImages:this.props.postImages}):this.props.post.canonical_image?i.default.createElement("div",{className:"post-image is-placeholder"}):null},getTrimmedExcerpt:function(){var e=this.props.post.excerpt;return e.length<=220?e:e.substring(0,220)+"…"},getExcerpt:function(){var e=void 0;return this.props.post.excerpt?(e="quote"===this.props.post.format?i.default.createElement(I.default,{content:this.getTrimmedExcerpt(),className:"post__quote"}):i.default.createElement(I.default,{content:this.getTrimmedExcerpt()}),i.default.createElement("a",{href:this.getContentLinkURL(),className:"post__excerpt post__content-link",target:this.getContentLinkTarget(),onClick:this.analyticsEvents.postExcerptClick},e)):null},getHeader:function(){var e=this.props.sites.getSelectedSite(),t=this.getSite();return e&&t.single_user_site?null:i.default.createElement(b.default,{site:t,author:this.props.post.author?this.props.post.author.name:"",path:this.props.path,showAuthor:!t.single_user_site})},getContent:function(){var e=this.props.post;if(e.title||e.excerpt)return i.default.createElement("div",{className:"post__content"},this.getTitle(),this.getExcerpt())},getContentLinkURL:function(){var e=this.props.post,t=this.getSite();return S.default.userCan("edit_post",e)?S.default.getEditURL(e,t):"trash"===e.status?null:e.URL},getContentLinkTarget:function(){return S.default.userCan("edit_post",this.props.post)?null:"_blank"},toggleMoreControls:function(e){this.setState({showMoreOptions:"show"===e})},getSite:function(){return this.props.sites.getSite(this.props.post.site_ID)},toggleComments:function(){this.setState({showComments:!this.state.showComments}),this.analyticsEvents.commentIconClick()},toggleShare:function(){this.setState({showShare:!this.state.showShare})},viewPost:function(e){e.preventDefault();var t=this.props,s=t.isPreviewable,n=t.previewURL;return this.props.post.status&&"future"===this.props.post.status?this.analyticsEvents.previewPost:this.analyticsEvents.viewPost,s?(this.props.setPreviewUrl(n),void this.props.setLayoutFocus("preview")):window.open(n)},render:function(){var e=this,t=this.getSite();return i.default.createElement(v.default,{tagName:"article",className:this.getPostClass()},i.default.createElement("div",{className:"post__body"},this.getHeader(),this.getPostImage(),this.getContent(),i.default.createElement(q.default,{site:t,post:this.props.post,toggleComments:this.toggleComments})),i.default.createElement(y.default,{post:this.props.post,editURL:S.default.getEditURL(this.props.post,t),fullWidth:this.props.fullWidthPost,onShowMore:this.toggleMoreControls.bind(this,"show"),onHideMore:this.toggleMoreControls.bind(this,"hide"),onPublish:this.publishPost,onTrash:this.trashPost,onDelete:this.deletePost,onRestore:this.restorePost,onToggleShare:this.toggleShare,onViewPost:this.viewPost,site:t}),i.default.createElement(c.default,{transitionName:"updated-trans",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.buildUpdateTemplate()),this.state.showComments&&i.default.createElement(A.default,{showCommentCount:!1,post:this.props.post,showFilters:(0,h.isEnabled)("comments/filters-in-posts"),showModerationTools:(0,h.isEnabled)("comments/moderation-tools-in-posts"),commentsFilter:m.default.isEnabled("comments/filters-in-posts")?this.state.commentsFilter:"approved",onFilterChange:function(t){return e.setState({commentsFilter:t})},onCommentsUpdate:function(){}}),this.state.showShare&&m.default.isEnabled("republicize")&&i.default.createElement(H.default,{post:this.props.post,site:t}))}});t.default=(0,d.connect)(function(e,t){return{isPreviewable:!1!==(0,O.isSitePreviewable)(e,t.post.site_ID),previewURL:(0,x.getPreviewURL)(t.post)}},{setPreviewUrl:R.setPreviewUrl,setLayoutFocus:M.setLayoutFocus})((0,f.localize)(j)),e.exports=t.default},0x40c41015577d3:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5630966280090368),o=n(a),r=s(5896763357248615),i=n(r),l=s(6280957995252369),c=s(0xbc4c2688769f0),u=n(c),p=s(0x8f1527a7f80c8),d=function(e){return i.default.createElement(u.default,(0,o.default)({},e,{tagName:"a",animateLike:!1,forceCounter:!0,showLabel:!1,showZeroCount:!1}))};t.default=(0,l.connect)(function(e,t){var s=t.post;return{slug:(0,p.getSiteSlug)(e,s.site_ID)}})(d),e.exports=t.default},0x40e7258280040:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(6280957995252369),v=s(7572476330282672),_=s(72591479426812),y=n(_),P=s(623310115397031),b=s(0xbc79ee44c328),E=n(b),T=s(6007716273106560),C=s(7996551768540594),I=s(0x956a8e02ae2a5),x=function(e){function t(){(0,i.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.restorePost=e.restorePost.bind(e),e}return(0,f.default)(t,e),(0,c.default)(t,[{key:"restorePost",value:function(){var e=this.props,t=e.siteId,s=e.postId;t&&s&&(P.mc.bumpStat("calypso_cpt_actions","restore"),this.props.restorePost(t,s))}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.canRestore,n=e.status;return"trash"===n&&s?m.default.createElement(y.default,{onClick:this.restorePost,icon:"undo"},t("Restore")):null}}]),t}(h.Component);x.propTypes={globalId:h.PropTypes.string,translate:h.PropTypes.func.isRequired,siteId:h.PropTypes.number,postId:h.PropTypes.number,canRestore:h.PropTypes.bool,status:h.PropTypes.string,restorePost:h.PropTypes.func.isRequired},t.default=(0,g.connect)(function(e,t){var s=(0,T.getPost)(e,t.globalId);if(!s)return{};var n=(0,I.getCurrentUserId)(e),a=s.author&&s.author.ID===n;return{siteId:s.site_ID,postId:s.ID,status:s.status,canRestore:(0,E.default)(e,s.site_ID,a?"delete_posts":"delete_others_posts")}},{restorePost:C.restorePost})((0,v.localize)(x)),e.exports=t.default},0x459ffd79ff738:function(e,t){e.exports=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"]},0x4a68bd81dba8a:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=function(){return o.default.createElement("li",{className:"select-dropdown__separator"})};t.default=r,e.exports=t.default},0x4ae8f92ba411c:function(e,t,s){"use strict";var n=s(0x7de19dca8b5e1),a=s(7683057827842339);t.getReactDOM=function(){return n},t.getReactInstanceMap=function(){return a}},0x4ce9eddf96ff4:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(5143893728007863),o=n(a),r=s(5880884711457125),i=n(r),l=s(4675954658966525),c=n(l),u=(0,c.default)("calypso:infinite-list:helper"),p=function(){function e(t){(0,o.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,i.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,s){if("function"==typeof t){s&&(t=t.bind(s));for(var n=e-e%this.props.itemsPerRow,a=Math.min(n+this.props.itemsPerRow,this.props.items.length)-1,o=n;o<=a;o++)t(this.props.items[o],o)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var s=this.props.getItemRef(t),n=this.boundsForRef(s),a=void 0;a=n?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-n.top:n.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[s]=a},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var s=t.props.getItemRef(e);delete t.itemHeights[s]},this)}},{key:"getRowHeight",value:function(e){var t=this,s=0;return this.forEachInRow(e,function(e){var n=t.props.getItemRef(e),a=t.storedItemHeight(n);s=Math.max(s,a)},this),s}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,s=this.firstRenderedIndex||0,n=this.props.items.length,a=t;0===n&&(a=-1),t>=n&&(a=Math.min(s+e,n-1)),a===-1&&n>0&&0===s&&(a=e),a!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=a)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,u("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,s=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),s=this.containerBottom-this.bottomPlaceholderHeight,t=s+e,!(t>this.bottomHideLevelSoft&&s>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,u("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;u("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();e.exports=p},0x4e09390d58627:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=s(6280957995252369),g=s(499413011598538),v=s(0xb952c2ac6b114),_=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.type===e.type||this.request(e)}},{key:"request",value:function(e){e.requesting||e.requestPostCounts(e.siteId,e.type)}},{key:"render",value:function(){return null}}]),t}(h.Component);_.propTypes={siteId:h.PropTypes.number.isRequired,type:h.PropTypes.string.isRequired,requesting:h.PropTypes.bool,requestPostCounts:h.PropTypes.func},t.default=(0,m.connect)(function(e,t){var s=t.siteId,n=t.type;return{requesting:(0,v.isRequestingPostCounts)(e,s,n)}},{requestPostCounts:g.requestPostCounts})(_),e.exports=t.default},0x5467ecba72a42:function(e,t,s){"use strict";var n=s(0x90ba166cd016c),a=s(8849175740165922),o=s(987774209952548),r=s(4883949902648912);e.exports=function(){r.isEnabled("manage/pages")&&n("/pages/:status?/:domain?",a.siteSelection,a.navigation,o.pages)}},0x54a67c9d8ad7c:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(6718701541658404),m=n(h),g=s(5896763357248615),v=n(g),_=s(6280957995252369),y=s(7572476330282672),P=s(72591479426812),b=n(P),E=s(623310115397031),T=s(6007716273106560),C=s(7996551768540594),I=s(0xbc79ee44c328),x=n(I),S=function(e){function t(){(0,i.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.publishPost=e.publishPost.bind(e),e}return(0,f.default)(t,e),(0,c.default)(t,[{key:"publishPost",value:function(){var e=this.props,t=e.siteId,s=e.postId;t&&s&&(E.mc.bumpStat("calypso_cpt_actions","publish"),this.props.savePost(t,s,{status:"publish"}))}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.status,n=e.canPublish;return n&&(0,m.default)(["pending","draft"],s)?v.default.createElement(b.default,{onClick:this.publishPost,icon:"reader"},t("Publish")):null}}]),t}(g.Component);S.propTypes={globalId:g.PropTypes.string,translate:g.PropTypes.func.isRequired,status:g.PropTypes.string,siteId:g.PropTypes.number,postId:g.PropTypes.number,canPublish:g.PropTypes.bool,savePost:g.PropTypes.func},t.default=(0,_.connect)(function(e,t){var s=(0,T.getPost)(e,t.globalId);return s?{status:s.status,siteId:s.site_ID,postId:s.ID,canPublish:(0,x.default)(e,s.site_ID,"publish_posts")}:{}},{savePost:C.savePost})((0,y.localize)(S)),e.exports=t.default},0x5635d5da58cd5:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,l.default)(e.stats.posts.requesting,[t,s,n.join()],!1)}function o(e,t,s,n){return(0,l.default)(e.stats.posts.items,[t,s,n],null)}function r(e,t,s){return(0,l.default)(e.stats.posts.items,[t,s],null)}Object.defineProperty(t,"__esModule",{value:!0});var i=s(8640881565075096),l=n(i);t.isRequestingPostStats=a,t.getPostStat=o,t.getPostStats=r},0x62abb5c79c03a:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(477028190620861),o=n(a),r=s(5896763357248615),i=n(r),l=s(4675954658966525),c=n(l),u=s(0xbceb83e51862c),p=n(u),d=s(0x6925a2279f1f8),f=n(d),h=s(5999750516959291),m=n(h),g=s(5890255058533989),v=n(g),_=s(0x75aac138cedeb),y=n(_),P=s(5008048254971775),b=n(P),E=s(0xa3b7781c9b77c),T=n(E),C=s(0x68ccbe1ec01b),I=n(C),x=s(6183759582808303),S=n(x),k=new c.default("calypso:posts-navigation"),N=(0,S.default)(),w={publish:"published",draft:"drafts",future:"scheduled",trash:"trashed"};t.default=i.default.createClass({displayName:"PostsNavigation",propTypes:{context:i.default.PropTypes.object.isRequired,sites:i.default.PropTypes.object.isRequired,author:i.default.PropTypes.number,statusSlug:i.default.PropTypes.string,search:i.default.PropTypes.string},mixins:[b.default],getInitialState:function(){var e=this._getCounts(),t={show:!0,loading:!0,counts:null===this.props.sites.selected?this._defaultCounts():this._getCounts()};return this.props.sites.selected&&!(0,o.default)(e).length||(t.loading=!1),t},componentWillMount:function(){T.default.on("change",this._updatePostCounts)},componentWillUnmount:function(){T.default.off("change",this._updatePostCounts)},componentWillReceiveProps:function(e){this.props.siteID===e.siteID&&this.props.author===e.author&&this.props.statusSlug===e.statusSlug||this._setPostCounts(e.siteID,e.author?"mine":"all")},render:function(){if(!this.state.show)return null;if(this.state.loading)return i.default.createElement(p.default,null);var e=this.props.author?"/my":"",t=this.props.statusSlug?"/"+this.props.statusSlug:"",s=this.props.sites.selected?"/"+this.props.sites.selected:"",n=this.props.sites.getSelectedSite(),a=!0;this.filterStatuses={publish:this.translate("Published",{context:"Filter label for posts list"}),draft:this.translate("Drafts",{context:"Filter label for posts list"}),future:this.translate("Scheduled",{context:"Filter label for posts list"}),trash:this.translate("Trashed",{context:"Filter label for posts list"})},this.filterScope={me:this.translate("Me",{context:"Filter label for posts list"}),everyone:this.translate("Everyone",{context:"Filter label for posts list"})},this.strings={status:this.translate("Status",{context:"Filter group label for tabs"}),author:this.translate("Author",{context:"Filter group label for segmented"})};var o=this._getStatusTabs(e,s),r=this._getAuthorSegmented(t,s);this.props.sites.selected?(n.single_user_site||n.jetpack)&&(a=!1):this.props.sites.allSingleSites&&(a=!1);var l=this._getMobileHeaderText(a,o.selectedText,r.selectedText);return i.default.createElement(p.default,{selectedText:l},o.element,a?r.element:null,i.default.createElement(y.default,{pinned:!0,fitsContainer:!0,onSearch:this.doSearch,initialValue:this.props.search,placeholder:"Search "+o.selectedText+"...",analyticsGroup:"Posts",delaySearch:!0}))},_getStatusTabs:function(e,t){var s,n,a,o=[];for(s in this.filterStatuses)if("undefined"!=typeof this.state.counts[s]||"publish"===s){var r="/posts"+e+("publish"===s?"":"/"+w[s])+t,l=this.filterStatuses[s],c=!1!==this.state.counts[s]&&this.state.counts[s];r===this.props.context.pathname&&(n=l,a=c),"publish"!==s||c||(c=0),o.push(i.default.createElement(v.default,{className:"is-"+s,key:"statusTabs"+r,path:r,count:null===this.props.sites.selected||c,value:l,selected:r===this.props.context.pathname},l))}n=n||"published",a=a||this.getCountByStatus("publish");var u=i.default.createElement(f.default,{label:this.strings.status,selectedText:n,selectedCount:a},o);return{element:u,selectedText:n}},_getAuthorSegmented:function(e,t){var s,n,a=[];for(n in this.filterScope){var o=this.filterScope[n],r="me"===n,l=(r?"/posts/my":"/posts")+e+t;l===this.props.context.pathname&&(s=o),a.push(i.default.createElement(v.default,{key:"authorSegmented"+l,path:l,selected:l===this.props.context.pathname},o,r&&i.default.createElement(I.default,{size:16,user:N.get()})))}return{element:i.default.createElement(m.default,{label:this.strings.author},a),selectedText:s}},_getMobileHeaderText:function(e,t,s){return e?i.default.createElement("span",null,i.default.createElement("span",null,t),i.default.createElement("small",null,s)):t},_defaultCounts:function(){var e,t={};for(e in w)t[e]=!1;return t},_defaultStateOptions:function(){this.setState({show:!0,loading:!1,counts:this._defaultCounts()})},_setPostCounts:function(e,t){return e&&null!==this.props.sites.selected?T.default.getTotalCount(e,"all")?void this.setState({show:!0,loading:!1,counts:this._getCounts(e,t)}):this.setState({show:!0,loading:!0}):this._defaultStateOptions()},_updatePostCounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sites.selected,t=arguments[1];if(t=t||(this.props.author?"mine":"all"),null===this.props.sites.selected)return this._defaultStateOptions();var s={show:!0,loading:!1,counts:{}};T.default.getTotalCount(e,"all")?s.counts=this._getCounts(e,t):(k("[%s] clean counts",e||"All my sites"),s.show=!1,s.counts={}),this.setState(s)},_getCounts:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sites.selected,s=arguments[1],n={};s=s||(this.props.author?"mine":"all");var a=T.default.get(t,"all"),o=T.default.get(t,"mine");for(e in a)n[e]="all"===s?a[e]:o[e]||0;return(n.draft||n.pending)&&(n.draft=(n.draft||0)+(n.pending||0),delete n.pending),(n.publish||n.private)&&(n.publish=(n.publish||0)+(n.private||0),delete n.private),n},getCountByStatus:function(e){var t=this.state.counts[e];return t!==!1?t:null}}),e.exports=t.default},0x6925a2279f1f8:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(5630966280090368),o=n(a),r=s(5921998412115101),i=s(5896763357248615),l=s(7452954268806788),c=s(0x8ae3881d6e8c2),u=s(8619793617189177),p=s(7904991244547051),d=s(7123518912576379),f=480,h=i.createClass({displayName:"NavTabs",propTypes:{selectedText:i.PropTypes.string,selectedCount:i.PropTypes.number,label:i.PropTypes.string,hasSiblingControls:i.PropTypes.bool},getDefaultProps:function(){return{hasSiblingControls:!1}},getInitialState:function(){return{isDropdown:!1}},componentDidMount:function(){this.setDropdown(),this.debouncedAfterResize=l(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)},componentWillReceiveProps:function(){this.setDropdown()},componentWillUnmount:function(){window.removeEventListener("resize",this.debouncedAfterResize)},render:function(){var e=i.Children.map(this.props.children,function(e,t){return e&&i.cloneElement(e,{ref:"tab-"+t})}),t=c({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),s=d.getWindowInnerWidth();return i.createElement("div",{className:"section-nav-group",ref:"navGroup"},i.createElement("div",{className:t},this.props.label&&i.createElement("h6",{className:"section-nav-group__label"},this.props.label),i.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&s>f&&this.getDropdown()))},getTabWidths:function(){var e=0;i.Children.forEach(this.props.children,function(t,s){if(t){var n=r.findDOMNode(this.refs["tab-"+s]).offsetWidth;e+=n}}.bind(this)),this.tabsWidth=e},getDropdown:function(){var e=i.Children.map(this.props.children,function(e,t){return e?i.createElement(p,(0,o.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return i.createElement(u,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},e)},setDropdown:function(){var e;if(window.innerWidth>f){if(!this.refs.navGroup)return;e=this.refs.navGroup.offsetWidth,this.tabsWidth||this.getTabWidths(),e<=this.tabsWidth&&!this.state.isDropdown?this.setState({isDropdown:!0}):e>this.tabsWidth&&this.state.isDropdown&&this.setState({isDropdown:!1})}else window.innerWidth<=f&&this.state.isDropdown&&this.setState({isDropdown:!1})},keyHandler:function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}}});e.exports=h},0x69c14441898c8:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e||"default";return i[t]||(i[t]=new r.default(t)),i[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=s(4730164382473449),r=n(o),i={};a._reset=function(){i={}},e.exports=t.default},0x6a1f76eb0b18e:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(5896763357248615),a=s(6138260659294409),o=s(6940362979991673),r=s(6104353596224629),i=s(5084380759969092),l=s(8959178503420160),c=s(4910067807891286);t.default=n.createClass({displayName:"PublicizeMessage",propTypes:{message:n.PropTypes.string,preview:n.PropTypes.string,acceptableLength:n.PropTypes.number,requireCount:n.PropTypes.bool,onChange:n.PropTypes.func},getDefaultProps:function(){return{message:"",acceptableLength:140,requireCount:!1}},onChange:function(e){this.props.onChange?this.props.onChange(e.target.value):r.updateMetadata("_wpas_mess",e.target.value)},recordStats:function(){i.recordStat("sharing_message_changed"),i.recordEvent("Publicize Sharing Message Changed")},renderInfoPopover:function(){return n.createElement(c,{className:"publicize-message-counter-info",position:"bottom left",gaEventCategory:"Editor",popoverName:"SharingMessage"},this.translate("The length includes space for the link to your post and an attached image.",{context:"Post editor sharing message counter explanation"}))},renderTextarea:function(){return this.props.requireCount?n.createElement(a,{value:this.props.message,placeholder:this.props.preview,countPlaceholderLength:!0,onChange:this.onChange,showRemainingCharacters:!0,acceptableLength:this.props.acceptableLength,className:"editor-sharing__message-input"},this.renderInfoPopover()):n.createElement(o,{value:this.props.message,placeholder:this.props.preview,onChange:this.onChange,className:"editor-sharing__message-input"})},render:function(){return n.createElement("div",{className:"editor-sharing__publicize-message"},n.createElement("h5",{className:"editor-sharing__message-heading"},this.translate("Customize the message",{context:"Post editor sharing message heading"})),n.createElement(l,{onNewValue:this.recordStats},this.renderTextarea()))}}),e.exports=t.default},0x6a54be9c417c9:function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},0x6b70b5a07edba:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.moment,s=e.post,n=void 0;if(s){var a=s.status,o=s.modified,i=s.date;n=(0,r.default)(["draft","pending"],a)?o:i}var c=(0,u.default)("post-relative-time",{"is-placeholder":!s});return l.default.createElement("span",{className:c},l.default.createElement(h.default,{icon:"time",size:18,className:"post-relative-time__icon"}),l.default.createElement("span",{className:"post-relative-time__text"},t(n).fromNow()))}Object.defineProperty(t,"__esModule",{value:!0});var o=s(6718701541658404),r=n(o);t.PostRelativeTime=a;var i=s(5896763357248615),l=n(i),c=s(0x8ae3881d6e8c2),u=n(c),p=s(6280957995252369),d=s(7572476330282672),f=s(0xa505046780b0c),h=n(f),m=s(6007716273106560);a.propTypes={globalId:i.PropTypes.string,moment:i.PropTypes.func,post:i.PropTypes.object},t.default=(0,p.connect)(function(e,t){var s=t.globalId;return{post:(0,m.getNormalizedPost)(e,s)}})((0,d.localize)(a))},0x6c975712736af:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(0x3f19c8db6e3b5),m=n(h),g=s(6718701541658404),v=n(g),_=s(5896763357248615),y=n(_),P=s(6280957995252369),b=s(0x8ae3881d6e8c2),E=n(b),T=s(7572476330282672),C=s(0xc98cd4e82fe0b),I=n(C),x=s(7186610166862683),S=n(x),k=s(0x5228ca0f10485),N=n(k),w=s(0x8f1527a7f80c8),D=s(0x956a8e02ae2a5),R=s(7097794044456963),M=s(5790672741810563),O=s(0x78aa42617f90d),L=n(O),A=s(0x6a1f76eb0b18e),U=n(A),H=s(5708247199348607),F=n(H),q=s(709335331861514),j=n(q),z=s(5442310902992342),B=n(z),V=s(7808943754503727),W=s(492788797284063),K=s(790221523576710),G=n(K),Q=s(0x71137121b5d7c),Y=n(Q),Z=s(0x6e6687dc8c68e),J=n(Z),$=s(4883949902648912),X=function(e){
function t(){var e,s,n,a;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return s=n=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),n.state={skipped:L.default.publicizeSkipped(n.props.post)||[],message:L.default.publicizeMessage(n.props.post)||n.props.post.title,showSharingPreview:!1},n.toggleConnection=function(e){var t=n.state.skipped.slice(),s=t.indexOf(e);s!==-1?t.splice(s,1):t.push(e),n.setState({skipped:t})},n.isConnectionActive=function(e){return"broken"!==e.status&&n.skipConnection(e)},n.toggleSharingPreview=function(){var e=!n.state.showSharingPreview;n.setState({showSharingPreview:e})},n.setMessage=function(e){return n.setState({message:e})},n.dismiss=function(){n.props.dismissShareConfirmation(n.props.siteId,n.props.post.ID)},n.sharePost=function(){n.props.sharePost(n.props.siteId,n.props.post.ID,n.state.skipped,n.state.message)},a=s,(0,p.default)(n,a)}return(0,f.default)(t,e),(0,c.default)(t,[{key:"hasConnections",value:function(){return!(!this.props.connections||!this.props.connections.length)}},{key:"skipConnection",value:function(e){var t=e.keyring_connection_ID;return this.state.skipped.indexOf(t)===-1}},{key:"renderServices",value:function(){var e=this;if(this.props.site&&this.hasConnections())return this.props.connections.map(function(t){return y.default.createElement(Y.default,{connection:t,onToggle:e.toggleConnection,isActive:e.isConnectionActive(t),key:t.keyring_connection_ID})})}},{key:"renderMessage",value:function(){if(this.hasConnections()){var e=this.hasConnections()?this.props.connections.filter(this.isConnectionActive):[],t=(0,v.default)((0,m.default)(e,"service"),"twitter"),s=t?94:null;return y.default.createElement(U.default,{message:this.state.message,preview:this.props.post.title,requireCount:t,onChange:this.setMessage,acceptableLength:s})}}},{key:"isButtonDisabled",value:function(){return!!this.props.requesting||this.props.connections.filter(this.isConnectionActive).length<1}},{key:"render",value:function(){var e=this;if(!this.props.isPublicizeEnabled)return null;if(!this.props.planHasRepublicizeFeature)return y.default.createElement("div",{className:"post-share"},y.default.createElement(G.default,{feature:"republicize",title:this.props.translate("Unlock the ability to re-share posts to social media"),callToAction:this.props.translate("Upgrade to Premium"),description:this.props.translate("Get unlimited premium themes, video uploads, monetize your site and more.")}));var t=(0,E.default)("post-share__wrapper",{"has-connections":this.hasConnections()});return y.default.createElement("div",{className:"post-share"},this.props.requesting&&y.default.createElement(F.default,{status:"is-warning",showDismiss:!1},this.props.translate("Sharing…")),this.props.success&&y.default.createElement(F.default,{status:"is-success",onDismissClick:this.dismiss},this.props.translate("Post shared. Please check your social media accounts.")),this.props.failure&&y.default.createElement(F.default,{status:"is-error",onDismissClick:this.dismiss},this.props.translate("Something went wrong. Please don't be mad.")),y.default.createElement("div",{className:t},this.props.siteId&&y.default.createElement(I.default,{siteId:this.props.siteId}),y.default.createElement("div",{className:"post-share__head"},y.default.createElement("h4",{className:"post-share__title"},this.props.translate("Share post")),y.default.createElement("div",{className:"post-share__subtitle"},this.props.translate("Share your post on all of your connected social media accounts using {{a}}Publicize{{/a}}.",{components:{a:y.default.createElement("a",{href:"/sharing/"+this.props.siteSlug})}}))),!this.props.hasFetchedConnections&&y.default.createElement("div",{className:"post-share__main"},y.default.createElement("div",{className:"post-share__form is-placeholder"}),y.default.createElement("div",{className:"post-share__services is-placeholder"})),this.props.hasFetchedConnections&&this.hasConnections()&&y.default.createElement("div",null,y.default.createElement("div",null,this.props.connections.filter(function(e){return"broken"===e.status}).map(function(t){return y.default.createElement(F.default,{key:t.keyring_connection_ID,status:"is-warning",showDismiss:!1,text:e.props.translate("There is an issue connecting to %s.",{args:t.label})},y.default.createElement(j.default,{href:"/sharing/"+e.props.siteSlug},e.props.translate("Reconnect")))})),y.default.createElement("div",{className:"post-share__main"},y.default.createElement("div",{className:"post-share__form"},this.renderMessage(),y.default.createElement("div",{className:"post-share__button-actions"},(0,$.isEnabled)("publicize/preview")&&y.default.createElement(S.default,{className:"post-share__preview-button",onClick:this.toggleSharingPreview},this.props.translate("Preview")),y.default.createElement(S.default,{className:"post-share__button",primary:!0,onClick:this.sharePost,disabled:this.isButtonDisabled()},this.props.translate("Share post")))),y.default.createElement("div",{className:"post-share__services"},y.default.createElement("h5",{className:"post-share__services-header"},this.props.translate("Connected services")),this.renderServices(),y.default.createElement(S.default,{href:"/sharing/"+this.props.siteId,compact:!0,className:"post-share__services-add"},this.props.translate("Add account"))))),this.props.hasFetchedConnections&&!this.hasConnections()&&y.default.createElement(F.default,{status:"is-warning",showDismiss:!1,text:this.props.translate("Connect an account to get started.")},y.default.createElement(j.default,{href:"/sharing/"+this.props.siteSlug},this.props.translate("Settings")))),this.props.site&&y.default.createElement(B.default,{siteId:this.props.site.ID}),y.default.createElement(J.default,{siteId:this.props.siteId,postId:this.props.postId,message:this.state.message,isVisible:this.state.showSharingPreview,onClose:this.toggleSharingPreview}))}}]),t}(_.Component);X.propTypes={siteSlug:_.PropTypes.string,site:_.PropTypes.object,post:_.PropTypes.object,siteId:_.PropTypes.number,isPublicizeEnabled:_.PropTypes.bool,connections:_.PropTypes.array,hasFetchedConnections:_.PropTypes.bool,requestConnections:_.PropTypes.func},t.default=(0,P.connect)(function(e,t){var s=t.site.ID,n=t.post.ID,a=(0,D.getCurrentUserId)(e);return{planHasRepublicizeFeature:(0,V.hasFeature)(e,s,W.FEATURE_REPUBLICIZE),siteSlug:(0,w.getSiteSlug)(e,s),siteId:s,postId:n,isPublicizeEnabled:(0,N.default)(e,s,t.post.type),connections:(0,R.getSiteUserConnections)(e,s,a),hasFetchedConnections:(0,R.hasFetchedConnections)(e,s),requesting:(0,R.isRequestingSharePost)(e,s,t.post.ID),failed:(0,R.sharePostFailure)(e,s,t.post.ID),success:(0,R.sharePostSuccessMessage)(e,s,t.post.ID)}},{requestConnections:M.fetchConnections,sharePost:M.sharePost,dismissShareConfirmation:M.dismissShareConfirmation})((0,T.localize)(X)),e.exports=t.default},0x6e6687dc8c68e:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(83765757817552),o=n(a),r=s(5896763357248615),i=n(r),l=s(0xa505046780b0c),c=n(l),u=s(7127988529575974),p=n(u),d=s(0xe070a3b115674),f=n(d),h=function(e){var t=(0,o.default)(e,["message","siteId","postId"]),s=e.isVisible,n=e.onClose;return i.default.createElement(p.default,{isVisible:s,additionalClassNames:"post-share__sharing-preview-modal"},i.default.createElement("header",{className:"post-share__sharing-preview-modal-header"},i.default.createElement("button",{onClick:n,className:"post-share__sharing-preview-modal-close"},i.default.createElement(c.default,{icon:"cross"}))),i.default.createElement(f.default,t))};h.propTypes={isVisible:r.PropTypes.bool.isRequired,onClose:r.PropTypes.func.isRequired,siteId:r.PropTypes.number,postId:r.PropTypes.number,message:r.PropTypes.string},t.default=h,e.exports=t.default},0x71137121b5d7c:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xc729f06ce7488),o=n(a),r=s(5896763357248615),i=n(r),l=s(0xaa068d7de9e4a),c=n(l),u=s(0x8ae3881d6e8c2),p=n(u),d=s(0xa5f55db858860),f=n(d),h=function(e){var t,s=e.connection,n=e.isActive,a=e.onToggle,r=s.external_display,l=s.keyring_connection_ID,u=s.service,d=function(){return a(l)},h=(0,p.default)((t={"post-share__service":!0},(0,o.default)(t,u,!0),(0,o.default)(t,"is-active",n),(0,o.default)(t,"is-broken","broken"===status),t));return i.default.createElement("div",{onClick:d,className:h},i.default.createElement(c.default,{checked:n}),i.default.createElement(f.default,{icon:"google_plus"===u?"google-plus":u}),i.default.createElement("div",{className:"post-share__service-account-name"},i.default.createElement("span",null,r)))};t.default=h,e.exports=t.default},0x7806e19fe6b42:function(e,t,s){function n(e,t,s){t=r(t,e)?[t]:a(t);var n=-1,l=t.length;for(l||(e=void 0,l=1);++n<l;){var c=null==e?void 0:e[i(t[n])];void 0===c&&(n=l,c=s),e=o(c)?c.call(e):c}return e}var a=s(7844396834262076),o=s(0x729562806a912),r=s(0xc059b38483f2c),i=s(0xa7aa8251b86be);e.exports=n},0x7df7df5329b0e:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(6104353596224629),o=s(623310115397031);e.exports={getInitialState:function(){return{updated:!1,updatedStatus:null,previousStatus:null}},buildUpdateTemplate:function(){var e,t,s,a,o=this.props.post||this.props.page,r=this.state.updatedStatus,i="conf-alert",l=this.strings;if(this.state.updated){switch(r){case"trashing":case"deleting":a="deleting"===r?l.deleting:l.trashing,e=n.createElement("span",null,a," ",n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},".")),i+=" conf-alert--trashing";break;case"trash":s=this.resetToPreviousState,t=n.createElement("a",{className:"undo",onClick:s},n.createElement("span",null,l.undo)),e=l.trashed,i+=" conf-alert--trashed";break;case"deleted":e=l.deleted,i+=" conf-alert--deleted";break;case"updating":e=n.createElement("span",null,l.updating," ",n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},".")),i+=" conf-alert--updating";break;case"error":e=l.error,i+=" conf-alert--error";break;case"restoring":e=n.createElement("span",null,l.restoring," ",n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},"."),n.createElement("span",{className:"loading-dot"},".")),i+=" conf-alert--updating";break;default:e="trash"===this.state.previousStatus?l.restored:l.updated}return n.createElement("div",{key:o.global_ID+"-update",className:"updated-confirmation"},n.createElement("div",{className:i},n.createElement("div",{className:"conf-alert_con"},n.createElement("span",{className:"conf-alert_title"},e),t)))}},updatePostStatus:function(e){var t,s=this.props.post||this.props.page,n=null,o=this.strings;t=function(e,t){return e?(this.setErrorState(),!1):(this.setState({previousStatus:n,updatedStatus:t.status,showMoreOptions:!1}),!0)}.bind(this),"delete"===e?(this.setState({updatedStatus:"deleting",updated:!0}),window.confirm(o.deleteWarning)?a.trash(s,t):this.resetState()):"trash"===e?(this.setState({updatedStatus:"trashing",updated:!0}),n=s.status,a.trash(s,t)):"restore"===e?(this.setState({updatedStatus:"restoring",updated:!0}),n="trash",a.restore(s,t)):(this.setState({updatedStatus:"updating",updated:!0}),a.update(s,{status:e},function(e,s){t(e,s)&&setTimeout(function(){this.resetState()}.bind(this),1200)}.bind(this)))},setErrorState:function(){this.setState({updated:!0,updatedStatus:"error"}),setTimeout(function(){this.resetState()}.bind(this),1200)},resetState:function(){this.setState({updatedStatus:null,updated:!1,showMoreOptions:!1,showPageActions:!1})},resetToPreviousState:function(){var e=this.props.page?{group:"Pages",eventName:"Clicked Undo Trashed Page"}:{group:"Posts",eventName:"Clicked Undo Trashed Post"};o.ga.recordEvent(e.group,e.eventName),this.state.previousStatus&&this.updatePostStatus(this.state.previousStatus)}}},0x7f43ae997b4b5:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(7572476330282672),i=function(e){var t=e.count,s=e.translate,n=void 0;return n=t>0?s("%(commentCount)d comment","%(commentCount)d comments",{count:t,args:{commentCount:t}}):s("No comments"),o.default.createElement("div",{className:"comments__comment-count"},o.default.createElement("span",{className:"comments__comment-count-phrase"},n),0===t&&s(" - Add the first! "))};i.propTypes={count:o.default.PropTypes.number.isRequired},t.default=(0,r.localize)(i),e.exports=t.default},0x80a9362a90928:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(8984451519475015),v=n(g),_=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"renderCommentForm",value:function(){var e=this.props.post,t=this.props.commentsTree.getIn([this.props.commentId,"data","content"]),s=this.props.commentsTree.getIn([this.props.commentId,"parentId"]),n=this.props.commentsTree.getIn([this.props.commentId,"data","placeholderError"]),a=this.props.onUpdateCommentText;return m.default.createElement(v.default,{ref:"postCommentForm",post:e,parentCommentID:s,commentText:t,onUpdateCommentText:a,placeholderId:this.props.commentId,error:n})}},{key:"render",value:function(){return m.default.createElement("li",{className:"comments__comment is-error"},this.renderCommentForm(),this.props.repliesList)}}]),t}(m.default.Component);t.default=_,_.propTypes={post:m.default.PropTypes.object.isRequired,repliesList:m.default.PropTypes.object.isRequired,commentsTree:m.default.PropTypes.object.isRequired,onUpdateCommentText:m.default.PropTypes.func.isRequired,commentId:m.default.PropTypes.oneOfType([m.default.PropTypes.string,m.default.PropTypes.number]).isRequired},e.exports=t.default},0x8502ce0be9ac4:function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},0x9244927499a4b:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(0x8ae3881d6e8c2),i=n(r),l=s(5628363501489590),c=n(l),u=s(0x4c328c9015af2),p=n(u);t.default=o.default.createClass({displayName:"section-header",getDefaultProps:function(){return{label:"",href:null}},render:function(){var e=(0,i.default)(this.props.className,"section-header");return o.default.createElement(c.default,{className:e,href:this.props.href},o.default.createElement("div",{className:"section-header__label"},o.default.createElement("span",{className:"section-header__label-text"},this.props.label),"number"==typeof this.props.count&&o.default.createElement(p.default,{count:this.props.count})),o.default.createElement("div",{className:"section-header__actions"},this.props.children))}}),e.exports=t.default},0x949dfcdc79aa8:function(e,t,s){"use strict";function n(e,t){var s=r.get(e);s!==t&&(o[e]=t)}var a=s(8769427305820155),o={},r={get:function(e){return o[e]}};r.dispatchToken=a.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":n(t.url,t.scrollPosition)}}),e.exports=r},0x9b11f56529aa0:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return r.default.createElement("li",{onClick:i,className:"select-dropdown__label"},r.default.createElement("label",null,e.children))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=s(5896763357248615),r=n(o),i=function(e){return e.stopPropagation()};e.exports=t.default},0x9c8c0ba211732:function(e,t,s){function n(e){return o(e).replace(l,function(e){return e.toLowerCase()}).replace(c,function(e){return e.toUpperCase()})}try{var a=s(0x8502ce0be9ac4)}catch(e){var a=s(0x6a54be9c417c9)}var o=s(953331440743363),r=s(0x459ffd79ff738);e.exports=n;var i=r.map(a),l=new RegExp("[^^]\\b("+i.join("|")+")\\b","ig"),c=/:\s*(\w)/g},0x9c9defe0ad635:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(6072566794544024),m=n(h),g=s(0x45d24eaab7654),v=n(g),_=s(5896763357248615),y=n(_),P=s(6280957995252369),b=s(78648220391165),E=s(0xa505046780b0c),T=n(E),C=s(6881822108913591),I=n(C),x=s(0xd424d627de403),S=n(x),k=s(5380278257315674),N=s(4517819237535069),w="dismissible-card-",D=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,s=e.isDismissed,n=e.onClick,a=e.dismissCard;return s?null:y.default.createElement(I.default,{className:t},y.default.createElement(S.default,null),y.default.createElement(T.default,{icon:"cross",className:"dismissible-card__close-icon",onClick:(0,m.default)(n,a)}),this.props.children)}}]),t}(_.Component);D.propTypes={className:_.PropTypes.string,dismissCard:_.PropTypes.func,isDismissed:_.PropTypes.bool,temporary:_.PropTypes.bool,onClick:_.PropTypes.func,preferenceName:_.PropTypes.string.isRequired},D.defaultProps={onClick:v.default},t.default=(0,P.connect)(function(e,t){var s=""+w+t.preferenceName;return{isDismissed:(0,N.getPreference)(e,s)}},function(e,t){return(0,b.bindActionCreators)({dismissCard:function(){var e=""+w+t.preferenceName;return t.temporary?(0,k.setPreference)(e,!0):(0,k.savePreference)(e,!0)}},e)})(D),e.exports=t.default},0xa3b7781c9b77c:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t,s;return e=e||g.getSiteID(),t=_.getSite(e),t&&(s=t.ID),s}function o(e,t,s){var n=a(s);return d(t,b[n])?f("No changes"):b[n]&&"local"===e?void f("do not override post-counts with local response data"):(b[n]=t.counts,f("[%s] update statuses: %o",n||"All my sites",t.counts),void c.emit("change"))}function r(e,t){var s;return e&&t?(s=e.site_ID)?(f("comparing `%s` == `%s`",e.status,t.status),e.status===t.status?void f("[%s] %o post has not changed its status",e.site_ID,e.ID):(l(e,t,c.get(s,"all")),l(e,t,c.get(s,"mine")),void c.emit("change"))):f("No site ID defined"):f("Post states are not defined")}function i(e){var t=e.site_ID;return t?(l(e,null,c.get(t,"all")),l(e,null,c.get(t,"mine")),void c.emit("change")):f("No site ID defined")}function l(e,t,s){e&&s&&("undefined"==typeof s[e.status]&&(f("Add new post status `%s`",e.status),s[e.status]=0),s[e.status]++,f("%s status incremented to %o",e.status,s[e.status]),t&&(s[t.status]--,f("%s status decremented to %o",t.status,s[t.status])))}var c,u=s(477028190620861),p=n(u),d=s(0xf0f4288728240),f=s(4675954658966525)("calypso:posts:post-counts-store"),h=function(e){return(0,p.default)(e).reduce(function(t,s){return t+parseFloat(e[s])},0)},m=s(0xf2ce944f0fc89),g=s(0x69c14441898c8)(),v=s(0xe5816b799bd0f),_=s(7418474439241154)(),y=s(0x5dd72de17825d),P=s(8769427305820155),b={};c={get:function(e,t){var s,n;return(n=a(e))?(t=t||"all",s=b[n]?b[n][t]:null,f("[%s][%s] statuses: %o",n,t,s),s):null},getTotalCount:function(e,t){var s,n,o;return t=t||"all",(o=a(e))?(s=b[o]?b[o][t]:null,n=0,s&&(n=h(s)),f("[%s][%s] total: %o ",o,t,n),n):null}},m(c),c.dispatchToken=P.register(function(e){var t=e.action,s=t.data;switch(P.waitFor([v.dispatchToken]),t.type){case"RECEIVE_UPDATED_POSTS":case"RECEIVE_POSTS_PAGE":if(s&&s.meta&&s.meta.data&&s.meta.data.counts){var n=s.__sync&&s.__sync.responseSource;o(n,s.meta.data.counts)}break;case"RECEIVE_POST_COUNTS":if(s&&s.counts&&t.siteId){var a=s.__sync&&s.__sync.responseSource;o(a,s,t.siteId)}break;case"RECEIVE_UPDATED_POST":t.post&&!y.isPage(t.post)&&r(t.post,t.original);break;case"RECEIVE_POST_BEING_EDITED":t.post&&!y.isPage(t.post)&&(t.original?r(t.post,t.original):t.isNew&&i(t.post))}}),e.exports=c},0xa940c0d950c71:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FacebookSharePreview=void 0;var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(7572476330282672),v=t.FacebookSharePreview=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.articleUrl,s=e.externalProfilePicture,n=e.externalProfileUrl,a=e.externalName,o=e.imageUrl,r=e.message,i=e.translate;return m.default.createElement("div",{className:"facebook-share-preview"},m.default.createElement("div",{className:"facebook-share-preview__content"},m.default.createElement("div",{className:"facebook-share-preview__header"},m.default.createElement("div",{className:"facebook-share-preview__profile-picture-part"},m.default.createElement("img",{className:"facebook-share-preview__profile-picture",src:s})),m.default.createElement("div",{className:"facebook-share-preview__profile-line-part"},m.default.createElement("div",{className:"facebook-share-preview__profile-line"},m.default.createElement("a",{className:"facebook-share-preview__profile-name",href:n},a),m.default.createElement("span",null,i("published an article on {{a}}WordPress{{/a}}",{components:{a:m.default.createElement("a",{href:"#"})}}))),m.default.createElement("div",{className:"facebook-share-preview__meta-line"},m.default.createElement("a",{href:"https://wordpress.com"},i("WordPress"))))),m.default.createElement("div",{className:"facebook-share-preview__body"},m.default.createElement("div",{className:"facebook-share-preview__message"},r),m.default.createElement("div",{className:"facebook-share-preview__article-url-line"},m.default.createElement("a",{className:"facebook-share-preview__article-url",href:t},t)),o&&m.default.createElement("div",{className:"facebook-share-preview__image-wrapper"},m.default.createElement("img",{className:"facebook-share-preview__image",src:o})))))}}]),t}(h.PureComponent);v.PropTypes={articleUrl:h.PropTypes.string,externalProfilePicture:h.PropTypes.string,externalProfileUrl:h.PropTypes.string,externalName:h.PropTypes.string,imageUrl:h.PropTypes.string,message:h.PropTypes.string},t.default=(0,g.localize)(v)},0xaa068d7de9e4a:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(5630966280090368),o=n(a),r=s(5896763357248615),i=s(0x8ae3881d6e8c2),l=s(5059747709250767),c=s(7346600848553968);e.exports=r.createClass({displayName:"CompactFormToggle",render:function(){return r.createElement(c,(0,o.default)({},l(this.props,"className"),{className:i(this.props.className,"is-compact")}),this.props.children)}})},0xac50277d9a3bc:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getExcerptForPost=t.getPostImage=void 0;var a=s(463848289870480),o=n(a),r=s(0xeb8f73c122973),i=n(r),l=s(5020179656051692),c=n(l),u=s(8640881565075096),p=n(u),d=s(5827666530157804),f=n(d),h=s(5854485157250348),m=s(0x78aa42617f90d),g=n(m),v=s(6729227089147156),_=512;t.getPostImage=function(e){if(!e)return null;if(e.featured_image)return e.featured_image;var t=e.content;if(!t)return null;var s=(0,v.parseHtml)(t).querySelectorAll("img"),n=(0,p.default)((0,c.default)(s,function(e){var t=e.width;return t>=_}),"src",null);return n?n+"?s="+_:null},t.getExcerptForPost=function(e){return e?(0,o.default)((0,f.default)((0,h.formatExcerpt)((0,c.default)([g.default.metaDescription(e),e.excerpt,e.content],i.default)))):null}},0xae355779372a9:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(19189154744278),o=s(0x8ae3881d6e8c2),r=n.createClass({displayName:"PostImage",mixins:[a],propTypes:{postImages:n.PropTypes.shape({featured_image:n.PropTypes.string,canonical_image:n.PropTypes.shape({uri:n.PropTypes.string.isRequired,width:n.PropTypes.number,height:n.PropTypes.number}),content_images:n.PropTypes.arrayOf(n.PropTypes.shape({src:n.PropTypes.string.isRequired,width:n.PropTypes.number,height:n.PropTypes.number})),images:n.PropTypes.arrayOf(n.PropTypes.shape({src:n.PropTypes.string.isRequired,width:n.PropTypes.number,height:n.PropTypes.number}))})},getInitialState:function(){return{collapsed:!0}},render:function(){var e,t,s=this._getImageURL();return s?(this.state.collapsed&&(t={backgroundImage:"url("+s+")"}),e=o({"post-image":!0,"is-collapsed":this.state.collapsed}),n.createElement("div",{className:e,style:t,onClick:this._handleClick},this.state.collapsed?null:n.createElement("img",{src:s,className:"post-image__image"}))):null},_getImageURL:function(){var e=this.props.postImages;return""!==e.featured_image?e.featured_image:e.canonical_image&&e.canonical_image.uri?e.canonical_image.uri:e.content_images&&e.content_images.length&&e.content_images[0].src?e.content_images[0].src:e.images&&e.images.length?e.images[0].src:void 0},_handleClick:function(){this.setState({collapsed:!this.state.collapsed})}});e.exports=r},0xb4de1ee4522d8:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(8663546351946179),o=n(a),r=s(5896763357248615),i=s(19189154744278),l=s(4675954658966525)("calypso:my-sites:posts"),c=s(7452954268806788),u=s(5059747709250767),p=s(0xf0f4288728240),d=s(8465445476206728),f=s(0x3d448b52b7141),h=s(0xc318cb75775e7),m=s(6104353596224629),g=s(70219791644428),v=s(0xbfad9041fa583),_=s(0xba0ce520fef8a),y=s(7304560458482196),P=s(4808587282202068),b=P.mapPostStatus,E=250,T=r.createClass({displayName:"PostList",mixins:[i],propTypes:{context:r.PropTypes.object,search:r.PropTypes.string,sites:r.PropTypes.object,statusSlug:r.PropTypes.string,siteID:r.PropTypes.any,author:r.PropTypes.number},render:function(){return r.createElement(d,{siteID:this.props.siteID,status:b(this.props.statusSlug),author:this.props.author,withImages:!0,withCounts:!0,search:this.props.search},r.createElement(C,u(this.props,"children")))}}),C=r.createClass({displayName:"Posts",propTypes:{author:r.PropTypes.number,context:r.PropTypes.object.isRequired,hasRecentError:r.PropTypes.bool.isRequired,lastPage:r.PropTypes.bool.isRequired,loading:r.PropTypes.bool.isRequired,page:r.PropTypes.number.isRequired,postImages:r.PropTypes.object.isRequired,posts:r.PropTypes.array.isRequired,search:r.PropTypes.string,siteID:r.PropTypes.any,sites:r.PropTypes.object.isRequired,statusSlug:r.PropTypes.string,trackScrollPage:r.PropTypes.func.isRequired},getDefaultProps:function(){return{hasRecentError:!1,loading:!1,lastPage:!1,page:0,postImages:{},posts:[],trackScrollPage:function(){}}},mixins:[g("sites")],getInitialState:function(){return{postsAtFullWidth:window.innerWidth>=960}},componentDidMount:function(){l("Posts React component mounted."),this.debouncedAfterResize=c(this.afterResize,300),window.addEventListener("resize",this.debouncedAfterResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.debouncedAfterResize)},shouldComponentUpdate:function(e){return e.loading!==this.props.loading||(e.hasRecentError!==this.props.hasRecentError||(e.lastPage!==this.props.lastPage||(e.statusSlug!==this.props.statusSlug||!p(e.posts.map(function(e){return e.ID}),this.props.posts.map(function(e){return e.ID})))))},afterResize:function(){var e=window.innerWidth>=960;this.state.postsAtFullWidth!==e&&this.setState({postsAtFullWidth:e})},fetchPosts:function(e){this.props.loading||this.props.lastPage||this.props.hasRecentError||(e.triggeredByScroll&&this.props.trackScrollPage(this.props.page+1),m.fetchNextPage())},getNoContentMessage:function(){var e,t;if(this.props.search)return r.createElement(y,{image:"/calypso/images/posts/illustration-posts.svg",text:this.translate("No posts match your search for {{searchTerm/}}.",{components:{searchTerm:r.createElement("em",null,this.props.search)}})});if(t=this.props.siteID?"/post/"+this.props.siteID:"/post",this.props.hasRecentError)e={title:this.translate("Oh, no! We couldn't fetch your posts."),line:this.translate("Please check your internet connection.")};else switch(this.props.statusSlug){case"drafts":e={title:this.translate("You don't have any drafts."),line:this.translate("Would you like to create one?"),action:this.translate("Start a Post"),actionURL:t};break;case"scheduled":e={title:this.translate("You don't have any scheduled posts."),line:this.translate("Would you like to schedule a draft to publish?"),action:this.translate("Edit Drafts"),actionURL:this.props.siteID?"/posts/drafts/"+this.props.siteID:"/posts/drafts"};break;case"trashed":e={title:this.translate("You don't have any posts in your trash folder."),line:this.translate("Everything you write is solid gold.")};break;default:e={title:this.translate("You haven't published any posts yet."),line:this.translate("Would you like to publish your first post?"),action:this.translate("Start a Post"),actionURL:t}}return e.illustration="/calypso/images/posts/illustration-posts.svg",e.illustrationWidth=150,r.createElement(v,{title:e.title,line:e.line,action:e.action,actionURL:e.actionURL,illustration:e.illustration,illustrationWidth:e.illustrationWidth})},getPostRef:function(e){return e.global_ID},renderLoadingPlaceholders:function(){return r.createElement(h,{key:"placeholder-scroll-"+this.props.page})},renderPost:function(e,t){var s=this.props.postImages[e.global_ID],n=r.createElement(f,{ref:e.global_ID,key:e.global_ID,post:e,postImages:s,sites:this.props.sites,fullWidthPost:this.state.postsAtFullWidth,path:P.sectionify(this.props.context.pathname)});return 2===t&&this.props.sites.getSelectedSite()&&!this.props.statusSlug?r.createElement("div",{key:e.global_ID},r.createElement(o.default,{title:this.translate("No Ads with WordPress.com Premium"),message:this.translate("Prevent ads from showing on your site."),feature:"no-adverts",event:"published_posts_no_ads"}),n):n},render:function(){var e,t,s=this.props.posts,n=1,a=[];if(s.length&&this.props.sites.initialized)e=r.createElement(_,{key:"list-"+this.props.listId,className:"posts__list",items:s,lastPage:this.props.lastPage,fetchingNextPage:this.props.loading,guessedItemHeight:E,fetchNextPage:this.fetchPosts,getItemRef:this.getPostRef,renderItem:this.renderPost,renderLoadingPlaceholders:this.renderLoadingPlaceholders});else{if(this.props.loading||!this.props.sites.fetched)for(t=0;t<n;t++)a.push(r.createElement(h,{key:"placeholder-"+t}));else a=this.getNoContentMessage();e=r.createElement("div",{className:"posts__list"},a)}return r.createElement("div",null,e,this.props.lastPage&&s.length?r.createElement("div",{className:"infinite-scroll-end"}):null)}});e.exports=T},0xb82401cd42a70:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(6859950644507639),o=n(a),r=s(5896763357248615),i=s(19189154744278),l=s(5059747709250767),c=s(8465445476206728),u=s(8165709587933903),p=s(0xdae4ce7238847),d=s(70219791644428),f=s(0xbfad9041fa583),h=s(7304560458482196),m=s(6104353596224629),g=s(0xdbedaf3ba9337),v=s(4808587282202068).mapPostStatus,_=r.createClass({displayName:"PageList",mixins:[i],propTypes:{context:r.PropTypes.object,search:r.PropTypes.string,sites:r.PropTypes.object,siteID:r.PropTypes.any},render:function(){return r.createElement(c,{type:"page",siteID:this.props.siteID,status:v(this.props.status),search:this.props.search},r.createElement(y,l(this.props,"children")))}}),y=r.createClass({displayName:"Pages",mixins:[p("fetchPages"),d("sites")],propTypes:{context:r.PropTypes.object.isRequired,
lastPage:r.PropTypes.bool.isRequired,loading:r.PropTypes.bool.isRequired,page:r.PropTypes.number.isRequired,posts:r.PropTypes.array.isRequired,search:r.PropTypes.string,siteID:r.PropTypes.any,sites:r.PropTypes.object.isRequired,trackScrollPage:r.PropTypes.func.isRequired,hasRecentError:r.PropTypes.bool.isRequired},getDefaultProps:function(){return{perPage:20,loading:!1,hasRecentError:!1,lastPage:!1,page:0,posts:[],trackScrollPage:function(){}}},fetchPages:function(e){this.props.loading||this.props.lastPage||this.props.hasRecentError||(e.triggeredByScroll&&this.props.trackScrollPage(this.props.page+1),m.fetchNextPage())},_insertTimeMarkers:function(e){var t,s,n=[],a=this.moment();return s=function(e){e=this.moment(e);var t=a.diff(e,"days");return t<=0?this.translate("Today"):1===t?this.translate("Yesterday"):e.from(a)}.bind(this),e.forEach(function(e){var a=this.moment(e.date),o=s(a);t!==o&&n.push(r.createElement("div",{key:"marker-"+a.unix(),className:"page-list__header"},r.createElement("span",{className:"noticon noticon-time"})," ",o," ")),t=o,n.push(e)},this),n},getNoContentMessage:function(){var e,t;if(this.props.search)return r.createElement(h,{image:"/calypso/images/pages/illustration-pages.svg",text:this.translate("No pages match your search for {{searchTerm/}}.",{components:{searchTerm:r.createElement("em",null,this.props.search)}})});if(t=this.props.siteID?"/page/"+this.props.siteID:"/page",this.props.hasRecentError)e={title:this.translate("Oh, no! We couldn't fetch your pages."),line:this.translate("Please check your internet connection.")};else{var s=this.props.status||"published";switch(s){case"drafts":e={title:this.translate("You don't have any drafts."),line:this.translate("Would you like to create one?"),action:this.translate("Start a Page"),actionURL:t};break;case"scheduled":e={title:this.translate("You don't have any scheduled pages yet."),line:this.translate("Would you like to create one?"),action:this.translate("Start a Page"),actionURL:t};break;case"trashed":e={title:this.translate("You don't have any pages in your trash folder."),line:this.translate("Everything you write is solid gold.")};break;default:e={title:this.translate("You haven't published any pages yet."),line:this.translate("Would you like to publish your first page?"),action:this.translate("Start a Page"),actionURL:t}}}return e.illustration="/calypso/images/pages/illustration-pages.svg",e.illustrationWidth=150,r.createElement(f,{title:e.title,line:e.line,action:e.action,actionURL:e.actionURL,illustration:e.illustration,illustrationWidth:e.illustrationWidth})},addLoadingRows:function(e,t){var s;for(s=0;s<t;s++)s%4===0&&e.push(r.createElement(g.Marker,{key:"placeholder-marker-"+s})),e.push(r.createElement(g.Page,{key:"placeholder-page-"+s,multisite:this.props.siteID===!1}))},render:function(){var e=this.props.posts,t=[];if(e.length&&this.props.sites.initialized){this.props.search||(e=this._insertTimeMarkers(e)),t=e.map(function(e){if(!("site_ID"in e))return e;var t=this.props.sites.getSite(e.site_ID);return r.createElement(u,{key:"page-"+e.global_ID,page:e,site:t,multisite:this.props.siteID===!1})},this),this.props.loading&&this.addLoadingRows(t,1);var s=this.props.sites.getSelectedSite(),n=this.props.status||"published";s&&"published"===n&&t.push(r.createElement(o.default,{key:"blog-posts-page",site:s}))}else!this.props.loading&&this.props.sites.initialized?t.push(r.createElement("div",{key:"page-list-no-results"},this.getNoContentMessage())):this.addLoadingRows(t,1);return r.createElement("div",{id:"pages",className:"page-list"},t,this.props.lastPage&&e.length?r.createElement("div",{className:"infinite-scroll-end"}):null)}});e.exports=_},0xb92682aa82593:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5613014578198101),o=n(a);t.default=o.default,e.exports=t.default},0xb952c2ac6b114:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s){return(0,g.default)(e.posts.counts.requesting,[t,s],!1)}function o(e,t,s){return(0,g.default)(e.posts.counts.counts,[t,s,"all"],null)}function r(e,t,s,n){var a=o(e,t,s);return a?a[n]||0:null}function i(e,t,s){return(0,g.default)(e.posts.counts.counts,[t,s,"mine"],null)}function l(e,t,s,n){var a=i(e,t,s);return a?a[n]||0:null}function c(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,a=n(e,t,s);return v.reduce(function(e,t){var s=(0,g.default)(a,t,0),n=void 0;switch(t){case"publish":case"private":n="publish";break;case"draft":case"pending":n="draft";break;default:n=t}return(0,h.default)({},e,(0,d.default)({},n,(e[n]||0)+s))},{})}function u(e,t,s){return c(e,t,s,i)}Object.defineProperty(t,"__esModule",{value:!0});var p=s(0xc729f06ce7488),d=n(p),f=s(5630966280090368),h=n(f);t.isRequestingPostCounts=a,t.getAllPostCounts=o,t.getAllPostCount=r,t.getMyPostCounts=i,t.getMyPostCount=l,t.getNormalizedPostCounts=c,t.getNormalizedMyPostCounts=u;var m=s(8640881565075096),g=n(m),v=["publish","draft","pending","private","future","trash"]},0xb955bf800b1d7:function(e,t,s){s(0xd177761b9fe86);var n=s(8854536544192095).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},0xba0ce520fef8a:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(477028190620861),o=n(a),r=s(4675954658966525),i=n(r),l=s(5059747709250767),c=n(l),u=s(0x90ba166cd016c),p=n(u),d=s(5896763357248615),f=n(d),h=s(5921998412115101),m=n(h),g=s(8130523061664933),v=n(g),_=s(0xe96395f1eded3),y=n(_),P=s(6346297615794200),b=n(P),E=s(0x949dfcdc79aa8),T=n(E),C=s(0x4ce9eddf96ff4),I=n(C),x=s(0xac26052d5c9f7),S=n(x),k=s(0x7a27b5b6e9228),N=n(k),w=(0,i.default)("calypso:infinite-list");e.exports=f.default.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:f.default.PropTypes.array.isRequired,fetchingNextPage:f.default.PropTypes.bool.isRequired,lastPage:f.default.PropTypes.bool.isRequired,guessedItemHeight:f.default.PropTypes.number.isRequired,itemsPerRow:f.default.PropTypes.number,fetchNextPage:f.default.PropTypes.func.isRequired,getItemRef:f.default.PropTypes.func.isRequired,renderItem:f.default.PropTypes.func.isRequired,renderLoadingPlaceholders:f.default.PropTypes.func.isRequired,renderTrailingItems:f.default.PropTypes.func,context:f.default.PropTypes.oneOfType([f.default.PropTypes.object,f.default.PropTypes.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:N.default,componentWillMount:function(){var e=p.default.current,t=void 0,s=void 0;v.default.loadedViaHistory()&&(t=b.default.get(e),s=T.default.get(e)),t&&s&&(w("overriding scrollTop:",s),t.scrollTop=s),this.scrollHelper=new I.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?w("infinite-list positions loaded from store"):(w("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),w("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),v.default.loadedViaHistory()&&this._overrideHistoryScroll(),w("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),v.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new I.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(w("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,S.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=p.default.current,s=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),y.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(s={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,w("new scroll positions",s,this.state),this.smartSetState(s),y.default.storePositions(t,s)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?m.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=m.default.findDOMNode(this),s=[],n=this.state.firstRenderedIndex,a=this.state.lastRenderedIndex,o=e&&e.offsetTop?e.offsetTop:0,r=void 0,i=void 0,l=void 0,c=void 0,u=e&&e.offsetBottom?e.offsetBottom:0;if(u=u||0,a>-1)for(l=t.children,c=1;c<l.length-1;c++)i=t.children[c].getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,(i.top<0&&Math.abs(i.top)<i.height-o||i.top>0&&i.top<r-u)&&s.push({index:n+c-1,bounds:i});return s},render:function(){var e=(0,c.default)(this.props,(0,o.default)(this.constructor.propTypes)),t="infinite-list__spacer",s=void 0,n=this.state.lastRenderedIndex,a=[];for((n===-1||n>this.props.items.length-1)&&(w("resetting lastRenderedIndex, currently at %s, %d items",n,this.props.items.length),n=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),w("reset lastRenderedIndex to %s",n)),w("rendering %d to %d",this.state.firstRenderedIndex,n),s=this.state.firstRenderedIndex;s<=n;s++)a.push(this.props.renderItem(this.props.items[s],s));return this.props.fetchingNextPage&&(a=a.concat(this.props.renderLoadingPlaceholders())),f.default.createElement("div",e,f.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),a,this.props.renderTrailingItems(),f.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(w("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),w("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}})},0xbceb83e51862c:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(0xf0f4288728240),o=s(0x8ae3881d6e8c2),r=s(0x6925a2279f1f8),i=s(5890255058533989),l=s(0x75aac138cedeb),c=n.createClass({displayName:"SectionNav",propTypes:{children:n.PropTypes.node,selectedText:n.PropTypes.node,selectedCount:n.PropTypes.number,hasPinnedItems:n.PropTypes.bool,onMobileNavPanelOpen:n.PropTypes.func},getInitialState:function(){return{mobileOpen:!1}},getDefaultProps:function(){return{onMobileNavPanelOpen:function(){}}},componentWillMount:function(){this.checkForSiblingControls(this.props.children)},componentWillReceiveProps:function(e){a(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())},render:function(){var e,t=this.getChildren();return t?(e=o({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems}),n.createElement("div",{className:e},n.createElement("div",{className:"section-nav__mobile-header",onClick:this.toggleMobileOpenState},n.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText)),n.createElement("div",{className:"section-nav__panel"},t))):(e=o({"section-nav":!0,"is-empty":!0}),n.createElement("div",{className:e},n.createElement("div",{className:"section-nav__panel"},n.createElement(i,null))))},getChildren:function(){return n.Children.map(this.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==r||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===r&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===l&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),n.cloneElement(e,t)):null}.bind(this))},closeMobilePanel:function(){window.innerWidth<480&&this.state.mobileOpen&&this.setState({mobileOpen:!1})},toggleMobileOpenState:function(){var e=!this.state.mobileOpen;this.setState({mobileOpen:e}),e&&this.props.onMobileNavPanelOpen()},generateOnSearch:function(e){return function(){e.apply(this,arguments),this.closeMobilePanel()}.bind(this)},checkForSiblingControls:function(e){this.hasSiblingControls=!1,n.Children.forEach(e,function(e,t){t&&e&&e.type!==l&&(this.hasSiblingControls=!0)}.bind(this))}});e.exports=c},0xc318cb75775e7:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(6881822108913591);e.exports=n.createClass({displayName:"PostPlaceholder",render:function(){return n.createElement(a,{tagName:"article",className:"post is-placeholder"},n.createElement("div",{className:"post__body"},n.createElement("header",{className:"post-attribution"},n.createElement("span",null,n.createElement("span",{className:"post-attribution-avatar is-rounded"}),n.createElement("span",{className:"placeholder-text"},this.translate("A Great Author on a Fantastic Site")))),n.createElement("div",{className:"post__content"},n.createElement("h4",{className:"post__title post__title-link"},n.createElement("span",{className:"placeholder-text"},this.translate("Loading Posts…"))),n.createElement("div",{className:"post__excerpt"},n.createElement("p",null,n.createElement("span",{className:"placeholder-text"},this.translate("Currently fetching the latest and greatest posts from your site(s). Looking good."))))),n.createElement("footer",{className:"post__info"},n.createElement("div",{className:"post__time"},n.createElement("span",{className:"placeholder-text"},this.translate("Near future"))))),n.createElement("div",{className:"post-controls"},n.createElement("ul",{className:"post-controls__pane post-controls__main-options"},n.createElement("li",null,n.createElement("a",null)),n.createElement("li",null,n.createElement("a",null)),n.createElement("li",null,n.createElement("a",null)),n.createElement("li",null,n.createElement("a",null)))))}})},0xc8ef941fdffb6:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(6280957995252369),v=s(7572476330282672),_=s(6718701541658404),y=n(_),P=s(72591479426812),b=n(P),E=s(623310115397031),T=s(6007716273106560),C=s(0x8f1527a7f80c8),I=s(8741111692106981),x=s(301929001539288),S=function(e){function t(){var e,s,n,a;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return s=n=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),n.previewPost=function(e){var t=n.props,s=t.isPreviewable,a=t.previewUrl;E.mc.bumpStat("calypso_cpt_actions","view"),s&&(n.props.setPreviewUrl(a),n.props.setLayoutFocus("preview"),n.props.onClick(),e.preventDefault())},a=s,(0,p.default)(n,a)}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,s=e.status,n=e.previewUrl;return n?m.default.createElement(b.default,{href:n,onClick:this.previewPost,icon:"visible",target:"_blank",rel:"noopener noreferrer"},(0,y.default)(["publish","private"],s)?t("View",{context:"verb"}):t("Preview",{context:"verb"})):null}}]),t}(h.Component);S.propTypes={globalId:h.PropTypes.string,translate:h.PropTypes.func.isRequired,status:h.PropTypes.string,isPreviewable:h.PropTypes.bool,onClick:h.PropTypes.func,previewUrl:h.PropTypes.string,setPreviewUrl:h.PropTypes.func.isRequired,setLayoutFocus:h.PropTypes.func.isRequired},S.defaultProps={globalId:"",status:"draft",isPreviewable:!1,onClick:function(){},previewUrl:""},t.default=(0,g.connect)(function(e,t){var s=(0,T.getPost)(e,t.globalId);return s?{status:s.status,isPreviewable:!1!==(0,C.isSitePreviewable)(e,s.site_ID),previewUrl:(0,T.getPostPreviewUrl)(e,s.site_ID,s.ID)}:{}},{setPreviewUrl:I.setPreviewUrl,setLayoutFocus:x.setLayoutFocus})((0,v.localize)(S)),e.exports=t.default},0xd177761b9fe86:function(e,t,s){s(0xf7227baa5284)("getOwnPropertyNames",function(){return s(8795905191541332).f})},0xdae4ce7238847:function(e,t,s){"use strict";var n=s(0xd0219df97eb97),a=400;e.exports=function(e){return{componentDidMount:function(){this.checkScrollPositionHandler=n(this.checkScrollPosition.bind(this,{triggeredByScroll:!0}),a),window.addEventListener("scroll",this.checkScrollPositionHandler),this.checkScrollPosition({triggeredByScroll:!1})},componentDidUpdate:function(){this.checkScrollPosition({triggeredByScroll:!1})},componentWillUnmount:function(){window.removeEventListener("scroll",this.checkScrollPositionHandler)},checkScrollPosition:function(t){var s=window.pageYOffset,n=document.body.scrollHeight,a=window.innerHeight,o=2*a,r=t.triggeredByScroll,i=this;s>=n-a-o&&(s>a&&(r=!0),setTimeout(function(){i[e]({triggeredByScroll:r})},0))}}}},0xdbedaf3ba9337:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(5628363501489590),o=s(0xa72c09d16709f);e.exports={Page:n.createClass({displayName:"PagePlaceholder",render:function(){return n.createElement(a,{className:"page is-placeholder"},this.props.multisite?n.createElement(o,{size:34}):null,n.createElement("a",{className:"page__title"},n.createElement("span",{className:"placeholder-text"},this.translate("Loading a page of Pages…"))),this.props.multisite?n.createElement("span",{className:"page__site-url "},n.createElement("span",{className:"placeholder-text"},this.translate("A domain, quite soon…"))):null)}}),Marker:n.createClass({displayName:"MarkerPlaceholder",render:function(){return n.createElement("div",{className:"page-list__header is-placeholder"},n.createElement("span",null," "))}})}},0xe070a3b115674:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5630966280090368),o=n(a),r=s(0xccd53b671ebb6),i=n(r),l=s(5143893728007863),c=n(l),u=s(5880884711457125),p=n(u),d=s(8173823076638946),f=n(d),h=s(5369032381290393),m=n(h),g=s(5020179656051692),v=n(g),_=s(8640881565075096),y=n(_),P=s(5896763357248615),b=n(P),E=s(6280957995252369),T=s(7572476330282672),C=s(0xac50277d9a3bc),I=s(0xa940c0d950c71),x=n(I),S=s(0x3c2cc2dd58579),k=n(S),N=s(0xa5a2e36057198),w=n(N),D=s(0x5654deb3f9f89),R=s(6007716273106560),M=s(0x8f1527a7f80c8),O=s(7097794044456963),L=s(0x956a8e02ae2a5),A=function(e){function t(){var e,s,n,a;(0,c.default)(this,t);for(var o=arguments.length,r=Array(o),l=0;l<o;l++)r[l]=arguments[l];return s=n=(0,f.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(r))),n.state={selectedService:"facebook"},n.selectPreview=function(e){n.setState({selectedService:e})},a=s,(0,f.default)(n,a)}return(0,m.default)(t,e),(0,p.default)(t,[{key:"renderPreview",value:function(){var e=this.props,t=e.post,s=e.message,n=e.connections,a=this.state.selectedService,r=(0,v.default)(n,{service:a});if(!r)return null;var i=(0,y.default)(t,"URL",""),l=(0,C.getPostImage)(t),c=r.external_name,u=r.external_profile_url,p=r.external_profile_picture,d=r.external_display,f={articleUrl:i,externalName:c,externalProfileURL:u,externalProfilePicture:p,message:s,imageUrl:l};switch(a){case"facebook":return b.default.createElement(x.default,f);case"twitter":return b.default.createElement(k.default,(0,o.default)({},f,{externalDisplay:d}));default:return null}}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.services;return b.default.createElement("div",{className:"sharing-preview-pane"},b.default.createElement("div",{className:"sharing-preview-pane__sidebar"},b.default.createElement("div",{className:"sharing-preview-pane__explanation"},b.default.createElement("h1",{className:"sharing-preview-pane__title"},t("Social Previews")),b.default.createElement("p",{className:"sharing-preview-pane__description"},t("This is how your post will appear when people view or share it on any of the networks below"))),b.default.createElement(w.default,{onClick:this.selectPreview},s.map(function(e){return b.default.createElement(D.SocialItem,{key:e,service:e})}))),b.default.createElement("div",{className:"sharing-preview-pane__preview-area"},b.default.createElement("div",{className:"sharing-preview-pane__preview"},this.renderPreview())))}}]),t}(P.PureComponent);A.propTypes={siteId:P.PropTypes.number,postId:P.PropTypes.number,services:P.PropTypes.array,message:P.PropTypes.string,site:P.PropTypes.object,post:P.PropTypes.object,seoTitle:P.PropTypes.string},A.defaultProps={services:["facebook","twitter"]};var U=function(e,t){var s=t.siteId,n=t.postId,a=(0,M.getSite)(e,s),o=(0,R.getSitePost)(e,s,n),r=(0,M.getSeoTitle)(e,"posts",{site:a,post:o}),i=(0,L.getCurrentUserId)(e),l=(0,O.getSiteUserConnections)(e,s,i);return{site:a,post:o,seoTitle:r,connections:l}};t.default=(0,E.connect)(U)((0,T.localize)(A)),e.exports=t.default},0xe5816b799bd0f:function(e,t,s){"use strict";function n(e){var t=r.get(e.global_ID);t&&i(e,t)||(p[e.global_ID]=e)}function a(e,t){var s=t||{},a=s.global_ID;if(!a)return void l("global_ID is required for a post",t);var o=r.get(a);return o&&"local"===e?void l("existing record (%o), do not overwrite with local response",o):void c.normalizeSync(t,function(e,t){n(t)})}function o(e,t){var s=a.bind(null,t);e.forEach(s)}var r,i=s(0xf0f4288728240),l=s(4675954658966525)("calypso:posts"),c=s(0x5dd72de17825d),u=s(8769427305820155),p={};r={get:function(e){return p[e]}},r.dispatchToken=u.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var s=t.data.__sync&&t.data.__sync.responseSource;o(t.data.posts,s)}break;case"RECEIVE_UPDATED_POST":t.error||a("server",t.post)}}),e.exports=r},0xe6b178f9df1b9:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})}Object.defineProperty(t,"__esModule",{value:!0});var o=s(0xccd53b671ebb6),r=n(o),i=s(5143893728007863),l=n(i),c=s(5880884711457125),u=n(c),p=s(8173823076638946),d=n(p),f=s(5369032381290393),h=n(f),m=s(5896763357248615),g=n(m),v=s(0xa505046780b0c),_=n(v),y=s(0x61f3a2ac07e20),P=n(y),b=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.commentsTree,t=e.getIn([this.props.commentId,"data"]).toJS(),s=a(t.author.name);return g.default.createElement("li",{className:"comments__comment depth-0"},g.default.createElement("div",{className:"comments__comment-author"},g.default.createElement("div",{className:"comments__comment-trackbackicon"},g.default.createElement(_.default,{icon:"link",size:24})),t.author.URL?g.default.createElement("a",{href:t.author.URL,target:"_blank",rel:"noopener noreferrer",className:"comments__comment-username"},s):g.default.createElement("strong",{className:"comments__comment-username"},s),g.default.createElement("div",{className:"comments__comment-timestamp"},g.default.createElement("a",{href:t.URL},g.default.createElement(P.default,{date:t.date})))))}}]),t}(g.default.Component);t.default=b,b.propTypes={commentId:g.default.PropTypes.number},e.exports=t.default},0xe96395f1eded3:function(e,t,s){"use strict";var n=s(8769427305820155),a=s(0x949dfcdc79aa8),o=s(6346297615794200),r=s(0xf0f4288728240),i=s(0xd0219df97eb97),l=null,c=null,u=1e3,p={leading:!1};e.exports={storePositions:i(function(e,t){l||setTimeout(function(){var e=o.get(l.url);r(l.positions,e)||n.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:l.url,positions:l.positions}),l=null},0),l={url:e,positions:t}},u,p),storeScroll:i(function(e,t){c||setTimeout(function(){var e=a.get(c.url);c.scrollPosition!==e&&n.handleViewAction({type:"SCROLL_CHANGED",url:c.url,scrollPosition:c.scrollPosition}),c=null},0),c={url:e,scrollPosition:t}},u,p)}},0xedc1374c5f43e:function(e,t,s){"use strict";var n=s(623310115397031);e.exports=function(e,t,s,a){n.ga.recordEvent(s,"Loaded Next Page","page",a),n.pageView.record(e,t),n.mc.bumpStat("newdash_pageviews","scroll")}},0xf0fef66852b91:function(e,t,s){e.exports={default:s(0xb955bf800b1d7),__esModule:!0}},0xf2e0fa23f3cb3:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){m.mc.bumpStat("calypso_cpt_actions","edit")}var s=e.translate,n=e.siteId,a=e.canEdit,o=e.status,i=e.editUrl,l=e.isKnownType;return"trash"!==o&&a?r.default.createElement(d.default,{href:i,onClick:t,icon:"pencil"},n&&!l&&r.default.createElement(h.default,{siteId:n}),s("Edit",{context:"verb"})):null}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5896763357248615),r=n(o),i=s(6280957995252369),l=s(7572476330282672),c=s(8640881565075096),u=n(c),p=s(72591479426812),d=n(p),f=s(0xc98cd4e82fe0b),h=n(f),m=s(623310115397031),g=s(0xbc79ee44c328),v=n(g),_=s(6007716273106560),y=s(7284660551555503),P=s(0x956a8e02ae2a5),b=s(5523398591803755);a.propTypes={globalId:o.PropTypes.string,translate:o.PropTypes.func.isRequired,siteId:o.PropTypes.number,canEdit:o.PropTypes.bool,status:o.PropTypes.string,editUrl:o.PropTypes.string,isKnownType:o.PropTypes.bool},t.default=(0,i.connect)(function(e,t){var s=(0,_.getPost)(e,t.globalId);if(!s)return{};var n=(0,y.getPostType)(e,s.site_ID,s.type),a=(0,P.getCurrentUserId)(e),o=(0,u.default)(s.author,"ID")===a,r=o?"edit_posts":"edit_others_posts",i=(0,u.default)(n,["capabilities",r]);return(0,P.isValidCapability)(e,s.site_ID,i)&&(r=i),{siteId:s.site_ID,canEdit:(0,v.default)(e,s.site_ID,r),status:s.status,editUrl:(0,b.getEditorPath)(e,s.site_ID,s.ID),isKnownType:!!n}})((0,l.localize)(a)),e.exports=t.default},0xf802d37b8bba3:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(0x8ae3881d6e8c2),o=n.createClass({displayName:"StatUpdateIndicator",propTypes:{children:n.PropTypes.node.isRequired,updateOn:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.number,n.PropTypes.bool]).isRequired},getInitialState:function(){return{updating:!this.props.updateOn}},componentDidMount:function(){this.clearTheUpdate()},componentWillReceiveProps:function(e){this.props.updateOn!==e.updateOn&&(clearTimeout(this.clearingUpdateTimeout),this.setState({updating:!0}),this.clearTheUpdate())},clearTheUpdate:function(){clearTimeout(this.clearingUpdateTimeout),this.clearingUpdateTimeout=setTimeout(function(){this.isMounted()&&this.setState({updating:!1})}.bind(this),800)},render:function(){var e=a({"stat-update-indicator":!0,"is-updating":this.state.updating});return n.createElement("span",{className:e},this.props.children)}});e.exports=o},0xf8581dc705558:function(e,t,s){"use strict";var n=s(0x8f7d57519e61b),a=s(83765757817552);e.exports=function(e,t){var s=n.parse(e,!0);return t?s.query.s=t:delete s.query.s,s=a(s,"pathname","hash","query"),n.format(s).replace(/\%20/g,"+")}},0xf8d23d98acebc:function(e,t,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t="transition"+e+"Timeout",s="transition"+e;return function(e){if(e[s]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var i=s(0x93b960444343),l=s(6285320399463177),c=s(8316702086273959),u=s(5847023135522500),p=function(e){function t(){var s,o,r;n(this,t);for(var i=arguments.length,c=Array(i),p=0;p<i;p++)c[p]=arguments[p];return s=o=a(this,e.call.apply(e,[this].concat(c))),o._wrapChild=function(e){return l.createElement(u,{name:o.props.transitionName,appear:o.props.transitionAppear,enter:o.props.transitionEnter,leave:o.props.transitionLeave,appearTimeout:o.props.transitionAppearTimeout,enterTimeout:o.props.transitionEnterTimeout,leaveTimeout:o.props.transitionLeaveTimeout},e)},r=s,a(o,r)}return o(t,e),t.prototype.render=function(){return l.createElement(c,i({},this.props,{childFactory:this._wrapChild}))},t}(l.Component);p.displayName="ReactCSSTransitionGroup",p.propTypes={transitionName:u.propTypes.name,transitionAppear:l.PropTypes.bool,
transitionEnter:l.PropTypes.bool,transitionLeave:l.PropTypes.bool,transitionAppearTimeout:r("Appear"),transitionEnterTimeout:r("Enter"),transitionLeaveTimeout:r("Leave")},p.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},e.exports=p},0xf906dfbec8b69:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(4675954658966525)("calypso:my-sites:pages:pages"),o=s(0xb82401cd42a70),r=s(0xbceb83e51862c),i=s(0x6925a2279f1f8),l=s(5890255058533989),c=s(0x75aac138cedeb),u=s(70219791644428),p=s(6200315943787393),d=s(5008048254971775),f=s(4883949902648912),h=s(640686485904272),m=s(0x6ee56fc1c50a2),g=["published","drafts","scheduled","trashed"];e.exports=n.createClass({displayName:"Pages",mixins:[u("sites"),d],propTypes:{trackScrollPage:n.PropTypes.func.isRequired},getDefaultProps:function(){return{perPage:20}},componentWillMount:function(){var e=this.props.sites.getSelectedSite();this._setWarning(e)},componentDidMount:function(){a("Pages React component mounted.")},componentWillReceiveProps:function(e){var t=e.sites.getSelectedSite();this._setWarning(t)},render:function(){var e=this.props.status||"published",t={published:this.translate("Published",{context:"Filter label for pages list"}),drafts:this.translate("Drafts",{context:"Filter label for pages list"}),scheduled:this.translate("Scheduled",{context:"Filter label for pages list"}),trashed:this.translate("Trashed",{context:"Filter label for pages list"})},s={published:this.translate("Search Published…",{context:"Search placeholder for pages list",textOnly:!0}),drafts:this.translate("Search Drafts…",{context:"Search placeholder for pages list",textOnly:!0}),scheduled:this.translate("Search Scheduled…",{context:"Search placeholder for pages list",textOnly:!0}),trashed:this.translate("Search Trashed…",{context:"Search placeholder for pages list",textOnly:!0})};return n.createElement(m,{classname:"pages"},n.createElement(p,null),n.createElement(r,{selectedText:t[e]},n.createElement(i,{label:this.translate("Status",{context:"Filter page group label for tabs"})},this.getNavItems(t,e)),n.createElement(c,{pinned:!0,fitsContainer:!0,onSearch:this.doSearch,initialValue:this.props.search,placeholder:s[e],analyticsGroup:"Pages",delaySearch:!0})),n.createElement(o,this.props))},getNavItems:function(e,t){var s=this.props.sites.selected?"/"+this.props.sites.selected:"";return g.map(function(a){var o="/pages"+s;return"publish"!==a&&(o="/pages/"+a+s),n.createElement(l,{path:o,selected:t===a,key:"page-filter-"+a},e[a])})},_setWarning:function(e){e&&e.jetpack&&!e.hasMinimumJetpackVersion&&h.warning(this.translate("Jetpack %(version)s is required to take full advantage of all page editing features.",{args:{version:f("jetpack_min_version")}}),{button:this.translate("Update now"),href:e.options.admin_url+"plugins.php?plugin_status=upgrade"})}})},0xfde3bf62bd9e8:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){d.mc.bumpStat("calypso_cpt_actions","stats")}function o(e){var t=e.translate,s=e.siteSlug,n=e.postId,o=e.status,r=e.isStatsActive;return r&&"publish"===o?i.default.createElement(p.default,{href:"/stats/post/"+n+"/"+s,onClick:a,icon:"stats-alt"},t("Stats")):null}Object.defineProperty(t,"__esModule",{value:!0});var r=s(5896763357248615),i=n(r),l=s(6280957995252369),c=s(7572476330282672),u=s(72591479426812),p=n(u),d=s(623310115397031),f=s(0x8f1527a7f80c8),h=s(6007716273106560);o.propTypes={globalId:r.PropTypes.string,translate:r.PropTypes.func.isRequired,siteSlug:r.PropTypes.string,postId:r.PropTypes.number,status:r.PropTypes.string,isStatsActive:r.PropTypes.bool},t.default=(0,l.connect)(function(e,t){var s=(0,h.getPost)(e,t.globalId);return s?{siteSlug:(0,f.getSiteSlug)(e,s.site_ID),postId:s.ID,status:s.status,isStatsActive:!1!==(0,f.isJetpackModuleActive)(e,s.site_ID,"stats")}:{}})((0,c.localize)(o)),e.exports=t.default},4730164382473449:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(e.length<3||t.length<2)return[];var s=e.indexOf(t[0]);if(s===-1)return a(e,t.slice(1));var n=e.indexOf(t.slice(-1)[0]);if(n===-1)return a(e,t.slice(0,-1));var o=e.slice(s,n+1);return(0,x.default)(o,t)}Object.defineProperty(t,"__esModule",{value:!0});var o=s(0xccd53b671ebb6),r=n(o),i=s(5143893728007863),l=n(i),c=s(5880884711457125),u=n(c),p=s(8173823076638946),d=n(p),f=s(5369032381290393),h=n(f),m=s(95905449861643),g=n(m);t.getRemovedPosts=a,t.default=function(e){function t(e){var t=(0,E.default)({},z,e);t.siteID&&"string"==typeof t.siteID&&(t.siteID=t.siteID.replace(/::/g,"/")),"draft,pending"===t.status&&(t.orderBy="modified");var s=(0,q.getCacheKey)(t),n=j.default.get(s);n?c=n:(c={id:V,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:s},V++)}function s(e){return(0,C.default)(e,function(e,t,s){null!=t&&(e[s]=t)},{})}function n(){var e=c.query.orderBy;c.postIds.sort(function(t,s){var n=F.default.get(t),a=F.default.get(s),o=n[e],r=a[e];return o===r?n.title===a.title?0:n.title>a.title?1:-1:o>r?-1:1})}function o(e,t,s){if(t||!s||"object"!==("undefined"==typeof s?"undefined":(0,g.default)(s)))return t=t||{message:"Error fetching PostsList: empty data response"},B("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void c.errors.push(t);var o=s.found,r=s.meta,i=s.posts,l=s.__sync,u=l||{},p=u.responseSource,d=u.requestKey;if(e===c.id){c.isFetchingNextPage=!1,c.nextPageHandle=r&&r.next_page,c.nextPageHandle&&o||(c.isLastPage=!0);var f=i.map(function(e){return e.global_ID}),h=c.postIds.slice(0);if("local"===p&&d)(0,q.setCanonicalList)(c.listKey,d,h);else{var m=(0,q.getCanonicalList)(c.listKey,d);m&&(B("canonicalList found (%o)",m),h=m,(0,q.deleteCanonicalList)(c.listKey,d))}var v=a(h,f);v.length&&(B("removePosts (%o)",v),h=(0,x.default)(h,v));var _=(0,x.default)(f,h);_.length&&(B("newPosts (%o)",_),h=h.concat(_),c.page++),c.postIds=h,n()}}function i(e,t,s){var a=void 0,o=void 0,r=void 0;return t?void B("An error occurred while fetching updated posts %o",t):void(e===c.id&&s.posts.length&&(a=s.posts,B("Fetched updated posts:",a),o=a.map(function(e){return e.global_ID}),r=(0,x.default)(o,c.postIds),r.length&&(c.postIds=c.postIds.concat(r),n())))}if(!e)throw new Error("must supply a post-list-store id");var c={postIds:[],errors:[],query:(0,P.default)(z),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(n){function a(){(0,l.default)(this,a);var t=(0,d.default)(this,(a.__proto__||(0,r.default)(a)).call(this));return t.id=e,t.dispatchToken=L.default.register(t.handlePayload.bind(t)),t}return(0,h.default)(a,n),(0,u.default)(a,[{key:"get",value:function(){return c}},{key:"getID",value:function(){return c.id}},{key:"getSiteID",value:function(){return c.query.siteID}},{key:"getAll",value:function(){return c.postIds.map(function(e){return F.default.get(e)})}},{key:"getTree",value:function(){var e=[];return c.postIds.forEach(function(t){var s=(0,P.default)(F.default.get(t));s.parent=s.parent?s.parent.ID:0,e.push(s)}),(0,U.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(c.postIds.indexOf(e)>-1)return F.default.get(e)}},{key:"getPage",value:function(){return c.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return c.isLastPage}},{key:"isFetchingNextPage",value:function(){return c.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,M.default)(c.errors,function(s){return t-s.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=c.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=c.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),e.siteID||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),s(e)}},{key:"getUpdatesParams",value:function(){var e={},t=c.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),e.siteID||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),c.postIds.length&&(e.modified_after=(0,w.default)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||c.isLastPage||(e.after=this.getPost((0,k.default)(c.postIds)).date)),s(e)}},{key:"handlePayload",value:function(e){var s=e.action;if(!s.postListStoreId||s.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===s.type)switch(L.default.waitFor([F.default.dispatchToken]),s.type){case"QUERY_POSTS":B("QUERY_POSTS",s),t(s.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":B("FETCH_NEXT_POSTS_PAGE",s),c.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":B("receivePage",s),o(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":i(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":s.post&&c.postIds.indexOf(s.post.global_ID)>-1&&this.emit("change")}}}]),a}(D.EventEmitter))};var v=s(4675954658966525),_=n(v),y=s(8446265970839099),P=n(y),b=s(8907951692841672),E=n(b),T=s(9002016994434229),C=n(T),I=s(411492589843630),x=n(I),S=s(4881459746320230),k=n(S),N=s(7880968143996541),w=n(N),D=s(842421528365869),R=s(6442230718320275),M=n(R),O=s(8769427305820155),L=n(O),A=s(5408478231187706),U=n(A),H=s(0xe5816b799bd0f),F=n(H),q=s(95148365001489),j=n(q),z={siteID:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,perPage:20},B=(0,_.default)("calypso:posts-list"),V=0},4851117551574050:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(0x8ae3881d6e8c2),o=s(0xa72c09d16709f);e.exports=n.createClass({displayName:"PostHeader",getDefaultProps:function(){return{showAuthor:!1}},getAuthor:function(){return this.translate("By %(author)s",{args:{author:this.props.author}})},render:function(){var e;return e=a({post__header:!0,"has-author":this.props.showAuthor}),n.createElement("div",{className:e},n.createElement(o,{site:this.props.site,size:32}),n.createElement("h4",{className:"post__site-title"},n.createElement("a",{href:this.props.path+"/"+this.props.site.slug},this.props.site.title)),this.props.showAuthor?n.createElement("span",{className:"post__author"},this.getAuthor()):null)}})},4872454564014129:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.dispatch,s=e.requestId,n=e.siteId,a=e.postId,o=e.comments,r=e.totalCommentsCount;t({type:v.COMMENTS_REQUEST_SUCCESS,requestId:s}),t({type:v.COMMENTS_RECEIVE,siteId:n,postId:a,comments:o}),r>-1&&t({type:v.COMMENTS_COUNT_RECEIVE,siteId:n,postId:a,totalCommentsCount:r})}function o(e,t,s){e({type:v.COMMENTS_REQUEST_FAILURE,requestId:t,error:s})}function r(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"approved";return(0,h.isEnabled)("comments/filters-in-posts")||(s="approved"),function(n,r){var i=(0,y.getPostCommentRequests)(r(),e,t),l=(0,y.getPostOldestCommentDate)(r(),e,t),c={order:"DESC",number:P.NUMBER_OF_COMMENTS_PER_FETCH,status:s};l&&l.toISOString&&(c.before=l.toISOString());var u=(0,_.createRequestId)(e,t,c);if(!i||[v.COMMENTS_REQUEST,v.COMMENTS_REQUEST_SUCCESS].indexOf(i.get(u))===-1)return n({type:v.COMMENTS_REQUEST,requestId:u}),g.default.site(e).post(t).comment().replies(c).then(function(s){var o=s.comments,r=s.found;return a({dispatch:n,requestId:u,siteId:e,postId:t,comments:o,totalCommentsCount:r})}).catch(function(e){return o(n,u,e)})}}function i(e,t,s){return{ID:"placeholder-"+(new Date).getTime(),parent:!!s&&{ID:s},date:(new Date).toISOString(),content:e,status:"pending",type:"comment",post:{ID:t},isPlaceholder:!0,placeholderState:P.PLACEHOLDER_STATE.PENDING}}function l(e,t,s){return{type:v.COMMENTS_REMOVE,siteId:e,postId:t,commentId:s}}function c(e,t,s,n){if(e&&t&&s)return function(a){var r=i(e,s,n),l=!!n;a({type:v.COMMENTS_RECEIVE,siteId:t,postId:s,comments:[r],skipSort:l});var c=void 0;return c=n?g.default.site(t).post(s).comment(n).reply({},e):g.default.site(t).post(s).comment().add(e),c.then(function(e){a({type:v.COMMENTS_REMOVE,siteId:t,postId:s,commentId:r.ID}),a({type:v.COMMENTS_RECEIVE,siteId:t,postId:s,comments:[e],skipSort:l});var n=(0,_.createRequestId)(t,s,{});return g.default.site(t).post(s).comment().replies().then(function(e){var n=e.found;return a({type:v.COMMENTS_COUNT_RECEIVE,siteId:t,postId:s,totalCommentsCount:n})}).catch(function(e){return o(a,n,e)}),e}).catch(function(e){throw a({type:v.COMMENTS_ERROR,siteId:t,postId:s,commentId:r.ID,error:e}),e})}}function u(e,t,s){return function(n){return n({type:v.COMMENTS_LIKE,siteId:e,postId:t,commentId:s}),g.default.site(e).comment(s).like().add({source:"reader"}).then(function(a){return n({type:v.COMMENTS_LIKE_UPDATE,siteId:e,postId:t,commentId:s,iLike:a.i_like,likeCount:a.like_count})}).catch(function(){return n({type:v.COMMENTS_UNLIKE,siteId:e,postId:t,commentId:s})})}}function p(e,t,s){return function(n){return n({type:v.COMMENTS_UNLIKE,siteId:e,postId:t,commentId:s}),g.default.site(e).comment(s).like().del({source:"reader"}).then(function(a){return n({type:v.COMMENTS_LIKE_UPDATE,siteId:e,postId:t,commentId:s,iLike:a.i_like,likeCount:a.like_count})}).catch(function(){return n({type:v.COMMENTS_LIKE,siteId:e,postId:t,commentId:s})})}}function d(e,t,s,n){return function(a){return a({type:v.COMMENTS_CHANGE_STATUS,siteId:e,postId:t,commentId:s}),g.default.site(e).comment(s).update({status:n}).then(function(n){return a({type:v.COMMENTS_CHANGE_STATUS_SUCESS,siteId:e,postId:t,commentId:s,status:n.status})}).catch(function(){return a({type:v.COMMENTS_CHANGE_STATUS_FAILURE,siteId:e,postId:t,commentId:s})})}}function f(e,t,s,n){return function(a){return a({type:v.COMMENTS_EDIT,siteId:e,postId:t,content:n}),g.default.site(e).comment(s).update({content:n}).then(function(n){return a({type:v.COMMENTS_EDIT_SUCCESS,siteId:e,postId:t,commentId:s,content:n.content})}).catch(function(){return a({type:v.COMMENTS_EDIT_FAILURE,siteId:e,postId:t,commentId:s})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestPostComments=r,t.removeComment=l,t.writeComment=c,t.likeComment=u,t.unlikeComment=p,t.changeCommentStatus=d,t.editComment=f;var h=s(4883949902648912),m=s(8478035041892969),g=n(m),v=s(0xd047e5c4c63f8),_=s(5305731735521421),y=s(0x90af70c1dc5a2),P=s(0xe7ead13045245)},4910067807891286:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(0xa505046780b0c),i=n(r),l=s(8326181498771179),c=n(l),u=s(0x8ae3881d6e8c2),p=n(u),d=s(623310115397031),f=n(d);t.default=o.default.createClass({displayName:"InfoPopover",propTypes:{id:o.default.PropTypes.string,position:o.default.PropTypes.string,className:o.default.PropTypes.string,rootClassName:o.default.PropTypes.string,gaEventCategory:o.default.PropTypes.string,popoverName:o.default.PropTypes.string,ignoreContext:o.default.PropTypes.shape({getDOMNode:o.default.PropTypes.function})},getDefaultProps:function(){return{position:"bottom"}},getInitialState:function(){return{showPopover:!1}},render:function(){return o.default.createElement("span",{onClick:this._onClick,ref:"infoPopover",className:(0,p.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},o.default.createElement(i.default,{icon:"info-outline",size:18}),o.default.createElement(c.default,{id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this._onClose,className:(0,p.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))},_onClick:function(e){e.preventDefault(),this.setState({showPopover:!this.state.showPopover},this._recordStats)},_onClose:function(){this.setState({showPopover:!1},this._recordStats)},_recordStats:function(){var e=this.props,t=e.gaEventCategory,s=e.popoverName;if(t&&s){var n=this.state.showPopover?" Opened":" Closed";f.default.ga.recordEvent(t,"InfoPopover: "+s+n)}}}),e.exports=t.default},4926561643672304:function(e,t,s){e.exports=s(0xf8d23d98acebc)},4936501850969121:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(6280957995252369),v=s(0xa505046780b0c),_=n(v),y=s(22173321089158),P=s(301929001539288),b=function(e){function t(e){(0,i.default)(this,t);var s=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return s.toggleSidebar=s.toggleSidebar.bind(s),s}return(0,f.default)(t,e),(0,c.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return m.default.createElement("header",{className:"current-section"},m.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},m.default.createElement(_.default,{icon:"chevron-left"}),this.props.children,m.default.createElement("div",null,m.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),m.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(m.default.Component);b.propTypes={title:h.PropTypes.string,linkClassName:h.PropTypes.string,sectionTitle:h.PropTypes.string,sectionName:h.PropTypes.string.isRequired,setLayoutFocus:h.PropTypes.func.isRequired},t.default=(0,g.connect)(function(e){return{title:(0,y.getDocumentHeadTitle)(e)}},{setLayoutFocus:P.setLayoutFocus})(b),e.exports=t.default},5008048254971775:function(e,t,s){"use strict";var n=s(4675954658966525)("calypso:url-search"),a=s(0x90ba166cd016c),o=s(0xf8581dc705558);e.exports={getInitialState:function(){return{searchOpen:!1}},componentWillReceiveProps:function(e){e.search||this.setState({searchOpen:!1})},doSearch:function(e){var t;return this.setState({searchOpen:!1!==e}),this.onSearch?void this.onSearch(e):(t=o(window.location.href,e),n("search posts for:",e),void(this.props.search&&e?(n("replacing URL: "+t),a.replace(t)):(n("setting URL: "+t),a(t))))},getSearchOpen:function(){return this.state.searchOpen!==!1||this.props.search}}},5026276192179202:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(0x714eb7873fb73),m=n(h),g=s(0xf0f4288728240),v=n(g),_=s(5896763357248615),y=s(6280957995252369),P=s(0x5635d5da58cd5),b=s(6736014577589168),E=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.requestingPostStats,s=e.siteId,n=e.postId;t||!s||(0,m.default)(n)||this.requestPostStats(this.props)}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,s=t.siteId,n=t.postId,a=t.fields,o=t.heartbeat;!s||(0,m.default)(n)||s===e.siteId&&n===e.postId&&(0,v.default)(a,e.fields)&&o===e.heartbeat||this.requestPostStats(e)}},{key:"requestPostStats",value:function(e){var t=e.siteId,s=e.postId,n=e.fields,a=e.heartbeat;e.requestPostStats(t,s,n),this.clearInterval(),a&&(this.interval=setInterval(function(){e.requestPostStats(t,s,n)},a))}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.interval&&clearInterval(this.interval)})},{key:"render",value:function(){return null}}]),t}(_.Component);E.defaultProps={requestPostStats:function(){},heartbeat:0},E.propTypes={siteId:_.PropTypes.number,postId:_.PropTypes.number,fields:_.PropTypes.array,requestingPostStats:_.PropTypes.bool,requestPostStats:_.PropTypes.func,heartbeat:_.PropTypes.number},t.default=(0,y.connect)(function(e,t){var s=t.siteId,n=t.postId,a=t.fields;return{requestingPostStats:(0,P.isRequestingPostStats)(e,s,n,a)}},{requestPostStats:b.requestPostStats})(E),e.exports=t.default},5084380759969092:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var s=void 0,n=I.getSelectedSite();v.default.mc.bumpStat("editor_usage",e),n&&(s=n.jetpack?"jetpack":"wpcom",v.default.mc.bumpStat("editor_usage_"+s,e),t&&v.default.mc.bumpStat("editor_cpt_usage_"+s,t+"_"+e))}function o(e){v.default.mc.bumpStat("editor_actions",e)}function r(e,t,s){v.default.ga.recordEvent("Editor",e,t,s)}function i(){var e=y.default.get(),t=y.default.getSavedPost();if(e&&t){var s=t.status,n=e.status,i="calypso_editor_"+e.type+"_",l=!1,c=!1,u=!1;e.ID||b.default.isPublished(e)?"draft"===n?i+="savedraft":s===n?(u="edit",i+="update"):"publish"===n||"private"===n?(i+="publish",u="new"):"pending"===n?i+="pending":"future"===n&&(i+="schedule",l="status-schedule",c="Scheduled Post"):i+="savedraft",u&&a(u,e.type),l&&o(l),c&&r(c),C("recordSaveEvent %s currentStatus=%s nextStatus=%s",i,s,n),v.default.tracks.recordEvent(i,{post_id:e.ID,post_type:e.type,visibility:b.default.getVisibility(e),current_status:s,next_status:n})}}function l(e){S("editor-button","calypso_"+e),v.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),C("TinyMCE button click",e,"mc=",x)}function c(e){S("html-editor-button","calypso_"+e),v.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),C("TinyMCE HTML button click",e,"mc=",x)}Object.defineProperty(t,"__esModule",{value:!0}),t.recordStat=o,t.recordEvent=r,t.recordSaveEvent=i,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=c;var u=s(4675954658966525),p=n(u),d=s(0x45d24eaab7654),f=n(d),h=s(4883949902648912),m=n(h),g=s(623310115397031),v=n(g),_=s(5367243434992214),y=n(_),P=s(0x5dd72de17825d),b=n(P),E=s(7418474439241154),T=n(E),C=(0,p.default)("calypso:posts:stats"),I=new T.default,x=Math.random()<=.01||"development"===(0,m.default)("env"),S=x?v.default.mc.bumpStat:f.default},5379274173349864:function(e,t,s){"use strict";var n=s(8025093951496706),a=s(0x90ba166cd016c),o=s(5896763357248615),r=s(4675954658966525)("calypso:my-sites:posts"),i=s(7572476330282672),l=s(6183759582808303)(),c=s(7418474439241154)(),u=s(4808587282202068),p=s(623310115397031),d=s(0x9c8c0ba211732),f=s(0xedc1374c5f43e),h=s(5577740099853543).setDocumentHeadTitle;e.exports={posts:function(e){function t(e,t){var s=t.getSelectedSite()||{};return!!e&&(!(!t.fetched||!t.allSingleSites)||(!(!s.single_user_site&&!s.jetpack)||void 0))}var m,g=s(8687486026970802),v=u.getSiteFragment(e.path),_="my"===e.params.author?l.get().ID:null,y=_?e.params.status:e.params.author,P=e.query.s,b=u.sectionify(e.path),E="Blog Posts";return r("siteID: `%s`",v),r("author: `%s`",_),y=y&&"my"!==y&&y!==v?y:"",r("statusSlug: `%s`",y),P="undefined"!=typeof P?P:"",r("search: `%s`",P),t(_,c)?void a.redirect(e.path.replace(/\/my\b/,"")):(e.store.dispatch(h(i.translate("Blog Posts",{textOnly:!0}))),m=v?b+"/:site":b,E+=y.length?" > "+d(y):" > Published",p.pageView.record(m,E),void(0,n.renderWithReduxStore)(o.createElement(g,{context:e,siteID:v,author:_,statusSlug:y,sites:c,search:P,trackScrollPage:f.bind(null,m,E,"Posts")}),"primary",e.store))}}},5408478231187706:function(e,t,s){"use strict";function n(e){return this instanceof n?void(this.key=e||"id"):new n(e)}var a=s(379676959299837);n.prototype.treeify=function(e){var t=[],s={};return e.forEach(function(t,n){s[e[n][this.key]]=t},this),e.forEach(function(e){var n;e.parent>0&&s[e.parent]?(n=s[e.parent],n.items=n.items||[],n.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},n.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,s){e.items&&n.prototype.untreeify(e.items,t),e.order=s+1,t.push(e)}),t},n.prototype.sortItems=function(e){var t={};t.items=e,a.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},n.prototype.removeOrderProperty=function(e){var t={};t.items=e,a.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},e.exports=n},5442310902992342:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=s(6280957995252369),g=s(7097794044456963),v=s(5790672741810563),_=s(0xe6bd8709d6a3c),y=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){!this.props.requestingConnections&&this.props.siteId&&this.props.requestConnections(this.props.siteId)}},{key:"componentDidUpdate",value:function(e){var t=e.siteId;this.props.siteId&&t!==this.props.siteId&&!this.props.requestingConnections&&this.props.requestConnections(this.props.siteId)}},{key:"render",value:function(){return null}}]),t}(h.Component);y.propTypes={requestConnections:h.PropTypes.func,requestingConnections:h.PropTypes.bool,selectedSite:h.PropTypes.bool,siteId:h.PropTypes.number},y.defaultProps={requestConnections:function(){},requestingConnections:!1,selectedSite:!1,siteId:0},t.default=(0,m.connect)(function(e,t){var s=t.siteId,n=t.selectedSite;return s=s||n&&(0,_.getSelectedSiteId)(e),{requestingConnections:(0,g.isFetchingConnections)(e,s),siteId:s}},{requestConnections:v.fetchConnections})(y),e.exports=t.default},5522994678952159:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(6280957995252369),i=s(7572476330282672),l=s(0xa505046780b0c),c=n(l),u=s(0x8ae3881d6e8c2),p=n(u),d=s(4872454564014129),f=s(334320163288023),h=n(f),m=s(0x913e48edc37f),g=n(m),v=s(522401650113320),_=n(v),y=s(72591479426812),P=n(y),b=s(6253471006929827),E=n(b),T=function(e){var t=e.post,s=e.comment,n=s.isPlaceholder,a=s.status,r=e.showModerationTools,i=e.translate,l=e.activeEditCommentId,u=e.activeReplyCommentID,d=e.commentId,f=e.handleReply,m=e.onReplyCancel,v=e.approveComment,y=e.unapproveComment,b=e.trashComment,T=e.spamComment,C=e.editComment,I=e.editCommentCancel,x=t&&t.discussion&&t.discussion.comments_open===!0,S=u===d,k=l===d,N="approved"===a;return n?null:o.default.createElement("div",{className:"comments__comment-actions"},x&&o.default.createElement("button",{className:"comments__comment-actions-reply",onClick:f},o.default.createElement(c.default,{icon:"reply",size:18}),o.default.createElement("span",{className:"comments__comment-actions-reply-label"},i("Reply"))),S&&o.default.createElement("button",{className:"comments__comment-actions-cancel-reply",onClick:m},i("Cancel reply")),k&&o.default.createElement("button",{className:"comments__comment-actions-cancel-reply",onClick:I},i("Cancel")),o.default.createElement(h.default,{className:"comments__comment-actions-like",tagName:"button",siteId:t.site_ID,postId:t.ID,commentId:d}),r&&o.default.createElement("div",{className:"comments__comment-actions-moderation-tools"},o.default.createElement(g.default,{status:a,approveComment:v,unapproveComment:y}),o.default.createElement("button",{className:"comments__comment-actions-trash",onClick:b},o.default.createElement(c.default,{icon:"trash",size:18}),o.default.createElement("span",{className:"comments__comment-actions-like-label"},i("Trash"))),o.default.createElement("button",{className:"comments__comment-actions-spam",onClick:T},o.default.createElement(c.default,{icon:"spam",size:18}),o.default.createElement("span",{className:"comments__comment-actions-like-label"},i("Spam"))),o.default.createElement("button",{className:"comments__comment-actions-edit",onClick:C},o.default.createElement(c.default,{icon:"pencil",size:18}),o.default.createElement("span",{className:"comments__comment-actions-like-label"},i("Edit"))),o.default.createElement(_.default,{toggleTitle:i("More")},o.default.createElement(P.default,{className:(0,p.default)("comments__comment-actions-approve",{"is-approved":N}),icon:"checkmark",onClick:N?y:v},i(N?"Approved":"Approve")),o.default.createElement(P.default,{icon:"trash",onClick:b},i("Trash")),o.default.createElement(P.default,{icon:"spam",onClick:T},i("Spam")),o.default.createElement(E.default,null),o.default.createElement(P.default,{icon:"pencil",onClick:C},i("Edit")))))},C=function(e,t){var s=t.post,n=s.site_ID,a=s.ID,o=t.commentId;return{approveComment:function(){return e((0,d.changeCommentStatus)(n,a,o,"approved"))},unapproveComment:function(){return e((0,d.changeCommentStatus)(n,a,o,"unapproved"))},trashComment:function(){return e((0,d.changeCommentStatus)(n,a,o,"trash"))},spamComment:function(){return e((0,d.changeCommentStatus)(n,a,o,"spam"))}}};t.default=(0,r.connect)(null,C)((0,i.localize)(T)),e.exports=t.default},5593585486367828:function(e,t){function s(e){return o.test(e)?e.toLowerCase():(i.test(e)&&(e=n(e)),r.test(e)&&(e=a(e)),e.toLowerCase())}function n(e){return e.replace(l,function(e,t){return t?" "+t:""})}function a(e){return e.replace(c,function(e,t,s){return t+" "+s.toLowerCase().split("").join(" ")})}e.exports=s;var o=/\s/,r=/[a-z][A-Z]/,i=/[\W_]/,l=/[\W_]+(.|$)/g,c=/(.)([A-Z]+)/g},5613014578198101:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(8640881565075096),m=n(h),g=s(5896763357248615),v=n(g),_=s(6280957995252369),y=s(78648220391165),P=s(7572476330282672),b=s(0x90af70c1dc5a2),E=s(4872454564014129),T=s(0xe7ead13045245),C=s(5055977180578371),I=s(80239232754207),x=n(I),S=s(8984451519475015),k=n(S),N=s(0x7f43ae997b4b5),w=n(N),D=s(5736137603839510),R=n(D),M=s(7542443254063963),O=n(M),L=function(e){function t(e){(0,i.default)(this,t);var s=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return s.onEditCommentCancel=function(){return s.setState({activeEditCommentId:null})},s.handleFilterClick=function(e){return function(){return s.props.onFilterChange(e)}},s.state={activeReplyCommentID:null,amountOfCommentsToTake:e.initialSize,commentsFilter:"all",activeEditCommentId:null},s.viewEarlierCommentsHandler=s.viewEarlierCommentsHandler.bind(s),s}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.post,t=e.ID,s=e.site_ID;this.props.requestPostComments(s,t,this.props.commentsFilter)}},{key:"componentWillReceiveProps",value:function(e){var t=(0,m.default)(e,"post.site_ID"),s=(0,m.default)(e,"post.ID"),n=(0,m.default)(e,"commentsFilter");t&&s&&n&&(this.props.post.site_ID!==t||this.props.post.ID!==s||this.props.commentsFilter!==n)&&this.props.requestPostComments(t,s,this.props.commentsFilter)}},{key:"renderComment",value:function(e){if(!e)return null;var t=this.onEditCommentClick.bind(this,e),s=this.onEditCommentCancel.bind(this),n=this.onReplyClick.bind(this),a=this.onReplyCancel.bind(this),o=this.state.commentText,r=this.onUpdateCommentText.bind(this),i=this.resetActiveReplyComment.bind(this);return v.default.createElement(x.default,{post:this.props.post,commentsTree:this.props.commentsTree,commentId:e,key:e,showModerationTools:this.props.showModerationTools,activeEditCommentId:this.state.activeEditCommentId,activeReplyCommentID:this.state.activeReplyCommentID,onEditCommentClick:t,onEditCommentCancel:s,onReplyClick:n,onReplyCancel:a,commentText:o,onUpdateCommentText:r,onCommentSubmit:i,depth:0})}},{key:"onEditCommentClick",value:function(e){this.setState({
activeEditCommentId:e})}},{key:"onReplyClick",value:function(e){this.setState({activeReplyCommentID:e}),(0,C.recordAction)("comment_reply_click"),(0,C.recordGaEvent)("Clicked Reply to Comment"),(0,C.recordTrack)("calypso_reader_comment_reply_click",{blog_id:this.props.post.site_ID,comment_id:e})}},{key:"onReplyCancel",value:function(){(0,C.recordAction)("comment_reply_cancel_click"),(0,C.recordGaEvent)("Clicked Cancel Reply to Comment"),(0,C.recordTrack)("calypso_reader_comment_reply_cancel_click",{blog_id:this.props.post.site_ID,comment_id:this.state.activeReplyCommentID}),this.resetActiveReplyComment()}},{key:"onUpdateCommentText",value:function(e){this.setState({commentText:e})}},{key:"resetActiveReplyComment",value:function(){this.setState({activeReplyCommentID:null})}},{key:"renderCommentsList",value:function(e){var t=this;return v.default.createElement("ol",{className:"comments__list is-root"},e.reverse().map(function(e){return t.renderComment(e)}))}},{key:"renderCommentForm",value:function(){var e=this.props.post,t=this.state.commentText,s=this.onUpdateCommentText.bind(this);return this.state.activeReplyCommentID&&!this.state.errors?null:v.default.createElement(k.default,{ref:"postCommentForm",post:e,parentCommentID:null,commentText:t,onUpdateCommentText:s})}},{key:"getCommentsCount",value:function(e){var t=this;return e.reduce(function(e,s){return e+t.getCommentsCount(t.props.commentsTree.getIn([s,"children"]))+1},0)}},{key:"getDisplayedComments",value:function(e,t){if(!e)return null;var s=e.take(t);return{displayedComments:s,displayedCommentsCount:this.getCommentsCount(s)}}},{key:"viewEarlierCommentsHandler",value:function(){var e=this.props.post,t=e.ID,s=e.site_ID,n=this.state.amountOfCommentsToTake+this.props.pageSize;this.setState({amountOfCommentsToTake:n}),this.props.haveMoreCommentsToFetch&&this.props.requestPostComments(s,t,this.props.commentsFilter)}},{key:"render",value:function(){if(!this.props.commentsTree)return null;var e=this.props,t=e.commentsFilter,s=e.showFilters,n=this.getDisplayedComments(this.props.commentsTree.get("children"),this.state.amountOfCommentsToTake),a=n.displayedComments,o=n.displayedCommentsCount,r=this.props.commentsTree.get("children").size>this.state.amountOfCommentsToTake||this.props.haveMoreCommentsToFetch,i=this.props.haveMoreCommentsToFetch?this.props.totalCommentsCount:this.getCommentsCount(this.props.commentsTree.get("children"));return v.default.createElement("div",{className:"comments__comment-list"},(this.props.showCommentCount||r)&&v.default.createElement("div",{className:"comments__info-bar"},this.props.showCommentCount&&v.default.createElement(w.default,{count:i}),r?v.default.createElement("span",{className:"comments__view-earlier",onClick:this.viewEarlierCommentsHandler},(0,P.translate)("View earlier comments (Showing %(shown)d of %(total)d)",{args:{shown:o,total:i}})):null),s&&v.default.createElement(R.default,{compact:!0,primary:!0},v.default.createElement(O.default,{selected:"all"===t,onClick:this.handleFilterClick("all")},(0,P.translate)("All")),v.default.createElement(O.default,{selected:"approved"===t,onClick:this.handleFilterClick("approved")},(0,P.translate)("Approved",{context:"comment status"})),v.default.createElement(O.default,{selected:"unapproved"===t,onClick:this.handleFilterClick("unapproved")},(0,P.translate)("Pending",{context:"comment status"})),v.default.createElement(O.default,{selected:"spam"===t,onClick:this.handleFilterClick("spam")},(0,P.translate)("Spam",{context:"comment status"})),v.default.createElement(O.default,{selected:"trash"===t,onClick:this.handleFilterClick("trash")},(0,P.translate)("Trash",{context:"comment status"}))),this.renderCommentsList(a),this.renderCommentForm())}}]),t}(v.default.Component);L.propTypes={post:v.default.PropTypes.shape({ID:v.default.PropTypes.number.isRequired,site_ID:v.default.PropTypes.number.isRequired}).isRequired,onCommentsUpdate:v.default.PropTypes.func.isRequired,pageSize:v.default.PropTypes.number,initialSize:v.default.PropTypes.number,showCommentCount:v.default.PropTypes.bool,commentsTree:v.default.PropTypes.object,totalCommentsCount:v.default.PropTypes.number,haveMoreCommentsToFetch:v.default.PropTypes.bool,requestPostComments:v.default.PropTypes.func.isRequired},L.defaultProps={pageSize:T.NUMBER_OF_COMMENTS_PER_FETCH,initialSize:T.NUMBER_OF_COMMENTS_PER_FETCH,haveMoreCommentsToFetch:!1,showCommentCount:!0},t.default=(0,_.connect)(function(e,t){return{commentsTree:(0,b.getPostCommentsTree)(e,t.post.site_ID,t.post.ID,t.commentsFilter),totalCommentsCount:(0,b.getPostTotalCommentsCount)(e,t.post.site_ID,t.post.ID),haveMoreCommentsToFetch:(0,b.haveMoreCommentsToFetch)(e,t.post.site_ID,t.post.ID)}},function(e){return(0,y.bindActionCreators)({requestPostComments:E.requestPostComments},e)})(L),e.exports=t.default},5628363501489590:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(8907951692841672),o=n(a),r=s(5896763357248615),i=n(r),l=s(0x8ae3881d6e8c2),c=n(l),u=s(6881822108913591),p=n(u);t.default=i.default.createClass({displayName:"CompactCard",render:function(){var e=(0,o.default)({},this.props,{className:(0,c.default)(this.props.className,"is-compact")});return i.default.createElement(p.default,e,this.props.children)}}),e.exports=t.default},5736137603839510:function(e,t,s){"use strict";var n=s(5921998412115101),a=s(5896763357248615),o=s(0xa8ea23472235c),r=s(0x3f19c8db6e3b5),i=s(0x8ae3881d6e8c2),l=s(7542443254063963),c=1,u=a.createClass({displayName:"SegmentedControl",propTypes:{initialSelected:a.PropTypes.string,compact:a.PropTypes.bool,className:a.PropTypes.string,style:a.PropTypes.object,onSelect:a.PropTypes.func,options:a.PropTypes.arrayOf(a.PropTypes.shape({value:a.PropTypes.string.isRequired,label:a.PropTypes.string.isRequired,path:a.PropTypes.string}))},getDefaultProps:function(){return{compact:!1}},getInitialState:function(){var e;return this.props.options&&(e=this.props.initialSelected||this.props.options[0].value),{selected:e,keyboardNavigation:!1}},componentWillMount:function(){this.id=c,c++},componentWillUnmount:function(){window.removeEventListener("keydown",this.navigateItem)},render:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),a.createElement("ul",{className:i(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())},getSegmentedItems:function(){var e=0;return this.props.children?a.Children.map(this.props.children,function(t,s){var n=a.cloneElement(t,{ref:t.type===l?"item-"+e:null,key:"item-"+s,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===l&&e++,n},this):this.props.options.map(function(e,t){return a.createElement(l,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t},e.label)},this)},selectItem:function(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value,keyboardNavigation:!1}))},setKeyboardNavigation:function(e){this.setState({keyboardNavigation:e})},navigateItem:function(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),this.focusSibling("previous");break;case 39:e.preventDefault(),this.focusSibling("next")}},navigateItemByTabKey:function(e){var t=e.shiftKey?"previous":"next",s=this.focusSibling(t);s!==!1&&e.preventDefault()},focusSibling:function(e){var t,s,a;return s=this.props.options?o(r(this.props.options,"value"),Boolean):o(this.props.children,function(e){return e.type===l}),"number"!=typeof this.focused&&(this.focused=this.getCurrentFocusedIndex()),t="previous"===e?-1:1,a=this.focused+t,!(a>=s.length||a<0)&&(n.findDOMNode(this.refs["item-"+a].refs.itemLink).focus(),this.focused=a,a)},getCurrentFocusedIndex:function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),s=t.indexOf(e);return s>-1?s:0}});e.exports=u},5759452038127757:function(e,t,s){"use strict";var n=s(0xa9d7632ec87),a={getChildMapping:function(e,t){return e?n(e):e},mergeChildMappings:function(e,t){function s(s){return t.hasOwnProperty(s)?t[s]:e[s]}e=e||{},t=t||{};var n={},a=[];for(var o in e)t.hasOwnProperty(o)?a.length&&(n[o]=a,a=[]):a.push(o);var r,i={};for(var l in t){if(n.hasOwnProperty(l))for(r=0;r<n[l].length;r++){var c=n[l][r];i[n[l][r]]=s(c)}i[l]=s(l)}for(r=0;r<a.length;r++)i[a[r]]=s(a[r]);return i}};e.exports=a},5790672741810563:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return{type:P.PUBLICIZE_SHARE_DISMISS,siteId:e,postId:t}}function o(e,t,s,n){return function(a){return a({type:P.PUBLICIZE_SHARE,siteId:e,postId:t,skippedConnections:s,message:n}),new v.default(function(o){y.default.undocumented().publicizePost(e,t,n,s,function(s,n){a(s||!n.success?{type:P.PUBLICIZE_SHARE_FAILURE,siteId:e,postId:t,error:s}:{type:P.PUBLICIZE_SHARE_SUCCESS,siteId:e,postId:t}),o()})})}}function r(e){return function(t){return t({type:P.PUBLICIZE_CONNECTIONS_REQUEST,siteId:e}),y.default.undocumented().siteConnections(e).then(function(s){t(f(e,s)),t({type:P.PUBLICIZE_CONNECTIONS_REQUEST_SUCCESS,siteId:e})}).catch(function(s){return t({type:P.PUBLICIZE_CONNECTIONS_REQUEST_FAILURE,siteId:e,error:s})})}}function i(e,t){return function(s){return s({type:P.PUBLICIZE_CONNECTION_REQUEST,connectionId:t,siteId:e}),y.default.undocumented().site(e).getConnection(t).then(function(n){s({type:P.PUBLICIZE_CONNECTION_RECEIVE,connection:n,siteId:e}),s({type:P.PUBLICIZE_CONNECTION_REQUEST_SUCCESS,connectionId:t,siteId:e})}).catch(function(n){return s({type:P.PUBLICIZE_CONNECTION_REQUEST_FAILURE,connectionId:t,error:n,siteId:e})})}}function l(e,t,s){return function(n){return y.default.undocumented().createConnection(t,e,s,{shared:!1}).then(function(e){return n({type:P.PUBLICIZE_CONNECTION_CREATE,connection:e})}).catch(function(e){return n(p(e))})}}function c(e,t){return function(s){return y.default.undocumented().updateConnection(e.site_ID,e.ID,t).then(function(e){return s({type:P.PUBLICIZE_CONNECTION_UPDATE,connection:e})}).catch(function(t){return s({type:P.PUBLICIZE_CONNECTION_UPDATE_FAILURE,error:(0,m.default)({},t,{label:e.label})})})}}function u(e){return function(t){return y.default.undocumented().deleteSiteConnection(e.site_ID,e.ID).then(function(){return t(d(e))}).catch(function(s){s&&404===s.statusCode&&t(d(e)),t({type:P.PUBLICIZE_CONNECTION_DELETE_FAILURE,error:(0,m.default)({},s,{label:e.label})})})}}function p(e){return{type:P.PUBLICIZE_CONNECTION_CREATE_FAILURE,error:e}}function d(e){return{type:P.PUBLICIZE_CONNECTION_DELETE,connection:e}}function f(e,t){return{type:P.PUBLICIZE_CONNECTIONS_RECEIVE,siteId:e,data:t}}Object.defineProperty(t,"__esModule",{value:!0});var h=s(5630966280090368),m=n(h),g=s(6632847112607300),v=n(g);t.dismissShareConfirmation=a,t.sharePost=o,t.fetchConnections=r,t.fetchConnection=i,t.createSiteConnection=l,t.updateSiteConnection=c,t.deleteSiteConnection=u,t.failCreateConnection=p,t.deleteConnection=d,t.receiveConnections=f;var _=s(8478035041892969),y=n(_),P=s(0xd047e5c4c63f8)},5847023135522500:function(e,t,s){"use strict";var n=s(6285320399463177),a=s(0x4ae8f92ba411c),o=s(8349493595644649),r=s(6115919936193278),i=s(776230753679283),l=17,c=n.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.shape({enter:n.PropTypes.string,leave:n.PropTypes.string,active:n.PropTypes.string}),n.PropTypes.shape({enter:n.PropTypes.string,enterActive:n.PropTypes.string,leave:n.PropTypes.string,leaveActive:n.PropTypes.string,appear:n.PropTypes.string,appearActive:n.PropTypes.string})]).isRequired,appear:n.PropTypes.bool,enter:n.PropTypes.bool,leave:n.PropTypes.bool,appearTimeout:n.PropTypes.number,enterTimeout:n.PropTypes.number,leaveTimeout:n.PropTypes.number},transition:function(e,t,s){var n=a.getReactDOM().findDOMNode(this);if(!n)return void(t&&t());var i=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||i+"-active",c=null,u=function(e){e&&e.target!==n||(clearTimeout(c),o.removeClass(n,i),o.removeClass(n,l),r.removeEndEventListener(n,u),t&&t())};o.addClass(n,i),this.queueClassAndNode(l,n),s?(c=setTimeout(u,s),this.transitionTimeouts.push(c)):r.addEndEventListener(n,u)},queueClassAndNode:function(e,t){this.classNameAndNodeQueue.push({className:e,node:t}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,l))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(e){o.addClass(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(e){this.props.appear?this.transition("appear",e,this.props.appearTimeout):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},render:function(){return i(this.props.children)}});e.exports=c},5858173213958119:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xf0fef66852b91),o=n(a),r=s(0xccd53b671ebb6),i=n(r),l=s(5143893728007863),c=n(l),u=s(5880884711457125),p=n(u),d=s(8173823076638946),f=n(d),h=s(5369032381290393),m=n(h),g=s(0x45d24eaab7654),v=n(g),_=s(5896763357248615),y=n(_),P=s(0x8ae3881d6e8c2),b=n(P),E=s(6280957995252369),T=s(78648220391165),C=s(7572476330282672),I=s(7064831842895117),x=n(I),S=s(5708247199348607),k=n(S),N=s(4872454564014129),w=s(5055977180578371),D=function(e){function t(e){(0,c.default)(this,t);var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return s.state={commentText:e.commentText||"",haveFocus:!1},(0,o.default)(t.prototype).filter(function(e){return 0===e.indexOf("handle")}).filter(function(e){return"function"==typeof s[e]}).forEach(function(e){return s[e]=s[e].bind(s)}),s}return(0,m.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({commentText:e.commentText||""})}},{key:"componentDidMount",value:function(){this.props.parentCommentID&&this._textareaNode&&this._textareaNode.focus()}},{key:"componentDidUpdate",value:function(){var e=this.refs.commentText;if(e){var t=this.getCommentText(),s=parseInt(e.style.height,10)||0;e.style.height=t.length?Math.max(e.scrollHeight,s)+"px":null}}},{key:"handleTextAreaNode",value:function(e){this._textareaNode=e}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submit()}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.submit()),27===e.keyCode&&this.props.placeholderId&&this.props.removeComment(this.props.post.site_ID,this.props.post.ID,this.props.placeholderId)}},{key:"handleFocus",value:function(){this.setState({haveFocus:!0})}},{key:"handleTextChange",value:function(e){var t=e.target.value;this.setState({commentText:t})}},{key:"resetCommentText",value:function(){this.setState({commentText:""})}},{key:"hasCommentText",value:function(){return this.state.commentText.trim().length>0}},{key:"submit",value:function(){var e=this.props.post,t=this.state.commentText.trim();return t?(this.props.editComment(e.site_ID,e.ID,this.props.commentId,t),(0,w.recordAction)("edited_comment"),(0,w.recordGaEvent)("Clicked Edit Comment Button"),this.resetCommentText(),this.props.onCommentSubmit(),!0):(this.resetCommentText(),!1)}},{key:"renderError",value:function(){var e=this.props.error,t=void 0;if(!e)return null;switch(e.error){case"comment_duplicate":t=(0,C.translate)("Duplicate comment detected. It looks like you've already said that!");break;default:t=(0,C.translate)("Sorry - there was a problem posting your comment.")}return y.default.createElement(k.default,{text:t,className:"comments__notice",showDismiss:!1,status:"is-error"})}},{key:"render",value:function(){var e=(0,b.default)({"is-active":this.hasCommentText(),"is-visible":this.state.haveFocus||this.hasCommentText()}),t=(0,b.default)({focused:this.state.haveFocus,"expanding-area":!0});return y.default.createElement("form",{className:"comments__edit-form"},y.default.createElement("fieldset",null,y.default.createElement("label",null,y.default.createElement("div",{className:t},y.default.createElement("pre",null,y.default.createElement("span",null,this.state.commentText),y.default.createElement("br",null)),y.default.createElement(x.default,null,y.default.createElement("textarea",{value:this.state.commentText,ref:this.handleTextAreaNode,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleTextChange}))),y.default.createElement("button",{ref:"commentButton",className:e,disabled:0===this.state.commentText.length,onClick:this.handleSubmit},(0,C.translate)("Send")),this.renderError())))}}]),t}(y.default.Component);D.propTypes={post:y.default.PropTypes.object.isRequired,commentId:y.default.PropTypes.number,commentText:y.default.PropTypes.string,onCommentSubmit:y.default.PropTypes.func,editComment:y.default.PropTypes.func.isRequired},D.defaultProps={onCommentSubmit:v.default};var R=function(e){return(0,T.bindActionCreators)({editComment:N.editComment},e)};t.default=(0,E.connect)(null,R)(D),e.exports=t.default},5890255058533989:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(0x4c328c9015af2),o=n(a),r=s(0x993f89fc903d0),i=s(5896763357248615),l=s(19189154744278),c=s(0x8ae3881d6e8c2),u=i.createClass({displayName:"NavItem",mixins:[l],propTypes:{itemType:i.PropTypes.string,path:i.PropTypes.string,selected:i.PropTypes.bool,tabIndex:i.PropTypes.number,onClick:i.PropTypes.func,isExternalLink:i.PropTypes.bool,disabled:i.PropTypes.bool,count:i.PropTypes.number,className:i.PropTypes.string,preloadSectionName:i.PropTypes.string},_preloaded:!1,preload:function(){!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,(0,r.preload)(this.props.preloadSectionName))},render:function(){var e,t,s,n=this.props.itemType?this.props.itemType:"tab",a={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};return a["section-nav-"+n]=!0,e=c(this.props.className,a),this.props.isExternalLink&&(t="_blank"),this.props.disabled||(s=this.props.onClick),i.createElement("li",{className:e},i.createElement("a",{href:this.props.path,target:t,className:"section-nav-"+n+"__link",onClick:s,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},i.createElement("span",{className:"section-nav-"+n+"__text"},this.props.children,"number"==typeof this.props.count&&i.createElement(o.default,{count:this.props.count}))))}});e.exports=u},5999750516959291:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(5630966280090368),o=n(a),r=s(5896763357248615),i=s(0x8ae3881d6e8c2),l=s(5736137603839510),c=s(7542443254063963),u=1,p=r.createClass({displayName:"NavSegmented",propTypes:{label:r.PropTypes.string,hasSiblingControls:r.PropTypes.bool},getDefaultProps:function(){return{hasSiblingControls:!1}},componentWillMount:function(){this.id=u,u++},render:function(){var e=i({"section-nav-group":!0,"section-nav__segmented":!0,"has-siblings":this.props.hasSiblingControls});return r.createElement("div",{className:e},this.props.label&&r.createElement("h6",{className:"section-nav-group__label"},this.props.label),r.createElement(l,null,this.getControlItems()))},getControlItems:function(){return r.Children.map(this.props.children,function(e,t){return r.createElement(c,(0,o.default)({},e.props,{key:"navSegmented-"+this.id+"-"+t}),e.props.children)},this)}});e.exports=p},6104353596224629:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s){var n,a=E.get();("string"==typeof e||Array.isArray(e))&&(e=(0,u.default)([].concat(e).map(function(e){return[e,t]}))),n=(a.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var a={key:t,operation:s};"delete"!==s&&(a.value=e[t]),n.push(a)}),k.handleViewAction({type:"EDIT_POST",post:{metadata:n}})}function o(e){return e=(0,h.default)(e),e=(0,v.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}var r,i=s(477028190620861),l=n(i),c=s(5973119050011126),u=n(c),p=s(6269536571656272),d=n(p),f=s(8446265970839099),h=n(f),m=s(8907951692841672),g=n(m),v=s(6703009972949751),_=s(4675954658966525)("calypso:posts"),y=s(0xd1ca77937cbcf),P=s(8478035041892969),b=s(0xe5816b799bd0f),E=s(5367243434992214),T=s(0x69c14441898c8),C=s(0x7325fdfe77d0d),I=s(7418474439241154)(),x=s(0x5dd72de17825d),S=s(0xbc30bb6c305c5),k=s(8769427305820155),N=s(5084380759969092);r={startEditingNew:function(e,t){var s;t=t||{},s={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},k.handleViewAction(s)},startEditingExisting:function(e,t){var s,n=E.get();e&&(n&&n.site_ID===e&&n.ID===t||(k.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),s=P.site(e).post(t),s.get({context:"edit",meta:"autosave"},function(e,t){k.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){k.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,s=E.get(),n=E.getSavedPost(),a=P.undocumented().site(s.site_ID);if(e=e||function(){},!E.isDirty())return e(new Error("NOT_DIRTY"));if(y.set("wpcom-autosave:"+s.site_ID+":"+s.ID,s),x.isPublished(n)||x.isPublished(s)){if(t=I.getSite(s.site_ID),!s.ID||!t||t.jetpack&&S(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));k.handleViewAction({type:"POST_AUTOSAVE",post:s}),a.postAutosave(s.ID,{content:s.content,title:s.title,excerpt:s.excerpt},function(t,s){k.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:s}),e(t,s)})}else r.saveEdited(null,e,{recordSaveEvent:!1})},blockSave:function(e){k.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){k.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){k.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){k.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){k.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){a(e,t,"update")},deleteMetadata:function(e){a(e,null,"delete")},saveEdited:function(e,t,s){var n,a,r,i,c,u,p;return k.handleViewAction({type:"EDIT_POST",post:e}),n=E.get(),E.hasContent()?E.isSaveBlocked()?void(0,d.default)(t,new Error("SAVE_BLOCKED"),n):(i=E.getChangedAttributes(),(0,l.default)(i).length?(i=o(i),c=E.getRawContent(),u=C.get("editor-mode"),p=!n.ID,k.handleViewAction({type:"EDIT_POST_SAVE"}),a=P.site(n.site_ID).post(n.ID),r={context:"edit",apiVersion:"1.2"},s&&s.recordSaveEvent===!1||N.recordSaveEvent(),(i&&"future"===i.status&&x.isFutureDated(n)||i&&"publish"===i.status&&x.isBackDated(n))&&(i=(0,g.default)({},i,{status:"publish",date:n.date})),void a[p?"add":"update"](r,i,function(e,s){var n,a;a=C.get("editor-mode"),e||(n=b.get(s.global_ID)),k.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:u===a?c:null,isNew:p,original:n,post:s}),t(e,s)})):void(0,d.default)(t,new Error("NO_CHANGE"),n)):void(0,d.default)(t,new Error("NO_CONTENT"),n)},update:function(e,t,s){var n=P.site(e.site_ID).post(e.ID);n.update(t,r.receiveUpdate.bind(null,s))},trash:function(e,t){var s=P.site(e.site_ID).post(e.ID);s.delete(r.receiveUpdate.bind(null,t))},restore:function(e,t){var s=P.site(e.site_ID).post(e.ID);s.restore(r.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";k.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e,t,s,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";n=T(a),n.isLastPage()||n.isFetchingNextPage()||(k.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:a}),t=n.getID(),e=n.getNextPageParams(),s=n.getSiteID(),s?P.site(s).postsList(e,r.receivePage.bind(null,t,a)):P.me().postsList(e,r.receivePage.bind(null,t,a)))},receivePage:function(e,t,s,n){k.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:s,data:n})},fetchUpdated:function(){var e,t,s,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";n=T(a),n.isFetchingNextPage()||(k.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:a}),e=n.getID(),t=n.getUpdatesParams(),s=n.getSiteID(),s?(_("Fetching posts that have been updated for %s since %s %o",s,t.modified_after,t),P.site(s).postsList(t,r.receiveUpdated.bind(null,e,a))):(_("Fetching posts that have been updated since %s %o",t.modified_after,t),P.me().postsList(t,r.receiveUpdated.bind(null,e,a))))},receiveUpdated:function(e,t,s,n){k.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:s,data:n})},receiveUpdate:function(e,t,s){var n;t||(n=b.get(s.global_ID)),k.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:n,post:s}),e(t,s)},fetchCounts:function(e,t){k.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),P.undocumented().site(e).postCounts(t,function(t,s){k.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:s,siteId:e})})}},e.exports=r},6115919936193278:function(e,t,s){"use strict";function n(){var e=i("animationend"),t=i("transitionend");e&&l.push(e),t&&l.push(t)}function a(e,t,s){e.addEventListener(t,s,!1)}function o(e,t,s){e.removeEventListener(t,s,!1)}var r=s(5152105718564875),i=s(6677185662972972),l=[];r.canUseDOM&&n();var c={addEndEventListener:function(e,t){return 0===l.length?void window.setTimeout(t,0):void l.forEach(function(s){a(e,s,t)})},removeEndEventListener:function(e,t){0!==l.length&&l.forEach(function(s){o(e,s,t)})}};e.exports=c},6138260659294409:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5630966280090368),o=n(a),r=s(5896763357248615),i=n(r),l=s(0x8ae3881d6e8c2),c=n(l),u=s(5059747709250767),p=n(u),d=s(0x45d24eaab7654),f=n(d),h=s(6940362979991673),m=n(h);t.default=i.default.createClass({displayName:"CountedTextarea",propTypes:{value:i.default.PropTypes.string,placeholder:i.default.PropTypes.string,countPlaceholderLength:i.default.PropTypes.bool,onChange:i.default.PropTypes.func,acceptableLength:i.default.PropTypes.number,showRemainingCharacters:i.default.PropTypes.bool},getDefaultProps:function(){return{value:"",placeholder:"",countPlaceholderLength:!1,onChange:f.default,showRemainingCharacters:!1}},renderCountPanel:function(){var e=this.props.value.length;!e&&this.props.countPlaceholderLength&&(e=this.props.placeholder.length);var t=void 0;return t=this.props.showRemainingCharacters&&this.props.acceptableLength?this.translate("%d character remaining","%d characters remaining",{context:"Input length",args:[this.props.acceptableLength-e],count:this.props.acceptableLength-e}):this.translate("%d character","%d characters",{context:"Input length",args:[e],count:e}),i.default.createElement("div",{className:"counted-textarea__count-panel"},t,this.props.children)},render:function(){var e=(0,c.default)("counted-textarea",this.props.className,{"is-exceeding-acceptable-length":this.props.acceptableLength&&this.props.value.length>this.props.acceptableLength});return i.default.createElement("div",{className:e},i.default.createElement(m.default,(0,o.default)({},(0,p.default)(this.props,"className","acceptableLength","showRemainingCharacters","children","countPlaceholderLength"),{className:"counted-textarea__input"})),this.renderCountPanel())}}),e.exports=t.default},6200315943787393:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(4936501850969121),o=s(854612293458707),r=s(0xa72c09d16709f),i=s(7418474439241154)();e.exports=n.createClass({displayName:"SidebarNavigation",render:function(){var e,t=i.getSelectedSite(),s=t.title;return t||(s=this.translate("All Sites"),e="all-sites"),n.createElement(a,{linkClassName:e,sectionName:"site",sectionTitle:s},t?n.createElement(r,{site:t}):n.createElement(o,{sites:i.get()}))}})},6253471006929827:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=o.default.createElement("hr",{className:"popover__menu-separator"});t.default=function(){return r},e.exports=t.default},6346297615794200:function(e,t,s){"use strict";function n(e,t){var s=c.get(e);a("comparing positions:",e,s,t),r(s,t)||(a("storing values:",e,t),l[e]=t,c.emit("change"))}var a=s(4675954658966525)("calypso:infinite-list:positions-store"),o=s(8769427305820155),r=s(0xf0f4288728240),i=s(0xf2ce944f0fc89),l={},c={get:function(e){return a("positions-store:get(): ",e,l),l[e]}};i(c),c.dispatchToken=o.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":n(t.url,t.positions)}}),e.exports=c},6352991067537738:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(0x8ae3881d6e8c2),v=n(g),_=s(291992733909169),y=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.currencyCode,s=e.rawPrice,n=e.original,a=e.discounted,o=e.className;if(!t||0!==s&&!s)return null;var r=(0,_.getCurrencyObject)(s,t),i=(0,v.default)("plan-price",o,{"is-original":n,"is-discounted":a});return m.default.createElement("h4",{className:i},m.default.createElement("sup",{className:"plan-price__currency-symbol"},r.symbol),m.default.createElement("span",{className:"plan-price__integer"},r.integer),m.default.createElement("sup",{className:"plan-price__fraction"},s>0&&r.fraction))}}]),t}(h.Component);t.default=y,y.propTypes={rawPrice:h.PropTypes.number,original:h.PropTypes.bool,discounted:h.PropTypes.bool,currencyCode:h.PropTypes.string,className:h.PropTypes.string},y.defaultProps={currencyCode:"USD",original:!1,discounted:!1,className:""},e.exports=t.default},6402003291963531:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(7064831842895117),v=n(g),_=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return this.props.isPlaceholder?m.default.createElement("div",{className:"comments__comment-content"},this.props.content):m.default.createElement(v.default,null,m.default.createElement("div",{className:"comments__comment-content",dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),t}(m.default.Component);t.default=_,_.propTypes={content:h.PropTypes.string.isRequired,isPlaceholder:h.PropTypes.bool
},e.exports=t.default},6490169626294051:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.translate,s=e.globalId,n=e.post,a=e.editUrl,o=e.className,i=e.compact,c=n?n.title:null,u=(0,l.default)("post-item",o,{"is-untitled":!c,"is-mini":i,"is-placeholder":!s});return r.default.createElement(h.default,{compact:!0,className:u},r.default.createElement("div",{className:"post-item__detail"},r.default.createElement("div",{className:"post-item__title-meta"},r.default.createElement("h1",{className:"post-item__title"},r.default.createElement("a",{href:a,className:"post-item__title-link"},c||t("Untitled"))),r.default.createElement("div",{className:"post-item__meta"},r.default.createElement(g.default,{globalId:s}),r.default.createElement(_.default,{globalId:s}),r.default.createElement(C.default,{globalId:s})))),r.default.createElement(P.default,{globalId:s}),r.default.createElement(E.default,{globalId:s}))}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5896763357248615),r=n(o),i=s(0x8ae3881d6e8c2),l=n(i),c=s(6280957995252369),u=s(7572476330282672),p=s(5523398591803755),d=s(6007716273106560),f=s(6881822108913591),h=n(f),m=s(0x6b70b5a07edba),g=n(m),v=s(7871831694427923),_=n(v),y=s(7123551725356330),P=n(y),b=s(7262860374596235),E=n(b),T=s(851774030711285),C=n(T);a.propTypes={translate:o.PropTypes.func,globalId:o.PropTypes.string,post:o.PropTypes.object,className:o.PropTypes.string,compact:o.PropTypes.bool},t.default=(0,c.connect)(function(e,t){var s=(0,d.getNormalizedPost)(e,t.globalId);return s?{post:s,editUrl:(0,p.getEditorPath)(e,s.site_ID,s.ID)}:{}})((0,u.localize)(a)),e.exports=t.default},6736014577589168:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,s){return{type:l.POST_STATS_RECEIVE,siteId:e,postId:t,stats:s}}function o(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(n){return n({type:l.POST_STATS_REQUEST,postId:t,siteId:e,fields:s}),i.default.site(e).statsPostViews(t,{fields:s.join()}).then(function(o){n(a(e,t,o)),n({type:l.POST_STATS_REQUEST_SUCCESS,siteId:e,postId:t,fields:s})}).catch(function(a){n({type:l.POST_STATS_REQUEST_FAILURE,siteId:e,postId:t,fields:s,error:a})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostStats=a,t.requestPostStats=o;var r=s(8478035041892969),i=n(r),l=s(0xd047e5c4c63f8)},6859950644507639:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(0xeb8f73c122973),m=n(h),g=s(5896763357248615),v=n(g),_=s(6280957995252369),y=s(78648220391165),P=s(7572476330282672),b=s(0x8ae3881d6e8c2),E=n(b),T=s(0xa505046780b0c),C=n(T),I=s(5628363501489590),x=n(I),S=s(0xc46966cb87a6f),k=n(S),N=s(72591479426812),w=n(N),D=s(4883949902648912),R=s(0x8f1527a7f80c8),M=s(5066650973248405),O=s(474432612430512),L=s(8623119050819633),A=function(e){function t(){var e,s,n,a;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return s=n=(0,p.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),n.state={showPageActions:!1},n.togglePageActions=function(){n.setState({showPageActions:!n.state.showPageActions})},n.setAsHomepage=function(){n.setState({showPageActions:!1}),n.props.setFrontPage(n.props.site.ID,0,L.updateSitesList)},a=s,(0,p.default)(n,a)}return(0,f.default)(t,e),(0,c.default)(t,[{key:"renderSetAsHomepageItem",value:function(){return v.default.createElement(w.default,{onClick:this.setAsHomepage},v.default.createElement(C.default,{icon:"house",size:18}),this.props.translate("Set as Homepage"))}},{key:"render",value:function(){var e=this.props.translate,t="page"===this.props.frontPageType&&!this.props.postsPage,s="posts"===this.props.frontPageType,n=this.props.isFrontPage||(0,D.isEnabled)("manage/pages/set-homepage")&&t,a=!s&&(0,O.userCan)("edit_theme_options",this.props.site)&&(0,D.isEnabled)("manage/pages/set-homepage");return n?v.default.createElement(x.default,{className:"blog-posts-page"},t&&v.default.createElement("div",{className:"blog-posts-page__not-used-badge"},e("Not Used")),s&&v.default.createElement(C.default,{icon:"house",size:18,className:"blog-posts-page__home-badge"}),v.default.createElement("div",{className:"blog-posts-page__details"},v.default.createElement("div",{className:"blog-posts-page__title"},e("Blog Posts")),v.default.createElement("div",{className:"blog-posts-page__info"},e(s?"Your latest posts, shown on homepage":"Your latest posts"))),a?v.default.createElement("div",{className:"blog-posts-page__actions"},v.default.createElement(C.default,{icon:"ellipsis",className:(0,E.default)({"page__actions-toggle":!0,"is-active":this.state.showPageActions}),onClick:this.togglePageActions,ref:"popoverMenuButton"}),v.default.createElement(k.default,{isVisible:this.state.showPageActions,onClose:this.togglePageActions,position:"bottom left",context:this.refs&&this.refs.popoverMenuButton},this.renderSetAsHomepageItem())):null):null}}]),t}(v.default.Component);A.propTypes={site:v.default.PropTypes.object},A.defaultProps={translate:m.default},t.default=(0,_.connect)(function(e,t){return{frontPageType:(0,R.getSiteFrontPageType)(e,t.site.ID),isFrontPage:"posts"===(0,R.getSiteFrontPageType)(e,t.site.ID),postsPage:(0,R.getSitePostsPage)(e,t.site.ID)}},function(e){return(0,y.bindActionCreators)({setFrontPage:M.setFrontPage},e)})((0,P.localize)(A)),e.exports=t.default},6874930428474342:function(e,t,s){"use strict";function n(e){e.forEach(a)}function a(e){var t=i(p.get(e.global_ID),"content_images","canonical_image","featured_image","images","global_ID");u.normalizeAsync(t,function(e,t){var s=o.get(t.global_ID);r(t,s)||(d[t.global_ID]=t,o.emit("change"))})}var o,r=s(0xf0f4288728240),i=s(83765757817552),l=s(0xf2ce944f0fc89),c=s(8769427305820155),u=s(0x5dd72de17825d),p=s(0xe5816b799bd0f),d={};o={get:function(e){return d[e]},getAll:function(){return d}},l(o),o.dispatchToken=c.register(function(e){var t=e.action;switch(c.waitFor([p.dispatchToken]),t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":!t.error&&t.data.posts&&n(t.data.posts);break;case"RECEIVE_UPDATED_POST":t.error||a(t.post)}}),e.exports=o},6940362979991673:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(5630966280090368),o=n(a),r=s(5896763357248615),i=s(0x8ae3881d6e8c2),l=s(5059747709250767);e.exports=r.createClass({displayName:"FormTextarea",render:function(){return r.createElement("textarea",(0,o.default)({},l(this.props,"className"),{className:i(this.props.className,"form-textarea")}),this.props.children)}})},6984388208717668:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.clickHandler,s=e.numberFormat,n=e.post,a=e.slug,o=e.translate,i=e.viewCount,l=n.ID,u=n.site_ID,p="",f=void 0;return i?(p=s(i),f=o("%(count)s Total View","%(count)s Total Views",{count:i,args:{count:i}})):f=o("Total Views"),a?r.default.createElement("a",{href:"/stats/post/"+l+"/"+a,className:(0,c.default)({"post__total-views":!0,"is-empty":!p}),title:f,onClick:t},r.default.createElement(g.default,{siteId:u,postId:l,fields:["views"]}),r.default.createElement(d.default,{icon:"visible",size:24}),r.default.createElement(h.default,{updateOn:p},p)):r.default.createElement(_.default,{siteId:u})}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5896763357248615),r=n(o),i=s(6280957995252369),l=s(0x8ae3881d6e8c2),c=n(l),u=s(7572476330282672),p=s(0xa505046780b0c),d=n(p),f=s(0xf802d37b8bba3),h=n(f),m=s(5026276192179202),g=n(m),v=s(0xbd8ce093a3eb6),_=n(v),y=s(0x5635d5da58cd5),P=s(0x8f1527a7f80c8);a.propTypes={clickHandler:o.PropTypes.func,numberFormat:o.PropTypes.func,post:o.PropTypes.object.isRequired,slug:o.PropTypes.string,translate:o.PropTypes.func,viewCount:o.PropTypes.number},t.default=(0,i.connect)(function(e,t){var s=t.post,n=(0,y.getPostStat)(e,s.site_ID,s.ID,"views");return{slug:(0,P.getSiteSlug)(e,s.site_ID),viewCount:n}})((0,u.localize)(a)),e.exports=t.default},7123551725356330:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.thumbnail,s=(0,l.default)("post-type-list__post-thumbnail-wrapper",{"has-image":!!t});return r.default.createElement("div",{className:s},t&&r.default.createElement("img",{src:(0,f.default)(t,{h:80}),className:"post-type-list__post-thumbnail"}))}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5896763357248615),r=n(o),i=s(0x8ae3881d6e8c2),l=n(i),c=s(6280957995252369),u=s(8640881565075096),p=n(u),d=s(8439846384365976),f=n(d),h=s(6007716273106560);a.propTypes={globalId:o.PropTypes.string,thumbnail:o.PropTypes.string},t.default=(0,c.connect)(function(e,t){var s=(0,h.getNormalizedPost)(e,t.globalId),n=(0,p.default)(s,"canonical_image.uri");return{thumbnail:n}})(a),e.exports=t.default},7141578567579753:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(0x8ae3881d6e8c2),v=n(g),_=s(492788797284063),y=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"getIconClassNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,s=t.plan,n=t.className,a=(0,_.getPlanClass)(s);return(0,v.default)("plan-icon",a,n,e)}},{key:"getPersonalIcon",value:function(){return m.default.createElement("svg",{className:this.getIconClassNames("plan-icon__personal"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0",y:"0",viewBox:"0 0 124 125"},m.default.createElement("circle",{className:"plan-icon__personal-0",cx:"62",cy:"62.1",r:"62"}),m.default.createElement("path",{className:"plan-icon__personal-1",d:"M64 106.1l4-9.8v-3.5H62v14.6C62.9 107.4 63.6 106.9 64 106.1z"}),m.default.createElement("path",{className:"plan-icon__personal-2",d:"M56.2 92.8v3.5l4 9.8c0.3 0.8 1.1 1.3 1.9 1.3V92.8H56.2z"}),m.default.createElement("path",{className:"plan-icon__personal-2",d:"M62 32.9h17.1V2.5C73.7 0.9 68 0.1 62 0.1V32.9z"}),m.default.createElement("path",{className:"plan-icon__personal-3",d:"M62 32.9V0.1c0 0 0 0 0 0 -5.9 0-11.6 0.8-17 2.4v30.5H62z"}),m.default.createElement("polygon",{className:"plan-icon__personal-4",points:"62 32.9 45 32.9 48.3 48.7 53.3 92.8 62 92.8 "}),m.default.createElement("polygon",{className:"plan-icon__personal-5",points:"62 32.9 79.2 32.9 75.9 48.7 70.9 92.8 62 92.8 "}))}},{key:"getPremiumIcon",value:function(){return m.default.createElement("svg",{className:this.getIconClassNames("plan-icon__premium"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0",y:"0",viewBox:"0 0 62 61.5"},m.default.createElement("ellipse",{className:"plan-icon__premium-0",cx:"31",cy:"30.8",rx:"31",ry:"30.8"}),m.default.createElement("path",{className:"plan-icon__premium-1",d:"M27.8 46.3v1.9l2.2 5.4c0.2 0.5 0.5 0.7 1 0.7v-7.9L27.8 46.3z"}),m.default.createElement("path",{className:"plan-icon__premium-2",d:"M32 53.6l2.2-5.4v-1.9H31v3.8 4.1C31.5 54.3 31.9 54 32 53.6z"}),m.default.createElement("path",{className:"plan-icon__premium-3",d:"M21.6 18c0.2 2 4.8 28.3 4.8 28.3l4.6 0.1V18H21.6z"}),m.default.createElement("path",{className:"plan-icon__premium-4",d:"M40.5 18H31v23.4 5l4.5-0.1C35.5 46.3 40.1 20.4 40.5 18z"}),m.default.createElement("path",{className:"plan-icon__premium-5",d:"M31 18V0c-3.9 0-7.7 0.7-11.2 2.1 0.7 6 1.8 15.9 1.8 15.9H31z"}),m.default.createElement("path",{className:"plan-icon__premium-6",d:"M31 18h9.5c0 0 1.1-9.9 1.8-15.9C38.8 0.7 35 0 31 0V18z"}))}},{key:"getBusinessIcon",value:function(){return m.default.createElement("svg",{className:this.getIconClassNames("plan-icon__business"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0",y:"0",viewBox:"0 0 124 124"},m.default.createElement("circle",{className:"plan-icon__business-0",cx:"62",cy:"62",r:"62"}),m.default.createElement("path",{className:"plan-icon__business-1",d:"M57.4 73.8c0-2.5 2-4.6 4.6-4.6V36.8h-9.6v12.1c-8 3.7-13.5 11.7-13.5 21.1 0 4.9 1.5 9.4 4.1 13.1l0 0c15.4 22.4 15.4 22.4 17 24.8h0.3V78.1C58.6 77.4 57.4 75.7 57.4 73.8L57.4 73.8z"}),m.default.createElement("path",{className:"plan-icon__business-2",d:"M85.2 69.8c0-9.4-5.6-17.4-13.5-21.1v-12H62v32.5c2.5 0 4.6 2 4.6 4.6 0 1.9-1.2 3.5-2.9 4.2v29.8H64c1.6-2.4 1.6-2.4 17-24.8l0 0C83.6 79.2 85.2 74.7 85.2 69.8L85.2 69.8z"}),m.default.createElement("path",{className:"plan-icon__business-3",d:"M48.6 32h-2.4c-3.2 0-5.8 2.6-5.8 5.8V38c0 3.2 2.6 5.8 5.8 5.8H62v-4.7V32 0c-7.2 0-14.1 1.2-20.6 3.5 1.1 5.5 2.5 11 4.1 16.5L48.6 32z"}),m.default.createElement("path",{className:"plan-icon__business-4",d:"M62 39.1v4.7h15.8c3.2 0 5.8-2.6 5.8-5.8v-0.2c0-3.2-2.6-5.8-5.8-5.8h-2.4l3.1-12c1.6-5.5 3-11 4.1-16.5C76.1 1.2 69.2 0 62 0v32V39.1z"}))}},{key:"getDefaultIcon",value:function(){return m.default.createElement("svg",{className:this.getIconClassNames("plan-icon__free"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0",y:"0",viewBox:"0 0 61.8 61.8"},m.default.createElement("circle",{className:"plan-icon__free-0",cx:"30.9",cy:"30.9",r:"30.9"}),m.default.createElement("polygon",{className:"plan-icon__free-1",points:"41.4 32.8 30.9 22.5 20.3 32.8 30.9 51.8 "}),m.default.createElement("path",{className:"plan-icon__free-2",d:"M30.9 41.6L30.9 41.6c-2 0-3.7 1.6-3.7 3.6l3.7 6.5 3.7-6.5C34.5 43.2 32.9 41.6 30.9 41.6L30.9 41.6z"}),m.default.createElement("path",{className:"plan-icon__free-3",d:"M25.6 27.7c0 2.9 2.3 5.2 5.2 5.2h0.1c2.9 0 5.2-2.3 5.2-5.2v-0.1V0.4c-1.7-0.3-3.5-0.5-5.3-0.5s-3.6 0.2-5.3 0.5v27.3H25.6z"}),m.default.createElement("path",{className:"plan-icon__free-4",d:"M25.6 27.6V0.4c-1.8 0.3-3.6 0.8-5.3 1.4v31C23.2 32.8 25.6 30.5 25.6 27.6z"}),m.default.createElement("path",{className:"plan-icon__free-2",d:"M41.4 32.8v-31c-1.7-0.6-3.5-1.1-5.3-1.4v27.2C36.1 30.5 38.5 32.8 41.4 32.8z"}))}},{key:"render",value:function(){var e=this.props.plan;switch(e){case _.PLAN_PERSONAL:case _.PLAN_JETPACK_PERSONAL:case _.PLAN_JETPACK_PERSONAL_MONTHLY:return this.getPersonalIcon();case _.PLAN_PREMIUM:case _.PLAN_JETPACK_PREMIUM:case _.PLAN_JETPACK_PREMIUM_MONTHLY:return this.getPremiumIcon();case _.PLAN_BUSINESS:case _.PLAN_JETPACK_BUSINESS:case _.PLAN_JETPACK_BUSINESS_MONTHLY:return this.getBusinessIcon();default:return this.getDefaultIcon()}}}]),t}(h.Component);t.default=y,y.propTypes={classNames:m.default.PropTypes.string,plan:m.default.PropTypes.oneOf([_.PLAN_FREE,_.PLAN_PREMIUM,_.PLAN_BUSINESS,_.PLAN_JETPACK_FREE,_.PLAN_JETPACK_BUSINESS,_.PLAN_JETPACK_BUSINESS_MONTHLY,_.PLAN_JETPACK_PREMIUM,_.PLAN_JETPACK_PREMIUM_MONTHLY,_.PLAN_JETPACK_PERSONAL,_.PLAN_JETPACK_PERSONAL_MONTHLY,_.PLAN_PERSONAL]).isRequired},e.exports=t.default},7262860374596235:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.globalId,s=e.includeDefaultActions,n=e.children,a=[];return s&&a.push(r.default.createElement(d.default,{key:"edit"}),r.default.createElement(P.default,{key:"view"}),r.default.createElement(h.default,{key:"stats"}),r.default.createElement(g.default,{key:"publish"}),r.default.createElement(E.default,{key:"restore"}),r.default.createElement(_.default,{key:"trash"})),n=o.Children.toArray(n),n.length&&(a.length&&a.push(r.default.createElement(u.default,{key:"separator"})),a=a.concat(n)),r.default.createElement("div",{className:"post-actions-ellipsis-menu"},r.default.createElement(l.default,{position:"bottom left",disabled:!t},a.map(function(e){return(0,o.cloneElement)(e,{globalId:t})})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=s(5896763357248615),r=n(o),i=s(522401650113320),l=n(i),c=s(6253471006929827),u=n(c),p=s(0xf2e0fa23f3cb3),d=n(p),f=s(0xfde3bf62bd9e8),h=n(f),m=s(0x54a67c9d8ad7c),g=n(m),v=s(639851364124727),_=n(v),y=s(0xc8ef941fdffb6),P=n(y),b=s(0x40e7258280040),E=n(b);a.propTypes={globalId:o.PropTypes.string,includeDefaultActions:o.PropTypes.bool,children:o.PropTypes.node},a.defaultProps={includeDefaultActions:!0},e.exports=t.default},7304560458482196:function(e,t,s){"use strict";var n=s(5896763357248615),a=n.createClass({displayName:"noResults",getDefaultProps:function(){return{text:"No results",image:!1}},render:function(){return n.createElement("div",{className:"no-results"},this.props.image?n.createElement("img",{className:"no-results__img",src:this.props.image}):null,n.createElement("span",null,this.props.text))}});e.exports=a},7346600848553968:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(0x8ae3881d6e8c2),v=n(g),_=function(e){function t(){(0,i.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.onKeyDown=e.onKeyDown.bind(e),e.onClick=e.onClick.bind(e),e.onLabelClick=e.onLabelClick.bind(e),e}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.id=this.constructor.idNum++}},{key:"onKeyDown",value:function(e){this.props.disabled||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.props.onChange()),this.props.onKeyDown(e))}},{key:"onClick",value:function(){this.props.disabled||this.props.onChange()}},{key:"onLabelClick",value:function(e){if(!this.props.disabled){var t=e.target.nodeName.toLowerCase();"a"!==t&&"input"!==t&&"select"!==t&&(e.preventDefault(),this.props.onChange())}}},{key:"render",value:function(){var e=this.props.id||"toggle-"+this.id,t=(0,v.default)("form-toggle__wrapper",{"is-disabled":this.props.disabled}),s=(0,v.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return m.default.createElement("span",{className:t},m.default.createElement("input",{className:s,type:"checkbox",checked:this.props.checked,readOnly:!0,disabled:this.props.disabled}),m.default.createElement("label",{className:"form-toggle__label",htmlFor:e},m.default.createElement("span",{className:"form-toggle__switch",id:e,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),m.default.createElement("span",{className:"form-toggle__label-content",onClick:this.onLabelClick},this.props.children)))}}]),t}(h.PureComponent);_.propTypes={onChange:h.PropTypes.func,onKeyDown:h.PropTypes.func,checked:h.PropTypes.bool,disabled:h.PropTypes.bool,id:h.PropTypes.string,className:h.PropTypes.string,toggling:h.PropTypes.bool,"aria-label":h.PropTypes.string,children:h.PropTypes.node},_.defaultProps={checked:!1,disabled:!1,onKeyDown:function(){},onChange:function(){}},_.idNum=0,t.default=_,e.exports=t.default},7542443254063963:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(0xc729f06ce7488),o=n(a),r=s(5896763357248615),i=s(0x8ae3881d6e8c2),l=r.createClass({displayName:"SegmentedControlItem",propTypes:{children:r.PropTypes.node.isRequired,path:r.PropTypes.string,selected:r.PropTypes.bool,title:r.PropTypes.string,onClick:r.PropTypes.func},getDefaultProps:function(){return{selected:!1}},render:function(){var e=i({"segmented-control__item":!0,"is-selected":this.props.selected}),t=i("segmented-control__link",(0,o.default)({},"item-index-"+this.props.index,null!=this.props.index));return r.createElement("li",{className:e},r.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,role:"radio",tabIndex:0,"aria-selected":this.props.selected},r.createElement("span",{className:"segmented-control__text"},this.props.children)))}});e.exports=l},7676928569480141:function(e,t,s){"use strict";var n=s(5896763357248615),a=s(19189154744278),o=s(0xa505046780b0c);e.exports=n.createClass({displayName:"PostRelativeTime",mixins:[a],propTypes:{post:n.PropTypes.object.isRequired,includeNonDraftStatuses:n.PropTypes.bool,link:n.PropTypes.string,target:n.PropTypes.string},getDefaultProps:function(){return{includeNonDraftStatuses:!1,link:null,target:null}},getRelativeTimeText:function(){var e=this.props.post.status,t=void 0;if("draft"===e||"pending"===e?t=this.props.post.modified:"new"!==e&&(t=this.props.post.date),t)return n.createElement("span",{className:"post-relative-time-status__time"},n.createElement(o,{icon:"time",size:18}),n.createElement("span",{className:"post-relative-time-status__time-text"},this.moment(t).fromNow()))},getStatusText:function(){var e,t=this.props.post.status,s="post-relative-time-status__status",a="aside";if(this.props.post.sticky?(e=this.translate("sticky"),s+=" is-sticky",a="bookmark-outline"):"pending"===t?(e=this.translate("pending review"),s+=" is-pending"):"future"===t?(e=this.translate("scheduled"),s+=" is-scheduled",a="calendar"):"trash"===t?(e=this.translate("trashed"),s+=" is-trash",a="trash"):this.props.includeBasicStatus&&("draft"===t?e=this.translate("draft"):"publish"===t?e=this.translate("published"):"new"===t&&(e=this.translate("Publish immediately"))),e)return n.createElement("span",{className:s},n.createElement(o,{icon:a,size:18}),n.createElement("span",{className:"post-relative-time-status__status-text"},e))},render:function(){var e,t=this.getRelativeTimeText(),s=this.getStatusText(),a=t?"post-relative-time-status":null,o=n.createElement("span",null,t,s);if(this.props.link){var r="_blank"===this.props.target?"noopener noreferrer":null;e=n.createElement("p",{className:a},n.createElement("a",{href:this.props.link,target:this.props.target,rel:r,onClick:this.props.onClick},o))}else e=n.createElement("p",{className:a},o);return e}})},7871831694427923:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.translate,s=e.post,n=e.showAll,a=e.showIcon,o=void 0===a||a;if(!s)return null;var i=s.sticky,l=s.status,u=void 0,p=void 0,f=void 0;if(i?(u=t("Sticky"),p="is-sticky",f="bookmark-outline"):"pending"===l?(u=t("Pending Review"),p="is-pending",f="aside"):"future"===l?(u=t("Scheduled"),p="is-scheduled",f="calendar"):"trash"===l?(u=t("Trashed"),p="is-trash",f="trash"):n&&"draft"===l?(u=t("Draft"),p="is-draft",f="aside"):n&&"publish"===l&&(u=t("Published"),p="is-published",f="aside"),!u)return null;var h=(0,c.default)("post-status",p);return r.default.createElement("span",{className:h},o&&r.default.createElement(d.default,{icon:f,size:18,className:"post-status__icon"}),r.default.createElement("span",{className:"post-status__text"},u))}Object.defineProperty(t,"__esModule",{value:!0}),t.PostStatus=a;var o=s(5896763357248615),r=n(o),i=s(6280957995252369),l=s(0x8ae3881d6e8c2),c=n(l),u=s(7572476330282672),p=s(0xa505046780b0c),d=n(p),f=s(6007716273106560);a.displayName="PostStatus",a.propTypes={globalId:o.PropTypes.string,translate:o.PropTypes.func,post:o.PropTypes.object,showAll:o.PropTypes.bool,showIcon:o.PropTypes.bool},t.default=(0,i.connect)(function(e,t){var s=t.globalId;return{post:(0,f.getNormalizedPost)(e,s)}})((0,u.localize)(a))},7904991244547051:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5896763357248615),m=n(h),g=s(0x8ae3881d6e8c2),v=n(g),_=s(0x4c328c9015af2),y=n(_),P=function(e){function t(){return(0,i.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,v.default)(this.props.className,{"select-dropdown__item":!0,"is-selected":this.props.selected,"is-disabled":this.props.disabled});return m.default.createElement("li",{className:"select-dropdown__option"},m.default.createElement("a",{ref:"itemLink",href:this.props.path,className:e,onClick:this.props.disabled?null:this.props.onClick,"data-bold-text":this.props.value||this.props.children,role:"menuitem",tabIndex:this.props.isDropdownOpen?0:"","aria-selected":this.props.selected},m.default.createElement("span",{className:"select-dropdown__item-text"},this.props.children),"number"==typeof this.props.count&&m.default.createElement("span",{"data-text":this.props.count,className:"select-dropdown__item-count"},m.default.createElement(y.default,{count:this.props.count}))))}}]),t}(h.Component);P.propTypes={children:m.default.PropTypes.string.isRequired,path:m.default.PropTypes.string,isDropdownOpen:m.default.PropTypes.bool,selected:m.default.PropTypes.bool,onClick:m.default.PropTypes.func,count:m.default.PropTypes.number},P.defaultProps={isDropdownOpen:!1,selected:!1},t.default=P,e.exports=t.default},8165709587933903:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){R.ga.recordEvent("Pages",e)}function o(e){var t={publish:T.translate("Published"),draft:T.translate("Draft"),pending:T.translate("Pending"),future:T.translate("Future"),private:T.translate("Private"),trash:T.translate("Trashed")};return t[e]||e}Object.defineProperty(t,"__esModule",{value:!0});var r=s(6718701541658404),i=n(r),l=s(6280957995252369),c=s(78648220391165),u=s(6253471006929827),p=n(u),d=s(0xe6bd8709d6a3c),f=s(0x8f1527a7f80c8),h=s(591769715856004),m=s(5066650973248405),g=s(474432612430512),v=s(8623119050819633),_=s(8741111692106981),y=s(301929001539288),P=s(0x5dd72de17825d),b=s(5896763357248615),E=s(4926561643672304),T=s(7572476330282672),C=s(0x90ba166cd016c),I=s(0x7df7df5329b0e),x=s(5628363501489590),S=s(0xa505046780b0c),k=s(0xc46966cb87a6f),N=s(72591479426812),w=s(0xa72c09d16709f),D=s(8623119050819633),R=s(623310115397031),M=s(0x5dd72de17825d),O=s(0x8ae3881d6e8c2),L=s(4883949902648912),A=b.createClass({displayName:"Page",mixins:[I],analyticsEvents:{moreOptions:function(){a("Clicked More Options Menu")},pageTitle:function(){a("Clicked Page Title")},editPage:function(){a("Clicked Edit Page")},viewPage:function(){a("Clicked View Page")}},getInitialState:function(){return{showPageActions:!1}},componentWillMount:function(){this.strings={trashing:this.translate("Trashing Page"),deleting:this.translate("Deleting Page"),trashed:this.translate("Moved to Trash"),undo:this.translate("undo?"),restoring:this.translate("Restoring Page"),restored:this.translate("Page Restored"),deleted:this.translate("Page Deleted"),updating:this.translate("Updating Page"),error:this.translate("Error"),updated:this.translate("Updated"),deleteWarning:this.translate("Delete this page permanently?")}},togglePageActions:function(){this.setState({showPageActions:!this.state.showPageActions}),this.state.showPageActions&&this.analyticsEvents.moreOptions()},getSiteDomain:function(){return this.props.site&&this.props.site.domain||"..."},setAsHomepage:function(){this.setState({showPageActions:!1}),this.props.setFrontPage(this.props.page.site_ID,this.props.page.ID,v.updateSitesList)},getSetAsHomepageItem:function(){if(!this.props.selectedSiteId)return null;var e="publish"===this.props.page.status;return e&&!this.props.isFrontPage&&L.isEnabled("manage/pages/set-homepage")&&(0,g.userCan)("edit_theme_options",this.props.site)?b.createElement(N,{onClick:this.setAsHomepage},b.createElement(S,{icon:"house",size:18}),this.translate("Set as Homepage")):null},viewPage:function(e){e.preventDefault();var t=this.props,s=t.isPreviewable,n=t.previewURL;return this.props.page.status&&"publish"===this.props.page.status&&this.analyticsEvents.viewPage(),s?(this.props.setPreviewUrl(n),void this.props.setLayoutFocus("preview")):window.open(n)},getViewItem:function(){var e=this.props.isPreviewable;return"trash"===this.props.page.status?null:this.props.hasStaticFrontPage&&this.props.isPostsPage?null:"publish"!==this.props.page.status?b.createElement(N,{onClick:this.viewPage},b.createElement(S,{icon:e?"visible":"external",size:18}),this.translate("Preview")):b.createElement(N,{onClick:this.viewPage},b.createElement(S,{icon:e?"visible":"external",size:18}),this.translate("View Page"))},childPageInfo:function(){var e,t,s,n=this.props.page,a=this.props.site;return n.parent?(e=n.parent.title||this.translate("( Untitled )"),t=M.userCan("edit_post",this.props.page)?D.editLinkForPage(n.parent,a):n.parent.URL,s=b.createElement("a",{href:t},e),b.createElement("div",{className:"page__popover-more-info"},this.translate("Child of {{PageTitle/}}",{components:{PageTitle:s}}))):null},frontPageInfo:function(){return this.props.isFrontPage?L.isEnabled("manage/pages/set-homepage")?b.createElement("div",{className:"page__popover-more-info"},this.translate("This page is set as your site's homepage")):b.createElement("div",{className:"page__popover-more-info"},this.translate("Currently set as {{link}}Front Page{{/link}}",{components:{link:b.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.site.options.admin_url+"options-reading.php"})}})):null},getPublishItem:function(){return"publish"!==this.props.page.status&&M.userCan("publish_post",this.props.page)&&"trash"!==this.props.page.status?b.createElement(N,{onClick:this.updateStatusPublish},b.createElement(S,{icon:"checkmark",size:18}),this.translate("Publish")):null},getEditItem:function(){return this.props.hasStaticFrontPage&&this.props.isPostsPage?null:M.userCan("edit_post",this.props.page)?b.createElement(N,{onClick:this.editPage},b.createElement(S,{icon:"pencil",size:18}),this.translate("Edit")):null},getSendToTrashItem:function(){return this.props.hasStaticFrontPage&&this.props.isPostsPage||this.props.isFrontPage?null:M.userCan("delete_post",this.props.page)?"trash"!==this.props.page.status?b.createElement(N,{className:"page__trash-item",onClick:this.updateStatusTrash},b.createElement(S,{icon:"trash",size:18}),this.translate("Trash")):b.createElement(N,{className:"page__delete-item",onClick:this.updateStatusDelete},b.createElement(S,{icon:"trash",size:18}),this.translate("Delete")):null},getCopyItem:function(){var e=this.props,t=e.page,s=e.site;return(0,i.default)(["draft","future","pending","private","publish"],t.status)&&M.userCan("edit_post",t)?b.createElement(N,{onClick:this.copyPage,href:"/page/"+s.slug+"?copy="+t.ID},b.createElement(S,{icon:"clipboard",size:18}),this.translate("Copy")):null},getRestoreItem:function(){return"trash"===this.props.page.status&&M.userCan("delete_post",this.props.page)?b.createElement(N,{onClick:this.updateStatusRestore},b.createElement(S,{icon:"undo",size:18}),this.translate("Restore")):null},editPage:function(){this.analyticsEvents.editPage(),C(D.editLinkForPage(this.props.page,this.props.site))},getPageStatusInfo:function(){return"publish"===this.props.page.status?null:b.createElement("div",{className:"page__popover-more-info"},o(this.props.page.status))},popoverMoreInfo:function(){var e=this.getPageStatusInfo(),t=this.childPageInfo(),s=this.frontPageInfo();return e||t||s?b.createElement("div",null,b.createElement(p.default,null),e,t,s):null},render:function(){var e,t=this.props.page,s=t.title||this.translate("(no title)"),n=this.props.site||{},a=M.userCan("edit_post",this.props.page);t.parent&&(e="— ");var o=this.getSetAsHomepageItem(),r=this.getViewItem(),i=this.getPublishItem(),l=this.getEditItem(),c=this.getRestoreItem(),u=this.getSendToTrashItem(),d=this.getCopyItem(),f=this.popoverMoreInfo(),h=r||i||l||c||u||f,m=o||h,g=o&&h?b.createElement(p.default,null):null,v=m?b.createElement(k,{isVisible:this.state.showPageActions,onClose:this.togglePageActions,position:"bottom left",context:this.refs&&this.refs.popoverMenuButton},o,g,r,i,l,d,c,u,f):null,_=m?b.createElement(S,{icon:"ellipsis",className:O({"page__actions-toggle":!0,
"is-active":this.state.showPageActions}),onClick:this.togglePageActions,ref:"popoverMenuButton"}):null;return b.createElement(x,{className:"page"},this.props.multisite?b.createElement(w,{site:n,size:34}):null,b.createElement("a",{className:"page__title",href:a?D.editLinkForPage(t,n):t.URL,title:a?this.translate("Edit %(title)s",{textOnly:!0,args:{title:t.title}}):this.translate("View %(title)s",{textOnly:!0,args:{title:t.title}}),onClick:this.analyticsEvents.pageTitle},e,this.props.isFrontPage?b.createElement(S,{icon:"house",size:18}):null,s),this.props.isPostsPage?b.createElement("div",{className:"page__posts-page"},this.translate("Your latest posts")):null,this.props.multisite?b.createElement("span",{className:"page__site-url"},this.getSiteDomain()):null,_,v,b.createElement(E,{transitionName:"updated-trans",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.buildUpdateTemplate()))},updateStatusPublish:function(){this.setState({showPageActions:!1}),this.updatePostStatus("publish"),a("Clicked Publish Page")},updateStatusTrash:function(){this.setState({showPageActions:!1}),this.updatePostStatus("trash"),a("Clicked Move to Trash")},updateStatusRestore:function(){this.setState({showPageActions:!1}),this.updatePostStatus("restore"),a("Clicked Restore")},updateStatusDelete:function(){this.setState({showPageActions:!1}),this.updatePostStatus("delete"),a("Clicked Delete Page")},copyPage:function(){a("Clicked Copy Page")}});t.default=(0,l.connect)(function(e,t){return{selectedSiteId:(0,d.getSelectedSiteId)(e),hasStaticFrontPage:(0,f.hasStaticFrontPage)(e,t.page.site_ID),isFrontPage:(0,h.isFrontPage)(e,t.page.site_ID,t.page.ID),isPostsPage:(0,h.isPostsPage)(e,t.page.site_ID,t.page.ID),isPreviewable:!1!==(0,f.isSitePreviewable)(e,t.site.ID),previewURL:(0,P.getPreviewURL)(t.page)}},function(e){return(0,c.bindActionCreators)({setFrontPage:m.setFrontPage,setPreviewUrl:_.setPreviewUrl,setLayoutFocus:y.setLayoutFocus},e)})(A),e.exports=t.default},8316702086273959:function(e,t,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=s(0x93b960444343),i=s(6285320399463177),l=(s(0x4ae8f92ba411c),s(5759452038127757)),c=s(0x5720577baf909),u=function(e){function t(){var s,o,i;n(this,t);for(var c=arguments.length,u=Array(c),p=0;p<c;p++)u[p]=arguments[p];return s=o=a(this,e.call.apply(e,[this].concat(u))),o.state={children:l.getChildMapping(o.props.children)},o.performAppear=function(e){o.currentlyTransitioningKeys[e]=!0;var t=o.refs[e];t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e)):o._handleDoneAppearing(e)},o._handleDoneAppearing=function(e){var t=o.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var s;s=l.getChildMapping(o.props.children),s&&s.hasOwnProperty(e)||o.performLeave(e)},o.performEnter=function(e){o.currentlyTransitioningKeys[e]=!0;var t=o.refs[e];t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e)):o._handleDoneEntering(e)},o._handleDoneEntering=function(e){var t=o.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var s;s=l.getChildMapping(o.props.children),s&&s.hasOwnProperty(e)||o.performLeave(e)},o.performLeave=function(e){o.currentlyTransitioningKeys[e]=!0;var t=o.refs[e];t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e)):o._handleDoneLeaving(e)},o._handleDoneLeaving=function(e){var t=o.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var s;s=l.getChildMapping(o.props.children),s&&s.hasOwnProperty(e)?o.performEnter(e):o.setState(function(t){var s=r({},t.children);return delete s[e],{children:s}})},i=s,a(o,i)}return o(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},t.prototype.componentWillReceiveProps=function(e){var t;t=l.getChildMapping(e.children);var s=this.state.children;this.setState({children:l.mergeChildMappings(s,t)});var n;for(n in t){var a=s&&s.hasOwnProperty(n);!t[n]||a||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(n in s){var o=t&&t.hasOwnProperty(n);!s[n]||o||this.currentlyTransitioningKeys[n]||this.keysToLeave.push(n)}},t.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},t.prototype.render=function(){var e=[];for(var t in this.state.children){var s=this.state.children[t];s&&e.push(i.cloneElement(this.props.childFactory(s),{ref:t,key:t}))}var n=r({},this.props);return delete n.transitionLeave,delete n.transitionName,delete n.transitionAppear,delete n.transitionEnter,delete n.childFactory,delete n.transitionLeaveTimeout,delete n.transitionEnterTimeout,delete n.transitionAppearTimeout,delete n.component,i.createElement(this.props.component,n,e)},t}(i.Component);u.displayName="ReactTransitionGroup",u.propTypes={component:i.PropTypes.any,childFactory:i.PropTypes.func},u.defaultProps={component:"span",childFactory:c.thatReturnsArgument},e.exports=u},8349493595644649:function(e,t,s){"use strict";function n(e,t){for(var s=e;s.parentNode;)s=s.parentNode;var n=s.querySelectorAll(t);return Array.prototype.indexOf.call(n,e)!==-1}var a=s(6088762386890041),o={addClass:function(e,t){return/\s/.test(t)?a(!1):void 0,t&&(e.classList?e.classList.add(t):o.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return/\s/.test(t)?a(!1):void 0,t&&(e.classList?e.classList.remove(t):o.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,s){return(s?o.addClass:o.removeClass)(e,t)},hasClass:function(e,t){return/\s/.test(t)?a(!1):void 0,e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1},matchesSelector:function(e,t){var s=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(t){return n(e,t)};return s.call(e,t)}};e.exports=o},8465445476206728:function(e,t,s){"use strict";function n(e,t){var s=c(e);d.queryPosts(t,e),0===s.getPage()&&d.fetchNextPage(e)}function a(e){var t={type:e.type||"post",siteID:e.siteID,status:e.status,author:e.author,search:e.search,exclude_tree:e.excludeTree,orderBy:e.orderBy,order:e.order,number:e.number,before:e.before,after:e.after};e.withCounts&&(t.meta="counts"),p.isDispatching()?setTimeout(function(){n(e.postListStoreId,t)},0):n(e.postListStoreId,t)}function o(e){var t=c(e);return{listId:t.getID(),posts:t.getAll(),postImages:u.getAll(),page:t.getPage(),lastPage:t.isLastPage(),loading:t.isFetchingNextPage(),hasRecentError:t.hasRecentError()}}function r(e,t){return e.type!==t.type||e.status!==t.status||e.author!==t.author||e.search!==t.search||e.excludeTree!==t.excludeTree||e.withCounts!==t.withCounts||e.orderBy!==t.orderBy||e.order!==t.order||e.number!==t.number||e.before!==t.before||e.after!==t.after||e.siteID!==t.siteID||e.postListStoreId!==t.postListStoreId}var i,l=s(5896763357248615),c=s(0x69c14441898c8),u=s(6874930428474342),p=s(8769427305820155),d=s(6104353596224629),f=s(0x46afa8498d5a8);i=l.createClass({displayName:"PostListFetcher",propTypes:{children:l.PropTypes.element.isRequired,type:l.PropTypes.string,status:l.PropTypes.string,author:l.PropTypes.number,search:l.PropTypes.string,siteID:l.PropTypes.any,withImages:l.PropTypes.bool,withCounts:l.PropTypes.bool,excludeTree:l.PropTypes.number,orderBy:l.PropTypes.oneOf(["title","date","modified","comment_count","ID"]),order:l.PropTypes.oneOf(["ASC","DESC"]),number:l.PropTypes.number,before:l.PropTypes.string,after:l.PropTypes.string,postListStoreId:l.PropTypes.string},getDefaultProps:function(){return{orderBy:"date",order:"DESC",postListStoreId:"default"}},componentWillMount:function(){var e=c(this.props.postListStoreId);e.on("change",this.onPostsChange),this.props.withImages&&u.on("change",this.onPostsChange),a(this.props)},componentDidMount:function(){var e=c(this.props.postListStoreId);this._poller=f.add(e,d.fetchUpdated,{interval:6e4})},componentWillUnmount:function(){var e=c(this.props.postListStoreId);f.remove(this._poller),e.off("change",this.onPostsChange),this.props.withImages&&u.off("change",this.onPostsChange)},componentWillReceiveProps:function(e){var t;r(this.props,e)&&a(e),e.withImages!==this.props.withImages&&(t=e.withImages?"on":"off",u[t]("change",this.onPostsChange))},onPostsChange:function(){this.setState(o(this.props.postListStoreId))},render:function(){return l.cloneElement(this.props.children,this.state)}}),e.exports=i},8619793617189177:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xccd53b671ebb6),o=n(a),r=s(5143893728007863),i=n(r),l=s(5880884711457125),c=n(l),u=s(8173823076638946),p=n(u),d=s(5369032381290393),f=n(d),h=s(5921998412115101),m=n(h),g=s(5896763357248615),v=n(g),_=s(5020179656051692),y=n(_),P=s(0xa8ea23472235c),b=n(P),E=s(619801137403500),T=n(E),C=s(0x3f19c8db6e3b5),I=n(C),x=s(0x7806e19fe6b42),S=n(x),k=s(0x8ae3881d6e8c2),N=n(k),w=s(7904991244547051),D=n(w),R=s(0x4a68bd81dba8a),M=n(R),O=s(0x9b11f56529aa0),L=n(O),A=s(0x4c328c9015af2),U=n(A),H=function(e){function t(e){(0,i.default)(this,t);var s=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));s.navigateItem=s.navigateItem.bind(s),s.toggleDropdown=s.toggleDropdown.bind(s),s.handleOutsideClick=s.handleOutsideClick.bind(s);var n={isOpen:!1};return e.options.length&&(n.selected=s.getInitialSelectedItem(e)),s.state=n,s}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.setState({instanceId:++t.instances})}},{key:"componentWillReceiveProps",value:function(e){this.state.isOpen&&this.closeDropdown(),"undefined"!=typeof this.state.selected&&this.props.initialSelected!==e.initialSelected&&this.setState({selected:e.initialSelected})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"componentDidUpdate",value:function(e,t){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick),this.state.isOpen!==t.isOpen&&this.props.onToggle({target:this,open:this.state.isOpen})}},{key:"getInitialSelectedItem",value:function(e){if(e=e||this.props,e.initialSelected)return e.initialSelected;if(e.options.length){var t=(0,y.default)(e.options,function(e){return!e.isLabel});return t&&t.value}}},{key:"getSelectedText",value:function(){var e=this.props,t=e.options,s=e.selectedText,n=this.state.selected;if(s)return s;var a=n?n:this.getInitialSelectedItem(this.props);return(0,S.default)((0,y.default)(t,{value:a}),"label")}},{key:"dropdownOptions",value:function(){var e=0,t=this;return this.props.children?v.default.Children.map(this.props.children,function(s,n){if(!s)return null;var a=v.default.cloneElement(s,{ref:s.type===D.default?"item-"+e:null,key:"item-"+n,isDropdownOpen:this.state.isOpen,onClick:function(e){t.refs.dropdownContainer.focus(),"function"==typeof s.props.onClick&&s.props.onClick(e)}});return s.type===D.default&&e++,a},this):this.props.options.map(function(t,s){if(!t)return v.default.createElement(M.default,{key:"dropdown-separator-"+this.state.instanceId+"-"+s});if(t.isLabel)return v.default.createElement(L.default,{key:"dropdown-label-"+this.state.instanceId+"-"+s},t.label);var n=v.default.createElement(D.default,{key:"dropdown-item-"+this.state.instanceId+"-"+t.value,ref:"item-"+e,isDropdownOpen:this.state.isOpen,selected:this.state.selected===t.value,onClick:this.onSelectItem(t),path:t.path},t.label);return e++,n},this)}},{key:"render",value:function(){var e={"select-dropdown":!0,"is-compact":this.props.compact,"is-open":this.state.isOpen};this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0});var t=(0,N.default)(e),s=this.getSelectedText();return v.default.createElement("div",{style:this.props.style,className:t},v.default.createElement("div",{ref:"dropdownContainer",className:"select-dropdown__container",valueLink:this.props.valueLink,onKeyDown:this.navigateItem,tabIndex:this.props.tabIndex||0,"aria-haspopup":"true","aria-owns":"select-submenu-"+this.state.instanceId,"aria-controls":"select-submenu-"+this.state.instanceId,"aria-expanded":this.state.isOpen,"data-tip-target":this.props.tipTarget,onClick:this.toggleDropdown},v.default.createElement("div",{id:"select-dropdown-"+this.state.instanceId,className:"select-dropdown__header"},v.default.createElement("span",{className:"select-dropdown__header-text"},s),"number"==typeof this.props.selectedCount&&v.default.createElement(U.default,{count:this.props.selectedCount})),v.default.createElement("ul",{id:"select-submenu-"+this.state.instanceId,className:"select-dropdown__options",role:"menu","aria-labelledby":"select-dropdown-"+this.state.instanceId,"aria-expanded":this.state.isOpen},this.dropdownOptions())))}},{key:"toggleDropdown",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"openDropdown",value:function(){this.setState({isOpen:!0})}},{key:"closeDropdown",value:function(){this.state.isOpen&&(delete this.focused,this.setState({isOpen:!1}))}},{key:"onSelectItem",value:function(e){return this.selectItem.bind(this,e)}},{key:"selectItem",value:function(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value}),this.refs.dropdownContainer.focus())}},{key:"navigateItem",value:function(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),this.activateItem();break;case 38:e.preventDefault(),this.focusSibling("previous"),this.openDropdown();break;case 40:e.preventDefault(),this.focusSibling("next"),this.openDropdown();break;case 27:e.preventDefault(),this.closeDropdown(),this.refs.dropdownContainer.focus()}}},{key:"navigateItemByTabKey",value:function(e){if(this.state.isOpen){e.preventDefault();var t=e.shiftKey?"previous":"next";this.focusSibling(t)}}},{key:"activateItem",value:function(){return this.state.isOpen?void document.activeElement.click():this.openDropdown()}},{key:"focusSibling",value:function(e){if(this.state.isOpen){var t=void 0,s=void 0;this.props.options.length?(t=(0,I.default)((0,b.default)(this.props.options,function(e){return e&&!e.isLabel}),"value"),s="number"==typeof this.focused?this.focused:t.indexOf(this.state.selected)):(t=(0,b.default)(this.props.children,function(e){return e.type===D.default}),s="number"==typeof this.focused?this.focused:(0,T.default)(t,function(e){return e.props.selected}));var n="previous"===e?-1:1,a=s+n;a>=t.length||a<0||(m.default.findDOMNode(this.refs["item-"+a].refs.itemLink).focus(),this.focused=a)}}},{key:"handleOutsideClick",value:function(e){m.default.findDOMNode(this.refs.dropdownContainer).contains(e.target)||this.closeDropdown()}}]),t}(g.Component);H.propTypes={selectedText:g.PropTypes.string,selectedCount:g.PropTypes.number,initialSelected:g.PropTypes.string,className:g.PropTypes.string,style:g.PropTypes.object,onSelect:g.PropTypes.func,onToggle:g.PropTypes.func,focusSibling:g.PropTypes.func,tabIndex:g.PropTypes.number,options:g.PropTypes.arrayOf(g.PropTypes.shape({value:g.PropTypes.string.isRequired,label:g.PropTypes.string.isRequired,path:g.PropTypes.string}))},H.defaultProps={options:[],onSelect:function(){},onToggle:function(){},style:{}},H.instances=0,t.default=H,e.exports=t.default},8623119050819633:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=s(6736781861837147),o=n(a),r=s(0xd1ca77937cbcf),i=n(r),l=s(7418474439241154),c=n(l);e.exports={editLinkForPage:function(e,t){return e&&e.ID&&t&&t.ID?"/page/"+t.slug+"/"+e.ID:null},isFrontPage:function(e,t){return!!(e&&e.ID&&t&&t.options)&&t.options.page_on_front===e.ID},updateSitesList:function(e){var t=e.siteId,s=e.updatedOptions,n=(0,c.default)(),a=n.getSite(t);i.default.remove("SitesList"),a&&(a.options=(0,o.default)(a.options,s),n.updateSite(a)),n.fetch()}}},8663546351946179:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(95905449861643),o=n(a),r=s(6465156853722425),i=n(r),l=s(0x45d24eaab7654),c=n(l),u=s(0xeb8f73c122973),p=n(u),d=s(5896763357248615),f=n(d),h=s(6280957995252369),m=s(0x8ae3881d6e8c2),g=n(m),v=s(7572476330282672),_=s(0xa505046780b0c),y=n(_),P=s(7186610166862683),b=n(P),E=s(6881822108913591),T=n(E),C=s(0x65fcc7381e096),I=s(0xc69f362ed57b8),x=s(0xc0a5f55c718bb),S=n(x),k=s(4725747483787960),N=s(0xe6bd8709d6a3c),w=f.default.createClass({displayName:"UpgradeNudge",propTypes:{onClick:f.default.PropTypes.func,className:f.default.PropTypes.string,message:f.default.PropTypes.string,icon:f.default.PropTypes.string,event:f.default.PropTypes.string,href:f.default.PropTypes.string,jetpack:f.default.PropTypes.bool,compact:f.default.PropTypes.bool,feature:f.default.PropTypes.oneOf([!1].concat((0,i.default)((0,C.getValidFeatureKeys)()))),shouldDisplay:f.default.PropTypes.func,site:f.default.PropTypes.object},getDefaultProps:function(){return{onClick:c.default,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,feature:!1,compact:!1,shouldDisplay:null,site:null,translate:p.default}},handleClick:function(){var e=this.props,t=e.event,s=e.feature,n=e.onClick,a=e.recordTracksEvent;(t||s)&&a("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:s,cta_size:"regular"}),n()},shouldDisplay:function e(){var t=this.props,s=t.feature,n=t.jetpack,e=t.shouldDisplay,a=t.site;return e?e():!(!a||"object"!==("undefined"==typeof a?"undefined":(0,o.default)(a))||"boolean"!=typeof a.jetpack)&&((!s||!(0,C.hasFeature)(s,a.ID))&&(!(!s&&!(0,I.isFreePlan)(a.plan))&&(("no-adverts"!==s||!a.options.wordads)&&!(!n&&a.jetpack||n&&!a.jetpack))))},render:function(){var e=this.props,t=e.site,s=e.translate,n=(0,g.default)(this.props.className,"upgrade-nudge"),a=this.props.href;return this.shouldDisplay()?(!this.props.href&&t&&(a=this.props.feature?"/plans/"+t.slug+"?feature="+this.props.feature:"/plans/"+t.slug),this.props.compact?f.default.createElement(b.default,{className:n,onClick:this.handleClick,href:a},f.default.createElement(y.default,{className:"upgrade-nudge__icon",icon:this.props.icon}),f.default.createElement("div",{className:"upgrade-nudge__info"},f.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||s("Upgrade to Premium")),f.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message))):f.default.createElement(T.default,{compact:!0,className:n,onClick:this.handleClick,href:a},f.default.createElement(y.default,{className:"upgrade-nudge__icon",icon:this.props.icon,size:18}),f.default.createElement("div",{className:"upgrade-nudge__info"},f.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||s("Upgrade to Premium")),f.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)),(this.props.event||this.props.feature)&&f.default.createElement(S.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:this.props.event,cta_feature:this.props.feature,cta_size:"regular"}}))):null}});t.default=(0,h.connect)(function(e){return{site:(0,N.getSelectedSite)(e)}},{recordTracksEvent:k.recordTracksEvent})((0,v.localize)(w)),e.exports=t.default},8687486026970802:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0x3f19c8db6e3b5),o=n(a),r=s(5896763357248615),i=n(r),l=s(6280957995252369),c=s(0x8ae3881d6e8c2),u=n(c),p=s(7572476330282672),d=s(0x62abb5c79c03a),f=n(d),h=s(70219791644428),m=n(h),g=s(6200315943787393),v=n(g),_=s(0xb4de1ee4522d8),y=n(_),P=s(4883949902648912),b=n(P),E=s(0x6ee56fc1c50a2),T=n(E),C=s(0xb0498bd0dc158),I=n(C),x=s(0x4e09390d58627),S=n(x),k=s(6490169626294051),N=n(k),w=s(0xe6bd8709d6a3c),D=s(6007716273106560),R=s(7186610166862683),M=n(R),O=s(0x4c328c9015af2),L=n(O),A=s(0x9244927499a4b),U=n(A),H=s(0x5f3ca1371830b),F=s(0xb952c2ac6b114),q=s(5523398591803755),j=s(5993994797496345),z=i.default.createClass({displayName:"PostsMain",mixins:[(0,m.default)("sites")],componentWillMount:function(){var e=this.props.sites.getSelectedSite();this.setWarning(e)},componentWillReceiveProps:function(e){var t=e.sites.getSelectedSite();this.setWarning(t)},showDrafts:function(){var e=this.props.sites.getSelectedSite();return!(e.jetpack&&!this.props.loadingDrafts&&this.props.drafts&&0===this.props.drafts.length)&&(!(!e.jetpack&&0===this.props.draftCount)&&!(!e.jetpack&&this.props.author&&0===this.props.myDraftCount))},mostRecentDrafts:function(){var e=this.props.sites.getSelectedSite();if(!e||!this.showDrafts())return null;var t=this.props,s=t.draftCount,n=t.translate,a=0!==s&&this.props.loadingDrafts;return i.default.createElement("div",{className:"posts__recent-drafts"},i.default.createElement(I.default,{siteId:e.ID,query:this.props.draftsQuery}),i.default.createElement(S.default,{siteId:e.ID,type:"post"}),i.default.createElement(U.default,{className:"posts__drafts-header",label:n("Latest Drafts")},i.default.createElement(M.default,{compact:!0,href:this.props.newPostPath},n("New Post"))),(0,o.default)(this.props.drafts,function(e){var t=e.global_ID;return i.default.createElement(N.default,{compact:!0,key:t,globalId:t})}),a&&i.default.createElement(N.default,{compact:!0}),s>6&&i.default.createElement(M.default,{compact:!0,borderless:!0,className:"posts__see-all-drafts",href:"/posts/drafts/"+e.slug},n("See all drafts"),s?i.default.createElement(L.default,{count:s}):null))},render:function(){var e=(0,H.sectionify)(this.props.context.path),t=(0,u.default)("posts",{"is-multisite":!this.props.sites.selected,"is-single-site":this.props.sites.selected});return i.default.createElement(T.default,{className:t},i.default.createElement(v.default,null),i.default.createElement("div",{className:"posts__primary"},i.default.createElement(f.default,this.props),i.default.createElement(y.default,this.props)),"/posts/drafts"!==e&&this.mostRecentDrafts())},setWarning:function(e){e&&e.jetpack&&!e.hasMinimumJetpackVersion&&this.props.warningNotice(this.props.translate("Jetpack %(version)s is required to take full advantage of all post editing features.",{args:{version:(0,b.default)("jetpack_min_version")}}),{button:this.props.translate("Update now"),href:e.options.admin_url+"plugins.php?plugin_status=upgrade"})}});t.default=(0,l.connect)(function(e,t){var s=t.author,n=(0,w.getSelectedSiteId)(e),a={author:s,number:6,order_by:"modified",status:"draft",type:"post"};return{drafts:(0,D.getSitePostsForQueryIgnoringPage)(e,n,a),draftCount:(0,F.getAllPostCount)(e,n,"post","draft"),draftsQuery:a,loadingDrafts:(0,D.isRequestingSitePostsForQuery)(e,n,a),myDraftCount:(0,F.getMyPostCount)(e,n,"post","draft"),newPostPath:(0,q.getEditorNewPostPath)(e,n)}},{warningNotice:j.warningNotice})((0,p.localize)(z)),e.exports=t.default},8704774118037149:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(0x8ae3881d6e8c2),i=n(r),l=s(7064831842895117),c=n(l),u=o.default.createClass({displayName:"PostExcerpt",propTypes:{content:o.default.PropTypes.string.isRequired,maxLength:o.default.PropTypes.number},defaultProps:{maxLength:80},render:function(){if(!this.props.content)return null;var e=(0,i.default)({"post-excerpt":!0,"is-long":this.props.content.length>this.props.maxLength});return o.default.createElement(c.default,null,o.default.createElement("div",{className:e,dangerouslySetInnerHTML:{__html:this.props.content}}))}});t.default=u,e.exports=t.default},8959178503420160:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(5896763357248615),o=n(a),r=s(8907951692841672),i=n(r),l=s(0x45d24eaab7654),c=n(l);t.default=o.default.createClass({displayName:"TrackInputChanges",propTypes:{onNewValue:o.default.PropTypes.func},getDefaultProps:function(){return{onNewValue:c.default}},componentWillMount:function(){this.inputEdited=!1},onInputChange:function(){this.inputEdited=!0},onInputBlur:function(e){this.inputEdited&&(this.props.onNewValue(e),this.inputEdited=!1)},render:function(){var e=this,t=o.default.Children.only(this.props.children),s=(0,i.default)({},t.props,{onChange:function(s){"function"==typeof t.props.onChange&&t.props.onChange.call(t,s),e.onInputChange(s)},onBlur:function(s){"function"==typeof t.props.onBlur&&t.props.onBlur.call(t,s),e.onInputBlur(s)}});return o.default.cloneElement(t,s)}}),e.exports=t.default},8984451519475015:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(0xf0fef66852b91),o=n(a),r=s(0xccd53b671ebb6),i=n(r),l=s(5143893728007863),c=n(l),u=s(5880884711457125),p=n(u),d=s(8173823076638946),f=n(d),h=s(5369032381290393),m=n(h),g=s(0x45d24eaab7654),v=n(g),_=s(5896763357248615),y=n(_),P=s(0x8ae3881d6e8c2),b=n(P),E=s(6280957995252369),T=s(78648220391165),C=s(7572476330282672),I=s(7064831842895117),x=n(I),S=s(0x68ccbe1ec01b),k=n(S),N=s(5708247199348607),w=n(N),D=s(0x956a8e02ae2a5),R=s(4872454564014129),M=s(5055977180578371),O=s(8547068575764026),L=function(e){function t(e){(0,c.default)(this,t);var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return s.state={commentText:e.commentText||"",haveFocus:!1},(0,o.default)(t.prototype).filter(function(e){return 0===e.indexOf("handle")}).filter(function(e){return"function"==typeof s[e]}).forEach(function(e){return s[e]=s[e].bind(s)}),s}return(0,m.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({commentText:e.commentText||""})}},{key:"componentDidMount",value:function(){this.props.parentCommentID&&this._textareaNode&&this._textareaNode.focus()}},{key:"componentDidUpdate",value:function(){var e=this.refs.commentText;if(e){var t=this.getCommentText(),s=parseInt(e.style.height,10)||0;e.style.height=t.length?Math.max(e.scrollHeight,s)+"px":null}}},{key:"handleTextAreaNode",value:function(e){this._textareaNode=e}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submit()}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.submit()),27===e.keyCode&&this.props.placeholderId&&(this.props.onUpdateCommentText(this.props.commentText),this.props.removeComment(this.props.post.site_ID,this.props.post.ID,this.props.placeholderId))}},{key:"handleFocus",value:function(){this.setState({haveFocus:!0})}},{key:"handleTextChange",value:function(e){var t=e.target.value;this.setState({commentText:t}),this.props.onUpdateCommentText(t)}},{key:"resetCommentText",value:function(){this.setState({commentText:""}),this.props.onUpdateCommentText("")}},{key:"hasCommentText",value:function(){return this.state.commentText.trim().length>0}},{key:"submit",value:function(){var e=this.props.post,t=this.state.commentText.trim();return t?(this.props.placeholderId&&this.props.removeComment(e.site_ID,e.ID,this.props.placeholderId),this.props.writeComment(t,e.site_ID,e.ID,this.props.parentCommentID),(0,M.recordAction)("posted_comment"),(0,M.recordGaEvent)("Clicked Post Comment Button"),(0,M.recordTrackForPost)("calypso_reader_article_commented_on",e,{parent_post_id:this.props.parentCommentID?this.props.parentCommentID:void 0}),this.resetCommentText(),this.props.onCommentSubmit(),!0):(this.resetCommentText(),!1)}},{key:"renderError",value:function(){var e=this.props.error,t=void 0;if(!e)return null;switch(e.error){case"comment_duplicate":t=(0,C.translate)("Duplicate comment detected. It looks like you've already said that!");break;default:t=(0,C.translate)("Sorry - there was a problem posting your comment.")}return y.default.createElement(w.default,{text:t,className:"comments__notice",showDismiss:!1,status:"is-error"})}},{key:"render",value:function(){var e=this.props.post;if(e&&e.discussion&&e.discussion.comments_open===!1&&!(0,O.isCommentableDiscoverPost)(e))return e.discussion.comment_count&&e.discussion.comment_count>0?y.default.createElement("p",{className:"comments__form-closed"},(0,C.translate)("Comments are closed.")):null;var t=(0,b.default)({"is-active":this.hasCommentText(),"is-visible":this.state.haveFocus||this.hasCommentText()}),s=(0,b.default)({focused:this.state.haveFocus,"expanding-area":!0});return y.default.createElement("form",{className:"comments__form",ref:"commentForm"},y.default.createElement("fieldset",null,y.default.createElement(k.default,{user:this.props.currentUser}),y.default.createElement("label",null,y.default.createElement("div",{className:s},y.default.createElement("pre",null,y.default.createElement("span",null,this.state.commentText),y.default.createElement("br",null)),y.default.createElement(x.default,null,y.default.createElement("textarea",{value:this.state.commentText,placeholder:(0,C.translate)("Enter your comment here…"),ref:this.handleTextAreaNode,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleTextChange}))),y.default.createElement("button",{ref:"commentButton",className:t,disabled:0===this.state.commentText.length,onClick:this.handleSubmit},(0,C.translate)("Send")),this.renderError())))}}]),t}(y.default.Component);L.propTypes={post:y.default.PropTypes.object.isRequired,parentCommentID:y.default.PropTypes.number,placeholderId:y.default.PropTypes.string,commentText:y.default.PropTypes.string,onUpdateCommentText:y.default.PropTypes.func.isRequired,onCommentSubmit:y.default.PropTypes.func,currentUser:y.default.PropTypes.object.isRequired,writeComment:y.default.PropTypes.func.isRequired,removeComment:y.default.PropTypes.func.isRequired},L.defaultProps={onCommentSubmit:v.default},t.default=(0,E.connect)(function(e){return{currentUser:(0,D.getCurrentUser)(e)}},function(e){return(0,T.bindActionCreators)({writeComment:R.writeComment,removeComment:R.removeComment},e)})(L),e.exports=t.default},9002016994434229:function(e,t,s){function n(e,t,s){var n=c(e)||d(e);if(t=i(t,4),null==s)if(n||p(e)){var f=e.constructor;s=n?c(e)?new f:[]:u(f)?o(l(e)):{}}else s={};return(n?a:r)(e,function(e,n,a){return t(s,e,n,a)}),s}var a=s(6653100901949564),o=s(0xdb012454e44dc),r=s(8070933214026328),i=s(953537273159943),l=s(8588778371469377),c=s(6994352954282616),u=s(0x729562806a912),p=s(6817336032113752),d=s(4692643253343335);e.exports=n}});