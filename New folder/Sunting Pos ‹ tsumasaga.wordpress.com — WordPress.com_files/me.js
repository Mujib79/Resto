webpackJsonp([8715888714344990,0xf5d7f47f5cb74],{0x99d130e2d4f2:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0xcb6d8694ee386),s=i(n),l=a(0x4505d8ebb162c),d=i(l),u=a(5862851293117563),c=i(u),p=a(0x7470881db6733),f=i(p),h=a(8509533185673831),m=i(h),g=a(5708247199348607),v=i(g);t.default=r.default.createClass({displayName:"ProfileLinksAddOther",mixins:[s.default,m.default],getInitialState:function(){return{title:"",value:"",lastError:!1}},getFormDisabled:function(){var e=this.state.value.trim();return!this.state.title.trim()||!e||(-1!==e.indexOf(" ")||(!e.match(/[a-zA-z0-9]+\.[a-zA-z]{2,}/)||!(!e.match(/^.*:\/\//)||e.match(/^https?:\/\//))))},onSubmit:function(e){e.preventDefault(),this.getFormDisabled()||this.props.userProfileLinks.addProfileLinks([{title:this.state.title.trim(),value:this.state.value.trim()}],this.onSubmitResponse)},onCancel:function(e){e.preventDefault(),this.props.onCancel()},onSubmitResponse:function(e,t){e?this.setState({lastError:this.translate("Unable to add link right now. Please try again later.")}):t.duplicate?this.setState({lastError:this.translate("That link is already in your profile links. No changes were made.")}):t.malformed?this.setState({lastError:this.translate("An unexpected error occurred. Please try again later.")}):this.props.onSuccess()},clearLastError:function(){this.setState({lastError:!1})},possiblyRenderError:function(){return this.state.lastError?r.default.createElement(v.default,{className:"profile-links-add-other__error",status:"is-error",onDismissClick:this.clearLastError,text:this.state.lastError}):null},render:function(){return r.default.createElement("form",{className:"profile-links-add-other",onSubmit:this.onSubmit},r.default.createElement("p",null,this.translate("Please enter the URL and description of the site you want to add to your profile.")),this.possiblyRenderError(),r.default.createElement(d.default,null,r.default.createElement(c.default,{className:"profile-links-add-other__value",valueLink:this.linkState("value"),placeholder:this.translate("Enter a URL"),onFocus:this.recordFocusEvent("Add Other Site URL Field")}),r.default.createElement(c.default,{className:"profile-links-add-other__title",valueLink:this.linkState("title"),placeholder:this.translate("Enter a description"),onFocus:this.recordFocusEvent("Add Other Site Description Field")}),r.default.createElement(f.default,{className:"profile-links-add-other__add",disabled:this.getFormDisabled(),onClick:this.recordClickEvent("Save Other Site Button")},this.translate("Add Site")),r.default.createElement(f.default,{className:"profile-links-add-other__cancel",isPrimary:!1,onClick:this.recordClickEvent("Cancel Other Site Button",this.onCancel)},this.translate("Cancel"))))}}),e.exports=t.default},305418035133268:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(7572476330282672),r=i(o);t.default={sixDigit2faPlaceholder:r.default.translate("e.g. %(example)s",{args:{example:"123456"}}),sevenDigit2faPlaceholder:r.default.translate("e.g. %(example)s",{args:{example:"1234567"}}),eightDigitBackupCodePlaceholder:r.default.translate("e.g. %(example)s",{args:{example:"12345678"}})},e.exports=t.default},347097780136713:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.AspectRatiosValues;return(0,l.default)(t,e)===-1&&(e=(0,n.default)(t,"0",d.AspectRatiosValues.FREE)),(0,l.default)(d.AspectRatiosValues,e)===-1?o(e):e}Object.defineProperty(t,"__esModule",{value:!0});var r=a(8640881565075096),n=i(r),s=a(7935112474300560),l=i(s);t.getDefaultAspectRatio=o;var d=a(8277184115649475)},502028405524976:function(e,t,a){"use strict";function i(){return this instanceof i?(this.data=[],this.initialized=!1,void(this.fetching=!1)):new i}var o=a(4675954658966525)("calypso:connected-applications-data"),r=a(0xf2ce944f0fc89),n=a(0xa8ea23472235c),s=a(5020179656051692),l=a(8478035041892969).undocumented();r(i.prototype),i.prototype.get=function(){return this.initialized||this.fetch(),this.data},i.prototype.fetch=function(){this.fetching=!0,l.me().getConnectedApplications(function(e,t){return this.fetching=!1,e?void o("Something went wrong fetching connected applications."):(this.data=t.connected_applications,this.initialized=!0,o("Connected applications successfully retrieved"),void this.emit("change"))}.bind(this))},i.prototype.revoke=function(e,t){l.me().revokeApplicationConnection(e,function(a,i){return a?(o("Revoking application connection failed."),void t(a)):(this.data=n(this.data,function(t){return parseInt(t.ID,10)!==e}),t(null,i),void this.emit("change"))}.bind(this))},i.prototype.getApplication=function(e){var t;return this.initialized?(t=s(this.data,function(t){return parseInt(e,10)===parseInt(t.ID,10)}),"undefined"==typeof t&&this.fetch(),t):void this.fetch()},e.exports=new i},874649023483751:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5921998412115101),r=i(o),n=a(5896763357248615),s=i(n),l=a(6718701541658404),d=i(l),u=a(0x90ba166cd016c),c=i(u),p=a(7572476330282672),f=i(p),h=a(623310115397031),m=i(h),g=a(4808587282202068),v=i(g),E=a(6563835376427538),b=i(E),y=a(5577740099853543),_=a(8025093951496706),k="Me";t.default={sidebar:function(e,t){var i=a(6110216374850815);(0,_.renderWithReduxStore)(s.default.createElement(i,{context:e}),document.getElementById("secondary"),e.store),t()},profile:function(e){var t=a(7928232882093892),i=e.path;e.store.dispatch((0,y.setDocumentHeadTitle)(f.default.translate("My Profile",{textOnly:!0}))),m.default.pageView.record(i,k+" > My Profile"),(0,_.renderWithReduxStore)(s.default.createElement(t,{userSettings:b.default,path:e.path}),document.getElementById("primary"),e.store)},apps:function(e){var t=a(0xff0fa617ab869).default,i=e.path;e.store.dispatch((0,y.setDocumentHeadTitle)(f.default.translate("Get Apps",{textOnly:!0}))),m.default.pageView.record(i,k+" > Get Apps"),(0,_.renderWithReduxStore)(s.default.createElement(t,{userSettings:b.default,path:e.path}),document.getElementById("primary"),e.store)},nextSteps:function(e){var t=v.default.sectionify(e.path),i=a(0x79f9b53254690),o=a(0x75898c12cdbbc),n="welcome"===e.params.welcome;e.store.dispatch((0,y.setDocumentHeadTitle)(f.default.translate("Next Steps",{textOnly:!0}))),n&&r.default.unmountComponentAtNode(document.getElementById("secondary")),m.default.tracks.recordEvent("calypso_me_next_view",{is_welcome:n}),m.default.pageView.record(t,k+" > Next"),(0,_.renderWithReduxStore)(s.default.createElement(i,{path:e.path,isWelcome:n,trophiesData:o}),document.getElementById("primary"),e.store)},nextStepsWelcomeRedirect:function(e,t){return(0,d.default)(e.path,"?welcome")?c.default.redirect("/me/next/welcome"):void t()},profileRedirect:function(){c.default.redirect("/me")},trophiesRedirect:function(){c.default.redirect("/me")},findFriendsRedirect:function(){c.default.redirect("/me")}},e.exports=t.default},926478077821805:function(e,t,a){"use strict";var i=a(0x8f7d57519e61b),o=a(8907951692841672),r=a(83765757817552);e.exports=function(e){var t,a=["host","hash","search","path"];return null===e||""===e||"undefined"==typeof e?null:(t=i.parse(e),/^\/[^\/]/.test(e)?e:"http:"===t.protocol||"https:"===t.protocol?e:i.format(o(r(t,a),{protocol:"http"})))}},0x481aaf212f4ee:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5630966280090368),r=i(o),n=a(5896763357248615),s=i(n),l=a(0x8ae3881d6e8c2),d=i(l),u=a(5059747709250767),c=i(u),p=a(7572476330282672),f=function(e){return s.default.createElement("button",(0,r.default)({title:e.translate("Remove",{textOnly:!0})},(0,c.default)(e,"moment","numberFormat","translate"),{className:(0,d.default)("action-remove",e.className)}),e.children)};t.default=(0,p.localize)(f),e.exports=t.default},0x4f86db294ceb8:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=a(0x94d4b19af1d06),r=i(o),n=a(5708247199348607),s=i(n),l=a(5896763357248615),d=a(0xcb6d8694ee386),u=a(4675954658966525)("calypso:me:reauth-required"),c=a(7127988529575974),p=a(0x4505d8ebb162c),f=a(0x965a288d34003),h=a(0x904e9c839af89),m=a(0xbff38eca5e16d),g=a(0x7470881db6733),v=a(6085436710084730),E=a(6080475287248452),b=a(70219791644428),y=a(8509533185673831),_=a(6894246938792476),k=a(305418035133268);e.exports=l.createClass({displayName:"ReauthRequired",mixins:[d,b("twoStepAuthorization"),y],getInitialState:function(){return{remember2fa:!1,code:"",smsRequestsAllowed:!0}},getCodeMessage:function(){var e="";return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?this.translate("Please check your text messages at the phone number ending with {{strong}}%(smsLastFour)s{{/strong}} and enter the verification code below.",{args:{smsLastFour:this.props.twoStepAuthorization.getSMSLastFour()},components:{strong:l.createElement("strong",null)}}):this.translate("Please enter the verification code generated by your Authenticator mobile application.")},submitForm:function(e){e.preventDefault(),this.setState({validatingCode:!0}),this.props.twoStepAuthorization.validateCode({code:this.state.code,remember2fa:this.state.remember2fa},function(e,t){this.setState({validatingCode:!1}),u(e?"There was an error validating that code: "+(0,r.default)(e):"The code validated!"+(0,r.default)(t))}.bind(this))},codeRequestTimer:!1,allowSMSRequests:function(){this.setState({smsRequestsAllowed:!0})},sendSMSCode:function(){this.setState({smsRequestsAllowed:!1}),this.codeRequestTimer=setTimeout(this.allowSMSRequests,6e4),this.props.twoStepAuthorization.sendSMSCode(function(e,t){u(!e&&t.sent?"SMS code successfully sent":"There was a failure sending the SMS code.")})},preValidateAuthCode:function(){return this.state.code.length&&this.state.code.length>5},renderSendSMSButton:function(){var e;return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?l.createElement(g,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Resend SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.translate("Resend SMS Code")):l.createElement(g,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Send SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.translate("Send SMS Code"))},renderFailedValidationMsg:function(){return this.props.twoStepAuthorization.codeValidationFailed()?l.createElement(E,{isError:!0,text:this.translate("You entered an invalid code. Please try again.")}):null},renderSMSResendThrottled:function(){return this.props.twoStepAuthorization.isSMSResendThrottled()?l.createElement("div",{className:"reauth-required__send-sms-throttled"},l.createElement(s.default,{showDismiss:!1,text:this.translate("SMS codes are limited to once per minute. Please wait and try again.")})):null},render:function(){var e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?k.sevenDigit2faPlaceholder:k.sixDigit2faPlaceholder;return l.createElement(c,{autoFocus:!1,className:"reauth-required__dialog",isFullScreen:!1,isVisible:this.props.twoStepAuthorization.isReauthRequired(),buttons:null,onClose:null},l.createElement("p",null,this.getCodeMessage()),l.createElement("p",null,l.createElement("a",{className:"reauth-required__sign-out",onClick:this.recordClickEvent("Reauth Required Log Out Link",_.logout)},this.translate("Not you? Sign Out"))),l.createElement("form",{onSubmit:this.submitForm},l.createElement(p,null,l.createElement(f,{htmlFor:"code"},this.translate("Verification Code")),l.createElement(h,{autoFocus:!0,id:"code",isError:this.props.twoStepAuthorization.codeValidationFailed(),name:"code",placeholder:e,onFocus:this.recordFocusEvent("Reauth Required Verification Code Field"),valueLink:this.linkState("code")}),this.renderFailedValidationMsg()),l.createElement(p,null,l.createElement(f,null,l.createElement(m,{checkedLink:this.linkState("remember2fa"),id:"remember2fa",name:"remember2fa",onClick:this.recordCheckboxEvent("Remember 2fa")}),l.createElement("span",null,this.translate("Remember for 30 days.")))),this.renderSMSResendThrottled(),l.createElement(v,null,l.createElement(g,{disabled:this.state.validatingCode||!this.preValidateAuthCode(),onClick:this.recordClickEvent("Submit Validation Code on Reauth Required")},this.translate("Verify")),this.renderSendSMSButton())))}})},0x5326596c1965c:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(0x636974ee9c84e),m=i(h),g=a(0xd0219df97eb97),v=i(g),E=a(0x45d24eaab7654),b=i(E),y=a(5896763357248615),_=i(y),k=a(5921998412115101),S=i(k),P=a(6280957995252369),C=a(0x8ae3881d6e8c2),w=i(C),x=a(6051631321006113),R=i(x),A=a(7380496197234269),T=i(A),L=a(7629348406412959),I=a(8693344302354816),N=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onWindowResize=null,a.onLoadComplete=a.onLoadComplete.bind(a),a.updateCanvasPosition=a.updateCanvasPosition.bind(a),a.isVisible=!1,a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,m.default)(e,"blob")}},{key:"getImage",value:function(e){var t=this,a=this.props,i=a.onLoadError,o=a.mimeType,r=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([r.response],{type:o}));t.initImage(e)}},r.onerror=function(e){return i(e)},r.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),this.onWindowResize=(0,v.default)(this.updateCanvasPosition,200),"undefined"!=typeof window&&window.addEventListener("resize",this.onWindowResize),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),this.onWindowResize=null),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,a=t.leftRatio,i=t.topRatio,o=t.widthRatio,r=t.heightRatio,n=this.props,s=n.mimeType,l=n.transform,d=S.default.findDOMNode(this.refs.canvas),u=d.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,f=c?this.image.width:this.image.height,h=a*p,m=i*f,g=o*p,v=r*f,E=u.getImageData(h,m,g,v),b=document.createElement("canvas");b.width=g,b.height=v;var y=b.getContext("2d");y.putImageData(E,0,0),T.default.canvasToBlob(b,e,s,1)}},{key:"drawImage",value:function(){if(this.image){var e=S.default.findDOMNode(this.refs.canvas),t=this.image.width,a=this.image.height,i=this.props.transform,o=i.degrees%180!==0;e.width=o?a:t,e.height=o?t:a;var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),r.save(),r.setTransform(1,0,0,1,e.width/2,e.height/2),r.scale(i.scaleX,i.scaleY),r.rotate(i.degrees*Math.PI/180),r.drawImage(this.image,-t/2,-a/2),r.restore()}}},{key:"updateCanvasPosition",value:function(){var e=this.props.crop,t=e.leftRatio,a=e.topRatio,i=e.widthRatio,o=e.heightRatio,r=S.default.findDOMNode(this.refs.canvas),n=-50*i-100*t,s=-50*o-100*a;this.props.setImageEditorCropBounds(r.offsetTop-r.offsetHeight*-s/100,r.offsetLeft-r.offsetWidth*-n/100,r.offsetTop+r.offsetHeight*(1+s/100),r.offsetLeft+r.offsetWidth*(1+n/100))}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,a=e.topRatio,i=e.widthRatio,o=e.heightRatio,r=-50*i-100*t,n=-50*o-100*a,s={transform:"translate("+r+"%, "+n+"%)",maxWidth:85/i+"%",maxHeight:85/o+"%"},l=this.props.isImageLoaded,d=(0,w.default)("image-editor__canvas",{"is-placeholder":!l});return _.default.createElement("div",{className:"image-editor__canvas-container"},_.default.createElement("canvas",{ref:"canvas",style:s,onMouseDown:this.preventDrag,className:d}),l&&_.default.createElement(R.default,null))}}]),t}(y.Component);N.propTypes={src:y.PropTypes.string,mimeType:y.PropTypes.string,transform:y.PropTypes.shape({degrees:y.PropTypes.number,scaleX:y.PropTypes.number,scaleY:y.PropTypes.number}),crop:y.PropTypes.shape({topRatio:y.PropTypes.number,leftRatio:y.PropTypes.number,widthRatio:y.PropTypes.number,heightRatio:y.PropTypes.number}),setImageEditorCropBounds:y.PropTypes.func,setImageEditorImageHasLoaded:y.PropTypes.func,onLoadError:y.PropTypes.func,isImageLoaded:y.PropTypes.bool},N.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:b.default,setImageEditorImageHasLoaded:b.default,onLoadError:b.default,isImageLoaded:!1},t.default=(0,P.connect)(function(e){var t=(0,L.getImageEditorTransform)(e),a=(0,L.getImageEditorFileInfo)(e),i=a.src,o=a.mimeType,r=(0,L.getImageEditorCrop)(e),n=(0,L.isImageEditorImageLoaded)(e);return{src:i,mimeType:o,transform:t,crop:r,isImageLoaded:n}},{setImageEditorCropBounds:I.setImageEditorCropBounds,setImageEditorImageHasLoaded:I.setImageEditorImageHasLoaded},null,{withRef:!0})(N),e.exports=t.default},0x75898c12cdbbc:function(e,t,a){"use strict";function i(){return this instanceof i?void(this.initialized=!1):new i}var o=a(4675954658966525)("calypso:trophies-data"),r=a(0xf2ce944f0fc89),n=a(0xd1ca77937cbcf),s=a(8478035041892969).undocumented();r(i.prototype),i.prototype.get=function(){var e;return this.data||(e=n.get("TrophiesData"),e?this.initialize(e):this.data=[],this.emit("change"),this.fetch()),this.data},i.prototype.fetch=function(){s.me().getTrophies(function(e,t){e&&o(e.error,e.message),this.data=t,this.initialized||(this.initialized=!0,this.emit("change")),n.set("TrophiesData",t)}.bind(this))},i.prototype.initialize=function(e){this.data=e,this.initialized=!0},i.prototype.hasLoadedFromServer=function(){return this.initialized},e.exports=new i},0x79f9b53254690:function(e,t,a){"use strict";var i=a(5896763357248615),o=a(0xece65988bdcfb),r=a(6347293301235910),n=a(6213096133861195),s=a(5830929554887919),l=a(70219791644428),d=a(6796511058556234),u=a(623310115397031),c=a(0xc69f362ed57b8),p=a(7418474439241154)();e.exports=i.createClass({displayName:"exports",mixins:[l("trophiesData","sites")],getDefaultProps:function(){return{sites:p}},userState:{},componentWillUnmount:function(){window.scrollTo(0,0)},recordEvent:function(e){u.ga.recordEvent("Me > Next > Welcome Message",e.action),u.tracks.recordEvent("calypso_me_next_welcome_click",{link:e.tracks,is_welcome:this.props.isWelcome})},setUserStateFromTrophiesData:function(){this.userState={userHasPosted:this.hasUserPosted()}},hasUserPosted:function(){if(this.props.trophiesData.hasLoadedFromServer())return this.props.trophiesData.get().trophies.some(function(e){return"post-milestone"===e.type})},renderPostComponent:function(){if(this.props.trophiesData.hasLoadedFromServer())return i.createElement("div",null,this.userState.userHasPosted?"You have posted":"Create a post")},renderMeSidebar:function(){if(!this.props.isWelcome)return i.createElement(s,null)},bloggingUniversityLinkRecordEvent:function(){this.recordEvent({tracks:"blogging_course",action:"Clicked Blogging University Link"})},docsLinkRecordEvent:function(){this.recordEvent({tracks:"documentation",action:"Clicked Documentation Link"})},dismissLinkRecordEvent:function(){this.recordEvent({tracks:"dismiss",action:"Clicked Dismiss Link"})},introMessage:function(){if(this.props.isWelcome)return i.createElement("div",{className:"next-steps__intro"},i.createElement("h3",{className:"next-steps__title"},this.translate("Thanks for signing up for WordPress.com.")),i.createElement("p",{className:"next-steps__intro"},this.translate("Next you can take any of the following steps, join a {{bloggingUniversityLink}}guided blogging course{{/bloggingUniversityLink}}, or check out our {{docsLink}}support documentation{{/docsLink}}.",{components:{bloggingUniversityLink:i.createElement("a",{href:"https://bloggingu.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.bloggingUniversityLinkRecordEvent}),docsLink:i.createElement("a",{href:"http://en.support.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.docsLinkRecordEvent})}})))},newestSite:function(){return r(this.props.sites.get(),o("ID")).pop()},outroMessage:function(){var e,t;if(this.props.isWelcome)return e=this.newestSite(),t="/stats/insights/"+(e?e.slug:""),i.createElement("div",{className:"next-steps__outro"},i.createElement("p",null,this.translate("If you want you can {{a}}skip these steps{{/a}}. You can come back to this page any time.",{components:{a:i.createElement("a",{href:t,onClick:this.dismissLinkRecordEvent})}})))},userHasPurchasedAPlan:function(){return this.props.sites.get().some(function(e){return c.isPlan(e.plan)})},renderSteps:function(){var e=this.newestSite(),t=d.defaultSequence;return this.userHasPurchasedAPlan()&&(t=d.hasPlanSequence),i.createElement("div",{className:"next-steps__steps"},t.map(function(t,a){var o=d.definitions(e)[t];return i.createElement(n,{key:t,stepName:t,step:o,primary:0===a,isWelcome:this.props.isWelcome})}.bind(this)))},render:function(){var e="main main-column next-steps";return this.setUserStateFromTrophiesData(),this.props.isWelcome&&(e+=" is-single-page"),i.createElement("div",{className:e},this.renderMeSidebar(),this.introMessage(),this.renderSteps(),this.outroMessage())}})},0x904e9c839af89:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.className,a=e.isError,i=(0,l.default)(e,["className","isError"]),o=(0,p.default)("form-tel-input",t,{"is-error":a});return u.default.createElement("input",(0,n.default)({},i,{type:"tel",pattern:"[0-9]*",className:o}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5630966280090368),n=i(r),s=a(0x9d103afba06e0),l=i(s);t.default=o;var d=a(5896763357248615),u=i(d),c=a(0x8ae3881d6e8c2),p=i(c);o.propTypes={className:d.PropTypes.string,isError:d.PropTypes.bool},o.defaultProps={isError:!1},e.exports=t.default},0x9244927499a4b:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0x8ae3881d6e8c2),s=i(n),l=a(5628363501489590),d=i(l),u=a(0x4c328c9015af2),c=i(u);t.default=r.default.createClass({displayName:"section-header",getDefaultProps:function(){return{label:"",href:null}},render:function(){var e=(0,s.default)(this.props.className,"section-header");return r.default.createElement(d.default,{className:e,href:this.props.href},r.default.createElement("div",{className:"section-header__label"},r.default.createElement("span",{className:"section-header__label-text"},this.props.label),"number"==typeof this.props.count&&r.default.createElement(c.default,{count:this.props.count})),r.default.createElement("div",{className:"section-header__actions"},this.props.children))}}),e.exports=t.default},0x9cde9aee31d1f:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){return this instanceof o?(this.data=null,this.initialized=!1,this.indvalidCode=!1,this.smsResendThrottled=!1,this.bumpMCStat=function(e){h.mc.bumpStat("2fa",e)},void this.fetch()):new o}var r=a(0x94d4b19af1d06),n=i(r),s=a(4675954658966525)("calypso:two-step-authorization"),l=a(0xf2ce944f0fc89),d=a(8478035041892969).undocumented(),u=a(6563835376427538),c=a(5739682712422102),p=a(502028405524976),f=a(8281875498084326),h=a(623310115397031);o.prototype.fetch=function(e){d.me().getTwoStep(function(t,a){t||(this.data=a,this.isReauthRequired()&&this.isTwoStepSMSEnabled()&&!this.initialized&&this.sendSMSCode(),this.isReauthRequired()&&!this.initialized&&this.bumpMCStat("reauth-required"),this.initialized=!0,this.emit("change")),e&&e(t,a)}.bind(this))},o.prototype.validateCode=function(e,t){d.me().validateTwoStepCode(e,function(a,i){!a&&i.success?(this.isReauthRequired()&&(u.fetchSettings(),c.fetch(),p.fetch(),f.reAuthRequired=!1,f.fetchProfileLinks()),this.data.two_step_reauthorization_required=!1,this.data.two_step_authorization_expires_soon=!1,this.invalidCode=!1,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-successful":"disable-2fa-successful"):this.bumpMCStat("reauth-successful"),this.emit("change")):a||(this.invalidCode=!0,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-failed-invalid-code":"disable-2fa-failed-invalid-code"):this.bumpMCStat("reauth-failed-invalid-code")),t&&t(a,i)}.bind(this))},o.prototype.sendSMSCode=function(e){d.me().sendSMSValidationCode(function(t,a){t?(s("Sending SMS code failed: "+(0,n.default)(t)),t.error&&"rate_limited"===t.error&&(s("SMS resend throttled."),this.bumpMCStat("sms-code-send-throttled"),this.smsResendThrottled=!0)):(this.smsResendThrottled=!1,this.bumpMCStat("sms-code-send-success")),this.emit("change"),e&&e(t,a)}.bind(this))},o.prototype.backupCodes=function(e){d.me().backupCodes(function(t,a){t?s("Fetching Backup Codes failed: "+(0,n.default)(t)):this.bumpMCStat("new-backup-codes-success"),e&&e(t,a)}.bind(this))},o.prototype.validateBackupCode=function(e,t){var a={code:e,action:"create-backup-receipt"};d.me().validateTwoStepCode(a,function(e,a){e&&s("Validating Two Step Code failed: "+(0,n.default)(e)),a&&this.bumpMCStat(a.success?"backup-code-validate-success":"backup-code-validate-failure"),t&&t(e,a)}.bind(this))},o.prototype.getAppAuthCodes=function(e){d.me().getAppAuthCodes(function(t,a){t&&s("Getting App Auth Codes failed: "+(0,n.default)(t)),e&&e(t,a)})},o.prototype.codeValidationFailed=function(){return this.invalidCode},o.prototype.isSMSResendThrottled=function(){return this.smsResendThrottled},o.prototype.isReauthRequired=function(){return!!this.data&&this.data.two_step_reauthorization_required},o.prototype.authExpiresSoon=function(){return!!this.data&&this.data.two_step_authorization_expires_soon},o.prototype.isTwoStepSMSEnabled=function(){return!!this.data&&this.data.two_step_sms_enabled},o.prototype.getSMSLastFour=function(){return this.data?this.data.two_step_sms_last_four:null},l(o.prototype),e.exports=new o},0xa0300e218a145:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(0x8817212fc310f),m=i(h),g=a(0x45d24eaab7654),v=i(g),E=a(5896763357248615),b=i(E),y=a(6280957995252369),_=a(7572476330282672),k=a(0xa505046780b0c),S=i(k),P=a(0xc46966cb87a6f),C=i(P),w=a(72591479426812),x=i(w),R=a(8277184115649475),A=a(7629348406412959),T=a(8693344302354816),L=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={showAspectPopover:!1},a.setAspectMenuContext=a.setAspectMenuContext.bind(a),a.onAspectOpen=a.onAspectOpen.bind(a),a.onAspectClose=a.onAspectClose.bind(a),a.rotate=a.rotate.bind(a),a.flip=a.flip.bind(a),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault(),this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,a=e.showAspectPopover,i=this.props,o=i.translate,r=i.aspectRatio,n=i.allowedAspectRatios;if(t&&1!==n.length){var s=[{action:R.AspectRatios.FREE,label:o("Free")},{action:R.AspectRatios.ORIGINAL,label:o("Original")},{action:R.AspectRatios.ASPECT_1X1,label:o("Square")},{action:R.AspectRatios.ASPECT_16X9,label:o("16:9")},{action:R.AspectRatios.ASPECT_4X3,label:o("4:3")},{action:R.AspectRatios.ASPECT_3X2,label:o("3:2")}];return b.default.createElement(C.default,{isVisible:a,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},s.map(function(e){return n.indexOf(e.action)!==-1?b.default.createElement(x.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},r===e.action&&b.default.createElement(S.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,a=e.allowedAspectRatios,i=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===a.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"layout",text:t("Aspect"),onClick:this.onAspectOpen},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return i.map(function(e){return e?b.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:"image-editor__toolbar-button",onClick:e.onClick},b.default.createElement(S.default,{icon:e.icon}),b.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return b.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(E.Component);L.propTypes={aspectRatio:E.PropTypes.string,imageEditorRotateCounterclockwise:E.PropTypes.func,imageEditorFlip:E.PropTypes.func,setImageEditorAspectRatio:E.PropTypes.func,allowedAspectRatios:E.PropTypes.array},L.defaultProps={imageEditorRotateCounterclockwise:v.default,imageEditorFlip:v.default,setImageEditorAspectRatio:v.default,allowedAspectRatios:(0,m.default)(R.AspectRatios)},t.default=(0,y.connect)(function(e){return{aspectRatio:(0,A.getImageEditorAspectRatio)(e)}},{imageEditorRotateCounterclockwise:T.imageEditorRotateCounterclockwise,imageEditorFlip:T.imageEditorFlip,setImageEditorAspectRatio:T.setImageEditorAspectRatio})((0,_.localize)(L)),e.exports=t.default},0xa5d40033e4e2d:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0xf2d812b076e51),s=i(n),l=a(0xb43d93975e35d),d=i(l),u=a(70219791644428),c=i(u),p=a(0xb054fee49def1),f=i(p),h=a(0x9244927499a4b),m=i(h),g=a(6881822108913591),v=i(g),E=a(5708247199348607),b=i(E),y=a(8509533185673831),_=i(y),k=a(0xbd2d5f2efdbd7),S=i(k),P=a(0x99d130e2d4f2),C=i(P);t.default=r.default.createClass({displayName:"ProfileLinks",mixins:[(0,c.default)("userProfileLinks"),_.default],componentDidMount:function(){this.props.userProfileLinks.getProfileLinks(),"undefined"!=typeof document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange)},componentWillUnmount:function(){"undefined"!=typeof document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},handleVisibilityChange:function(){document.hidden||this.props.userProfileLinks.fetchProfileLinks()},getDefaultProps:function(){return{userProfileLinks:{initialized:!1}}},getInitialState:function(){return{showingForm:!1,lastError:!1,showPopoverMenu:!1}},showAddWordPress:function(){this.setState({showingForm:"wordpress",showPopoverMenu:!1
})},showAddOther:function(){this.setState({showingForm:"other",showPopoverMenu:!1})},showPopoverMenu:function(){this.setState({showPopoverMenu:!this.state.showPopoverMenu})},closePopoverMenu:function(){this.setState({showPopoverMenu:!1})},hideForms:function(){this.setState({showingForm:!1})},onRemoveLinkResponse:function(e){e?this.setState({lastError:e}):this.setState({lastError:!1})},clearLastError:function(){this.setState({lastError:!1})},onRemoveLink:function(e){this.props.userProfileLinks.deleteProfileLinkBySlug(e.link_slug,this.onRemoveLinkResponse)},possiblyRenderError:function(){return this.state.lastError?r.default.createElement(b.default,{className:"profile-links__error",status:"is-error",onDismissClick:this.clearLastError},this.translate("An error occurred while attempting to remove the link. Please try again later.")):null},renderProfileLinksList:function(){var e=this;return r.default.createElement("ul",{className:"profile-links__list"},this.props.userProfileLinks.getProfileLinks().map(function(t){return r.default.createElement(d.default,{key:t.link_slug,title:t.title,url:t.value,slug:t.link_slug,onRemoveLink:e.onRemoveLink.bind(e,t)})}))},renderNoProfileLinks:function(){return r.default.createElement("p",{className:"profile-links__no-links"},this.translate("You have no sites in your profile links. You may add sites if you'd like."))},renderPlaceholders:function(){return r.default.createElement("ul",{className:"profile-links__list"},(0,s.default)(2,function(e){return r.default.createElement(d.default,{title:"Loading Profile Links",url:"http://wordpress.com",slug:"A placeholder profile link",isPlaceholder:!0,key:e})}))},renderProfileLinks:function(){var e=this.props.userProfileLinks.initialized,t=this.props.userProfileLinks.getProfileLinks().length,a=void 0;return a=e?t>0?this.renderProfileLinksList():this.renderNoProfileLinks():this.renderPlaceholders(),r.default.createElement("div",null,r.default.createElement("p",null,this.translate("Manage which sites appear in your profile.")),this.possiblyRenderError(),a)},renderForm:function(){return"wordpress"===this.state.showingForm?r.default.createElement(S.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms}):r.default.createElement(C.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms})},render:function(){return r.default.createElement("div",null,r.default.createElement(m.default,{label:this.translate("Profile Links")},r.default.createElement(f.default,{userProfileLinks:this.props.userProfileLinks,showingForm:!!this.state.showingForm,onShowAddOther:this.showAddOther,showPopoverMenu:this.state.showPopoverMenu,onShowAddWordPress:this.showAddWordPress,onShowPopoverMenu:this.showPopoverMenu,onClosePopoverMenu:this.closePopoverMenu})),r.default.createElement(v.default,null,this.state.showingForm?this.renderForm():this.renderProfileLinks()))}}),e.exports=t.default},0xb054fee49def1:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0xa505046780b0c),s=i(n),l=a(7186610166862683),d=i(l),u=a(70219791644428),c=i(u),p=a(8509533185673831),f=i(p),h=a(0xc46966cb87a6f),m=i(h),g=a(72591479426812),v=i(g);t.default=r.default.createClass({displayName:"AddProfileLinksButtons",mixins:[(0,c.default)("userProfileLinks"),f.default],propTypes:{showingForm:r.default.PropTypes.bool,showPopoverMenu:r.default.PropTypes.bool},getDefaultProps:function(){return{showingForm:!1}},getInitialState:function(){return{popoverPosition:"top"}},render:function(){return r.default.createElement("div",null,r.default.createElement(m.default,{isVisible:this.props.showPopoverMenu,onClose:this.props.onClosePopoverMenu,position:this.state.popoverPosition,context:this.refs&&this.refs.popoverMenuButton},r.default.createElement(v.default,{onClick:this.recordClickEvent("Add a WordPress Site Button",this.props.onShowAddWordPress)},this.translate("Add WordPress Site")),r.default.createElement(v.default,{onClick:this.recordClickEvent("Add Other Site Button",this.props.onShowAddOther)},this.translate("Add URL"))),r.default.createElement(d.default,{compact:!0,ref:"popoverMenuButton",className:"popover-icon",onClick:this.props.onShowPopoverMenu},r.default.createElement(s.default,{icon:"add-outline"}),this.translate("Add")))}}),e.exports=t.default},0xb2b0d3e86acc2:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(0x45d24eaab7654),m=i(h),g=a(8907951692841672),v=i(g),E=a(5896763357248615),b=i(E),y=a(0xd6727cdbc76dd),_=i(y),k=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.showPicker=a.showPicker.bind(a),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,_.default)((0,v.default)({},this.props),this.props.onPick)}},{key:"render",value:function(){return b.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(b.default.Component);t.default=k,k.displayName="FilePicker",k.propTypes={multiple:b.default.PropTypes.bool,directory:b.default.PropTypes.bool,accept:b.default.PropTypes.string,onClick:b.default.PropTypes.func,onPick:b.default.PropTypes.func},k.defaultProps={multiple:!1,directory:!1,accept:null,onClick:m.default,onPick:m.default},e.exports=t.default},0xb43d93975e35d:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0x8ae3881d6e8c2),s=i(n),l=a(0x481aaf212f4ee),d=i(l),u=a(926478077821805),c=i(u),p=a(8509533185673831),f=i(p),h=a(5062222758155501);t.default=r.default.createClass({displayName:"ProfileLink",mixins:[f.default],getDefaultProps:function(){return{imageSize:100,title:"",url:"",slug:"",isPlaceholder:!1}},propTypes:{imageSize:r.default.PropTypes.number,title:r.default.PropTypes.string.isRequired,url:r.default.PropTypes.string.isRequired,slug:r.default.PropTypes.string.isRequired},renderRemove:function(){return r.default.createElement(d.default,{className:"profile-link__remove",onClick:this.recordClickEvent("Remove Link Next to Site",this.props.onRemoveLink)})},render:function(){var e=(0,s.default)({"profile-link":!0,"is-placeholder":this.props.isPlaceholder}),t="//s1.wp.com/mshots/v1/"+encodeURIComponent(this.props.url)+"?w="+this.props.imageSize+"&h=64",a=this.props.isPlaceholder?null:(0,c.default)(this.props.url);return r.default.createElement("li",{className:e},this.props.isPlaceholder?r.default.createElement("div",{className:"profile-link__image-link"}):r.default.createElement("a",{href:a,className:"profile-link__image-link",target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Images Link")},r.default.createElement("img",{className:"profile-link__image",src:t})),r.default.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Link")},r.default.createElement("span",{className:"profile-link__title"},this.props.title),r.default.createElement("span",{className:"profile-link__url"},(0,h.withoutHttp)(this.props.url))),this.props.isPlaceholder?null:this.renderRemove())}}),e.exports=t.default},0xbd2d5f2efdbd7:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(4883949902648912),s=i(n),l=a(0x7470881db6733),d=i(l),u=a(5708247199348607),c=i(u),p=a(5621169132512541),f=i(p),h=a(7418474439241154),m=i(h),g=a(8509533185673831),v=i(g),E=(0,m.default)();t.default=r.default.createClass({displayName:"ProfileLinksAddWordPress",mixins:[v.default],getInitialState:function(){return{}},handleCheckedChanged:function(e){var t={};t[e.target.name]=e.target.checked,this.setState(t)},onSelect:function(e,t){var a={};t.preventDefault(),a[e]=!this.state[e],this.setState(a)},getCheckedCount:function(){var e=0,t=void 0;for(t in this.state)this.state[t]&&e++;return e},onAddableSubmit:function(e){var t=[],a=void 0,i=void 0,o=void 0;e.preventDefault();for(o in this.state)"site-"===o.substr(0,5)&&this.state[o]&&(a=parseInt(o.substr(5),10),i=E.getSite(a),t.push({title:i.name,value:i.URL}));this.props.userProfileLinks.addProfileLinks(t,this.onSubmitResponse)},onCancel:function(e){e.preventDefault(),this.props.onCancel()},onCreateSite:function(e){e.preventDefault(),window.open((0,s.default)("signup_url")+"?ref=me-profile-links"),this.props.onCancel()},onJetpackMe:function(e){e.preventDefault(),window.open("http://jetpack.me/"),this.props.onCancel()},onSubmitResponse:function(e,t){return e?void this.setState({lastError:this.translate("Unable to add any links right now. Please try again later.")}):t.malformed?void this.setState({lastError:this.translate("An unexpected error occurred. Please try again later.")}):(t.duplicate&&this.props.userProfileLinks.fetchProfileLinks(),void this.props.onSuccess())},clearLastError:function(){this.setState({lastError:!1})},possiblyRenderError:function(){return this.state.lastError?r.default.createElement(c.default,{className:"profile-links-add-wordpress__error",status:"is-error",onDismissClick:this.clearLastError},this.state.lastError):null},renderAddableSites:function(){var e=this;return E.getPublic().map(function(t){var a="site-"+t.ID,i=e.state[a];return e.props.userProfileLinks.isSiteInProfileLinks(t)?null:r.default.createElement("li",{key:t.ID,className:"profile-links-add-wordpress__item",onClick:e.recordCheckboxEvent("Add WordPress Site")},r.default.createElement("input",{className:"profile-links-add-wordpress__checkbox",type:"checkbox",name:a,onChange:e.handleCheckedChanged,checked:i}),r.default.createElement(f.default,{site:t,indicator:!1,onSelect:e.onSelect.bind(e,a)}))})},renderAddableSitesForm:function(){var e=this.getCheckedCount();return r.default.createElement("form",{className:"profile-links-add-wordpress",onSubmit:this.onAddableSubmit},r.default.createElement("p",null,this.translate("Please select one or more sites to add to your profile.")),r.default.createElement("ul",{className:"profile-links-add-wordpress__list"},this.renderAddableSites()),this.possiblyRenderError(),r.default.createElement(d.default,{disabled:0===e,onClick:this.recordClickEvent("Add WordPress Sites Button")},this.translate("Add Site","Add Sites",{count:e})),r.default.createElement(d.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:this.recordClickEvent("Cancel Add WordPress Sites Button",this.onCancel)},this.translate("Cancel")))},renderInvitationForm:function(){return r.default.createElement("form",null,r.default.createElement("p",null,this.translate("You have no public sites on WordPress.com yet, but if you like you can create one now.  You may also add self-hosted WordPress sites here after installing {{jetpackLink}}Jetpack{{/jetpackLink}} on them.",{components:{jetpackLink:r.default.createElement("a",{href:"#",className:"profile-links-add-wordpress__jetpack-link",onClick:this.recordClickEvent("Jetpack Link in Profile Links",this.onJetpackMe)})}})),r.default.createElement(d.default,{onClick:this.recordClickEvent("Create Sites Button in Profile Links",this.onCreateSite)},this.translate("Create Site")),r.default.createElement(d.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:this.recordClickEvent("Cancel Add WordPress Sites Button",this.onCancel)},this.translate("Cancel")))},render:function(){return r.default.createElement("div",null,0===E.getPublic().length?this.renderInvitationForm():this.renderAddableSitesForm())}}),e.exports=t.default},0xbff38eca5e16d:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=a(5630966280090368),r=i(o),n=a(5896763357248615),s=a(0x8ae3881d6e8c2),l=a(5059747709250767);e.exports=n.createClass({displayName:"FormInputCheckbox",render:function(){var e=l(this.props,["className","type"]);return n.createElement("input",(0,r.default)({},e,{type:"checkbox",className:s(this.props.className,"form-checkbox")}))}})},0xd6727cdbc76dd:function(e,t,a){function i(e,t){function a(e){t(n.files,e,n),o.unbind(n,"change",a),s=!1}"function"==typeof e&&(t=e,e={}),e=e||{},n.multiple=!!e.multiple,n.webkitdirectory=n.mozdirectory=n.directory=!!e.directory,null==e.accept?delete n.accept:e.accept.join?n.accept=e.accept.join(","):e.accept&&(n.accept=e.accept),s&&o.unbind(n,"change",s),o.bind(n,"change",a),s=a,r.reset(),n.click()}var o=a(5654727004707021);e.exports=i;var r=document.createElement("form");r.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(r);var n=r.childNodes[0],s=!1},0xdfd49ead7d399:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){r.default.isEnabled("me/my-profile")&&((0,s.default)("/me",d.default.sidebar,d.default.profile),(0,s.default)("/me/profile",d.default.profileRedirect),(0,s.default)("/me/public-profile",d.default.profileRedirect)),r.default.isEnabled("me/next-steps")&&(0,s.default)("/me/next/:welcome?",d.default.sidebar,d.default.nextStepsWelcomeRedirect,d.default.nextSteps),r.default.isEnabled("me/trophies")||(0,s.default)("/me/trophies",d.default.trophiesRedirect),r.default.isEnabled("me/find-friends")||(0,s.default)("/me/find-friends",d.default.findFriendsRedirect),(0,s.default)("/me/get-apps",d.default.sidebar,d.default.apps)};var o=a(4883949902648912),r=i(o),n=a(0x90ba166cd016c),s=i(n),l=a(874649023483751),d=i(l);e.exports=t.default},0xf291f0e3c50ab:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return function(i){i({type:l.GRAVATAR_UPLOAD_REQUEST});var o=new FormData;return o.append("filedata",e),o.append("account",a),s.default.post("https://api.gravatar.com/v1/upload-image").send(o).set("Authorization","Bearer "+t).then(function(){var t=new FileReader(e);t.addEventListener("load",function(){i({type:l.GRAVATAR_UPLOAD_RECEIVE,src:t.result}),i({type:l.GRAVATAR_UPLOAD_REQUEST_SUCCESS})}),t.readAsDataURL(e)}).catch(function(){i({type:l.GRAVATAR_UPLOAD_REQUEST_FAILURE})})}}function r(e){return{type:l.GRAVATAR_RECEIVE_IMAGE_FAILURE,errorMessage:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadGravatar=o,t.receiveGravatarImageFailed=r;var n=a(6949133630240706),s=i(n),l=a(0xd047e5c4c63f8)},0xff0fa617ab869:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GetApps=void 0;var o=a(0xeb8f73c122973),r=i(o),n=a(5896763357248615),s=i(n),l=a(7572476330282672),d=a(5830929554887919),u=i(d),c=a(0x6ee56fc1c50a2),p=i(c),f=a(7186610166862683),h=i(f),m=a(6881822108913591),g=i(m),v=a(0x9244927499a4b),E=i(v),b=t.GetApps=function(e){var t=e.translate;return s.default.createElement(p.default,{className:"get-apps"},s.default.createElement(u.default,null),s.default.createElement(E.default,{label:t("Desktop apps")}),s.default.createElement(g.default,{className:"get-apps__desktop"},s.default.createElement("section",{className:"get-apps__app"},s.default.createElement("div",{className:"get-apps__app-icon"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-osx.svg",alt:t("Mac"),width:"96",height:"96"})),s.default.createElement("p",null,s.default.createElement("strong",null,t("Mac")),s.default.createElement("br",null),t("Requires 10.11 or newer")),s.default.createElement(h.default,{href:"https://apps.wordpress.com/d/osx?ref=getapps"},t("Download",{context:"verb"}))),s.default.createElement("section",{className:"get-apps__app"},s.default.createElement("div",{className:"get-apps__app-icon"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-windows.svg",alt:t("Windows"),width:"96",height:"96"})),s.default.createElement("p",null,s.default.createElement("strong",null,t("Windows")),s.default.createElement("br",null),t("Requires 7 or newer")),s.default.createElement(h.default,{href:"https://apps.wordpress.com/d/windows?ref=getapps"},t("Download"))),s.default.createElement("section",{className:"get-apps__app"},s.default.createElement("div",{className:"get-apps__app-icon"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-linux.svg",alt:t("Linux"),width:"96",height:"96"})),s.default.createElement("p",null,s.default.createElement("strong",null,t("Linux")),s.default.createElement("br",null),t("Choose your distribution")),s.default.createElement(h.default,{href:"https://apps.wordpress.com/d/linux?ref=getapps"},t(".TAR.GZ")),s.default.createElement(h.default,{href:"https://apps.wordpress.com/d/linux-deb?ref=getapps"},t(".DEB")))),s.default.createElement(E.default,{label:t("Mobile apps")}),s.default.createElement(g.default,{className:"get-apps__mobile"},s.default.createElement("section",{className:"get-apps__app"},s.default.createElement("div",{className:"get-apps__app-icon"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-ios.svg",alt:t("iOS"),width:"96",height:"96"})),s.default.createElement("p",null,s.default.createElement("strong",null,t("iOS"))),s.default.createElement("a",{href:"https://itunes.apple.com/us/app/wordpress/id335703880?mt=8"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-app-store.png",alt:t("Get on the iOS App Store")}))),s.default.createElement("section",{className:"get-apps__app"},s.default.createElement("div",{className:"get-apps__app-icon"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-android.svg",alt:t("Android"),width:"96",height:"96"})),s.default.createElement("p",null,s.default.createElement("strong",null,t("Android"))),s.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=org.wordpress.android"},s.default.createElement("img",{src:"/calypso/images/me/get-apps-google-play.png",alt:t("Get on Google Play")})))))};b.propTypes={translate:n.PropTypes.func},b.defaultProps={translate:r.default},t.default=(0,l.localize)(b)},4936501850969121:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(5896763357248615),m=i(h),g=a(6280957995252369),v=a(0xa505046780b0c),E=i(v),b=a(22173321089158),y=a(301929001539288),_=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.toggleSidebar=a.toggleSidebar.bind(a),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return m.default.createElement("header",{className:"current-section"},m.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},m.default.createElement(E.default,{icon:"chevron-left"}),this.props.children,m.default.createElement("div",null,m.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),m.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(m.default.Component);_.propTypes={title:h.PropTypes.string,linkClassName:h.PropTypes.string,sectionTitle:h.PropTypes.string,sectionName:h.PropTypes.string.isRequired,setLayoutFocus:h.PropTypes.func.isRequired},t.default=(0,g.connect)(function(e){return{title:(0,b.getDocumentHeadTitle)(e)}},{setLayoutFocus:y.setLayoutFocus})(_),e.exports=t.default},5567973762736909:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(0x45d24eaab7654),m=i(h),g=a(5896763357248615),v=i(g),E=a(6280957995252369),b=a(7572476330282672),y=a(7186610166862683),_=i(y),k=a(7629348406412959),S=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,a=e.onCancel,i=e.src,o=e.onDone,r=e.onReset,n=e.translate;return v.default.createElement("div",{className:"image-editor__buttons"},a&&v.default.createElement(_.default,{className:"image-editor__buttons-button",onClick:a},n("Cancel")),v.default.createElement(_.default,{className:"image-editor__buttons-button",disabled:!t,onClick:r},n("Reset")),v.default.createElement(_.default,{className:"image-editor__buttons-button",disabled:!i,primary:!0,onClick:o},n(" Done ")))}}]),t}(g.Component);S.propTypes={src:g.PropTypes.string,hasChanges:g.PropTypes.bool,resetImageEditorState:g.PropTypes.func,onDone:g.PropTypes.func,onCancel:g.PropTypes.func,onReset:g.PropTypes.func},S.defaultProps={src:"",hasChanges:!1,resetImageEditorState:m.default,onDone:m.default,onCancel:m.default,onReset:m.default},t.default=(0,E.connect)(function(e){var t=(0,k.getImageEditorFileInfo)(e),a=t.src,i=(0,k.imageEditorHasChanges)(e);return{src:a,hasChanges:i}})((0,b.localize)(S)),e.exports=t.default},5628363501489590:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8907951692841672),r=i(o),n=a(5896763357248615),s=i(n),l=a(0x8ae3881d6e8c2),d=i(l),u=a(6881822108913591),c=i(u);t.default=s.default.createClass({displayName:"CompactCard",render:function(){var e=(0,r.default)({},this.props,{className:(0,d.default)(this.props.className,"is-compact")});return s.default.createElement(c.default,e,this.props.children)}}),e.exports=t.default},5739682712422102:function(e,t,a){"use strict";function i(){return this instanceof i?(this.data=null,this.newApplicationPassword=null,void(this.fetching=!1)):new i}var o=a(4675954658966525)("calypso:application-passwords-data"),r=a(0xf2ce944f0fc89),n=a(0xa8ea23472235c),s=a(0xd1ca77937cbcf),l=a(8478035041892969).undocumented();r(i.prototype),i.prototype.get=function(){return this.data||(o("First time loading ApplicationPasswords, check store"),this.data=s.get("wpcom_me_application_passwords")||[],this.fetch()),this.data},i.prototype.fetch=function(){this.fetching=!0,l.me().getApplicationPasswords(function(e,t){return e?void o("Something went wrong fetching application passwords."):(this.data=t.application_passwords,this.fetching=!1,s.set("wpcom_me_application_passwords",this.data),o("Application passwords successfully retrieved"),void this.emit("change"))}.bind(this))},i.prototype.revoke=function(e,t){l.me().revokeApplicationPassword(e,function(a,i){a&&"unknown_application_password"!==a.error||(this.data=n(this.data,function(t){return parseInt(t.ID,10)!==e}),s.set("wpcom_me_application_passwords",this.data),this.emit("change")),t(a,i)}.bind(this))},i.prototype.create=function(e,t){l.me().createApplicationPassword(e,function(e,a){e?o("Creating application password failed."):(o("Application password successfully created"),this.newApplicationPassword=a,this.fetch()),t(e,a)}.bind(this))},i.prototype.hasNewPassword=function(){return!!this.newApplicationPassword},i.prototype.clearNewPassword=function(){this.newApplicationPassword=null,this.emit("change")},e.exports=new i},5830929554887919:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(7572476330282672),s=a(4936501850969121),l=i(s),d=a(0x68ccbe1ec01b),u=i(d),c=a(6183759582808303),p=i(c),f=(0,p.default)(),h=function(e){var t=e.translate;return r.default.createElement(l.default,{sectionName:"me",sectionTitle:t("Me")},r.default.createElement(u.default,{user:f.get(),size:30,imgSize:400}))};t.default=(0,n.localize)(h),e.exports=t.default},6051631321006113:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(6465156853722425),r=i(o),n=a(872100829608442),s=i(n),l=a(0xccd53b671ebb6),d=i(l),u=a(5143893728007863),c=i(u),p=a(5880884711457125),f=i(p),h=a(8173823076638946),m=i(h),g=a(5369032381290393),v=i(g),E=a(0x45d24eaab7654),b=i(E),y=a(0xf0f4288728240),_=i(y),k=a(5896763357248615),S=i(k),P=a(6280957995252369),C=a(0x8ae3881d6e8c2),w=i(C),x=a(8735826191793942),R=i(x),A=a(7629348406412959),T=a(8277184115649475),L=a(8693344302354816),I=a(44438367388668),N=a(0x4c51447983589),M=i(N),D=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state=a.getDefaultState(e),a.onTopLeftDrag=a.onTopLeftDrag.bind(a),a.onTopRightDrag=a.onTopRightDrag.bind(a),a.onBottomLeftDrag=a.onBottomLeftDrag.bind(a),a.onBottomRightDrag=a.onBottomRightDrag.bind(a),a.applyCrop=a.applyCrop.bind(a),a.onBorderDrag=a.onBorderDrag.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.bounds,i=t.aspectRatio,o=t.crop;if(!(0,_.default)(a,e.bounds)){var r=e.bounds.rightBound-e.bounds.leftBound,n=e.bounds.bottomBound-e.bounds.topBound,s=e.bounds.topBound+e.crop.topRatio*n,l=e.bounds.leftBound+e.crop.leftRatio*r,d=s+e.crop.heightRatio*n,u=l+e.crop.widthRatio*r,c={top:s,left:l,bottom:d,right:u};this.setState(c),this.updateCrop(c)}i!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,_.default)(e.crop,I.defaultCrop)||(0,_.default)(o,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,a){t=t||this.props;var i=t.aspectRatio;if(i===T.AspectRatios.FREE)return void this.setState(e,a);var o=t.degrees%180!==0,r=(0,s.default)({},this.state,e),n=r.right-r.left,l=r.bottom-r.top,d=void 0,u=void 0,c=n,p=l;switch(i){case T.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,a);var f=this.props.originalAspectRatio,h=f.width,m=f.height;d=o?m:h,u=o?h:m;break;case T.AspectRatios.ASPECT_1X1:d=1,u=1;break;case T.AspectRatios.ASPECT_16X9:d=o?9:16,u=o?16:9;break;case T.AspectRatios.ASPECT_4X3:d=o?3:4,u=o?4:3;break;case T.AspectRatios.ASPECT_3X2:d=o?2:3,u=o?3:2}var g=Math.min(n/d,l/u);c=d*g,p=u*g,e.hasOwnProperty("top")?e.top=r.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=r.top+p),e.hasOwnProperty("left")?e.left=r.right-c:e.hasOwnProperty("right")&&(e.right=r.left+c),this.setState(e,a)}},{key:"onTopLeftDrag",value:function(e,t){var a=this.state,i=a.right,o=a.bottom,r=this.props.minCropSize,n=t,s=e;i-s<=r.width&&(s=i-r.width),o-n<=r.height&&(n=o-r.height),this.updateCrop({top:n,left:s})}},{key:"onTopRightDrag",value:function(e,t){var a=this.state,i=a.left,o=a.bottom,r=this.props.minCropSize,n=t,s=e;s-i<=r.width&&(s=i+r.width),o-n<=r.height&&(n=o-r.height),this.updateCrop({top:n,right:s})}},{key:"onBottomRightDrag",value:function(e,t){var a=this.state,i=a.left,o=a.top,r=this.props.minCropSize,n=t,s=e;s-i<=r.width&&(s=i+r.width),n-o<=r.height&&(n=o+r.height),this.updateCrop({bottom:n,right:s})}},{key:"onBottomLeftDrag",value:function(e,t){var a=this.state,i=a.right,o=a.top,r=this.props.minCropSize,n=t,s=e;i-s<=r.width&&(s=i-r.width),n-o<=r.height&&(n=o+r.height),this.updateCrop({bottom:n,left:s})}},{key:"onBorderDrag",value:function(e,t){var a=this.state,i=a.top,o=a.left,r=a.right,n=a.bottom,s=r-o,l=n-i;this.setState({top:t,left:e,bottom:t+l,right:e+s})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,a=e.left,i=e.right,o=e.bottom,r=this.props.bounds,n=r.topBound,s=r.leftBound,l=r.rightBound,d=r.bottomBound,u=t-n,c=a-s,p=i-a,f=o-t,h=l-s,m=d-n,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var v=this.props.originalAspectRatio,E=v.width,b=v.height,y=g?b:E,_=g?E:b,k=_/y;m=h*k}return[u/m,c/h,p/h,f/m]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,r.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,r.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,a=e.left,i=e.right,o=e.bottom,r=i-a,n=o-t,s="image-editor__crop-handle",l=this.props.bounds,d=l.topBound,u=l.leftBound,c=l.rightBound,p=l.bottomBound;return S.default.createElement("div",null,S.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:a+"px",width:r+"px",height:Math.max(0,t-d)+"px"}}),S.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:u+"px",width:Math.max(0,a-u)+"px",height:Math.max(0,p-d)+"px"}}),S.default.createElement("div",{className:"image-editor__crop-background",style:{top:o+"px",left:a+"px",width:r+"px",height:Math.max(0,p-o)+"px"}}),S.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:i+"px",width:Math.max(0,c-i)+"px",height:Math.max(0,p-d)+"px"}}),S.default.createElement(R.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:a,y:t,width:r,height:n,bounds:{top:d,left:u,bottom:p,right:c},className:"image-editor__crop"}),S.default.createElement(R.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:a,y:t,controlled:!0,bounds:{bottom:o,right:i,top:d,left:u},ref:"topLeft",className:(0,w.default)(s,s+"-nwse")}),S.default.createElement(R.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:i,controlled:!0,bounds:{bottom:o,left:a,top:d,right:c},ref:"topRight",className:(0,w.default)(s,s+"-nesw")}),S.default.createElement(R.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:o,x:i,controlled:!0,bounds:{top:t,left:a,bottom:p,right:c},ref:"bottomRight",className:(0,w.default)(s,s+"-nwse")}),S.default.createElement(R.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:o,x:a,controlled:!0,bounds:{top:t,right:i,bottom:p,left:u},ref:"bottomLeft",className:(0,w.default)(s,s+"-nesw")}))}}]),t}(k.Component);D.propTypes={degrees:k.PropTypes.number,bounds:k.PropTypes.shape({topBound:k.PropTypes.number,leftBound:k.PropTypes.number,bottomBound:k.PropTypes.number,rightBound:k.PropTypes.number}),crop:k.PropTypes.shape({topRatio:k.PropTypes.number,leftRatio:k.PropTypes.number,widthRatio:k.PropTypes.number,heightRatio:k.PropTypes.number}),aspectRatio:k.PropTypes.string,imageEditorCrop:k.PropTypes.func,imageEditorComputedCrop:k.PropTypes.func,minCropSize:k.PropTypes.shape({width:k.PropTypes.number,height:k.PropTypes.number}),imageEditorHasChanges:k.PropTypes.bool},D.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:b.default,imageEditorComputedCrop:b.default,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,P.connect)(function(e){var t=(0,A.getImageEditorCropBounds)(e),a=(0,A.getImageEditorCrop)(e),i=(0,A.getImageEditorAspectRatio)(e),o=(0,A.getImageEditorTransform)(e),r=o.degrees;return{bounds:t,crop:a,aspectRatio:i,degrees:r,originalAspectRatio:(0,M.default)(e),imageEditorHasChanges:(0,A.imageEditorHasChanges)(e)}},{imageEditorCrop:L.imageEditorCrop,imageEditorComputedCrop:L.imageEditorComputedCrop})(D),e.exports=t.default},6080475287248452:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0x8ae3881d6e8c2),s=i(n),l=a(0xa505046780b0c),d=i(l);
t.default=r.default.createClass({displayName:"FormInputValidation",propTypes:{isError:r.default.PropTypes.bool,isWarning:r.default.PropTypes.bool,text:r.default.PropTypes.string,icon:r.default.PropTypes.string},getDefaultProps:function(){return{isError:!1}},render:function(){var e=(0,s.default)({"form-input-validation":!0,"is-warning":this.props.isWarning,"is-error":this.props.isError}),t=this.props.isError||this.props.isWarning?"notice-outline":"checkmark";return r.default.createElement("div",{className:e},r.default.createElement("span",null,r.default.createElement(d.default,{size:24,icon:this.props.icon?this.props.icon:t})," ",this.props.text))}}),e.exports=t.default},6110216374850815:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return{currentUser:(0,v.getCurrentUser)(e),isHappychatAvailable:(0,E.isHappychatAvailable)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0xc729f06ce7488),n=i(r),s=a(5896763357248615),l=i(s),d=a(4675954658966525),u=i(d),c=a(6280957995252369),p=a(7186610166862683),f=i(p),h=a(7153855682424197),m=i(h),g=a(301929001539288),v=a(0x956a8e02ae2a5),E=a(6906811980694319),b=(0,u.default)("calypso:me:sidebar"),y=a(6787800741592799),_=a(4789770305123259),k=a(7657634885712519),S=a(0x70dfca3e988ef),P=a(8306782668660782),C=a(4883949902648912),w=a(6975706324265958),x=a(8509533185673831),R=a(6894246938792476),A=l.default.createClass({displayName:"MeSidebar",mixins:[x],componentDidMount:function(){b("The MeSidebar React component is mounted.")},onNavigate:function(){this.props.setNextLayoutFocus("content"),window.scrollTo(0,0)},onSignOut:function(){var e=this.props.currentUser,t=e&&"en"===e.localeSlug,a=null;t&&!C.isEnabled("desktop")&&(a="/?apppromo"),R.logout(a),this.recordClickEvent("Sidebar Sign Out Link")},render:function(){var e,t=this.props.context,a=(e={"/me":"profile","/me/security/two-step":"security","/me/security/connected-applications":"security","/me/security/account-recovery":"security","/me/notifications/comments":"notifications","/me/notifications/updates":"notifications","/me/notifications/subscriptions":"notifications","/help/contact":"help"},(0,n.default)(e,m.default.purchasesRoot(),"purchases"),(0,n.default)(e,m.default.billingHistory(),"purchases"),(0,n.default)(e,m.default.addCreditCard(),"purchases"),(0,n.default)(e,"/me/chat","happychat"),e),i=t.path.replace(/\/\d+$/,""),o=void 0;return o=a[i]?a[i]:t.path.split("/").pop(),l.default.createElement(y,null,l.default.createElement(w,{user:this.props.currentUser}),l.default.createElement("div",{className:"me-sidebar__signout"},l.default.createElement(f.default,{compact:!0,className:"me-sidebar__signout-button",onClick:this.onSignOut,title:this.translate("Sign out of WordPress.com",{textOnly:!0})},this.translate("Sign Out"))),l.default.createElement(P,null,l.default.createElement(k,null,this.translate("Profile")),l.default.createElement("ul",null,l.default.createElement(S,{selected:"profile"===o,link:C.isEnabled("me/my-profile")?"/me":"//wordpress.com/me/public-profile",label:this.translate("My Profile"),icon:"user",onNavigate:this.onNavigate}),l.default.createElement(S,{selected:"account"===o,link:C.isEnabled("me/account")?"/me/account":"//wordpress.com/me/account",label:this.translate("Account Settings"),icon:"cog",onNavigate:this.onNavigate,preloadSectionName:"account"}),l.default.createElement(S,{selected:"purchases"===o,link:m.default.purchasesRoot(),label:this.translate("Manage Purchases"),icon:"credit-card",onNavigate:this.onNavigate,preloadSectionName:"purchases"}),l.default.createElement(S,{selected:"security"===o,link:"/me/security",label:this.translate("Security"),icon:"lock",onNavigate:this.onNavigate,preloadSectionName:"security"}),l.default.createElement(S,{selected:"notifications"===o,link:C.isEnabled("me/notifications")?"/me/notifications":"//wordpress.com/me/notifications",label:this.translate("Notification Settings"),icon:"bell",onNavigate:this.onNavigate,preloadSectionName:"notification-settings"}))),l.default.createElement(P,null,l.default.createElement(k,null,this.translate("Special")),l.default.createElement("ul",null,l.default.createElement(S,{selected:"get-apps"===o,link:"/me/get-apps",label:this.translate("Get Apps"),icon:"my-sites",onNavigate:this.onNavigate}),this.renderNextStepsItem(o))),l.default.createElement(_,null))},renderNextStepsItem:function(e){var t=this.props.currentUser;if(C.isEnabled("me/next-steps")&&t&&t.site_count>0)return l.default.createElement(S,{selected:"next"===e,link:"/me/next",label:this.translate("Next Steps"),icon:"list-checkmark",onNavigate:this.onNavigate})}});t.default=(0,c.connect)(o,{setNextLayoutFocus:g.setNextLayoutFocus})(A),e.exports=t.default},6213096133861195:function(e,t,a){"use strict";var i=a(5896763357248615),o=a(623310115397031);e.exports=i.createClass({displayName:"exports",recordEvent:function(){o.ga.recordEvent("Me > Next > Box",this.props.stepName),o.tracks.recordEvent("calypso_me_next_click",{module:this.props.stepName,is_welcome:this.props.isWelcome})},render:function(){var e="next-steps-box",t="next-steps-box__step-body",a="button";return this.props.primary&&(e+=" is-primary",t+=" is-primary",a+=" is-primary"),i.createElement("div",{className:e},i.createElement("div",{className:"next-steps-box__step-header"},i.createElement("h2",null,this.props.step.title)),i.createElement("div",{className:t},this.props.step.body,i.createElement("div",{className:"next-steps-box__step-action"},i.createElement("a",{className:a,href:this.props.step.buttonURL,onClick:this.recordEvent},this.props.step.buttonText))))}})},6796511058556234:function(e,t,a){"use strict";function i(e){return e?e.jetpack?e.options.admin_url+"customize.php":"/customize/"+e.slug:"/customize/"}var o=a(5896763357248615),r=a(7572476330282672),n=a(0x4c59f124aeac8),s=a(4883949902648912);e.exports={defaultSequence:["customize","theme","plans","post","page"],hasPlanSequence:["customize","theme","post","page","follow"],userOnly:["site","profile","follow"],definitions:function(e){return{post:{title:r.translate("Start Your First Post"),body:r.translate("{{p1}}Start blogging right away by writing your first post.{{/p1}}{{p2}}You can create new posts by clicking the {{pencil}}{{/pencil}} at the top of the screen.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null),pencil:o.createElement("span",{className:"noticon noticon-edit"})}}),buttonText:r.translate("Start a Post"),buttonURL:n.newPost(e)},theme:{title:r.translate("Select a Theme"),body:r.translate("{{p1}}The theme is the look and feel of your WordPress. A theme doesn't change your content, just the way it is presented.{{/p1}}{{p2}}Choose a theme based on your taste. You can always change it later.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Select a Theme"),buttonURL:"/themes/"+(e?e.slug:"")},customize:{title:r.translate("Customize Your Site"),body:r.translate("{{p1}}You can use the Customizer to add header and background images, or tweak your theme.  {{/p1}}{{p2}}You can find the Customizer in My Sites.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Customize Your Site"),buttonURL:i(e)},plans:{title:r.translate("Add Features with a Plan"),body:r.translate("{{p1}}Plans upgrade your WordPress with storage, design options, and a custom domain.{{/p1}}{{p2}}A plan will also remove ads and enable audio and video uploads.{{/p2}}",{comment:"p1 and p2 are paragraph tags",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Add a Plan"),buttonURL:"/plans/"+(e?e.slug:"")},page:{title:r.translate("Create a Page"),body:r.translate("{{p1}}Pages are sections of your site that contain information for your visitors.{{/p1}}{{p2}}Think about creating an About or Contact Us page to get started.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Create a Page"),buttonURL:n.newPage(e)},site:{title:r.translate("Create a Site"),body:r.translate("{{p1}}Start a new WordPress site or blog.{{/p1}}{{p2}}Your own WordPress is free and a great way to create a home on the web.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Create a Site"),buttonURL:s("signup_url")},profile:{title:r.translate("Complete Your Profile"),body:r.translate("{{p1}}Your profile is how other users see you.{{/p1}}{{p2}}Share a blurb about yourself to let others know what you're all about.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Complete Your Profile"),buttonURL:"/me"},follow:{title:r.translate("Follow Some Blogs"),body:r.translate("{{p1}}Follow some other sites to stay informed and find inspiration.{{/p1}}{{p2}}All of the content you follow shows up in your Reader.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:o.createElement("p",null),p2:o.createElement("p",null)}}),buttonText:r.translate("Follow Some Blogs"),buttonURL:"/recommendations/"}}}}},6841770882097499:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=a(0x94d4b19af1d06),r=i(o),n=a(4675954658966525)("calypso:me:form-base"),s=a(640686485904272);e.exports={componentDidMount:function(){this.props.userSettings.getSettings()},componentWillUnmount:function(){this.props.userSettings.unsavedSettings={}},getDisabledState:function(){return this.state.submittingForm},componentWillReceiveProps:function(e){e.showNoticeInitially&&this.setState({showNotice:e.showNoticeInitially})},componentWillUpdate:function(){this.showNotice()},getInitialState:function(){return{redirect:!1,submittingForm:!1,changingUsername:!1,usernameAction:"new",showNotice:!1}},showNotice:function(){this.props.userSettings.initialized&&this.state.showNotice&&(s.clearNotices("notices"),s.success(this.translate("Settings saved successfully!")),this.state.showNotice=!1)},valueLink:function(e){return{value:this.props.userSettings.getSetting(e),requestChange:function(t){this.props.userSettings.updateSetting(e,t)}.bind(this)}},submitForm:function(e){e.preventDefault(),n("Submitting form"),this.setState({submittingForm:!0}),this.props.userSettings.saveSettings(function(e,t){if(this.setState({submittingForm:!1}),e)n("Error saving settings: "+(0,r.default)(e)),e.message?s.error(e.message):s.error(this.translate("There was a problem saving your changes."));else{if(this.props.markSaved&&this.props.markSaved(),this.state&&this.state.redirect)return void(window.location=this.state.redirect+"?updated=success");this.setState({showNotice:!0}),this.showNotice(),n("Settings saved successfully "+(0,r.default)(t))}}.bind(this))}}},6940362979991673:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=a(5630966280090368),r=i(o),n=a(5896763357248615),s=a(0x8ae3881d6e8c2),l=a(5059747709250767);e.exports=n.createClass({displayName:"FormTextarea",render:function(){return n.createElement("textarea",(0,r.default)({},l(this.props,"className"),{className:s(this.props.className,"form-textarea")}),this.props.children)}})},6975706324265958:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(4675954658966525),s=i(n),l=a(0xd5268b164e47c),d=i(l),u=a(0x68ccbe1ec01b),c=i(u),p=a(8509533185673831),f=i(p),h=(0,s.default)("calypso:me:sidebar-gravatar");t.default=r.default.createClass({displayName:"ProfileGravatar",mixins:[f.default],componentDidMount:function(){h("The ProfileGravatar component is mounted.")},render:function(){var e="//gravatar.com/"+this.props.user.username;return r.default.createElement("div",{className:"profile-gravatar"},r.default.createElement(d.default,{type:"appear"},r.default.createElement("a",{href:"https://secure.gravatar.com/site/wpcom?wpcc-no-close",target:"_blank",rel:"noopener noreferrer",className:"profile-gravatar__edit",onClick:this.recordClickEvent("Gravatar Update Profile Photo in Sidebar")},r.default.createElement(c.default,{user:this.props.user,size:150,imgSize:400}),r.default.createElement("span",{className:"profile-gravatar__edit-label-wrap"},r.default.createElement("span",{className:"profile-gravatar__edit-label"},this.translate("Update Profile Photo"))))),r.default.createElement("h2",{className:"profile-gravatar__user-display-name"},this.props.user.display_name),r.default.createElement("div",{className:"profile-gravatar__user-secondary-info"},r.default.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},"@",this.props.user.username)))}}),e.exports=t.default},7273294345778170:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALLOWED_FILE_EXTENSIONS=["jpg","jpeg","png","gif","bmp"]},7330683811373103:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5630966280090368),r=i(o),n=a(5477852257145688),s=i(n),l=a(0xf0f4288728240),d=i(l),u=a(0x45d24eaab7654),c=i(u),p=a(5896763357248615),f=i(p),h=a(6280957995252369),m=a(78648220391165),g=a(0x8c0d10a3fcef3),v=i(g),E=a(7572476330282672),b=a(0x8ae3881d6e8c2),y=i(b),_=a(5708247199348607),k=i(_),S=a(0x5326596c1965c),P=i(S),C=a(0xa0300e218a145),w=i(C),x=a(5567973762736909),R=i(x),A=a(7380496197234269),T=i(A),L=a(0xebf150a8452ca),I=i(L),N=a(8693344302354816),M=a(7629348406412959),D=a(0xe6bd8709d6a3c),F=a(0x8f1527a7f80c8),O=a(0xbd8ce093a3eb6),B=i(O),z=a(8277184115649475),U=a(347097780136713),W=f.default.createClass({displayName:"ImageEditor",mixins:[(0,I.default)("onCancel")],propTypes:{media:p.PropTypes.object,siteId:p.PropTypes.number,onDone:p.PropTypes.func,onCancel:p.PropTypes.func,onReset:p.PropTypes.func,className:p.PropTypes.string,defaultAspectRatio:p.PropTypes.oneOf(z.AspectRatiosValues),allowedAspectRatios:p.PropTypes.arrayOf(p.PropTypes.oneOf(z.AspectRatiosValues)),site:p.PropTypes.object,fileName:p.PropTypes.string,setImageEditorFileInfo:p.PropTypes.func,setImageEditorDefaultAspectRatio:p.PropTypes.func,translate:p.PropTypes.func,isImageLoaded:p.PropTypes.bool},getDefaultProps:function(){return{media:null,onDone:c.default,onCancel:null,onReset:c.default,isImageLoaded:!1,defaultAspectRatio:z.AspectRatios.FREE,allowedAspectRatios:z.AspectRatiosValues,setImageEditorDefaultAspectRatio:c.default}},getInitialState:function(){return{canvasError:null}},componentWillReceiveProps:function(e){var t=this.props.media;e.media&&!(0,d.default)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())},componentDidMount:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()},setDefaultAspectRatio:function(){var e=this.props,t=e.defaultAspectRatio,a=e.allowedAspectRatios;this.props.setImageEditorDefaultAspectRatio((0,U.getDefaultAspectRatio)(t,a))},updateFileInfo:function(e){var t=this.props.site,a=void 0,i="default",o="image/png",r="default";e&&(a=e.src||T.default.url(e,{photon:t&&!t.is_private}),i=e.file||v.default.basename(a),o=T.default.getMimeType(e)||o,r=e.title||r),this.props.resetImageEditorState(),this.props.setImageEditorFileInfo(a,i,o,r)},onDone:function e(){var t=this,a=this.props,i=a.isImageLoaded,e=a.onDone;if(!i)return void e(new Error("Image not loaded yet."),null,this.getImageEditorProps());var o=this.refs.editCanvas.getWrappedInstance();o.toBlob(function(a){e(null,a,t.getImageEditorProps())})},onCancel:function(){this.props.onCancel(this.getImageEditorProps())},onReset:function(){this.props.resetImageEditorState(),this.props.onReset(this.getImageEditorProps())},getImageEditorProps:function(){var e=this.props,t=e.src,a=e.fileName,i=e.media,o=e.mimeType,r=e.title,n=e.site,s={src:t,fileName:a,mimeType:o,title:r,site:n,resetAllImageEditorState:this.props.resetAllImageEditorState};return i&&i.ID&&(s.ID=i.ID),s},onLoadCanvasError:function(){var e=this.props.translate;this.setState({canvasError:e("We are unable to edit this image.")})},renderError:function(){return f.default.createElement(k.default,{status:"is-error",showDismiss:!0,text:this.state.canvasError,isCompact:!1,onDismissClick:this.props.onImageEditorCancel})},render:function(){var e=this.props,t=e.className,a=e.siteId,i=e.allowedAspectRatios,o=(0,y.default)("image-editor",t);return f.default.createElement("div",{className:o},this.state.canvasError&&this.renderError(),f.default.createElement(B.default,{siteId:a}),f.default.createElement("figure",null,f.default.createElement("div",{className:"image-editor__content"},f.default.createElement(P.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),f.default.createElement(w.default,{allowedAspectRatios:i}),f.default.createElement(R.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset}))))}});t.default=(0,h.connect)(function(e,t){var a=t.siteId;return a||(a=(0,D.getSelectedSiteId)(e)),(0,r.default)({},(0,M.getImageEditorFileInfo)(e),{site:(0,F.getSite)(e,a),isImageLoaded:(0,M.isImageEditorImageLoaded)(e)})},function(e,t){var a=(0,U.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),i={aspectRatio:a};return(0,m.bindActionCreators)({setImageEditorFileInfo:N.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:N.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,s.default)(N.resetImageEditorState,i),resetAllImageEditorState:(0,s.default)(N.resetAllImageEditorState,i)},e)})((0,E.localize)(W)),e.exports=t.default},7530085839206744:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditGravatar=void 0;var o=a(0xccd53b671ebb6),r=i(o),n=a(5143893728007863),s=i(n),l=a(5880884711457125),d=i(l),u=a(8173823076638946),c=i(u),p=a(5369032381290393),f=i(p),h=a(5896763357248615),m=i(h),g=a(0x8ae3881d6e8c2),v=i(g),E=a(6280957995252369),b=a(4675954658966525),y=i(b),_=a(7572476330282672),k=a(0x8c0d10a3fcef3),S=i(k),P=a(0xa505046780b0c),C=i(P),w=a(7273294345778170),x=a(8277184115649475),R=a(7127988529575974),A=i(R),T=a(0xb2b0d3e86acc2),L=i(T),I=a(0x956a8e02ae2a5),N=a(0xa8b42f2a9e1cb),M=a(0x68ccbe1ec01b),D=i(M),F=a(8922732695172543),O=a(8693344302354816),B=a(8729102622276094),z=i(B),U=a(0xf291f0e3c50ab),W=a(7330683811373103),H=i(W),q=(0,y.default)("calypso:edit-gravatar"),G=t.EditGravatar=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments));return e.onReceiveFile=function(t){var a=e.props,i=a.receiveGravatarImageFailed,o=a.translate,r=S.default.extname(t[0].name).toLowerCase().substring(1);if(w.ALLOWED_FILE_EXTENSIONS.indexOf(r)===-1){var n="";return n=r?o("An image of filetype %s is not allowed",{args:r}):o("An image of that filetype is not allowed"),void i(n)}var s=URL.createObjectURL(t[0]);e.setState({isEditingImage:!0,image:s})},e.onImageEditorDone=function(t,a){var i=e.props,o=i.receiveGravatarImageFailed,r=i.translate,n=i.uploadGravatar,s=i.user;if(e.hideImageEditor(),t)return void o(r("We couldn't save that image, please try another one"));var l=(0,N.getToken)();l||(l=localStorage.getItem("bearerToken")),l?(q("Got the bearerToken, sending request"),n(a,l,s.email)):o(r("We can't save a new Gravatar now. Please try again later."))},e.hideImageEditor=function(){var t=e.props.resetAllImageEditorState;t(),URL.revokeObjectURL(e.state.image),e.setState({isEditingImage:!1,image:!1})},e.state={isEditingImage:!1,image:!1},e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderImageEditor",value:function(){if(this.state.isEditingImage)return m.default.createElement(A.default,{additionalClassNames:"edit-gravatar-modal",isVisible:!0},m.default.createElement(H.default,{allowedAspectRatios:[x.AspectRatios.ASPECT_1X1],media:{src:this.state.image},onDone:this.onImageEditorDone,onCancel:this.hideImageEditor}))}},{key:"render",value:function(){var e=this.props,t=e.isUploading,a=e.user;return m.default.createElement("div",{className:"edit-gravatar"},this.renderImageEditor(),m.default.createElement(L.default,{accept:"image/*",onPick:this.onReceiveFile},m.default.createElement("div",{className:(0,v.default)("edit-gravatar__image-container",{"is-uploading":t})},m.default.createElement(D.default,{imgSize:400,size:150,user:a}),!t&&m.default.createElement("div",{className:"edit-gravatar__label-container"},m.default.createElement(C.default,{icon:"cloud-upload",size:36}),m.default.createElement("span",{className:"edit-gravatar__label"},this.props.translate("Click to change photo"))),t&&m.default.createElement(z.default,{className:"edit-gravatar__spinner"}))))}}]),t}(h.Component);G.propTypes={isUploading:h.PropTypes.bool,translate:h.PropTypes.func,receiveGravatarImageFailed:h.PropTypes.func,resetAllImageEditorState:h.PropTypes.func,uploadGravatar:h.PropTypes.func,user:h.PropTypes.object},t.default=(0,E.connect)(function(e){return{user:(0,I.getCurrentUser)(e),isUploading:(0,F.isCurrentUserUploadingGravatar)(e)}},{resetAllImageEditorState:O.resetAllImageEditorState,receiveGravatarImageFailed:U.receiveGravatarImageFailed,uploadGravatar:U.uploadGravatar})((0,_.localize)(G))},7629348406412959:function(e,t){"use strict";function a(e){return e.ui.editor.imageEditor.transform}function i(e){return e.ui.editor.imageEditor.fileInfo}function o(e){return e.ui.editor.imageEditor.hasChanges}function r(e){return!e.ui.editor.imageEditor.imageIsLoading}function n(e){return e.ui.editor.imageEditor.cropBounds}function s(e){return e.ui.editor.imageEditor.crop}function l(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=a,t.getImageEditorFileInfo=i,t.imageEditorHasChanges=o,t.isImageEditorImageLoaded=r,t.getImageEditorCropBounds=n,t.getImageEditorCrop=s,t.getImageEditorAspectRatio=l},7928232882093892:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5896763357248615),r=i(o),n=a(0xcb6d8694ee386),s=i(n),l=a(4675954658966525),d=i(l),u=a(5830929554887919),c=i(u),p=a(0xfc9bb7928e56),f=a(6841770882097499),h=i(f),m=a(0x7470881db6733),g=i(m),v=a(0x4505d8ebb162c),E=i(v),b=a(0x965a288d34003),y=i(b),_=a(5862851293117563),k=i(_),S=a(6940362979991673),P=i(S),C=a(7530085839206744),w=i(C),x=a(0xa5d40033e4e2d),R=i(x),A=a(8281875498084326),T=i(A),L=a(0x4f86db294ceb8),I=i(L),N=a(0x9cde9aee31d1f),M=i(N),D=a(6881822108913591),F=i(D),O=a(70219791644428),B=i(O),z=a(8509533185673831),U=i(z),W=a(0x6ee56fc1c50a2),H=i(W),q=a(4883949902648912),G=a(0x9244927499a4b),j=i(G),V=(0,d.default)("calypso:me:profile");t.default=(0,p.protectForm)(r.default.createClass({displayName:"Profile",mixins:[h.default,s.default,(0,B.default)("userSettings"),U.default],componentDidMount:function(){V(this.displayName+" component is mounted.")},componentWillUnmount:function(){V(this.displayName+" component is unmounting.")},render:function(){var e="https://gravatar.com/"+this.props.userSettings.getSetting("user_login");return r.default.createElement(H.default,{className:"profile"},r.default.createElement(c.default,null),r.default.createElement(I.default,{twoStepAuthorization:M.default}),r.default.createElement(j.default,{label:this.translate("Profile")}),r.default.createElement(F.default,{className:"me-profile-settings"},(0,q.isEnabled)("me/edit-gravatar")&&r.default.createElement(w.default,null),r.default.createElement("form",{onSubmit:this.submitForm,onChange:this.props.markChanged},r.default.createElement(E.default,null,r.default.createElement(y.default,{htmlFor:"first_name"},this.translate("First Name")),r.default.createElement(k.default,{disabled:this.getDisabledState(),id:"first_name",name:"first_name",onFocus:this.recordFocusEvent("First Name Field"),valueLink:this.valueLink("first_name")})),r.default.createElement(E.default,null,r.default.createElement(y.default,{htmlFor:"last_name"},this.translate("Last Name")),r.default.createElement(k.default,{disabled:this.getDisabledState(),id:"last_name",name:"last_name",onFocus:this.recordFocusEvent("Last Name Field"),valueLink:this.valueLink("last_name")})),r.default.createElement(E.default,null,r.default.createElement(y.default,{htmlFor:"display_name"},this.translate("Public Display Name")),r.default.createElement(k.default,{disabled:this.getDisabledState(),id:"display_name",name:"display_name",onFocus:this.recordFocusEvent("Display Name Field"),valueLink:this.valueLink("display_name")})),r.default.createElement(E.default,null,r.default.createElement(y.default,{htmlFor:"description"},this.translate("About Me")),r.default.createElement(P.default,{disabled:this.getDisabledState(),id:"description",name:"description",onFocus:this.recordFocusEvent("About Me Field"),valueLink:this.valueLink("description")})),r.default.createElement("p",null,r.default.createElement(g.default,{disabled:!this.props.userSettings.hasUnsavedSettings()||this.getDisabledState(),onClick:this.recordClickEvent("Save Profile Details Button")},this.state.submittingForm?this.translate("Saving"):this.translate("Save Profile Details")))),r.default.createElement("p",{className:"me-profile-settings__info-text"},this.translate("This information will be displayed publicly on {{profilelink}}your profile{{/profilelink}} and in {{hovercardslink}}Gravatar Hovercards{{/hovercardslink}}.",{components:{profilelink:r.default.createElement("a",{onClick:this.recordClickEvent("My Profile Link"),href:e,target:"_blank",rel:"noopener noreferrer"}),hovercardslink:r.default.createElement("a",{onClick:this.recordClickEvent("Gravatar Hovercards Link"),href:"https://support.wordpress.com/gravatar-hovercards/",target:"_blank",rel:"noopener noreferrer"})}}))),r.default.createElement(R.default,{userProfileLinks:T.default}))}})),e.exports=t.default},7935112474300560:function(e,t,a){function i(e,t,a){var i=e?e.length:0;if(!i)return-1;var s=null==a?0:r(a);return s<0&&(s=n(i+s,0)),o(e,t,s)}var o=a(31241621236410),r=a(0x6c14ebe59c6ec),n=Math.max;e.exports=i},8281875498084326:function(e,t,a){"use strict";function i(){return this instanceof i?(this.profileLinks=!1,this.initialized=!1,this.reAuthRequired=!1,void(this.fetchingProfileLinks=!1)):new i}var o=a(4675954658966525)("calypso:user:profile-links"),r=a(0xe102ee62a0e6b),n=a(6442230718320275),s=a(8478035041892969),l=a(0xf2ce944f0fc89);l(i.prototype),i.prototype.hasProfileLinks=function(){return!!this.profileLinks},i.prototype.isSiteInProfileLinks=function(e){return!!this.initialized&&n(this.profileLinks,function(t){return e.domain===t.value.replace(/^.*:\/\//,"")})},i.prototype.getProfileLinks=function(){return this.profileLinks||this.fetchProfileLinks(),this.profileLinks},i.prototype.fetchProfileLinks=function(){this.fetchingProfileLinks||this.reAuthRequired||(this.fetchingProfileLinks=!0,o("Fetching profile links for user"),s.me().settings().profileLinks().get(function(e,t){return this.fetchingProfileLinks=!1,e?(o("Something went wrong fetching the profile links for the user."),"error"in e&&"reauthorization_required"===e.error&&(this.reAuthRequired=!0),void this.emit("change")):(this.profileLinks=t.profile_links,this.initialized=!0,this.emit("change"),void o("Profile links successfully retrieved"))}.bind(this)))},i.prototype.addProfileLinks=function(e,t){s.me().settings().profileLinks().add(e,function(e,a){a&&a.profile_links&&(this.profileLinks=a.profile_links,this.emit("change")),t(e,a)}.bind(this))},i.prototype.deleteProfileLinkBySlug=function(e,t){s.me().settings().profileLinks().del(e,function(a,i){a||(this.profileLinks=r(this.profileLinks,{link_slug:e}),this.emit("change")),t(a,i)}.bind(this))},e.exports=new i},8693344302354816:function(e,t,a){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:h.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:h.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function r(){return{type:h.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function n(){return{type:h.IMAGE_EDITOR_FLIP}}function s(e){return{type:h.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:h.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function d(e,t,a,i){return{type:h.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:a,title:i}}function u(e,t,a,i){return{type:h.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:a,rightBound:i}}function c(e,t,a,i){return{type:h.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:a,heightRatio:i}}function p(e,t,a,i){return{type:h.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:a,heightRatio:i}}function f(e,t){return{type:h.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=i,t.resetAllImageEditorState=o,t.imageEditorRotateCounterclockwise=r,t.imageEditorFlip=n,t.setImageEditorAspectRatio=s,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=d,t.setImageEditorCropBounds=u,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=f;var h=a(0xd047e5c4c63f8)},8735826191793942:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5630966280090368),r=i(o),n=a(477028190620861),s=i(n),l=a(0xccd53b671ebb6),d=i(l),u=a(5143893728007863),c=i(u),p=a(5880884711457125),f=i(p),h=a(8173823076638946),m=i(h),g=a(5369032381290393),v=i(g),E=a(5896763357248615),b=i(E),y=a(0x45d24eaab7654),_=i(y),k=a(5059747709250767),S=i(k),P=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={x:a.props.x,y:a.props.y},a.onTouchStartHandler=a.onTouchStartHandler.bind(a),a.onMouseDownHandler=a.onMouseDownHandler.bind(a),a.draggingHandler=a.draggingHandler.bind(a),a.draggingEndedHandler=a.draggingEndedHandler.bind(a),a.update=a.update.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var a=t.pageX-this.relativePos.x,i=t.pageY-this.relativePos.y;this.mousePos={x:a,y:i}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,a=t.x,i=t.y;e&&(a=Math.max(e.left,Math.min(e.right-this.props.width,a)),i=Math.max(e.top,Math.min(e.bottom-this.props.height,i))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),
this.props.onDrag(a,i),this.props.controlled||this.setState({x:a,y:i})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,S.default)(this.props,(0,s.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),b.default.createElement("div",(0,r.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(E.Component);P.propTypes={onDrag:E.PropTypes.func,onStop:E.PropTypes.func,width:E.PropTypes.number,height:E.PropTypes.number,x:E.PropTypes.number,y:E.PropTypes.number,controlled:E.PropTypes.bool,bounds:E.PropTypes.shape({top:E.PropTypes.number,left:E.PropTypes.number,bottom:E.PropTypes.number,right:E.PropTypes.number})},P.defaultProps={onDrag:_.default,onStop:_.default,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=P,e.exports=t.default}});